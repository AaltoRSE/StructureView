var Xs=Object.defineProperty;var Js=(e,t,r)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ii=(e,t,r)=>(Js(e,typeof t!="symbol"?t+"":t,r),r);function _mergeNamespaces(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in e)){const n=Object.getOwnPropertyDescriptor(s,o);n&&Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();function makeMap(e,t){const r=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)r[s[o]]=!0;return t?o=>!!r[o.toLowerCase()]:o=>!!r[o]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$1=Object.assign,remove$2=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},def=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t},toNumber=e=>{const t=isString(e)?Number(e):NaN;return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray(e)){const t={};for(let r=0;r<e.length;r++){const s=e[r],o=isString(s)?parseStringStyle(s):normalizeStyle(s);if(o)for(const n in o)t[n]=o[n]}return t}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const s=r.split(propertyDelimiterRE);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray(e))for(let r=0;r<e.length;r++){const s=normalizeClass(e[r]);s&&(t+=s+" ")}else if(isObject(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function normalizeProps(e){if(!e)return null;let{class:t,style:r}=e;return t&&!isString(t)&&(e.class=normalizeClass(t)),r&&(e.style=normalizeStyle(r)),e}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const toDisplayString=e=>isString(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[s,o])=>(r[`${s} =>`]=o,r),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject(t)&&!isArray(t)&&!isPlainObject$1(t)?String(t):t;let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let r=0;for(let s=0;s<t.length;s++){const o=t[s];wasTracked(o)&&!newTracked(o)?o.delete(e):t[r++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}t.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,r=null,s){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let t=activeEffect,r=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,r){if(shouldTrack&&activeEffect){let s=targetMap.get(e);s||targetMap.set(e,s=new Map);let o=s.get(r);o||s.set(r,o=createDep()),trackEffects(o)}}function trackEffects(e,t){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,r,s,o,n){const f=targetMap.get(e);if(!f)return;let c=[];if(t==="clear")c=[...f.values()];else if(r==="length"&&isArray(e)){const y=Number(s);f.forEach((_,b)=>{(b==="length"||b>=y)&&c.push(_)})}else switch(r!==void 0&&c.push(f.get(r)),t){case"add":isArray(e)?isIntegerKey(r)&&c.push(f.get("length")):(c.push(f.get(ITERATE_KEY)),isMap(e)&&c.push(f.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(e)||(c.push(f.get(ITERATE_KEY)),isMap(e)&&c.push(f.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&c.push(f.get(ITERATE_KEY));break}if(c.length===1)c[0]&&triggerEffects(c[0]);else{const y=[];for(const _ of c)_&&y.push(..._);triggerEffects(createDep(y))}}function triggerEffects(e,t){const r=isArray(e)?e:[...e];for(const s of r)s.computed&&triggerEffect(s);for(const s of r)s.computed||triggerEffect(s)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function getDepFromReactive(e,t){var r;return(r=targetMap.get(e))==null?void 0:r.get(t)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const s=toRaw(this);for(let n=0,f=this.length;n<f;n++)track(s,"get",n+"");const o=s[t](...r);return o===-1||o===!1?s[t](...r.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){pauseTracking();const s=toRaw(this)[t].apply(this,r);return resetTracking(),s}}),e}function hasOwnProperty(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}function createGetter(e=!1,t=!1){return function(s,o,n){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&n===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(s))return s;const f=isArray(s);if(!e){if(f&&hasOwn(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,n);if(o==="hasOwnProperty")return hasOwnProperty}const c=Reflect.get(s,o,n);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(e||track(s,"get",o),t)?c:isRef(c)?f&&isIntegerKey(o)?c:c.value:isObject(c)?e?readonly(c):reactive(c):c}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,s,o,n){let f=r[s];if(isReadonly(f)&&isRef(f)&&!isRef(o))return!1;if(!e&&(!isShallow(o)&&!isReadonly(o)&&(f=toRaw(f),o=toRaw(o)),!isArray(r)&&isRef(f)&&!isRef(o)))return f.value=o,!0;const c=isArray(r)&&isIntegerKey(s)?Number(s)<r.length:hasOwn(r,s),y=Reflect.set(r,s,o,n);return r===toRaw(n)&&(c?hasChanged(o,f)&&trigger(r,"set",s,o):trigger(r,"add",s,o)),y}}function deleteProperty(e,t){const r=hasOwn(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&trigger(e,"delete",t,void 0),s}function has$1(e,t){const r=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),r}function ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$2(e,t,r=!1,s=!1){e=e.__v_raw;const o=toRaw(e),n=toRaw(t);r||(t!==n&&track(o,"get",t),track(o,"get",n));const{has:f}=getProto(o),c=s?toShallow:r?toReadonly:toReactive;if(f.call(o,t))return c(e.get(t));if(f.call(o,n))return c(e.get(n));e!==o&&e.get(t)}function has(e,t=!1){const r=this.__v_raw,s=toRaw(r),o=toRaw(e);return t||(e!==o&&track(s,"has",e),track(s,"has",o)),e===o?r.has(e):r.has(e)||r.has(o)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$2(e,t){t=toRaw(t);const r=toRaw(this),{has:s,get:o}=getProto(r);let n=s.call(r,e);n||(e=toRaw(e),n=s.call(r,e));const f=o.call(r,e);return r.set(e,t),n?hasChanged(t,f)&&trigger(r,"set",e,t):trigger(r,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:r,get:s}=getProto(t);let o=r.call(t,e);o||(e=toRaw(e),o=r.call(t,e)),s&&s.call(t,e);const n=t.delete(e);return o&&trigger(t,"delete",e,void 0),n}function clear(){const e=toRaw(this),t=e.size!==0,r=e.clear();return t&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,t){return function(s,o){const n=this,f=n.__v_raw,c=toRaw(f),y=t?toShallow:e?toReadonly:toReactive;return!e&&track(c,"iterate",ITERATE_KEY),f.forEach((_,b)=>s.call(o,y(_),y(b),n))}}function createIterableMethod(e,t,r){return function(...s){const o=this.__v_raw,n=toRaw(o),f=isMap(n),c=e==="entries"||e===Symbol.iterator&&f,y=e==="keys"&&f,_=o[e](...s),b=r?toShallow:t?toReadonly:toReactive;return!t&&track(n,"iterate",y?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:C,done:M}=_.next();return M?{value:C,done:M}:{value:c?[b(C[0]),b(C[1])]:b(C),done:M}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(n){return get$2(this,n)},get size(){return size(this)},has,add,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(n){return get$2(this,n,!1,!0)},get size(){return size(this)},has,add,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(n){return get$2(this,n,!0)},get size(){return size(this,!0)},has(n){return has.call(this,n,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},s={get(n){return get$2(this,n,!0,!0)},get size(){return size(this,!0)},has(n){return has.call(this,n,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=createIterableMethod(n,!1,!1),r[n]=createIterableMethod(n,!0,!1),t[n]=createIterableMethod(n,!1,!0),s[n]=createIterableMethod(n,!0,!0)}),[e,r,t,s]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const r=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(s,o,n)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(hasOwn(r,o)&&o in s?r:s,o,n)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,r,s,o){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=o.get(e);if(n)return n;const f=getTargetType(e);if(f===0)return e;const c=new Proxy(e,f===2?s:r);return o.set(e,c),c}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e);const r=e.dep;r&&triggerEffects(r)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:toRaw(t),this._value=r?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,r)=>unref(Reflect.get(e,t,r)),set:(e,t,r,s)=>{const o=e[t];return isRef(o)&&!isRef(r)?(o.value=r,!0):Reflect.set(e,t,r,s)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const t=isArray(e)?new Array(e.length):{};for(const r in e)t[r]=propertyToRef(e,r);return t}class ObjectRefImpl{constructor(t,r,s){this._object=t,this._key=r,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(e,t,r){return isRef(e)?e:isFunction(e)?new GetterRefImpl(e):isObject(e)&&arguments.length>1?propertyToRef(e,t,r):ref(e)}function propertyToRef(e,t,r){const s=e[t];return isRef(s)?s:new ObjectRefImpl(e,t,r)}class ComputedRefImpl{constructor(t,r,s,o){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,r=!1){let s,o;const n=isFunction(e);return n?(s=e,o=NOOP):(s=e.get,o=e.set),new ComputedRefImpl(s,o,n||!o,r)}function warn(e,...t){}function callWithErrorHandling(e,t,r,s){let o;try{o=s?e(...s):e()}catch(n){handleError(n,t,r)}return o}function callWithAsyncErrorHandling(e,t,r,s){if(isFunction(e)){const n=callWithErrorHandling(e,t,r,s);return n&&isPromise(n)&&n.catch(f=>{handleError(f,t,r)}),n}const o=[];for(let n=0;n<e.length;n++)o.push(callWithAsyncErrorHandling(e[n],t,r,s));return o}function handleError(e,t,r,s=!0){const o=t?t.vnode:null;if(t){let n=t.parent;const f=t.proxy,c=r;for(;n;){const _=n.ec;if(_){for(let b=0;b<_.length;b++)if(_[b](e,f,c)===!1)return}n=n.parent}const y=t.appContext.config.errorHandler;if(y){callWithErrorHandling(y,null,10,[e,f,c]);return}}logError(e,r,o,s)}function logError(e,t,r,s=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,r=queue.length;for(;t<r;){const s=t+r>>>1;getId(queue[s])<e?t=s+1:r=s}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const r=queue[t];r&&r.pre&&(queue.splice(t,1),t--,r())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((r,s)=>getId(r)-getId(s)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const r=getId(e)-getId(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...r){if(e.isUnmounted)return;const s=e.vnode.props||EMPTY_OBJ;let o=r;const n=t.startsWith("update:"),f=n&&t.slice(7);if(f&&f in s){const b=`${f==="modelValue"?"model":f}Modifiers`,{number:C,trim:M}=s[b]||EMPTY_OBJ;M&&(o=r.map(E=>isString(E)?E.trim():E)),C&&(o=r.map(looseToNumber))}let c,y=s[c=toHandlerKey(t)]||s[c=toHandlerKey(camelize(t))];!y&&n&&(y=s[c=toHandlerKey(hyphenate(t))]),y&&callWithAsyncErrorHandling(y,e,6,o);const _=s[c+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,callWithAsyncErrorHandling(_,e,6,o)}}function normalizeEmitsOptions(e,t,r=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const n=e.emits;let f={},c=!1;if(!isFunction(e)){const y=_=>{const b=normalizeEmitsOptions(_,t,!0);b&&(c=!0,extend$1(f,b))};!r&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}return!n&&!c?(isObject(e)&&s.set(e,null),null):(isArray(n)?n.forEach(y=>f[y]=null):extend$1(f,n),isObject(e)&&s.set(e,f),f)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,r){if(!t||e._n)return e;const s=(...o)=>{s._d&&setBlockTracking(-1);const n=setCurrentRenderingInstance(t);let f;try{f=e(...o)}finally{setCurrentRenderingInstance(n),s._d&&setBlockTracking(1)}return f};return s._n=!0,s._c=!0,s._d=!0,s}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:r,proxy:s,withProxy:o,props:n,propsOptions:[f],slots:c,attrs:y,emit:_,render:b,renderCache:C,data:M,setupState:E,ctx:P,inheritAttrs:a}=e;let u,g;const A=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const l=o||s;u=normalizeVNode(b.call(l,l,C,n,E,M,P)),g=y}else{const l=t;u=normalizeVNode(l.length>1?l(n,{attrs:y,slots:c,emit:_}):l(n,null)),g=t.props?y:getFunctionalFallthrough(y)}}catch(l){blockStack.length=0,handleError(l,e,1),u=createVNode(Comment)}let x=u;if(g&&a!==!1){const l=Object.keys(g),{shapeFlag:v}=x;l.length&&v&7&&(f&&l.some(isModelListener)&&(g=filterModelListeners(g,f)),x=cloneVNode(x,g))}return r.dirs&&(x=cloneVNode(x),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&(x.transition=r.transition),u=x,setCurrentRenderingInstance(A),u}const getFunctionalFallthrough=e=>{let t;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((t||(t={}))[r]=e[r]);return t},filterModelListeners=(e,t)=>{const r={};for(const s in e)(!isModelListener(s)||!(s.slice(9)in t))&&(r[s]=e[s]);return r};function shouldUpdateComponent(e,t,r){const{props:s,children:o,component:n}=e,{props:f,children:c,patchFlag:y}=t,_=n.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&y>=0){if(y&1024)return!0;if(y&16)return s?hasPropsChanged(s,f,_):!!f;if(y&8){const b=t.dynamicProps;for(let C=0;C<b.length;C++){const M=b[C];if(f[M]!==s[M]&&!isEmitListener(_,M))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:s===f?!1:s?f?hasPropsChanged(s,f,_):!0:!!f;return!1}function hasPropsChanged(e,t,r){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const n=s[o];if(t[n]!==e[n]&&!isEmitListener(r,n))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const INITIAL_WATCHER_VALUE={};function watch(e,t,r){return doWatch(e,t,r)}function doWatch(e,t,{immediate:r,deep:s,flush:o,onTrack:n,onTrigger:f}=EMPTY_OBJ){var c;const y=getCurrentScope()===((c=currentInstance)==null?void 0:c.scope)?currentInstance:null;let _,b=!1,C=!1;if(isRef(e)?(_=()=>e.value,b=isShallow(e)):isReactive(e)?(_=()=>e,s=!0):isArray(e)?(C=!0,b=e.some(l=>isReactive(l)||isShallow(l)),_=()=>e.map(l=>{if(isRef(l))return l.value;if(isReactive(l))return traverse(l);if(isFunction(l))return callWithErrorHandling(l,y,2)})):isFunction(e)?t?_=()=>callWithErrorHandling(e,y,2):_=()=>{if(!(y&&y.isUnmounted))return M&&M(),callWithAsyncErrorHandling(e,y,3,[E])}:_=NOOP,t&&s){const l=_;_=()=>traverse(l())}let M,E=l=>{M=A.onStop=()=>{callWithErrorHandling(l,y,4)}},P;if(isInSSRComponentSetup)if(E=NOOP,t?r&&callWithAsyncErrorHandling(t,y,3,[_(),C?[]:void 0,E]):_(),o==="sync"){const l=useSSRContext();P=l.__watcherHandles||(l.__watcherHandles=[])}else return NOOP;let a=C?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const u=()=>{if(A.active)if(t){const l=A.run();(s||b||(C?l.some((v,w)=>hasChanged(v,a[w])):hasChanged(l,a)))&&(M&&M(),callWithAsyncErrorHandling(t,y,3,[l,a===INITIAL_WATCHER_VALUE?void 0:C&&a[0]===INITIAL_WATCHER_VALUE?[]:a,E]),a=l)}else A.run()};u.allowRecurse=!!t;let g;o==="sync"?g=u:o==="post"?g=()=>queuePostRenderEffect(u,y&&y.suspense):(u.pre=!0,y&&(u.id=y.uid),g=()=>queueJob(u));const A=new ReactiveEffect(_,g);t?r?u():a=A.run():o==="post"?queuePostRenderEffect(A.run.bind(A),y&&y.suspense):A.run();const x=()=>{A.stop(),y&&y.scope&&remove$2(y.scope.effects,A)};return P&&P.push(x),x}function instanceWatch(e,t,r){const s=this.proxy,o=isString(e)?e.includes(".")?createPathGetter(s,e):()=>s[e]:e.bind(s,s);let n;isFunction(t)?n=t:(n=t.handler,r=t);const f=currentInstance;setCurrentInstance(this);const c=doWatch(o,n.bind(s),r);return f?setCurrentInstance(f):unsetCurrentInstance(),c}function createPathGetter(e,t){const r=t.split(".");return()=>{let s=e;for(let o=0;o<r.length&&s;o++)s=s[r[o]];return s}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray(e))for(let r=0;r<e.length;r++)traverse(e[r],t);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t)});else if(isPlainObject$1(e))for(const r in e)traverse(e[r],t);return e}function withDirectives(e,t){const r=currentRenderingInstance;if(r===null)return e;const s=getExposeProxy(r)||r.proxy,o=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[f,c,y,_=EMPTY_OBJ]=t[n];f&&(isFunction(f)&&(f={mounted:f,updated:f}),f.deep&&traverse(c),o.push({dir:f,instance:s,value:c,oldValue:void 0,arg:y,modifiers:_}))}return e}function invokeDirectiveHook(e,t,r,s){const o=e.dirs,n=t&&t.dirs;for(let f=0;f<o.length;f++){const c=o[f];n&&(c.oldValue=n[f].value);let y=c.dir[s];y&&(pauseTracking(),callWithAsyncErrorHandling(y,r,8,[e.el,c,e,t]),resetTracking())}}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:t}){const r=getCurrentInstance(),s=useTransitionState();let o;return()=>{const n=t.default&&getTransitionRawChildren(t.default(),!0);if(!n||!n.length)return;let f=n[0];if(n.length>1){for(const a of n)if(a.type!==Comment){f=a;break}}const c=toRaw(e),{mode:y}=c;if(s.isLeaving)return emptyPlaceholder(f);const _=getKeepAliveChild(f);if(!_)return emptyPlaceholder(f);const b=resolveTransitionHooks(_,c,s,r);setTransitionHooks(_,b);const C=r.subTree,M=C&&getKeepAliveChild(C);let E=!1;const{getTransitionKey:P}=_.type;if(P){const a=P();o===void 0?o=a:a!==o&&(o=a,E=!0)}if(M&&M.type!==Comment&&(!isSameVNodeType(_,M)||E)){const a=resolveTransitionHooks(M,c,s,r);if(setTransitionHooks(M,a),y==="out-in")return s.isLeaving=!0,a.afterLeave=()=>{s.isLeaving=!1,r.update.active!==!1&&r.update()},emptyPlaceholder(f);y==="in-out"&&_.type!==Comment&&(a.delayLeave=(u,g,A)=>{const x=getLeavingNodesForType(s,M);x[String(M.key)]=M,u._leaveCb=()=>{g(),u._leaveCb=void 0,delete b.delayedLeave},b.delayedLeave=A})}return f}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:r}=e;let s=r.get(t.type);return s||(s=Object.create(null),r.set(t.type,s)),s}function resolveTransitionHooks(e,t,r,s){const{appear:o,mode:n,persisted:f=!1,onBeforeEnter:c,onEnter:y,onAfterEnter:_,onEnterCancelled:b,onBeforeLeave:C,onLeave:M,onAfterLeave:E,onLeaveCancelled:P,onBeforeAppear:a,onAppear:u,onAfterAppear:g,onAppearCancelled:A}=t,x=String(e.key),l=getLeavingNodesForType(r,e),v=(T,D)=>{T&&callWithAsyncErrorHandling(T,s,9,D)},w=(T,D)=>{const I=D[1];v(T,D),isArray(T)?T.every(k=>k.length<=1)&&I():T.length<=1&&I()},O={mode:n,persisted:f,beforeEnter(T){let D=c;if(!r.isMounted)if(o)D=a||c;else return;T._leaveCb&&T._leaveCb(!0);const I=l[x];I&&isSameVNodeType(e,I)&&I.el._leaveCb&&I.el._leaveCb(),v(D,[T])},enter(T){let D=y,I=_,k=b;if(!r.isMounted)if(o)D=u||y,I=g||_,k=A||b;else return;let z=!1;const L=T._enterCb=B=>{z||(z=!0,B?v(k,[T]):v(I,[T]),O.delayedLeave&&O.delayedLeave(),T._enterCb=void 0)};D?w(D,[T,L]):L()},leave(T,D){const I=String(e.key);if(T._enterCb&&T._enterCb(!0),r.isUnmounting)return D();v(C,[T]);let k=!1;const z=T._leaveCb=L=>{k||(k=!0,D(),L?v(P,[T]):v(E,[T]),T._leaveCb=void 0,l[I]===e&&delete l[I])};l[I]=e,M?w(M,[T,z]):z()},clone(T){return resolveTransitionHooks(T,t,r,s)}};return O}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,r){let s=[],o=0;for(let n=0;n<e.length;n++){let f=e[n];const c=r==null?f.key:String(r)+String(f.key!=null?f.key:n);f.type===Fragment?(f.patchFlag&128&&o++,s=s.concat(getTransitionRawChildren(f.children,t,c))):(t||f.type!==Comment)&&s.push(c!=null?cloneVNode(f,{key:c}):f)}if(o>1)for(let n=0;n<s.length;n++)s[n].patchFlag=-2;return s}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,r=currentInstance){const s=e.__wdc||(e.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(injectHook(t,s,r),r){let o=r.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(s,t,r,o),o=o.parent}}function injectToKeepAliveRoot(e,t,r,s){const o=injectHook(t,e,s,!0);onUnmounted(()=>{remove$2(s[t],o)},r)}function injectHook(e,t,r=currentInstance,s=!1){if(r){const o=r[e]||(r[e]=[]),n=t.__weh||(t.__weh=(...f)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const c=callWithAsyncErrorHandling(t,r,e,f);return unsetCurrentInstance(),resetTracking(),c});return s?o.unshift(n):o.push(n),n}}const createHook=e=>(t,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...s)=>t(...s),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(e){return isString(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,t,r=!0,s=!1){const o=currentRenderingInstance||currentInstance;if(o){const n=o.type;if(e===COMPONENTS){const c=getComponentName(n,!1);if(c&&(c===t||c===camelize(t)||c===capitalize(camelize(t))))return n}const f=resolve(o[e]||n[e],t)||resolve(o.appContext[e],t);return!f&&s?n:f}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize(camelize(t))])}function renderList(e,t,r,s){let o;const n=r&&r[s];if(isArray(e)||isString(e)){o=new Array(e.length);for(let f=0,c=e.length;f<c;f++)o[f]=t(e[f],f,void 0,n&&n[f])}else if(typeof e=="number"){o=new Array(e);for(let f=0;f<e;f++)o[f]=t(f+1,f,void 0,n&&n[f])}else if(isObject(e))if(e[Symbol.iterator])o=Array.from(e,(f,c)=>t(f,c,void 0,n&&n[c]));else{const f=Object.keys(e);o=new Array(f.length);for(let c=0,y=f.length;c<y;c++){const _=f[c];o[c]=t(e[_],_,c,n&&n[c])}}else o=[];return r&&(r[s]=o),o}function createSlots(e,t){for(let r=0;r<t.length;r++){const s=t[r];if(isArray(s))for(let o=0;o<s.length;o++)e[s[o].name]=s[o].fn;else s&&(e[s.name]=s.key?(...o)=>{const n=s.fn(...o);return n&&(n.key=s.key),n}:s.fn)}return e}function renderSlot(e,t,r={},s,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return t!=="default"&&(r.name=t),createVNode("slot",r,s&&s());let n=e[t];n&&n._c&&(n._d=!1),openBlock();const f=n&&ensureValidVNode(n(r)),c=createBlock(Fragment,{key:r.key||f&&f.key||`_${t}`},f||(s?s():[]),f&&e._===1?64:-2);return!o&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),n&&n._c&&(n._d=!0),c}function ensureValidVNode(e){return e.some(t=>isVNode(t)?!(t.type===Comment||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?e:null}function toHandlers(e,t){const r={};for(const s in e)r[t&&/[A-Z]/.test(s)?`on:${s}`:toHandlerKey(s)]=e[s];return r}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:r,setupState:s,data:o,props:n,accessCache:f,type:c,appContext:y}=e;let _;if(t[0]!=="$"){const E=f[t];if(E!==void 0)switch(E){case 1:return s[t];case 2:return o[t];case 4:return r[t];case 3:return n[t]}else{if(hasSetupBinding(s,t))return f[t]=1,s[t];if(o!==EMPTY_OBJ&&hasOwn(o,t))return f[t]=2,o[t];if((_=e.propsOptions[0])&&hasOwn(_,t))return f[t]=3,n[t];if(r!==EMPTY_OBJ&&hasOwn(r,t))return f[t]=4,r[t];shouldCacheAccess&&(f[t]=0)}}const b=publicPropertiesMap[t];let C,M;if(b)return t==="$attrs"&&track(e,"get",t),b(e);if((C=c.__cssModules)&&(C=C[t]))return C;if(r!==EMPTY_OBJ&&hasOwn(r,t))return f[t]=4,r[t];if(M=y.config.globalProperties,hasOwn(M,t))return M[t]},set({_:e},t,r){const{data:s,setupState:o,ctx:n}=e;return hasSetupBinding(o,t)?(o[t]=r,!0):s!==EMPTY_OBJ&&hasOwn(s,t)?(s[t]=r,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:s,appContext:o,propsOptions:n}},f){let c;return!!r[f]||e!==EMPTY_OBJ&&hasOwn(e,f)||hasSetupBinding(t,f)||(c=n[0])&&hasOwn(c,f)||hasOwn(s,f)||hasOwn(publicPropertiesMap,f)||hasOwn(o.config.globalProperties,f)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:hasOwn(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function normalizePropsOrEmits(e){return isArray(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),r=e.proxy,s=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:o,computed:n,methods:f,watch:c,provide:y,inject:_,created:b,beforeMount:C,mounted:M,beforeUpdate:E,updated:P,activated:a,deactivated:u,beforeDestroy:g,beforeUnmount:A,destroyed:x,unmounted:l,render:v,renderTracked:w,renderTriggered:O,errorCaptured:T,serverPrefetch:D,expose:I,inheritAttrs:k,components:z,directives:L,filters:B}=t;if(_&&resolveInjections(_,s,null),f)for(const N in f){const U=f[N];isFunction(U)&&(s[N]=U.bind(r))}if(o){const N=o.call(r,r);isObject(N)&&(e.data=reactive(N))}if(shouldCacheAccess=!0,n)for(const N in n){const U=n[N],G=isFunction(U)?U.bind(r,r):isFunction(U.get)?U.get.bind(r,r):NOOP,$=!isFunction(U)&&isFunction(U.set)?U.set.bind(r):NOOP,W=computed({get:G,set:$});Object.defineProperty(s,N,{enumerable:!0,configurable:!0,get:()=>W.value,set:j=>W.value=j})}if(c)for(const N in c)createWatcher(c[N],s,r,N);if(y){const N=isFunction(y)?y.call(r):y;Reflect.ownKeys(N).forEach(U=>{provide(U,N[U])})}b&&callHook$1(b,e,"c");function V(N,U){isArray(U)?U.forEach(G=>N(G.bind(r))):U&&N(U.bind(r))}if(V(onBeforeMount,C),V(onMounted,M),V(onBeforeUpdate,E),V(onUpdated,P),V(onActivated,a),V(onDeactivated,u),V(onErrorCaptured,T),V(onRenderTracked,w),V(onRenderTriggered,O),V(onBeforeUnmount,A),V(onUnmounted,l),V(onServerPrefetch,D),isArray(I))if(I.length){const N=e.exposed||(e.exposed={});I.forEach(U=>{Object.defineProperty(N,U,{get:()=>r[U],set:G=>r[U]=G})})}else e.exposed||(e.exposed={});v&&e.render===NOOP&&(e.render=v),k!=null&&(e.inheritAttrs=k),z&&(e.components=z),L&&(e.directives=L)}function resolveInjections(e,t,r=NOOP){isArray(e)&&(e=normalizeInject(e));for(const s in e){const o=e[s];let n;isObject(o)?"default"in o?n=inject(o.from||s,o.default,!0):n=inject(o.from||s):n=inject(o),isRef(n)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>n.value,set:f=>n.value=f}):t[s]=n}}function callHook$1(e,t,r){callWithAsyncErrorHandling(isArray(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,r)}function createWatcher(e,t,r,s){const o=s.includes(".")?createPathGetter(r,s):()=>r[s];if(isString(e)){const n=t[e];isFunction(n)&&watch(o,n)}else if(isFunction(e))watch(o,e.bind(r));else if(isObject(e))if(isArray(e))e.forEach(n=>createWatcher(n,t,r,s));else{const n=isFunction(e.handler)?e.handler.bind(r):t[e.handler];isFunction(n)&&watch(o,n,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:r,extends:s}=t,{mixins:o,optionsCache:n,config:{optionMergeStrategies:f}}=e.appContext,c=n.get(t);let y;return c?y=c:!o.length&&!r&&!s?y=t:(y={},o.length&&o.forEach(_=>mergeOptions(y,_,f,!0)),mergeOptions(y,t,f)),isObject(t)&&n.set(t,y),y}function mergeOptions(e,t,r,s=!1){const{mixins:o,extends:n}=t;n&&mergeOptions(e,n,r,!0),o&&o.forEach(f=>mergeOptions(e,f,r,!0));for(const f in t)if(!(s&&f==="expose")){const c=internalOptionMergeStrats[f]||r&&r[f];e[f]=c?c(e[f],t[f]):t[f]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$1(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$1(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray(e)&&isArray(t)?[...new Set([...e,...t])]:extend$1(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const r=extend$1(Object.create(null),e);for(const s in t)r[s]=mergeAsArray(e[s],t[s]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(s,o=null){isFunction(s)||(s=extend$1({},s)),o!=null&&!isObject(o)&&(o=null);const n=createAppContext(),f=new Set;let c=!1;const y=n.app={_uid:uid$1++,_component:s,_props:o,_container:null,_context:n,_instance:null,version,get config(){return n.config},set config(_){},use(_,...b){return f.has(_)||(_&&isFunction(_.install)?(f.add(_),_.install(y,...b)):isFunction(_)&&(f.add(_),_(y,...b))),y},mixin(_){return n.mixins.includes(_)||n.mixins.push(_),y},component(_,b){return b?(n.components[_]=b,y):n.components[_]},directive(_,b){return b?(n.directives[_]=b,y):n.directives[_]},mount(_,b,C){if(!c){const M=createVNode(s,o);return M.appContext=n,b&&t?t(M,_):e(M,_,C),c=!0,y._container=_,_.__vue_app__=y,getExposeProxy(M.component)||M.component.proxy}},unmount(){c&&(e(null,y._container),delete y._container.__vue_app__)},provide(_,b){return n.provides[_]=b,y},runWithContext(_){currentApp=y;try{return _()}finally{currentApp=null}}};return y}}let currentApp=null;function provide(e,t){if(currentInstance){let r=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===r&&(r=currentInstance.provides=Object.create(s)),r[e]=t}}function inject(e,t,r=!1){const s=currentInstance||currentRenderingInstance;if(s||currentApp){const o=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:currentApp._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return r&&isFunction(t)?t.call(s&&s.proxy):t}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(e,t,r,s=!1){const o={},n={};def(n,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,o,n);for(const f in e.propsOptions[0])f in o||(o[f]=void 0);r?e.props=s?o:shallowReactive(o):e.type.props?e.props=o:e.props=n,e.attrs=n}function updateProps(e,t,r,s){const{props:o,attrs:n,vnode:{patchFlag:f}}=e,c=toRaw(o),[y]=e.propsOptions;let _=!1;if((s||f>0)&&!(f&16)){if(f&8){const b=e.vnode.dynamicProps;for(let C=0;C<b.length;C++){let M=b[C];if(isEmitListener(e.emitsOptions,M))continue;const E=t[M];if(y)if(hasOwn(n,M))E!==n[M]&&(n[M]=E,_=!0);else{const P=camelize(M);o[P]=resolvePropValue(y,c,P,E,e,!1)}else E!==n[M]&&(n[M]=E,_=!0)}}}else{setFullProps(e,t,o,n)&&(_=!0);let b;for(const C in c)(!t||!hasOwn(t,C)&&((b=hyphenate(C))===C||!hasOwn(t,b)))&&(y?r&&(r[C]!==void 0||r[b]!==void 0)&&(o[C]=resolvePropValue(y,c,C,void 0,e,!0)):delete o[C]);if(n!==c)for(const C in n)(!t||!hasOwn(t,C))&&(delete n[C],_=!0)}_&&trigger(e,"set","$attrs")}function setFullProps(e,t,r,s){const[o,n]=e.propsOptions;let f=!1,c;if(t)for(let y in t){if(isReservedProp(y))continue;const _=t[y];let b;o&&hasOwn(o,b=camelize(y))?!n||!n.includes(b)?r[b]=_:(c||(c={}))[b]=_:isEmitListener(e.emitsOptions,y)||(!(y in s)||_!==s[y])&&(s[y]=_,f=!0)}if(n){const y=toRaw(r),_=c||EMPTY_OBJ;for(let b=0;b<n.length;b++){const C=n[b];r[C]=resolvePropValue(o,y,C,_[C],e,!hasOwn(_,C))}}return f}function resolvePropValue(e,t,r,s,o,n){const f=e[r];if(f!=null){const c=hasOwn(f,"default");if(c&&s===void 0){const y=f.default;if(f.type!==Function&&!f.skipFactory&&isFunction(y)){const{propsDefaults:_}=o;r in _?s=_[r]:(setCurrentInstance(o),s=_[r]=y.call(null,t),unsetCurrentInstance())}else s=y}f[0]&&(n&&!c?s=!1:f[1]&&(s===""||s===hyphenate(r))&&(s=!0))}return s}function normalizePropsOptions(e,t,r=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const n=e.props,f={},c=[];let y=!1;if(!isFunction(e)){const b=C=>{y=!0;const[M,E]=normalizePropsOptions(C,t,!0);extend$1(f,M),E&&c.push(...E)};!r&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}if(!n&&!y)return isObject(e)&&s.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(n))for(let b=0;b<n.length;b++){const C=camelize(n[b]);validatePropName(C)&&(f[C]=EMPTY_OBJ)}else if(n)for(const b in n){const C=camelize(b);if(validatePropName(C)){const M=n[b],E=f[C]=isArray(M)||isFunction(M)?{type:M}:extend$1({},M);if(E){const P=getTypeIndex(Boolean,E.type),a=getTypeIndex(String,E.type);E[0]=P>-1,E[1]=a<0||P<a,(P>-1||hasOwn(E,"default"))&&c.push(C)}}}const _=[f,c];return isObject(e)&&s.set(e,_),_}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray(t)?t.findIndex(r=>isSameType(r,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,r)=>{if(t._n)return t;const s=withCtx((...o)=>normalizeSlotValue(t(...o)),r);return s._c=!1,s},normalizeObjectSlots=(e,t,r)=>{const s=e._ctx;for(const o in e){if(isInternalKey(o))continue;const n=e[o];if(isFunction(n))t[o]=normalizeSlot(o,n,s);else if(n!=null){const f=normalizeSlotValue(n);t[o]=()=>f}}},normalizeVNodeSlots=(e,t)=>{const r=normalizeSlotValue(t);e.slots.default=()=>r},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=toRaw(t),def(t,"_",r)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,r)=>{const{vnode:s,slots:o}=e;let n=!0,f=EMPTY_OBJ;if(s.shapeFlag&32){const c=t._;c?r&&c===1?n=!1:(extend$1(o,t),!r&&c===1&&delete o._):(n=!t.$stable,normalizeObjectSlots(t,o)),f=t}else t&&(normalizeVNodeSlots(e,t),f={default:1});if(n)for(const c in o)!isInternalKey(c)&&!(c in f)&&delete o[c]};function setRef(e,t,r,s,o=!1){if(isArray(e)){e.forEach((M,E)=>setRef(M,t&&(isArray(t)?t[E]:t),r,s,o));return}if(isAsyncWrapper(s)&&!o)return;const n=s.shapeFlag&4?getExposeProxy(s.component)||s.component.proxy:s.el,f=o?null:n,{i:c,r:y}=e,_=t&&t.r,b=c.refs===EMPTY_OBJ?c.refs={}:c.refs,C=c.setupState;if(_!=null&&_!==y&&(isString(_)?(b[_]=null,hasOwn(C,_)&&(C[_]=null)):isRef(_)&&(_.value=null)),isFunction(y))callWithErrorHandling(y,c,12,[f,b]);else{const M=isString(y),E=isRef(y);if(M||E){const P=()=>{if(e.f){const a=M?hasOwn(C,y)?C[y]:b[y]:y.value;o?isArray(a)&&remove$2(a,n):isArray(a)?a.includes(n)||a.push(n):M?(b[y]=[n],hasOwn(C,y)&&(C[y]=b[y])):(y.value=[n],e.k&&(b[e.k]=y.value))}else M?(b[y]=f,hasOwn(C,y)&&(C[y]=f)):E&&(y.value=f,e.k&&(b[e.k]=f))};f?(P.id=-1,queuePostRenderEffect(P,r)):P()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const r=getGlobalThis();r.__VUE__=!0;const{insert:s,remove:o,patchProp:n,createElement:f,createText:c,createComment:y,setText:_,setElementText:b,parentNode:C,nextSibling:M,setScopeId:E=NOOP,insertStaticContent:P}=e,a=(ee,J,ne,le=null,we=null,Pe=null,Be=!1,Ce=null,be=!!J.dynamicChildren)=>{if(ee===J)return;ee&&!isSameVNodeType(ee,J)&&(le=Ee(ee),j(ee,we,Pe,!0),ee=null),J.patchFlag===-2&&(be=!1,J.dynamicChildren=null);const{type:ge,ref:Ae,shapeFlag:De}=J;switch(ge){case Text:u(ee,J,ne,le);break;case Comment:g(ee,J,ne,le);break;case Static:ee==null&&A(J,ne,le,Be);break;case Fragment:z(ee,J,ne,le,we,Pe,Be,Ce,be);break;default:De&1?v(ee,J,ne,le,we,Pe,Be,Ce,be):De&6?L(ee,J,ne,le,we,Pe,Be,Ce,be):(De&64||De&128)&&ge.process(ee,J,ne,le,we,Pe,Be,Ce,be,fe)}Ae!=null&&we&&setRef(Ae,ee&&ee.ref,Pe,J||ee,!J)},u=(ee,J,ne,le)=>{if(ee==null)s(J.el=c(J.children),ne,le);else{const we=J.el=ee.el;J.children!==ee.children&&_(we,J.children)}},g=(ee,J,ne,le)=>{ee==null?s(J.el=y(J.children||""),ne,le):J.el=ee.el},A=(ee,J,ne,le)=>{[ee.el,ee.anchor]=P(ee.children,J,ne,le,ee.el,ee.anchor)},x=({el:ee,anchor:J},ne,le)=>{let we;for(;ee&&ee!==J;)we=M(ee),s(ee,ne,le),ee=we;s(J,ne,le)},l=({el:ee,anchor:J})=>{let ne;for(;ee&&ee!==J;)ne=M(ee),o(ee),ee=ne;o(J)},v=(ee,J,ne,le,we,Pe,Be,Ce,be)=>{Be=Be||J.type==="svg",ee==null?w(J,ne,le,we,Pe,Be,Ce,be):D(ee,J,we,Pe,Be,Ce,be)},w=(ee,J,ne,le,we,Pe,Be,Ce)=>{let be,ge;const{type:Ae,props:De,shapeFlag:Re,transition:Ge,dirs:Ke}=ee;if(be=ee.el=f(ee.type,Pe,De&&De.is,De),Re&8?b(be,ee.children):Re&16&&T(ee.children,be,null,le,we,Pe&&Ae!=="foreignObject",Be,Ce),Ke&&invokeDirectiveHook(ee,null,le,"created"),O(be,ee,ee.scopeId,Be,le),De){for(const Z in De)Z!=="value"&&!isReservedProp(Z)&&n(be,Z,null,De[Z],Pe,ee.children,le,we,ue);"value"in De&&n(be,"value",null,De.value),(ge=De.onVnodeBeforeMount)&&invokeVNodeHook(ge,le,ee)}Ke&&invokeDirectiveHook(ee,null,le,"beforeMount");const Q=(!we||we&&!we.pendingBranch)&&Ge&&!Ge.persisted;Q&&Ge.beforeEnter(be),s(be,J,ne),((ge=De&&De.onVnodeMounted)||Q||Ke)&&queuePostRenderEffect(()=>{ge&&invokeVNodeHook(ge,le,ee),Q&&Ge.enter(be),Ke&&invokeDirectiveHook(ee,null,le,"mounted")},we)},O=(ee,J,ne,le,we)=>{if(ne&&E(ee,ne),le)for(let Pe=0;Pe<le.length;Pe++)E(ee,le[Pe]);if(we){let Pe=we.subTree;if(J===Pe){const Be=we.vnode;O(ee,Be,Be.scopeId,Be.slotScopeIds,we.parent)}}},T=(ee,J,ne,le,we,Pe,Be,Ce,be=0)=>{for(let ge=be;ge<ee.length;ge++){const Ae=ee[ge]=Ce?cloneIfMounted(ee[ge]):normalizeVNode(ee[ge]);a(null,Ae,J,ne,le,we,Pe,Be,Ce)}},D=(ee,J,ne,le,we,Pe,Be)=>{const Ce=J.el=ee.el;let{patchFlag:be,dynamicChildren:ge,dirs:Ae}=J;be|=ee.patchFlag&16;const De=ee.props||EMPTY_OBJ,Re=J.props||EMPTY_OBJ;let Ge;ne&&toggleRecurse(ne,!1),(Ge=Re.onVnodeBeforeUpdate)&&invokeVNodeHook(Ge,ne,J,ee),Ae&&invokeDirectiveHook(J,ee,ne,"beforeUpdate"),ne&&toggleRecurse(ne,!0);const Ke=we&&J.type!=="foreignObject";if(ge?I(ee.dynamicChildren,ge,Ce,ne,le,Ke,Pe):Be||U(ee,J,Ce,null,ne,le,Ke,Pe,!1),be>0){if(be&16)k(Ce,J,De,Re,ne,le,we);else if(be&2&&De.class!==Re.class&&n(Ce,"class",null,Re.class,we),be&4&&n(Ce,"style",De.style,Re.style,we),be&8){const Q=J.dynamicProps;for(let Z=0;Z<Q.length;Z++){const ie=Q[Z],ye=De[ie],xe=Re[ie];(xe!==ye||ie==="value")&&n(Ce,ie,ye,xe,we,ee.children,ne,le,ue)}}be&1&&ee.children!==J.children&&b(Ce,J.children)}else!Be&&ge==null&&k(Ce,J,De,Re,ne,le,we);((Ge=Re.onVnodeUpdated)||Ae)&&queuePostRenderEffect(()=>{Ge&&invokeVNodeHook(Ge,ne,J,ee),Ae&&invokeDirectiveHook(J,ee,ne,"updated")},le)},I=(ee,J,ne,le,we,Pe,Be)=>{for(let Ce=0;Ce<J.length;Ce++){const be=ee[Ce],ge=J[Ce],Ae=be.el&&(be.type===Fragment||!isSameVNodeType(be,ge)||be.shapeFlag&70)?C(be.el):ne;a(be,ge,Ae,null,le,we,Pe,Be,!0)}},k=(ee,J,ne,le,we,Pe,Be)=>{if(ne!==le){if(ne!==EMPTY_OBJ)for(const Ce in ne)!isReservedProp(Ce)&&!(Ce in le)&&n(ee,Ce,ne[Ce],null,Be,J.children,we,Pe,ue);for(const Ce in le){if(isReservedProp(Ce))continue;const be=le[Ce],ge=ne[Ce];be!==ge&&Ce!=="value"&&n(ee,Ce,ge,be,Be,J.children,we,Pe,ue)}"value"in le&&n(ee,"value",ne.value,le.value)}},z=(ee,J,ne,le,we,Pe,Be,Ce,be)=>{const ge=J.el=ee?ee.el:c(""),Ae=J.anchor=ee?ee.anchor:c("");let{patchFlag:De,dynamicChildren:Re,slotScopeIds:Ge}=J;Ge&&(Ce=Ce?Ce.concat(Ge):Ge),ee==null?(s(ge,ne,le),s(Ae,ne,le),T(J.children,ne,Ae,we,Pe,Be,Ce,be)):De>0&&De&64&&Re&&ee.dynamicChildren?(I(ee.dynamicChildren,Re,ne,we,Pe,Be,Ce),(J.key!=null||we&&J===we.subTree)&&traverseStaticChildren(ee,J,!0)):U(ee,J,ne,Ae,we,Pe,Be,Ce,be)},L=(ee,J,ne,le,we,Pe,Be,Ce,be)=>{J.slotScopeIds=Ce,ee==null?J.shapeFlag&512?we.ctx.activate(J,ne,le,Be,be):B(J,ne,le,we,Pe,Be,be):H(ee,J,be)},B=(ee,J,ne,le,we,Pe,Be)=>{const Ce=ee.component=createComponentInstance(ee,le,we);if(isKeepAlive(ee)&&(Ce.ctx.renderer=fe),setupComponent(Ce),Ce.asyncDep){if(we&&we.registerDep(Ce,V),!ee.el){const be=Ce.subTree=createVNode(Comment);g(null,be,J,ne)}return}V(Ce,ee,J,ne,we,Pe,Be)},H=(ee,J,ne)=>{const le=J.component=ee.component;if(shouldUpdateComponent(ee,J,ne))if(le.asyncDep&&!le.asyncResolved){N(le,J,ne);return}else le.next=J,invalidateJob(le.update),le.update();else J.el=ee.el,le.vnode=J},V=(ee,J,ne,le,we,Pe,Be)=>{const Ce=()=>{if(ee.isMounted){let{next:Ae,bu:De,u:Re,parent:Ge,vnode:Ke}=ee,Q=Ae,Z;toggleRecurse(ee,!1),Ae?(Ae.el=Ke.el,N(ee,Ae,Be)):Ae=Ke,De&&invokeArrayFns(De),(Z=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Z,Ge,Ae,Ke),toggleRecurse(ee,!0);const ie=renderComponentRoot(ee),ye=ee.subTree;ee.subTree=ie,a(ye,ie,C(ye.el),Ee(ye),ee,we,Pe),Ae.el=ie.el,Q===null&&updateHOCHostEl(ee,ie.el),Re&&queuePostRenderEffect(Re,we),(Z=Ae.props&&Ae.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Z,Ge,Ae,Ke),we)}else{let Ae;const{el:De,props:Re}=J,{bm:Ge,m:Ke,parent:Q}=ee,Z=isAsyncWrapper(J);if(toggleRecurse(ee,!1),Ge&&invokeArrayFns(Ge),!Z&&(Ae=Re&&Re.onVnodeBeforeMount)&&invokeVNodeHook(Ae,Q,J),toggleRecurse(ee,!0),De&&Oe){const ie=()=>{ee.subTree=renderComponentRoot(ee),Oe(De,ee.subTree,ee,we,null)};Z?J.type.__asyncLoader().then(()=>!ee.isUnmounted&&ie()):ie()}else{const ie=ee.subTree=renderComponentRoot(ee);a(null,ie,ne,le,ee,we,Pe),J.el=ie.el}if(Ke&&queuePostRenderEffect(Ke,we),!Z&&(Ae=Re&&Re.onVnodeMounted)){const ie=J;queuePostRenderEffect(()=>invokeVNodeHook(Ae,Q,ie),we)}(J.shapeFlag&256||Q&&isAsyncWrapper(Q.vnode)&&Q.vnode.shapeFlag&256)&&ee.a&&queuePostRenderEffect(ee.a,we),ee.isMounted=!0,J=ne=le=null}},be=ee.effect=new ReactiveEffect(Ce,()=>queueJob(ge),ee.scope),ge=ee.update=()=>be.run();ge.id=ee.uid,toggleRecurse(ee,!0),ge()},N=(ee,J,ne)=>{J.component=ee;const le=ee.vnode.props;ee.vnode=J,ee.next=null,updateProps(ee,J.props,le,ne),updateSlots(ee,J.children,ne),pauseTracking(),flushPreFlushCbs(),resetTracking()},U=(ee,J,ne,le,we,Pe,Be,Ce,be=!1)=>{const ge=ee&&ee.children,Ae=ee?ee.shapeFlag:0,De=J.children,{patchFlag:Re,shapeFlag:Ge}=J;if(Re>0){if(Re&128){$(ge,De,ne,le,we,Pe,Be,Ce,be);return}else if(Re&256){G(ge,De,ne,le,we,Pe,Be,Ce,be);return}}Ge&8?(Ae&16&&ue(ge,we,Pe),De!==ge&&b(ne,De)):Ae&16?Ge&16?$(ge,De,ne,le,we,Pe,Be,Ce,be):ue(ge,we,Pe,!0):(Ae&8&&b(ne,""),Ge&16&&T(De,ne,le,we,Pe,Be,Ce,be))},G=(ee,J,ne,le,we,Pe,Be,Ce,be)=>{ee=ee||EMPTY_ARR,J=J||EMPTY_ARR;const ge=ee.length,Ae=J.length,De=Math.min(ge,Ae);let Re;for(Re=0;Re<De;Re++){const Ge=J[Re]=be?cloneIfMounted(J[Re]):normalizeVNode(J[Re]);a(ee[Re],Ge,ne,null,we,Pe,Be,Ce,be)}ge>Ae?ue(ee,we,Pe,!0,!1,De):T(J,ne,le,we,Pe,Be,Ce,be,De)},$=(ee,J,ne,le,we,Pe,Be,Ce,be)=>{let ge=0;const Ae=J.length;let De=ee.length-1,Re=Ae-1;for(;ge<=De&&ge<=Re;){const Ge=ee[ge],Ke=J[ge]=be?cloneIfMounted(J[ge]):normalizeVNode(J[ge]);if(isSameVNodeType(Ge,Ke))a(Ge,Ke,ne,null,we,Pe,Be,Ce,be);else break;ge++}for(;ge<=De&&ge<=Re;){const Ge=ee[De],Ke=J[Re]=be?cloneIfMounted(J[Re]):normalizeVNode(J[Re]);if(isSameVNodeType(Ge,Ke))a(Ge,Ke,ne,null,we,Pe,Be,Ce,be);else break;De--,Re--}if(ge>De){if(ge<=Re){const Ge=Re+1,Ke=Ge<Ae?J[Ge].el:le;for(;ge<=Re;)a(null,J[ge]=be?cloneIfMounted(J[ge]):normalizeVNode(J[ge]),ne,Ke,we,Pe,Be,Ce,be),ge++}}else if(ge>Re)for(;ge<=De;)j(ee[ge],we,Pe,!0),ge++;else{const Ge=ge,Ke=ge,Q=new Map;for(ge=Ke;ge<=Re;ge++){const ve=J[ge]=be?cloneIfMounted(J[ge]):normalizeVNode(J[ge]);ve.key!=null&&Q.set(ve.key,ge)}let Z,ie=0;const ye=Re-Ke+1;let xe=!1,Ne=0;const Ve=new Array(ye);for(ge=0;ge<ye;ge++)Ve[ge]=0;for(ge=Ge;ge<=De;ge++){const ve=ee[ge];if(ie>=ye){j(ve,we,Pe,!0);continue}let Me;if(ve.key!=null)Me=Q.get(ve.key);else for(Z=Ke;Z<=Re;Z++)if(Ve[Z-Ke]===0&&isSameVNodeType(ve,J[Z])){Me=Z;break}Me===void 0?j(ve,we,Pe,!0):(Ve[Me-Ke]=ge+1,Me>=Ne?Ne=Me:xe=!0,a(ve,J[Me],ne,null,we,Pe,Be,Ce,be),ie++)}const X=xe?getSequence(Ve):EMPTY_ARR;for(Z=X.length-1,ge=ye-1;ge>=0;ge--){const ve=Ke+ge,Me=J[ve],He=ve+1<Ae?J[ve+1].el:le;Ve[ge]===0?a(null,Me,ne,He,we,Pe,Be,Ce,be):xe&&(Z<0||ge!==X[Z]?W(Me,ne,He,2):Z--)}}},W=(ee,J,ne,le,we=null)=>{const{el:Pe,type:Be,transition:Ce,children:be,shapeFlag:ge}=ee;if(ge&6){W(ee.component.subTree,J,ne,le);return}if(ge&128){ee.suspense.move(J,ne,le);return}if(ge&64){Be.move(ee,J,ne,fe);return}if(Be===Fragment){s(Pe,J,ne);for(let De=0;De<be.length;De++)W(be[De],J,ne,le);s(ee.anchor,J,ne);return}if(Be===Static){x(ee,J,ne);return}if(le!==2&&ge&1&&Ce)if(le===0)Ce.beforeEnter(Pe),s(Pe,J,ne),queuePostRenderEffect(()=>Ce.enter(Pe),we);else{const{leave:De,delayLeave:Re,afterLeave:Ge}=Ce,Ke=()=>s(Pe,J,ne),Q=()=>{De(Pe,()=>{Ke(),Ge&&Ge()})};Re?Re(Pe,Ke,Q):Q()}else s(Pe,J,ne)},j=(ee,J,ne,le=!1,we=!1)=>{const{type:Pe,props:Be,ref:Ce,children:be,dynamicChildren:ge,shapeFlag:Ae,patchFlag:De,dirs:Re}=ee;if(Ce!=null&&setRef(Ce,null,ne,ee,!0),Ae&256){J.ctx.deactivate(ee);return}const Ge=Ae&1&&Re,Ke=!isAsyncWrapper(ee);let Q;if(Ke&&(Q=Be&&Be.onVnodeBeforeUnmount)&&invokeVNodeHook(Q,J,ee),Ae&6)ce(ee.component,ne,le);else{if(Ae&128){ee.suspense.unmount(ne,le);return}Ge&&invokeDirectiveHook(ee,null,J,"beforeUnmount"),Ae&64?ee.type.remove(ee,J,ne,we,fe,le):ge&&(Pe!==Fragment||De>0&&De&64)?ue(ge,J,ne,!1,!0):(Pe===Fragment&&De&384||!we&&Ae&16)&&ue(be,J,ne),le&&se(ee)}(Ke&&(Q=Be&&Be.onVnodeUnmounted)||Ge)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,J,ee),Ge&&invokeDirectiveHook(ee,null,J,"unmounted")},ne)},se=ee=>{const{type:J,el:ne,anchor:le,transition:we}=ee;if(J===Fragment){he(ne,le);return}if(J===Static){l(ee);return}const Pe=()=>{o(ne),we&&!we.persisted&&we.afterLeave&&we.afterLeave()};if(ee.shapeFlag&1&&we&&!we.persisted){const{leave:Be,delayLeave:Ce}=we,be=()=>Be(ne,Pe);Ce?Ce(ee.el,Pe,be):be()}else Pe()},he=(ee,J)=>{let ne;for(;ee!==J;)ne=M(ee),o(ee),ee=ne;o(J)},ce=(ee,J,ne)=>{const{bum:le,scope:we,update:Pe,subTree:Be,um:Ce}=ee;le&&invokeArrayFns(le),we.stop(),Pe&&(Pe.active=!1,j(Be,ee,J,ne)),Ce&&queuePostRenderEffect(Ce,J),queuePostRenderEffect(()=>{ee.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&ee.asyncDep&&!ee.asyncResolved&&ee.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve())},ue=(ee,J,ne,le=!1,we=!1,Pe=0)=>{for(let Be=Pe;Be<ee.length;Be++)j(ee[Be],J,ne,le,we)},Ee=ee=>ee.shapeFlag&6?Ee(ee.component.subTree):ee.shapeFlag&128?ee.suspense.next():M(ee.anchor||ee.el),pe=(ee,J,ne)=>{ee==null?J._vnode&&j(J._vnode,null,null,!0):a(J._vnode||null,ee,J,null,null,null,ne),flushPreFlushCbs(),flushPostFlushCbs(),J._vnode=ee},fe={p:a,um:j,m:W,r:se,mt:B,mc:T,pc:U,pbc:I,n:Ee,o:e};let Ue,Oe;return t&&([Ue,Oe]=t(fe)),{render:pe,hydrate:Ue,createApp:createAppAPI(pe,Ue)}}function toggleRecurse({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function traverseStaticChildren(e,t,r=!1){const s=e.children,o=t.children;if(isArray(s)&&isArray(o))for(let n=0;n<s.length;n++){const f=s[n];let c=o[n];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[n]=cloneIfMounted(o[n]),c.el=f.el),r||traverseStaticChildren(f,c)),c.type===Text&&(c.el=f.el)}}function getSequence(e){const t=e.slice(),r=[0];let s,o,n,f,c;const y=e.length;for(s=0;s<y;s++){const _=e[s];if(_!==0){if(o=r[r.length-1],e[o]<_){t[s]=o,r.push(s);continue}for(n=0,f=r.length-1;n<f;)c=n+f>>1,e[r[c]]<_?n=c+1:f=c;_<e[r[n]]&&(n>0&&(t[s]=r[n-1]),r[n]=s)}}for(n=r.length,f=r[n-1];n-- >0;)r[n]=f,f=t[f];return r}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,t)=>{const r=e&&e.to;return isString(r)?t?t(r):null:r},TeleportImpl={__isTeleport:!0,process(e,t,r,s,o,n,f,c,y,_){const{mc:b,pc:C,pbc:M,o:{insert:E,querySelector:P,createText:a,createComment:u}}=_,g=isTeleportDisabled(t.props);let{shapeFlag:A,children:x,dynamicChildren:l}=t;if(e==null){const v=t.el=a(""),w=t.anchor=a("");E(v,r,s),E(w,r,s);const O=t.target=resolveTarget(t.props,P),T=t.targetAnchor=a("");O&&(E(T,O),f=f||isTargetSVG(O));const D=(I,k)=>{A&16&&b(x,I,k,o,n,f,c,y)};g?D(r,w):O&&D(O,T)}else{t.el=e.el;const v=t.anchor=e.anchor,w=t.target=e.target,O=t.targetAnchor=e.targetAnchor,T=isTeleportDisabled(e.props),D=T?r:w,I=T?v:O;if(f=f||isTargetSVG(w),l?(M(e.dynamicChildren,l,D,o,n,f,c),traverseStaticChildren(e,t,!0)):y||C(e,t,D,I,o,n,f,c,!1),g)T||moveTeleport(t,r,v,_,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const k=t.target=resolveTarget(t.props,P);k&&moveTeleport(t,k,null,_,0)}else T&&moveTeleport(t,w,O,_,1)}updateCssVars(t)},remove(e,t,r,s,{um:o,o:{remove:n}},f){const{shapeFlag:c,children:y,anchor:_,targetAnchor:b,target:C,props:M}=e;if(C&&n(b),(f||!isTeleportDisabled(M))&&(n(_),c&16))for(let E=0;E<y.length;E++){const P=y[E];o(P,t,r,!0,!!P.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,r,{o:{insert:s},m:o},n=2){n===0&&s(e.targetAnchor,t,r);const{el:f,anchor:c,shapeFlag:y,children:_,props:b}=e,C=n===2;if(C&&s(f,t,r),(!C||isTeleportDisabled(b))&&y&16)for(let M=0;M<_.length;M++)o(_[M],t,r,2);C&&s(c,t,r)}function hydrateTeleport(e,t,r,s,o,n,{o:{nextSibling:f,parentNode:c,querySelector:y}},_){const b=t.target=resolveTarget(t.props,y);if(b){const C=b._lpa||b.firstChild;if(t.shapeFlag&16)if(isTeleportDisabled(t.props))t.anchor=_(f(e),t,c(e),r,s,o,n),t.targetAnchor=C;else{t.anchor=f(e);let M=C;for(;M;)if(M=f(M),M&&M.nodeType===8&&M.data==="teleport anchor"){t.targetAnchor=M,b._lpa=t.targetAnchor&&f(t.targetAnchor);break}_(C,t,b,r,s,o,n)}updateCssVars(t)}return t.anchor&&f(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const t=e.ctx;if(t&&t.ut){let r=e.children[0].el;for(;r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,r,s,o,n){return setupBlock(createBaseVNode(e,t,r,s,o,n,!0))}function createBlock(e,t,r,s,o){return setupBlock(createVNode(e,t,r,s,o,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!r}:e:null);function createBaseVNode(e,t=null,r=null,s=0,o=null,n=e===Fragment?0:1,f=!1,c=!1){const y={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return c?(normalizeChildren(y,r),n&128&&e.normalize(y)):r&&(y.shapeFlag|=isString(r)?8:16),isBlockTreeEnabled>0&&!f&&currentBlock&&(y.patchFlag>0||n&6)&&y.patchFlag!==32&&currentBlock.push(y),y}const createVNode=_createVNode;function _createVNode(e,t=null,r=null,s=0,o=null,n=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const c=cloneVNode(e,t,!0);return r&&normalizeChildren(c,r),isBlockTreeEnabled>0&&!n&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=c:currentBlock.push(c)),c.patchFlag|=-2,c}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:c,style:y}=t;c&&!isString(c)&&(t.class=normalizeClass(c)),isObject(y)&&(isProxy(y)&&!isArray(y)&&(y=extend$1({},y)),t.style=normalizeStyle(y))}const f=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,r,s,o,f,n,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$1({},e):e:null}function cloneVNode(e,t,r=!1){const{props:s,ref:o,patchFlag:n,children:f}=e,c=t?mergeProps(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&normalizeKey(c),ref:t&&t.ref?r&&o?isArray(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?n===-1?16:n|16:n,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const r=createVNode(Static,null,e);return r.staticCount=t,r}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let r=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(isArray(t))r=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),normalizeChildren(e,o()),o._c&&(o._d=!0));return}else{r=32;const o=t._;!o&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},r=32):(t=String(t),s&64?(r=16,t=[createTextVNode(t)]):r=8);e.children=t,e.shapeFlag|=r}function mergeProps(...e){const t={};for(let r=0;r<e.length;r++){const s=e[r];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=normalizeClass([t.class,s.class]));else if(o==="style")t.style=normalizeStyle([t.style,s.style]);else if(isOn(o)){const n=t[o],f=s[o];f&&n!==f&&!(isArray(n)&&n.includes(f))&&(t[o]=n?[].concat(n,f):f)}else o!==""&&(t[o]=s[o])}return t}function invokeVNodeHook(e,t,r,s=null){callWithAsyncErrorHandling(e,t,7,[r,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,r){const s=e.type,o=(t?t.appContext:e.appContext)||emptyAppContext,n={uid:uid++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,o),emitsOptions:normalizeEmitsOptions(s,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=emit.bind(null,n),e.ce&&e.ce(n),n}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(t=>t(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:r,children:s}=e.vnode,o=isStatefulComponent(e);initProps(e,r,o,t),initSlots(e,s);const n=o?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,n}function setupStatefulComponent(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:s}=r;if(s){const o=e.setupContext=s.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const n=callWithErrorHandling(s,e,0,[e.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(n)){if(n.then(unsetCurrentInstance,unsetCurrentInstance),t)return n.then(f=>{handleSetupResult(e,f,t)}).catch(f=>{handleError(f,e,0)});e.asyncDep=n}else handleSetupResult(e,n,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,r){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,r)}let compile;function finishComponentSetup(e,t,r){const s=e.type;if(!e.render){if(!t&&compile&&!s.render){const o=s.template||resolveMergedOptions(e).template;if(o){const{isCustomElement:n,compilerOptions:f}=e.appContext.config,{delimiters:c,compilerOptions:y}=s,_=extend$1(extend$1({isCustomElement:n,delimiters:c},f),y);s.render=compile(o,_)}}e.render=s.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return track(e,"get","$attrs"),t[r]}}))}function createSetupContext(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(t,r){return r in t||r in publicPropertiesMap}}))}function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h(e,t,r){const s=arguments.length;return s===2?isObject(t)&&!isArray(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&isVNode(r)&&(r=[r]),createVNode(e,t,r))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,s)=>{const o=t?doc.createElementNS(svgNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,s,o,n){const f=r?r.previousSibling:t.lastChild;if(o&&(o===n||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),r),!(o===n||!(o=o.nextSibling)););else{templateContainer.innerHTML=s?`<svg>${e}</svg>`:e;const c=templateContainer.content;if(s){const y=c.firstChild;for(;y.firstChild;)c.appendChild(y.firstChild);c.removeChild(y)}t.insertBefore(c,r)}return[f?f.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function patchClass(e,t,r){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,r){const s=e.style,o=isString(r);if(r&&!o){if(t&&!isString(t))for(const n in t)r[n]==null&&setStyle(s,n,"");for(const n in r)setStyle(s,n,r[n])}else{const n=s.display;o?t!==r&&(s.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=n)}}const importantRE=/\s*!important$/;function setStyle(e,t,r){if(isArray(r))r.forEach(s=>setStyle(e,t,s));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const s=autoPrefix(e,t);importantRE.test(r)?e.setProperty(hyphenate(s),r.replace(importantRE,""),"important"):e[s]=r}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const r=prefixCache[t];if(r)return r;let s=camelize(t);if(s!=="filter"&&s in e)return prefixCache[t]=s;s=capitalize(s);for(let o=0;o<prefixes$1.length;o++){const n=prefixes$1[o]+s;if(n in e)return prefixCache[t]=n}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,r,s,o){if(s&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,r);else{const n=isSpecialBooleanAttr(t);r==null||n&&!includeBooleanAttr(r)?e.removeAttribute(t):e.setAttribute(t,n?"":r)}}function patchDOMProp(e,t,r,s,o,n,f){if(t==="innerHTML"||t==="textContent"){s&&f(s,o,n),e[t]=r??"";return}const c=e.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){e._value=r;const _=c==="OPTION"?e.getAttribute("value"):e.value,b=r??"";_!==b&&(e.value=b),r==null&&e.removeAttribute(t);return}let y=!1;if(r===""||r==null){const _=typeof e[t];_==="boolean"?r=includeBooleanAttr(r):r==null&&_==="string"?(r="",y=!0):_==="number"&&(r=0,y=!0)}try{e[t]=r}catch{}y&&e.removeAttribute(t)}function addEventListener(e,t,r,s){e.addEventListener(t,r,s)}function removeEventListener(e,t,r,s){e.removeEventListener(t,r,s)}function patchEvent(e,t,r,s,o=null){const n=e._vei||(e._vei={}),f=n[t];if(s&&f)f.value=s;else{const[c,y]=parseName(t);if(s){const _=n[t]=createInvoker(s,o);addEventListener(e,c,_,y)}else f&&(removeEventListener(e,c,f,y),n[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let s;for(;s=e.match(optionsModifierRE);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,r.value),t,5,[s])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,t){if(isArray(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,r,s,o=!1,n,f,c,y)=>{t==="class"?patchClass(e,s,o):t==="style"?patchStyle(e,r,s):isOn(t)?isModelListener(t)||patchEvent(e,t,r,s,f):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,s,o))?patchDOMProp(e,t,s,n,f,c,y):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),patchAttr(e,t,s,o))};function shouldSetAsProp(e,t,r,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(r)?!1:t in e}const TRANSITION="transition",ANIMATION="animation",Transition$1=(e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t);Transition$1.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition$1.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators);const callHook=(e,t=[])=>{isArray(e)?e.forEach(r=>r(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const z in e)z in DOMTransitionPropsValidators||(t[z]=e[z]);if(e.css===!1)return t;const{name:r="v",type:s,duration:o,enterFromClass:n=`${r}-enter-from`,enterActiveClass:f=`${r}-enter-active`,enterToClass:c=`${r}-enter-to`,appearFromClass:y=n,appearActiveClass:_=f,appearToClass:b=c,leaveFromClass:C=`${r}-leave-from`,leaveActiveClass:M=`${r}-leave-active`,leaveToClass:E=`${r}-leave-to`}=e,P=normalizeDuration(o),a=P&&P[0],u=P&&P[1],{onBeforeEnter:g,onEnter:A,onEnterCancelled:x,onLeave:l,onLeaveCancelled:v,onBeforeAppear:w=g,onAppear:O=A,onAppearCancelled:T=x}=t,D=(z,L,B)=>{removeTransitionClass(z,L?b:c),removeTransitionClass(z,L?_:f),B&&B()},I=(z,L)=>{z._isLeaving=!1,removeTransitionClass(z,C),removeTransitionClass(z,E),removeTransitionClass(z,M),L&&L()},k=z=>(L,B)=>{const H=z?O:A,V=()=>D(L,z,B);callHook(H,[L,V]),nextFrame(()=>{removeTransitionClass(L,z?y:n),addTransitionClass(L,z?b:c),hasExplicitCallback(H)||whenTransitionEnds(L,s,a,V)})};return extend$1(t,{onBeforeEnter(z){callHook(g,[z]),addTransitionClass(z,n),addTransitionClass(z,f)},onBeforeAppear(z){callHook(w,[z]),addTransitionClass(z,y),addTransitionClass(z,_)},onEnter:k(!1),onAppear:k(!0),onLeave(z,L){z._isLeaving=!0;const B=()=>I(z,L);addTransitionClass(z,C),forceReflow(),addTransitionClass(z,M),nextFrame(()=>{z._isLeaving&&(removeTransitionClass(z,C),addTransitionClass(z,E),hasExplicitCallback(l)||whenTransitionEnds(z,s,u,B))}),callHook(l,[z,B])},onEnterCancelled(z){D(z,!1),callHook(x,[z])},onAppearCancelled(z){D(z,!0),callHook(T,[z])},onLeaveCancelled(z){I(z),callHook(v,[z])}})}function normalizeDuration(e){if(e==null)return null;if(isObject(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){return toNumber(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,r,s){const o=e._endId=++endId,n=()=>{o===e._endId&&s()};if(r)return setTimeout(n,r);const{type:f,timeout:c,propCount:y}=getTransitionInfo(e,t);if(!f)return s();const _=f+"end";let b=0;const C=()=>{e.removeEventListener(_,M),n()},M=E=>{E.target===e&&++b>=y&&C()};setTimeout(()=>{b<y&&C()},c+1),e.addEventListener(_,M)}function getTransitionInfo(e,t){const r=window.getComputedStyle(e),s=P=>(r[P]||"").split(", "),o=s(`${TRANSITION}Delay`),n=s(`${TRANSITION}Duration`),f=getTimeout(o,n),c=s(`${ANIMATION}Delay`),y=s(`${ANIMATION}Duration`),_=getTimeout(c,y);let b=null,C=0,M=0;t===TRANSITION?f>0&&(b=TRANSITION,C=f,M=n.length):t===ANIMATION?_>0&&(b=ANIMATION,C=_,M=y.length):(C=Math.max(f,_),b=C>0?f>_?TRANSITION:ANIMATION:null,M=b?b===TRANSITION?n.length:y.length:0);const E=b===TRANSITION&&/\b(transform|all)(,|$)/.test(s(`${TRANSITION}Property`).toString());return{type:b,timeout:C,propCount:M,hasTransform:E}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,s)=>toMs(r)+toMs(e[s])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(r=>e[`${r}Key`]&&!t.includes(r))},withModifiers=(e,t)=>(r,...s)=>{for(let o=0;o<t.length;o++){const n=modifierGuards[t[o]];if(n&&n(r,t))return}return e(r,...s)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>r=>{if(!("key"in r))return;const s=hyphenate(r.key);if(t.some(o=>o===s||keyNames[o]===s))return e(r)},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:r}=t;return t.mount=s=>{const o=normalizeContainer(s);if(!o)return;const n=t._component;!isFunction(n)&&!n.render&&!n.template&&(n.template=o.innerHTML),o.innerHTML="";const f=r(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),f},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}var isVue2=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var MutationType;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const e=effectScope(!0),t=e.run(()=>ref({}));let r=[],s=[];const o=markRaw({install(n){setActivePinia(o),o._a=n,n.provide(piniaSymbol,o),n.config.globalProperties.$pinia=o,s.forEach(f=>r.push(f)),s=[]},use(n){return!this._a&&!isVue2?s.push(n):r.push(n),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return o}const noop$1=()=>{};function addSubscription(e,t,r,s=noop$1){e.push(t);const o=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),s())};return!r&&getCurrentScope()&&onScopeDispose(o),o}function triggerSubscriptions(e,...t){e.slice().forEach(r=>{r(...t)})}const fallbackRunWithContext=e=>e();function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map&&t.forEach((r,s)=>e.set(s,r)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r],o=e[r];isPlainObject(o)&&isPlainObject(s)&&e.hasOwnProperty(r)&&!isRef(s)&&!isReactive(s)?e[r]=mergeReactiveObjects(o,s):e[r]=s}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(e){return!!(isRef(e)&&e.effect)}function createOptionsStore(e,t,r,s){const{state:o,actions:n,getters:f}=t,c=r.state.value[e];let y;function _(){c||(r.state.value[e]=o?o():{});const b=toRefs(r.state.value[e]);return assign(b,n,Object.keys(f||{}).reduce((C,M)=>(C[M]=markRaw(computed(()=>{setActivePinia(r);const E=r._s.get(e);return f[M].call(E,E)})),C),{}))}return y=createSetupStore(e,_,t,r,s,!0),y}function createSetupStore(e,t,r={},s,o,n){let f;const c=assign({actions:{}},r),y={deep:!0};let _,b,C=[],M=[],E;const P=s.state.value[e];!n&&!P&&(s.state.value[e]={}),ref({});let a;function u(T){let D;_=b=!1,typeof T=="function"?(T(s.state.value[e]),D={type:MutationType.patchFunction,storeId:e,events:E}):(mergeReactiveObjects(s.state.value[e],T),D={type:MutationType.patchObject,payload:T,storeId:e,events:E});const I=a=Symbol();nextTick().then(()=>{a===I&&(_=!0)}),b=!0,triggerSubscriptions(C,D,s.state.value[e])}const g=n?function(){const{state:D}=r,I=D?D():{};this.$patch(k=>{assign(k,I)})}:noop$1;function A(){f.stop(),C=[],M=[],s._s.delete(e)}function x(T,D){return function(){setActivePinia(s);const I=Array.from(arguments),k=[],z=[];function L(V){k.push(V)}function B(V){z.push(V)}triggerSubscriptions(M,{args:I,name:T,store:v,after:L,onError:B});let H;try{H=D.apply(this&&this.$id===e?this:v,I)}catch(V){throw triggerSubscriptions(z,V),V}return H instanceof Promise?H.then(V=>(triggerSubscriptions(k,V),V)).catch(V=>(triggerSubscriptions(z,V),Promise.reject(V))):(triggerSubscriptions(k,H),H)}}const l={_p:s,$id:e,$onAction:addSubscription.bind(null,M),$patch:u,$reset:g,$subscribe(T,D={}){const I=addSubscription(C,T,D.detached,()=>k()),k=f.run(()=>watch(()=>s.state.value[e],z=>{(D.flush==="sync"?b:_)&&T({storeId:e,type:MutationType.direct,events:E},z)},assign({},y,D)));return I},$dispose:A},v=reactive(l);s._s.set(e,v);const w=s._a&&s._a.runWithContext||fallbackRunWithContext,O=s._e.run(()=>(f=effectScope(),w(()=>f.run(t))));for(const T in O){const D=O[T];if(isRef(D)&&!isComputed(D)||isReactive(D))n||(P&&shouldHydrate(D)&&(isRef(D)?D.value=P[T]:mergeReactiveObjects(D,P[T])),s.state.value[e][T]=D);else if(typeof D=="function"){const I=x(T,D);O[T]=I,c.actions[T]=D}}return assign(v,O),assign(toRaw(v),O),Object.defineProperty(v,"$state",{get:()=>s.state.value[e],set:T=>{u(D=>{assign(D,T)})}}),s._p.forEach(T=>{assign(v,f.run(()=>T({store:v,app:s._a,pinia:s,options:c})))}),P&&n&&r.hydrate&&r.hydrate(v.$state,P),_=!0,b=!0,v}function defineStore(e,t,r){let s,o;const n=typeof t=="function";typeof e=="string"?(s=e,o=n?r:t):(o=e,s=e.id);function f(c,y){const _=hasInjectionContext();return c=c||(_?inject(piniaSymbol,null):null),c&&setActivePinia(c),c=activePinia,c._s.has(s)||(n?createSetupStore(s,t,o,c):createOptionsStore(s,o,c)),c._s.get(s)}return f.$id=s,f}function storeToRefs(e){{e=toRaw(e);const t={};for(const r in e){const s=e[r];(isRef(s)||isReactive(s))&&(t[r]=toRef(e,r))}return t}}function parseXYZ(e){const t=[],r=e.trim().split(`
`);let s=0;for(;s<r.length;){const o=parseInt(r[s]);s++;const n=r[s],f=parseMoleculeProperties(n);f.id=t.length;const c=buildAtomTypeArray(f.Properties);s++;const y=[];for(let _=0;_<o;_++){const b={},M=r[s+_].split(/ +/);for(let E=0;E<M.length;E++){const P=c[E];P.isArray?(b[P.propertyName]||(b[P.propertyName]=[]),b[P.propertyName].push(getPropertyValue(M[E],P.propertyType))):b[P.propertyName]=getPropertyValue(M[E],P.propertyType)}y.push(b)}s+=o,t.push({moleculeProperties:f,atoms:y})}return t}function buildAtomTypeArray(e){const t=[],r=/(.*?):(.):([0-9]+)(:|$)/g;let s;for(;(s=r.exec(e))!==null;){const o=s[1].trim(),n=s[2].trim(),f=s[3].trim(),c=f>1;for(let y=0;y<f;++y)t.push({propertyName:o,propertyType:n,isArray:c})}return t}function parseMoleculeProperties(e){const t={},r=/(.*?)=(.*?)((?=([^ ]+=)|$))/g;let s;for(;(s=r.exec(e))!==null;){const o=s[1].trim(),n=s[2].trim();t[o]=parsePropertyValue(n)}return t}function parsePropertyValue(e){return e==="T"||e==="F"?e==="T":isNaN(parseFloat(e))?e.startsWith('"')&&e.endsWith('"')?e.substring(1,e.length-1):e:parseFloat(e)}function getPropertyValue(e,t){switch(t){case"L":return e==="T";case"I":return parseInt(e);case"R":return parseFloat(e);case"S":return e}}var particleData=null;async function loadData(){const t=await(await fetch("https://raw.githubusercontent.com/mcaroba/turbogap/master/tutorials/PtAu_NPs_MDS/db2.xyz")).text();particleData=parseXYZ(t)}function isReady(){return particleData!=null}async function getFullAtomData(){return isReady()?particleData.flatMap(e=>{const t=e.moleculeProperties.id;return e.atoms.map(r=>(r.moleculeID=t,r))}):null}async function getParticle(e){return particleData.find(t=>t.id===e)}function getParticles(e){return particleData.filter(t=>e.includes(t.moleculeProperties.id))}async function waitForData(){return new Promise(async(e,t)=>{for(;;)if(isReady()){e(!0);return}else await new Promise(r=>setTimeout(r,200))})}const colorFieldOptions=[{id:"local_energy",label:"Local Energy"},{id:"clmds_cluster",label:"Cluster ID"},{id:"clmds_medoid",label:"Cluster Medoid"},{id:"medoid",label:"Particle Medoid"},{id:"species",label:"Species"},{id:"surface",label:"Surface Atom"}],cooridnateFieldOptions=[{id:"clmds_coordinates",xlabel:"Clustering x coordinate",yLabel:"Clustering y coordinate"}],usePotentialStore=defineStore("potentials",{state:()=>({colorFieldOptions,cooridnateFieldOptions,currentPotential:null,coordinateField:cooridnateFieldOptions[0],colorValueField:colorFieldOptions[0],atomData:[],coordinateData:[],atomColorValues:[],particleData:[],selectedIndices:[],updating:!1}),actions:{getPotential(e){return getParticle(e)},selectCoordinates(e,t,r){this.coordinateField={id:e,xLabel:t,yLabel:r},this.updateCoordinates()},selectLabeling(e){this.colorValueField=this.colorFieldOptions.find(t=>t.id===e.id),this.updateColors()},updateSelection(e,t,r,s,o,n){const f=this.coordinateData.map((_,b)=>b).filter(_=>this.coordinateData[_].x<t&&this.coordinateData[_].x>e&&this.coordinateData[_].y<s&&this.coordinateData[_].y>r),c=n?this.selectedIndices.filter(_=>f.includes(_)):[],y=f.filter(_=>!c.includes(_));for(let _=y.length-1;_>0;_--){const b=Math.floor(Math.random()*(_+1));[y[_],y[b]]=[y[b],y[_]]}c.length<o?this.selectedIndices=c.concat(y.slice(0,o-c.length)):this.selectedIndices=c.slice(0,o)},selectPotential(e){this.currentPotential=this.particleData[e]},unselectPotential(e){this.selectPotential=null},updateParticleData(){this.particleData=getParticles([...new Set(this.atomData.map(e=>e.moleculeID))])},updateCoordinates(){this.coordinateData=this.atomData.map(e=>({x:e[this.coordinateField.id][0],y:e[this.coordinateField.id][1]}))},updateColors(){this.atomColorValues=this.atomData.map(e=>e[this.colorValueField.id])},updateAtomData(){this.updating=!0,waitForData().then(()=>{getFullAtomData().then(e=>{this.atomData=e,this.updateColors(),this.updateCoordinates(),this.updateParticleData(),this.updating=!1}).catch(e=>{console.log(e)})})},init(){this.updateAtomData()},async ready(){return new Promise(async(e,t)=>{for(;;)if(this.updating||this.atomData.length==0)await new Promise(r=>setTimeout(r,200));else{e(!0);break}})}}});let ColorScale$1=class{constructor(){ii(this,"colorValues",[]);ii(this,"colorStops",[]);ii(this,"colors",[]);ii(this,"continous",!1);ii(this,"baseColors",[])}init(t,r){this.baseColors=r;const s=[...new Set(t)];if(typeof t[0]=="string")this.colorValues=s.sort(),this.colors=colorStops(s.length,r),this.colorStops=this.colors,this.continous=!1;else if(s.length<=r.length)this.colorValues=s.sort((o,n)=>o-n),this.colors=r.slice(0,this.colorValues.length),this.colorStops=this.colors,this.continous=!1;else{this.colors=r.map(f=>({r:f.r,g:f.g,b:f.b}));const o=findMinAndMax(t),n=o.max-o.min;this.colorValues=r.map(f=>o.min+n*f.pos),this.colorStops=colorStops(100,r),this.continous=!0}}update(t){this.init(t,this.baseColors)}getColorForValue(t){if(this.continous){const r=this.colorValues.findIndex(s=>s>t);return r==-1?this.colors[this.colors.length-1]:r==0?this.colors[0]:getColor(this.colorValues[r-1],this.colors[r-1],this.colorValues[r],this.colors[r],t)}else return this.colors[this.colorValues.indexOf(t)]}getColors(){return this.colorStops}getSteps(){if(this.continous){const t=findMinAndMax(this.colorValues);return[t.min,t.max]}else return this.colorValues}isContinous(){return this.continous}};function colorStops(e,t){if(t.length>=e)return t.map(r=>({r:r.r,g:r.g,b:r.b})).slice(0,e);{const r=[],s=t.map(o=>({r:o.r,g:o.g,b:o.b}));for(let o=0;o<e;++o){const n=t.findIndex(f=>f.pos>o/e);n==-1?r.push(s[t.length-1]):n==0?r.push(s[0]):r.push(getColor(t[n-1].pos,t[n-1],t[n].pos,t[n],o/e))}return r}}function getColor(e,t,r,s,o){const n=(o-e)/(r-e),f=interpolate$2(t.r,s.r,n),c=interpolate$2(t.g,s.g,n),y=interpolate$2(t.b,s.b,n);return{r:f,g:c,b:y}}function interpolate$2(e,t,r){return Math.floor(e+(t-e)*r)}function findMinAndMax(e){if(e.length===0)return{min:void 0,max:void 0};let t=e[0],r=e[0];for(let s=1;s<e.length;s++)e[s]<t&&(t=e[s]),e[s]>r&&(r=e[s]);return{min:t,max:r}}const colorScales=[{name:"standard",colors:[{pos:0,r:0,g:12,b:12},{pos:.1,r:0,g:0,b:255},{pos:.25,r:179,g:217,b:230},{pos:.4,r:0,g:191,b:0},{pos:.5,r:255,g:255,b:0},{pos:.7,r:255,g:0,b:0},{pos:.9,r:125,g:125,b:125},{pos:1,r:250,g:250,b:250}]},{name:"pm3d",colors:[{pos:0,r:0,g:0,b:0},{pos:.25,r:129,g:4,b:255},{pos:.5,r:180,g:32,b:0},{pos:1,r:255,g:255,b:0}]},{name:"hot",colors:[{pos:0,r:0,g:0,b:0},{pos:.25,r:255,g:0,b:0},{pos:.5,r:255,g:255,b:0},{pos:1,r:255,g:255,b:255}]}],useColorStore=defineStore("colors",{state:()=>({colorScale:null,colorOptions:colorScales}),actions:{setScale(e,t){const r=colorScales.find(o=>o.name===e),s=new ColorScale$1;s.init(t,r.colors),this.colorScale=s}}});function ascending$1(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,r,s;e.length!==2?(t=ascending$1,r=(c,y)=>ascending$1(e(c),y),s=(c,y)=>e(c)-y):(t=e===ascending$1||e===descending?e:zero$1,r=e,s=e);function o(c,y,_=0,b=c.length){if(_<b){if(t(y,y)!==0)return b;do{const C=_+b>>>1;r(c[C],y)<0?_=C+1:b=C}while(_<b)}return _}function n(c,y,_=0,b=c.length){if(_<b){if(t(y,y)!==0)return b;do{const C=_+b>>>1;r(c[C],y)<=0?_=C+1:b=C}while(_<b)}return _}function f(c,y,_=0,b=c.length){const C=o(c,y,_,b-1);return C>_&&s(c[C-1],y)>-s(c[C],y)?C-1:C}return{left:o,center:f,right:n}}function zero$1(){return 0}function number$1(e){return e===null?NaN:+e}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$1).center;const bisect=bisectRight,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,r){const s=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(s)),n=s/Math.pow(10,o),f=n>=e10?10:n>=e5?5:n>=e2?2:1;let c,y,_;return o<0?(_=Math.pow(10,-o)/f,c=Math.round(e*_),y=Math.round(t*_),c/_<e&&++c,y/_>t&&--y,_=-_):(_=Math.pow(10,o)*f,c=Math.round(e/_),y=Math.round(t/_),c*_<e&&++c,y*_>t&&--y),y<c&&.5<=r&&r<2?tickSpec(e,t,r*2):[c,y,_]}function ticks(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[o,n,f]=s?tickSpec(t,e,r):tickSpec(e,t,r);if(!(n>=o))return[];const c=n-o+1,y=new Array(c);if(s)if(f<0)for(let _=0;_<c;++_)y[_]=(n-_)/-f;else for(let _=0;_<c;++_)y[_]=(n-_)*f;else if(f<0)for(let _=0;_<c;++_)y[_]=(o+_)/-f;else for(let _=0;_<c;++_)y[_]=(o+_)*f;return y}function tickIncrement(e,t,r){return t=+t,e=+e,r=+r,tickSpec(e,t,r)[2]}function tickStep(e,t,r){t=+t,e=+e,r=+r;const s=t<e,o=s?tickIncrement(t,e,r):tickIncrement(e,t,r);return(s?-1:1)*(o<0?1/-o:o)}var noop={value:()=>{}};function dispatch(){for(var e=0,t=arguments.length,r={},s;e<t;++e){if(!(s=arguments[e]+"")||s in r||/[\s.]/.test(s))throw new Error("illegal type: "+s);r[s]=[]}return new Dispatch(r)}function Dispatch(e){this._=e}function parseTypenames$1(e,t){return e.trim().split(/^|\s+/).map(function(r){var s="",o=r.indexOf(".");if(o>=0&&(s=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:s}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var r=this._,s=parseTypenames$1(e+"",r),o,n=-1,f=s.length;if(arguments.length<2){for(;++n<f;)if((o=(e=s[n]).type)&&(o=get$1(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<f;)if(o=(e=s[n]).type)r[o]=set$1(r[o],e.name,t);else if(t==null)for(o in r)r[o]=set$1(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Dispatch(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),s=0,o,n;s<o;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],s=0,o=n.length;s<o;++s)n[s].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],o=0,n=s.length;o<n;++o)s[o].value.apply(t,r)}};function get$1(e,t){for(var r=0,s=e.length,o;r<s;++r)if((o=e[r]).name===t)return o.value}function set$1(e,t,r){for(var s=0,o=e.length;s<o;++s)if(e[s].name===t){e[s]=noop,e=e.slice(0,s).concat(e.slice(s+1));break}return r!=null&&e.push({name:t,value:r}),e}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(e):t.createElementNS(r,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(e){return e==null?none:function(){return this.querySelector(e)}}function selection_select(e){typeof e!="function"&&(e=selector(e));for(var t=this._groups,r=t.length,s=new Array(r),o=0;o<r;++o)for(var n=t[o],f=n.length,c=s[o]=new Array(f),y,_,b=0;b<f;++b)(y=n[b])&&(_=e.call(y,y.__data__,b,n))&&("__data__"in y&&(_.__data__=y.__data__),c[b]=_);return new Selection$1(s,this._parents)}function array(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function empty(){return[]}function selectorAll(e){return e==null?empty:function(){return this.querySelectorAll(e)}}function arrayAll(e){return function(){return array(e.apply(this,arguments))}}function selection_selectAll(e){typeof e=="function"?e=arrayAll(e):e=selectorAll(e);for(var t=this._groups,r=t.length,s=[],o=[],n=0;n<r;++n)for(var f=t[n],c=f.length,y,_=0;_<c;++_)(y=f[_])&&(s.push(e.call(y,y.__data__,_,f)),o.push(y));return new Selection$1(s,o)}function matcher(e){return function(){return this.matches(e)}}function childMatcher(e){return function(t){return t.matches(e)}}var find=Array.prototype.find;function childFind(e){return function(){return find.call(this.children,e)}}function childFirst(){return this.firstElementChild}function selection_selectChild(e){return this.select(e==null?childFirst:childFind(typeof e=="function"?e:childMatcher(e)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(e){return function(){return filter.call(this.children,e)}}function selection_selectChildren(e){return this.selectAll(e==null?children:childrenFilter(typeof e=="function"?e:childMatcher(e)))}function selection_filter(e){typeof e!="function"&&(e=matcher(e));for(var t=this._groups,r=t.length,s=new Array(r),o=0;o<r;++o)for(var n=t[o],f=n.length,c=s[o]=[],y,_=0;_<f;++_)(y=n[_])&&e.call(y,y.__data__,_,n)&&c.push(y);return new Selection$1(s,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function constant$2(e){return function(){return e}}function bindIndex(e,t,r,s,o,n){for(var f=0,c,y=t.length,_=n.length;f<_;++f)(c=t[f])?(c.__data__=n[f],s[f]=c):r[f]=new EnterNode(e,n[f]);for(;f<y;++f)(c=t[f])&&(o[f]=c)}function bindKey(e,t,r,s,o,n,f){var c,y,_=new Map,b=t.length,C=n.length,M=new Array(b),E;for(c=0;c<b;++c)(y=t[c])&&(M[c]=E=f.call(y,y.__data__,c,t)+"",_.has(E)?o[c]=y:_.set(E,y));for(c=0;c<C;++c)E=f.call(e,n[c],c,n)+"",(y=_.get(E))?(s[c]=y,y.__data__=n[c],_.delete(E)):r[c]=new EnterNode(e,n[c]);for(c=0;c<b;++c)(y=t[c])&&_.get(M[c])===y&&(o[c]=y)}function datum(e){return e.__data__}function selection_data(e,t){if(!arguments.length)return Array.from(this,datum);var r=t?bindKey:bindIndex,s=this._parents,o=this._groups;typeof e!="function"&&(e=constant$2(e));for(var n=o.length,f=new Array(n),c=new Array(n),y=new Array(n),_=0;_<n;++_){var b=s[_],C=o[_],M=C.length,E=arraylike(e.call(b,b&&b.__data__,_,s)),P=E.length,a=c[_]=new Array(P),u=f[_]=new Array(P),g=y[_]=new Array(M);r(b,C,a,u,g,E,t);for(var A=0,x=0,l,v;A<P;++A)if(l=a[A]){for(A>=x&&(x=A+1);!(v=u[x])&&++x<P;);l._next=v||null}}return f=new Selection$1(f,s),f._enter=c,f._exit=y,f}function arraylike(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,t,r){var s=this.enter(),o=this,n=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?n.remove():r(n),s&&o?s.merge(o).order():o}function selection_merge(e){for(var t=e.selection?e.selection():e,r=this._groups,s=t._groups,o=r.length,n=s.length,f=Math.min(o,n),c=new Array(o),y=0;y<f;++y)for(var _=r[y],b=s[y],C=_.length,M=c[y]=new Array(C),E,P=0;P<C;++P)(E=_[P]||b[P])&&(M[P]=E);for(;y<o;++y)c[y]=r[y];return new Selection$1(c,this._parents)}function selection_order(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var s=e[t],o=s.length-1,n=s[o],f;--o>=0;)(f=s[o])&&(n&&f.compareDocumentPosition(n)^4&&n.parentNode.insertBefore(f,n),n=f);return this}function selection_sort(e){e||(e=ascending);function t(C,M){return C&&M?e(C.__data__,M.__data__):!C-!M}for(var r=this._groups,s=r.length,o=new Array(s),n=0;n<s;++n){for(var f=r[n],c=f.length,y=o[n]=new Array(c),_,b=0;b<c;++b)(_=f[b])&&(y[b]=_);y.sort(t)}return new Selection$1(o,this._parents).order()}function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],o=0,n=s.length;o<n;++o){var f=s[o];if(f)return f}return null}function selection_size(){let e=0;for(const t of this)++e;return e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,r=0,s=t.length;r<s;++r)for(var o=t[r],n=0,f=o.length,c;n<f;++n)(c=o[n])&&e.call(c,c.__data__,n,o);return this}function attrRemove$1(e){return function(){this.removeAttribute(e)}}function attrRemoveNS$1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant$1(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS$1(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction$1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function attrFunctionNS$1(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function selection_attr(e,t){var r=namespace(e);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((t==null?r.local?attrRemoveNS$1:attrRemove$1:typeof t=="function"?r.local?attrFunctionNS$1:attrFunction$1:r.local?attrConstantNS$1:attrConstant$1)(r,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove$1(e){return function(){this.style.removeProperty(e)}}function styleConstant$1(e,t,r){return function(){this.style.setProperty(e,t,r)}}function styleFunction$1(e,t,r){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,r)}}function selection_style(e,t,r){return arguments.length>1?this.each((t==null?styleRemove$1:typeof t=="function"?styleFunction$1:styleConstant$1)(e,t,r??"")):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function selection_property(e,t){return arguments.length>1?this.each((t==null?propertyRemove:typeof t=="function"?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}ClassList.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function classedAdd(e,t){for(var r=classList(e),s=-1,o=t.length;++s<o;)r.add(t[s])}function classedRemove(e,t){for(var r=classList(e),s=-1,o=t.length;++s<o;)r.remove(t[s])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var r=classArray(e+"");if(arguments.length<2){for(var s=classList(this.node()),o=-1,n=r.length;++o<n;)if(!s.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?classedFunction:t?classedTrue:classedFalse)(r,t))}function textRemove(){this.textContent=""}function textConstant$1(e){return function(){this.textContent=e}}function textFunction$1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function selection_text(e){return arguments.length?this.each(e==null?textRemove:(typeof e=="function"?textFunction$1:textConstant$1)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function selection_html(e){return arguments.length?this.each(e==null?htmlRemove:(typeof e=="function"?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t=typeof e=="function"?e:creator(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,t){var r=typeof e=="function"?e:creator(e),s=t==null?constantNull:typeof t=="function"?t:selector(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)})}function remove$1(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove$1)}function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}function contextListener(e){return function(t){e.call(this,t,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map(function(t){var r="",s=t.indexOf(".");return s>=0&&(r=t.slice(s+1),t=t.slice(0,s)),{type:t,name:r}})}function onRemove(e){return function(){var t=this.__on;if(t){for(var r=0,s=-1,o=t.length,n;r<o;++r)n=t[r],(!e.type||n.type===e.type)&&n.name===e.name?this.removeEventListener(n.type,n.listener,n.options):t[++s]=n;++s?t.length=s:delete this.__on}}}function onAdd(e,t,r){return function(){var s=this.__on,o,n=contextListener(t);if(s){for(var f=0,c=s.length;f<c;++f)if((o=s[f]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=n,o.options=r),o.value=t;return}}this.addEventListener(e.type,n,r),o={type:e.type,name:e.name,value:t,listener:n,options:r},s?s.push(o):this.__on=[o]}}function selection_on(e,t,r){var s=parseTypenames(e+""),o,n=s.length,f;if(arguments.length<2){var c=this.node().__on;if(c){for(var y=0,_=c.length,b;y<_;++y)for(o=0,b=c[y];o<n;++o)if((f=s[o]).type===b.type&&f.name===b.name)return b.value}return}for(c=t?onAdd:onRemove,o=0;o<n;++o)this.each(c(s[o],t,r));return this}function dispatchEvent(e,t,r){var s=defaultView(e),o=s.CustomEvent;typeof o=="function"?o=new o(t,r):(o=s.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each((typeof t=="function"?dispatchFunction:dispatchConstant)(e,t))}function*selection_iterator(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],o=0,n=s.length,f;o<n;++o)(f=s[o])&&(yield f)}var root=[null];function Selection$1(e,t){this._groups=e,this._parents=t}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(e){return typeof e=="string"?new Selection$1([[document.querySelector(e)]],[document.documentElement]):new Selection$1([[e]],root)}function sourceEvent(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pointer(e,t){if(e=sourceEvent(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var s=r.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const nonpassivecapture={capture:!0,passive:!1};function noevent$1(e){e.preventDefault(),e.stopImmediatePropagation()}function dragDisable(e){var t=e.document.documentElement,r=select(e).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in t?r.on("selectstart.drag",noevent$1,nonpassivecapture):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yesdrag(e,t){var r=e.document.documentElement,s=select(e).on("dragstart.drag",null);t&&(s.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in r?s.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function define(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function extend(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?rgbn(t):r===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,t,r,s){return s<=0&&(e=t=r=NaN),new Rgb(e,t,r,s)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb(e,t,r,s){return arguments.length===1?rgbConvert(e):new Rgb(e,t,r,s??1)}function Rgb(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}define(Rgb,rgb,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,r,s)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,o=Math.min(t,r,s),n=Math.max(t,r,s),f=NaN,c=n-o,y=(n+o)/2;return c?(t===n?f=(r-s)/c+(r<s)*6:r===n?f=(s-t)/c+2:f=(t-r)/c+4,c/=y<.5?n+o:2-n-o,f*=60):c=y>0&&y<1?0:f,new Hsl(f,c,y,e.opacity)}function hsl(e,t,r,s){return arguments.length===1?hslConvert(e):new Hsl(e,t,r,s??1)}function Hsl(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,o=2*r-s;return new Rgb(hsl2rgb(e>=240?e-240:e+120,o,s),hsl2rgb(e,o,s),hsl2rgb(e<120?e+240:e-120,o,s),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const constant$1=e=>()=>e;function linear$1(e,t){return function(r){return e+r*t}}function exponential(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function gamma(e){return(e=+e)==1?nogamma:function(t,r){return r-t?exponential(t,r,e):constant$1(isNaN(t)?r:t)}}function nogamma(e,t){var r=t-e;return r?linear$1(e,r):constant$1(isNaN(e)?t:e)}const interpolateRgb=function e(t){var r=gamma(t);function s(o,n){var f=r((o=rgb(o)).r,(n=rgb(n)).r),c=r(o.g,n.g),y=r(o.b,n.b),_=nogamma(o.opacity,n.opacity);return function(b){return o.r=f(b),o.g=c(b),o.b=y(b),o.opacity=_(b),o+""}}return s.gamma=e,s}(1);function numberArray(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),o;return function(n){for(o=0;o<r;++o)s[o]=e[o]*(1-n)+t[o]*n;return s}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,o=new Array(s),n=new Array(r),f;for(f=0;f<s;++f)o[f]=interpolate$1(e[f],t[f]);for(;f<r;++f)n[f]=t[f];return function(c){for(f=0;f<s;++f)n[f]=o[f](c);return n}}function date(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function interpolateNumber(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function object(e,t){var r={},s={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=interpolate$1(e[o],t[o]):s[o]=t[o];return function(n){for(o in r)s[o]=r[o](n);return s}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function interpolateString(e,t){var r=reA.lastIndex=reB.lastIndex=0,s,o,n,f=-1,c=[],y=[];for(e=e+"",t=t+"";(s=reA.exec(e))&&(o=reB.exec(t));)(n=o.index)>r&&(n=t.slice(r,n),c[f]?c[f]+=n:c[++f]=n),(s=s[0])===(o=o[0])?c[f]?c[f]+=o:c[++f]=o:(c[++f]=null,y.push({i:f,x:interpolateNumber(s,o)})),r=reB.lastIndex;return r<t.length&&(n=t.slice(r),c[f]?c[f]+=n:c[++f]=n),c.length<2?y[0]?one(y[0].x):zero(t):(t=y.length,function(_){for(var b=0,C;b<t;++b)c[(C=y[b]).i]=C.x(_);return c.join("")})}function interpolate$1(e,t){var r=typeof t,s;return t==null||r==="boolean"?constant$1(t):(r==="number"?interpolateNumber:r==="string"?(s=color(t))?(t=s,interpolateRgb):interpolateString:t instanceof color?interpolateRgb:t instanceof Date?date:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var degrees=180/Math.PI,identity$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(e,t,r,s,o,n){var f,c,y;return(f=Math.sqrt(e*e+t*t))&&(e/=f,t/=f),(y=e*r+t*s)&&(r-=e*y,s-=t*y),(c=Math.sqrt(r*r+s*s))&&(r/=c,s/=c,y/=c),e*s<t*r&&(e=-e,t=-t,y=-y,f=-f),{translateX:o,translateY:n,rotate:Math.atan2(t,e)*degrees,skewX:Math.atan(y)*degrees,scaleX:f,scaleY:c}}var svgNode;function parseCss(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?identity$3:decompose(t.a,t.b,t.c,t.d,t.e,t.f)}function parseSvg(e){return e==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",e),!(e=svgNode.transform.baseVal.consolidate()))?identity$3:(e=e.matrix,decompose(e.a,e.b,e.c,e.d,e.e,e.f))}function interpolateTransform(e,t,r,s){function o(_){return _.length?_.pop()+" ":""}function n(_,b,C,M,E,P){if(_!==C||b!==M){var a=E.push("translate(",null,t,null,r);P.push({i:a-4,x:interpolateNumber(_,C)},{i:a-2,x:interpolateNumber(b,M)})}else(C||M)&&E.push("translate("+C+t+M+r)}function f(_,b,C,M){_!==b?(_-b>180?b+=360:b-_>180&&(_+=360),M.push({i:C.push(o(C)+"rotate(",null,s)-2,x:interpolateNumber(_,b)})):b&&C.push(o(C)+"rotate("+b+s)}function c(_,b,C,M){_!==b?M.push({i:C.push(o(C)+"skewX(",null,s)-2,x:interpolateNumber(_,b)}):b&&C.push(o(C)+"skewX("+b+s)}function y(_,b,C,M,E,P){if(_!==C||b!==M){var a=E.push(o(E)+"scale(",null,",",null,")");P.push({i:a-4,x:interpolateNumber(_,C)},{i:a-2,x:interpolateNumber(b,M)})}else(C!==1||M!==1)&&E.push(o(E)+"scale("+C+","+M+")")}return function(_,b){var C=[],M=[];return _=e(_),b=e(b),n(_.translateX,_.translateY,b.translateX,b.translateY,C,M),f(_.rotate,b.rotate,C,M),c(_.skewX,b.skewX,C,M),y(_.scaleX,_.scaleY,b.scaleX,b.scaleY,C,M),_=b=null,function(E){for(var P=-1,a=M.length,u;++P<a;)C[(u=M[P]).i]=u.x(E);return C.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(e){return((e=Math.exp(e))+1/e)/2}function sinh(e){return((e=Math.exp(e))-1/e)/2}function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}const interpolateZoom=function e(t,r,s){function o(n,f){var c=n[0],y=n[1],_=n[2],b=f[0],C=f[1],M=f[2],E=b-c,P=C-y,a=E*E+P*P,u,g;if(a<epsilon2)g=Math.log(M/_)/t,u=function(O){return[c+O*E,y+O*P,_*Math.exp(t*O*g)]};else{var A=Math.sqrt(a),x=(M*M-_*_+s*a)/(2*_*r*A),l=(M*M-_*_-s*a)/(2*M*r*A),v=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(l*l+1)-l);g=(w-v)/t,u=function(O){var T=O*g,D=cosh(v),I=_/(r*A)*(D*tanh(t*T+v)-sinh(v));return[c+I*E,y+I*P,_*D/cosh(t*T+v)]}}return u.duration=g*1e3*t/Math.SQRT2,u}return o.rho=function(n){var f=Math.max(.001,+n),c=f*f,y=c*c;return e(f,c,y)},o}(Math.SQRT2,2,4);var frame=0,timeout$2=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?now():+r)+(t==null?0:+t),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=r,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(e,t,r){var s=new Timer;return s.restart(e,t,r),s}function timerFlush(){now(),++frame;for(var e=taskHead,t;e;)(t=clockNow-e._time)>=0&&e._call.call(void 0,t),e=e._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$2=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t=taskHead,r,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:taskHead=r);taskTail=e,sleep(s)}function sleep(e){if(!frame){timeout$2&&(timeout$2=clearTimeout(timeout$2));var t=e-clockNow;t>24?(e<1/0&&(timeout$2=setTimeout(wake,e-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout$1(e,t,r){var s=new Timer;return t=t==null?0:+t,s.restart(o=>{s.stop(),e(o+t)},t,r),s}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(e,t,r,s,o,n){var f=e.__transition;if(!f)e.__transition={};else if(r in f)return;create$1(e,r,{name:t,index:s,group:o,on:emptyOn,tween:emptyTween,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:CREATED})}function init(e,t){var r=get(e,t);if(r.state>CREATED)throw new Error("too late; already scheduled");return r}function set(e,t){var r=get(e,t);if(r.state>STARTED)throw new Error("too late; already running");return r}function get(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function create$1(e,t,r){var s=e.__transition,o;s[t]=r,r.timer=timer(n,0,r.time);function n(_){r.state=SCHEDULED,r.timer.restart(f,r.delay,r.time),r.delay<=_&&f(_-r.delay)}function f(_){var b,C,M,E;if(r.state!==SCHEDULED)return y();for(b in s)if(E=s[b],E.name===r.name){if(E.state===STARTED)return timeout$1(f);E.state===RUNNING?(E.state=ENDED,E.timer.stop(),E.on.call("interrupt",e,e.__data__,E.index,E.group),delete s[b]):+b<t&&(E.state=ENDED,E.timer.stop(),E.on.call("cancel",e,e.__data__,E.index,E.group),delete s[b])}if(timeout$1(function(){r.state===STARTED&&(r.state=RUNNING,r.timer.restart(c,r.delay,r.time),c(_))}),r.state=STARTING,r.on.call("start",e,e.__data__,r.index,r.group),r.state===STARTING){for(r.state=STARTED,o=new Array(M=r.tween.length),b=0,C=-1;b<M;++b)(E=r.tween[b].value.call(e,e.__data__,r.index,r.group))&&(o[++C]=E);o.length=C+1}}function c(_){for(var b=_<r.duration?r.ease.call(null,_/r.duration):(r.timer.restart(y),r.state=ENDING,1),C=-1,M=o.length;++C<M;)o[C].call(e,b);r.state===ENDING&&(r.on.call("end",e,e.__data__,r.index,r.group),y())}function y(){r.state=ENDED,r.timer.stop(),delete s[t];for(var _ in s)return;delete e.__transition}}function interrupt(e,t){var r=e.__transition,s,o,n=!0,f;if(r){t=t==null?null:t+"";for(f in r){if((s=r[f]).name!==t){n=!1;continue}o=s.state>STARTING&&s.state<ENDING,s.state=ENDED,s.timer.stop(),s.on.call(o?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete r[f]}n&&delete e.__transition}}function selection_interrupt(e){return this.each(function(){interrupt(this,e)})}function tweenRemove(e,t){var r,s;return function(){var o=set(this,e),n=o.tween;if(n!==r){s=r=n;for(var f=0,c=s.length;f<c;++f)if(s[f].name===t){s=s.slice(),s.splice(f,1);break}}o.tween=s}}function tweenFunction(e,t,r){var s,o;if(typeof r!="function")throw new Error;return function(){var n=set(this,e),f=n.tween;if(f!==s){o=(s=f).slice();for(var c={name:t,value:r},y=0,_=o.length;y<_;++y)if(o[y].name===t){o[y]=c;break}y===_&&o.push(c)}n.tween=o}}function transition_tween(e,t){var r=this._id;if(e+="",arguments.length<2){for(var s=get(this.node(),r).tween,o=0,n=s.length,f;o<n;++o)if((f=s[o]).name===e)return f.value;return null}return this.each((t==null?tweenRemove:tweenFunction)(r,e,t))}function tweenValue(e,t,r){var s=e._id;return e.each(function(){var o=set(this,s);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return get(o,s).value[t]}}function interpolate(e,t){var r;return(typeof t=="number"?interpolateNumber:t instanceof color?interpolateRgb:(r=color(t))?(t=r,interpolateRgb):interpolateString)(e,t)}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t,r){var s,o=r+"",n;return function(){var f=this.getAttribute(e);return f===o?null:f===s?n:n=t(s=f,r)}}function attrConstantNS(e,t,r){var s,o=r+"",n;return function(){var f=this.getAttributeNS(e.space,e.local);return f===o?null:f===s?n:n=t(s=f,r)}}function attrFunction(e,t,r){var s,o,n;return function(){var f,c=r(this),y;return c==null?void this.removeAttribute(e):(f=this.getAttribute(e),y=c+"",f===y?null:f===s&&y===o?n:(o=y,n=t(s=f,c)))}}function attrFunctionNS(e,t,r){var s,o,n;return function(){var f,c=r(this),y;return c==null?void this.removeAttributeNS(e.space,e.local):(f=this.getAttributeNS(e.space,e.local),y=c+"",f===y?null:f===s&&y===o?n:(o=y,n=t(s=f,c)))}}function transition_attr(e,t){var r=namespace(e),s=r==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(e,typeof t=="function"?(r.local?attrFunctionNS:attrFunction)(r,s,tweenValue(this,"attr."+e,t)):t==null?(r.local?attrRemoveNS:attrRemove)(r):(r.local?attrConstantNS:attrConstant)(r,s,t))}function attrInterpolate(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function attrInterpolateNS(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function attrTweenNS(e,t){var r,s;function o(){var n=t.apply(this,arguments);return n!==s&&(r=(s=n)&&attrInterpolateNS(e,n)),r}return o._value=t,o}function attrTween(e,t){var r,s;function o(){var n=t.apply(this,arguments);return n!==s&&(r=(s=n)&&attrInterpolate(e,n)),r}return o._value=t,o}function transition_attrTween(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var s=namespace(e);return this.tween(r,(s.local?attrTweenNS:attrTween)(s,t))}function delayFunction(e,t){return function(){init(this,e).delay=+t.apply(this,arguments)}}function delayConstant(e,t){return t=+t,function(){init(this,e).delay=t}}function transition_delay(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?delayFunction:delayConstant)(t,e)):get(this.node(),t).delay}function durationFunction(e,t){return function(){set(this,e).duration=+t.apply(this,arguments)}}function durationConstant(e,t){return t=+t,function(){set(this,e).duration=t}}function transition_duration(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?durationFunction:durationConstant)(t,e)):get(this.node(),t).duration}function easeConstant(e,t){if(typeof t!="function")throw new Error;return function(){set(this,e).ease=t}}function transition_ease(e){var t=this._id;return arguments.length?this.each(easeConstant(t,e)):get(this.node(),t).ease}function easeVarying(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;set(this,e).ease=r}}function transition_easeVarying(e){if(typeof e!="function")throw new Error;return this.each(easeVarying(this._id,e))}function transition_filter(e){typeof e!="function"&&(e=matcher(e));for(var t=this._groups,r=t.length,s=new Array(r),o=0;o<r;++o)for(var n=t[o],f=n.length,c=s[o]=[],y,_=0;_<f;++_)(y=n[_])&&e.call(y,y.__data__,_,n)&&c.push(y);return new Transition(s,this._parents,this._name,this._id)}function transition_merge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,s=t.length,o=r.length,n=Math.min(s,o),f=new Array(s),c=0;c<n;++c)for(var y=t[c],_=r[c],b=y.length,C=f[c]=new Array(b),M,E=0;E<b;++E)(M=y[E]||_[E])&&(C[E]=M);for(;c<s;++c)f[c]=t[c];return new Transition(f,this._parents,this._name,this._id)}function start(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function onFunction(e,t,r){var s,o,n=start(t)?init:set;return function(){var f=n(this,e),c=f.on;c!==s&&(o=(s=c).copy()).on(t,r),f.on=o}}function transition_on(e,t){var r=this._id;return arguments.length<2?get(this.node(),r).on.on(e):this.each(onFunction(r,e,t))}function removeFunction(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(e){var t=this._name,r=this._id;typeof e!="function"&&(e=selector(e));for(var s=this._groups,o=s.length,n=new Array(o),f=0;f<o;++f)for(var c=s[f],y=c.length,_=n[f]=new Array(y),b,C,M=0;M<y;++M)(b=c[M])&&(C=e.call(b,b.__data__,M,c))&&("__data__"in b&&(C.__data__=b.__data__),_[M]=C,schedule(_[M],t,r,M,_,get(b,r)));return new Transition(n,this._parents,t,r)}function transition_selectAll(e){var t=this._name,r=this._id;typeof e!="function"&&(e=selectorAll(e));for(var s=this._groups,o=s.length,n=[],f=[],c=0;c<o;++c)for(var y=s[c],_=y.length,b,C=0;C<_;++C)if(b=y[C]){for(var M=e.call(b,b.__data__,C,y),E,P=get(b,r),a=0,u=M.length;a<u;++a)(E=M[a])&&schedule(E,t,r,a,M,P);n.push(M),f.push(b)}return new Transition(n,f,t,r)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(e,t){var r,s,o;return function(){var n=styleValue(this,e),f=(this.style.removeProperty(e),styleValue(this,e));return n===f?null:n===r&&f===s?o:o=t(r=n,s=f)}}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,r){var s,o=r+"",n;return function(){var f=styleValue(this,e);return f===o?null:f===s?n:n=t(s=f,r)}}function styleFunction(e,t,r){var s,o,n;return function(){var f=styleValue(this,e),c=r(this),y=c+"";return c==null&&(y=c=(this.style.removeProperty(e),styleValue(this,e))),f===y?null:f===s&&y===o?n:(o=y,n=t(s=f,c))}}function styleMaybeRemove(e,t){var r,s,o,n="style."+t,f="end."+n,c;return function(){var y=set(this,e),_=y.on,b=y.value[n]==null?c||(c=styleRemove(t)):void 0;(_!==r||o!==b)&&(s=(r=_).copy()).on(f,o=b),y.on=s}}function transition_style(e,t,r){var s=(e+="")=="transform"?interpolateTransformCss:interpolate;return t==null?this.styleTween(e,styleNull(e,s)).on("end.style."+e,styleRemove(e)):typeof t=="function"?this.styleTween(e,styleFunction(e,s,tweenValue(this,"style."+e,t))).each(styleMaybeRemove(this._id,e)):this.styleTween(e,styleConstant(e,s,t),r).on("end.style."+e,null)}function styleInterpolate(e,t,r){return function(s){this.style.setProperty(e,t.call(this,s),r)}}function styleTween(e,t,r){var s,o;function n(){var f=t.apply(this,arguments);return f!==o&&(s=(o=f)&&styleInterpolate(e,f,r)),s}return n._value=t,n}function transition_styleTween(e,t,r){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,styleTween(e,t,r??""))}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e(this);this.textContent=t??""}}function transition_text(e){return this.tween("text",typeof e=="function"?textFunction(tweenValue(this,"text",e)):textConstant(e==null?"":e+""))}function textInterpolate(e){return function(t){this.textContent=e.call(this,t)}}function textTween(e){var t,r;function s(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&textInterpolate(o)),t}return s._value=e,s}function transition_textTween(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,textTween(e))}function transition_transition(){for(var e=this._name,t=this._id,r=newId(),s=this._groups,o=s.length,n=0;n<o;++n)for(var f=s[n],c=f.length,y,_=0;_<c;++_)if(y=f[_]){var b=get(y,t);schedule(y,e,r,_,f,{time:b.time+b.delay+b.duration,delay:0,duration:b.duration,ease:b.ease})}return new Transition(s,this._parents,e,r)}function transition_end(){var e,t,r=this,s=r._id,o=r.size();return new Promise(function(n,f){var c={value:f},y={value:function(){--o===0&&n()}};r.each(function(){var _=set(this,s),b=_.on;b!==e&&(t=(e=b).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(y)),_.on=t}),o===0&&n()})}var id=0;function Transition(e,t,r,s){this._groups=e,this._parents=t,this._name=r,this._id=s}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function selection_transition(e){var t,r;e instanceof Transition?(t=e._id,e=e._name):(t=newId(),(r=defaultTiming).time=now(),e=e==null?null:e+"");for(var s=this._groups,o=s.length,n=0;n<o;++n)for(var f=s[n],c=f.length,y,_=0;_<c;++_)(y=f[_])&&schedule(y,e,t,_,f,r||inherit(y,t));return new Transition(s,this._parents,e,t)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(r,s){for(var o=r.length,n=[],f=0,c=e[0],y=0;o>0&&c>0&&(y+c+1>s&&(c=Math.max(1,s-y)),n.push(r.substring(o-=c,o+c)),!((y+=c+1)>s));)c=e[f=(f+1)%e.length];return n.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,r=1,s=-1,o;r<t;++r)switch(e[r]){case".":s=o=r;break;case"0":s===0&&(s=r),o=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(o+1):e}var prefixExponent;function formatPrefixAuto(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var s=r[0],o=r[1],n=o-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,f=s.length;return n===f?s:n>f?s+new Array(n-f+1).join("0"):n>0?s.slice(0,n)+"."+s.slice(n):"0."+new Array(1-n).join("0")+formatDecimalParts(e,Math.max(0,t+n-1))[0]}function formatRounded(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var s=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+s:s.length>o+1?s.slice(0,o+1)+"."+s.slice(o+1):s+new Array(o-s.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$2(e){return e}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(e){var t=e.grouping===void 0||e.thousands===void 0?identity$2:formatGroup(map.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",n=e.numerals===void 0?identity$2:formatNumerals(map.call(e.numerals,String)),f=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",y=e.nan===void 0?"NaN":e.nan+"";function _(C){C=formatSpecifier(C);var M=C.fill,E=C.align,P=C.sign,a=C.symbol,u=C.zero,g=C.width,A=C.comma,x=C.precision,l=C.trim,v=C.type;v==="n"?(A=!0,v="g"):formatTypes[v]||(x===void 0&&(x=12),l=!0,v="g"),(u||M==="0"&&E==="=")&&(u=!0,M="0",E="=");var w=a==="$"?r:a==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",O=a==="$"?s:/[%p]/.test(v)?f:"",T=formatTypes[v],D=/[defgprs%]/.test(v);x=x===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function I(k){var z=w,L=O,B,H,V;if(v==="c")L=T(k)+L,k="";else{k=+k;var N=k<0||1/k<0;if(k=isNaN(k)?y:T(Math.abs(k),x),l&&(k=formatTrim(k)),N&&+k==0&&P!=="+"&&(N=!1),z=(N?P==="("?P:c:P==="-"||P==="("?"":P)+z,L=(v==="s"?prefixes[8+prefixExponent/3]:"")+L+(N&&P==="("?")":""),D){for(B=-1,H=k.length;++B<H;)if(V=k.charCodeAt(B),48>V||V>57){L=(V===46?o+k.slice(B+1):k.slice(B))+L,k=k.slice(0,B);break}}}A&&!u&&(k=t(k,1/0));var U=z.length+k.length+L.length,G=U<g?new Array(g-U+1).join(M):"";switch(A&&u&&(k=t(G+k,G.length?g-L.length:1/0),G=""),E){case"<":k=z+k+L+G;break;case"=":k=z+G+k+L;break;case"^":k=G.slice(0,U=G.length>>1)+z+k+L+G.slice(U);break;default:k=G+z+k+L;break}return n(k)}return I.toString=function(){return C+""},I}function b(C,M){var E=_((C=formatSpecifier(C),C.type="f",C)),P=Math.max(-8,Math.min(8,Math.floor(exponent(M)/3)))*3,a=Math.pow(10,-P),u=prefixes[8+P/3];return function(g){return E(a*g)+u}}return{format:_,formatPrefix:b}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(e){return locale=formatLocale(e),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function constants(e){return function(){return e}}function number(e){return+e}var unit=[0,1];function identity$1(e){return e}function normalize(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function bimap(e,t,r){var s=e[0],o=e[1],n=t[0],f=t[1];return o<s?(s=normalize(o,s),n=r(f,n)):(s=normalize(s,o),n=r(n,f)),function(c){return n(s(c))}}function polymap(e,t,r){var s=Math.min(e.length,t.length)-1,o=new Array(s),n=new Array(s),f=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++f<s;)o[f]=normalize(e[f],e[f+1]),n[f]=r(t[f],t[f+1]);return function(c){var y=bisect(e,c,1,s)-1;return n[y](o[y](c))}}function copy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer(){var e=unit,t=unit,r=interpolate$1,s,o,n,f=identity$1,c,y,_;function b(){var M=Math.min(e.length,t.length);return f!==identity$1&&(f=clamper(e[0],e[M-1])),c=M>2?polymap:bimap,y=_=null,C}function C(M){return M==null||isNaN(M=+M)?n:(y||(y=c(e.map(s),t,r)))(s(f(M)))}return C.invert=function(M){return f(o((_||(_=c(t,e.map(s),interpolateNumber)))(M)))},C.domain=function(M){return arguments.length?(e=Array.from(M,number),b()):e.slice()},C.range=function(M){return arguments.length?(t=Array.from(M),b()):t.slice()},C.rangeRound=function(M){return t=Array.from(M),r=interpolateRound,b()},C.clamp=function(M){return arguments.length?(f=M?!0:identity$1,b()):f!==identity$1},C.interpolate=function(M){return arguments.length?(r=M,b()):r},C.unknown=function(M){return arguments.length?(n=M,C):n},function(M,E){return s=M,o=E,b()}}function continuous(){return transformer()(identity$1,identity$1)}function tickFormat(e,t,r,s){var o=tickStep(e,t,r),n;switch(s=formatSpecifier(s??",f"),s.type){case"s":{var f=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(n=precisionPrefix(o,f))&&(s.precision=n),formatPrefix(s,f)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(n=precisionRound(o,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=n-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(n=precisionFixed(o))&&(s.precision=n-(s.type==="%")*2);break}}return format(s)}function linearish(e){var t=e.domain;return e.ticks=function(r){var s=t();return ticks(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var o=t();return tickFormat(o[0],o[o.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),o=0,n=s.length-1,f=s[o],c=s[n],y,_,b=10;for(c<f&&(_=f,f=c,c=_,_=o,o=n,n=_);b-- >0;){if(_=tickIncrement(f,c,r),_===y)return s[o]=f,s[n]=c,t(s);if(_>0)f=Math.floor(f/_)*_,c=Math.ceil(c/_)*_;else if(_<0)f=Math.ceil(f*_)/_,c=Math.floor(c*_)/_;else break;y=_}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy(e,linear())},initRange.apply(e,arguments),linearish(e)}const constant=e=>()=>e;function ZoomEvent(e,{sourceEvent:t,target:r,transform:s,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:o}})}function Transform(e,t,r){this.k=e,this.x=t,this.y=r}Transform.prototype={constructor:Transform,scale:function(e){return e===1?this:new Transform(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Transform(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(e){e.stopImmediatePropagation()}function noevent(e){e.preventDefault(),e.stopImmediatePropagation()}function defaultFilter(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(e,t,r){var s=e.invertX(t[0][0])-r[0][0],o=e.invertX(t[1][0])-r[1][0],n=e.invertY(t[0][1])-r[0][1],f=e.invertY(t[1][1])-r[1][1];return e.translate(o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o),f>n?(n+f)/2:Math.min(0,n)||Math.max(0,f))}function zoom(){var e=defaultFilter,t=defaultExtent,r=defaultConstrain,s=defaultWheelDelta,o=defaultTouchable,n=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],c=250,y=interpolateZoom,_=dispatch("start","zoom","end"),b,C,M,E=500,P=150,a=0,u=10;function g(B){B.property("__zoom",defaultTransform).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",I).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(B,H,V,N){var U=B.selection?B.selection():B;U.property("__zoom",defaultTransform),B!==U?v(B,H,V,N):U.interrupt().each(function(){w(this,arguments).event(N).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},g.scaleBy=function(B,H,V,N){g.scaleTo(B,function(){var U=this.__zoom.k,G=typeof H=="function"?H.apply(this,arguments):H;return U*G},V,N)},g.scaleTo=function(B,H,V,N){g.transform(B,function(){var U=t.apply(this,arguments),G=this.__zoom,$=V==null?l(U):typeof V=="function"?V.apply(this,arguments):V,W=G.invert($),j=typeof H=="function"?H.apply(this,arguments):H;return r(x(A(G,j),$,W),U,f)},V,N)},g.translateBy=function(B,H,V,N){g.transform(B,function(){return r(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),f)},null,N)},g.translateTo=function(B,H,V,N,U){g.transform(B,function(){var G=t.apply(this,arguments),$=this.__zoom,W=N==null?l(G):typeof N=="function"?N.apply(this,arguments):N;return r(identity.translate(W[0],W[1]).scale($.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof V=="function"?-V.apply(this,arguments):-V),G,f)},N,U)};function A(B,H){return H=Math.max(n[0],Math.min(n[1],H)),H===B.k?B:new Transform(H,B.x,B.y)}function x(B,H,V){var N=H[0]-V[0]*B.k,U=H[1]-V[1]*B.k;return N===B.x&&U===B.y?B:new Transform(B.k,N,U)}function l(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function v(B,H,V,N){B.on("start.zoom",function(){w(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(N).end()}).tween("zoom",function(){var U=this,G=arguments,$=w(U,G).event(N),W=t.apply(U,G),j=V==null?l(W):typeof V=="function"?V.apply(U,G):V,se=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),he=U.__zoom,ce=typeof H=="function"?H.apply(U,G):H,ue=y(he.invert(j).concat(se/he.k),ce.invert(j).concat(se/ce.k));return function(Ee){if(Ee===1)Ee=ce;else{var pe=ue(Ee),fe=se/pe[2];Ee=new Transform(fe,j[0]-pe[0]*fe,j[1]-pe[1]*fe)}$.zoom(null,Ee)}})}function w(B,H,V){return!V&&B.__zooming||new O(B,H)}function O(B,H){this.that=B,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,H),this.taps=0}O.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,H){return this.mouse&&B!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var H=select(this.that).datum();_.call(B,this.that,new ZoomEvent(B,{sourceEvent:this.sourceEvent,target:g,type:B,transform:this.that.__zoom,dispatch:_}),H)}};function T(B,...H){if(!e.apply(this,arguments))return;var V=w(this,H).event(B),N=this.__zoom,U=Math.max(n[0],Math.min(n[1],N.k*Math.pow(2,s.apply(this,arguments)))),G=pointer(B);if(V.wheel)(V.mouse[0][0]!==G[0]||V.mouse[0][1]!==G[1])&&(V.mouse[1]=N.invert(V.mouse[0]=G)),clearTimeout(V.wheel);else{if(N.k===U)return;V.mouse=[G,N.invert(G)],interrupt(this),V.start()}noevent(B),V.wheel=setTimeout($,P),V.zoom("mouse",r(x(A(N,U),V.mouse[0],V.mouse[1]),V.extent,f));function $(){V.wheel=null,V.end()}}function D(B,...H){if(M||!e.apply(this,arguments))return;var V=B.currentTarget,N=w(this,H,!0).event(B),U=select(B.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",se,!0),G=pointer(B,V),$=B.clientX,W=B.clientY;dragDisable(B.view),nopropagation(B),N.mouse=[G,this.__zoom.invert(G)],interrupt(this),N.start();function j(he){if(noevent(he),!N.moved){var ce=he.clientX-$,ue=he.clientY-W;N.moved=ce*ce+ue*ue>a}N.event(he).zoom("mouse",r(x(N.that.__zoom,N.mouse[0]=pointer(he,V),N.mouse[1]),N.extent,f))}function se(he){U.on("mousemove.zoom mouseup.zoom",null),yesdrag(he.view,N.moved),noevent(he),N.event(he).end()}}function I(B,...H){if(e.apply(this,arguments)){var V=this.__zoom,N=pointer(B.changedTouches?B.changedTouches[0]:B,this),U=V.invert(N),G=V.k*(B.shiftKey?.5:2),$=r(x(A(V,G),N,U),t.apply(this,H),f);noevent(B),c>0?select(this).transition().duration(c).call(v,$,N,B):select(this).call(g.transform,$,N,B)}}function k(B,...H){if(e.apply(this,arguments)){var V=B.touches,N=V.length,U=w(this,H,B.changedTouches.length===N).event(B),G,$,W,j;for(nopropagation(B),$=0;$<N;++$)W=V[$],j=pointer(W,this),j=[j,this.__zoom.invert(j),W.identifier],U.touch0?!U.touch1&&U.touch0[2]!==j[2]&&(U.touch1=j,U.taps=0):(U.touch0=j,G=!0,U.taps=1+!!b);b&&(b=clearTimeout(b)),G&&(U.taps<2&&(C=j[0],b=setTimeout(function(){b=null},E)),interrupt(this),U.start())}}function z(B,...H){if(this.__zooming){var V=w(this,H).event(B),N=B.changedTouches,U=N.length,G,$,W,j;for(noevent(B),G=0;G<U;++G)$=N[G],W=pointer($,this),V.touch0&&V.touch0[2]===$.identifier?V.touch0[0]=W:V.touch1&&V.touch1[2]===$.identifier&&(V.touch1[0]=W);if($=V.that.__zoom,V.touch1){var se=V.touch0[0],he=V.touch0[1],ce=V.touch1[0],ue=V.touch1[1],Ee=(Ee=ce[0]-se[0])*Ee+(Ee=ce[1]-se[1])*Ee,pe=(pe=ue[0]-he[0])*pe+(pe=ue[1]-he[1])*pe;$=A($,Math.sqrt(Ee/pe)),W=[(se[0]+ce[0])/2,(se[1]+ce[1])/2],j=[(he[0]+ue[0])/2,(he[1]+ue[1])/2]}else if(V.touch0)W=V.touch0[0],j=V.touch0[1];else return;V.zoom("touch",r(x($,W,j),V.extent,f))}}function L(B,...H){if(this.__zooming){var V=w(this,H).event(B),N=B.changedTouches,U=N.length,G,$;for(nopropagation(B),M&&clearTimeout(M),M=setTimeout(function(){M=null},E),G=0;G<U;++G)$=N[G],V.touch0&&V.touch0[2]===$.identifier?delete V.touch0:V.touch1&&V.touch1[2]===$.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&($=pointer($,this),Math.hypot(C[0]-$[0],C[1]-$[1])<u)){var W=select(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return g.wheelDelta=function(B){return arguments.length?(s=typeof B=="function"?B:constant(+B),g):s},g.filter=function(B){return arguments.length?(e=typeof B=="function"?B:constant(!!B),g):e},g.touchable=function(B){return arguments.length?(o=typeof B=="function"?B:constant(!!B),g):o},g.extent=function(B){return arguments.length?(t=typeof B=="function"?B:constant([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),g):t},g.scaleExtent=function(B){return arguments.length?(n[0]=+B[0],n[1]=+B[1],g):[n[0],n[1]]},g.translateExtent=function(B){return arguments.length?(f[0][0]=+B[0][0],f[1][0]=+B[1][0],f[0][1]=+B[0][1],f[1][1]=+B[1][1],g):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},g.constrain=function(B){return arguments.length?(r=B,g):r},g.duration=function(B){return arguments.length?(c=+B,g):c},g.interpolate=function(B){return arguments.length?(y=B,g):y},g.on=function(){var B=_.on.apply(_,arguments);return B===_?g:B},g.clickDistance=function(B){return arguments.length?(a=(B=+B)*B,g):Math.sqrt(a)},g.tapDistance=function(B){return arguments.length?(u=+B,g):u},g}const Tooltip_vue_vue_type_style_index_0_lang="",_export_sfc=(e,t)=>{const r=e.__vccOpts||e;for(const[s,o]of t)r[s]=o;return r},_sfc_main$b={name:"OverlayComponent",props:{showToolTip:{type:Boolean,default:!1},position:{type:Object,default:{x:0,y:0,maxX:0,maxY:0}},tooltipText:{type:[String,Array],default:""}},setup(){return{overlayContent:ref(null)}},computed:{overlayStyle(){return{left:`${this.leftPosition}px`,top:`${this.topPosition}px`}},overlaySize(){return this.overlayContent?{width:this.overlayContent.offsetWidth,height:this.overlayContent.offsetHeight}:{width:0,height:0}},leftPosition(){return this.position.x+this.overlaySize.width+20>this.position.maxX?this.position.x-this.overlaySize.width-30:this.position.x+10},topPosition(){return this.position.y+this.overlaySize.height+20>this.position.maxY?this.position.y-this.overlaySize.height-10:this.position.y+10},isText(){return typeof tooltipText=="string"}}},_hoisted_1$G={ref:"overlayContent"},_hoisted_2$r={key:0},_hoisted_3$j={key:1};function _sfc_render$9(e,t,r,s,o,n){return r.showToolTip?(openBlock(),createElementBlock("div",{key:0,class:"overlay",style:normalizeStyle(n.overlayStyle)},[createBaseVNode("div",_hoisted_1$G,[n.isText?(openBlock(),createElementBlock("div",_hoisted_2$r,toDisplayString(r.tooltipText),1)):(openBlock(),createElementBlock("div",_hoisted_3$j,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.tooltipText,f=>(openBlock(),createElementBlock("div",null,toDisplayString(f),1))),256))]))],512)],4)):createCommentVNode("",!0)}const Tooltip=_export_sfc(_sfc_main$b,[["render",_sfc_render$9]]),D3Scatter_vue_vue_type_style_index_0_scoped_c9dd22ca_lang="",_sfc_main$a={name:"FlexibleScatterPlot",props:{coordinateData:{type:Array,required:!0},colorData:{type:Array,required:!0},minX:{type:Number,default:-1},maxX:{type:Number,default:1},minY:{type:Number,default:-1},maxY:{type:Number,default:1}},setup(){return{d3container:ref(null)}},emits:["selected","zooming"],data(){return{graphics:null,svg:null,xScale:null,yScale:null,tooltipPosition:{x:0,y:0},showToolTip:!1,tooltipText:"",zoom:null,width:0,height:0,lastZoom:1,xAxis:null,yAxis:null}},mounted(){this.initPlot(),window.addEventListener("resize",this.handleResize)},watch:{colorData:{handler:"updateColors",deep:!0},coordinateData:{handler:"updatePlot",deep:!0},width(){this.updatePlot()},height(){this.updatePlot()}},methods:{handleResize(){this.width=this.d3container?this.d3container.clientWidth:600,this.height=this.d3container?this.d3container.clientHeight:400,this.updatePlot()},initPlot(){this.width=this.d3container?this.d3container.clientWidth:600,this.height=this.d3container?this.d3container.clientHeight:400,this.svg=select(this.$refs.chart),this.graphics=select(this.$refs.graphics),this.svg.attr("width",this.width).attr("height",this.height),this.graphics.on("mouseover",(e,t)=>{select(e.target).attr("r",8),this.showTooltip(e.target.__data__.tooltip,e.clientX,e.clientY)}).on("mouseout",(e,t)=>{select(e.target).attr("r",5),this.hideTooltip()}).on("click",e=>{this.$emit("selected",e.target.__data__.index)}),this.zoom=zoom().scaleExtent([1,8]).translateExtent([[0,0],[this.width,this.height]]).on("zoom",this.handleZoom),this.svg.call(this.zoom),this.updatePlot(),this.updateColors()},handleZoom(e){const{transform:t}=e,r=t.rescaleX(this.xScale).domain(),s=t.rescaleY(this.yScale).domain(),o=t.k>=this.lastZoom;this.$emit("zooming",{XRange:r,YRange:s,zoomIn:o}),this.graphics.attr("transform",t),this.lastZoom=t.k},showTooltip(e,t,r){this.d3container&&(this.tooltipText=e,this.tooltipPosition={x:t,y:r,maxX:this.width+this.d3container.offsetLeft,maxY:this.height+this.d3container.offsetTop},this.showToolTip=!0)},hideTooltip(){this.showToolTip=!1},updatePlot(){if(!this.svg)return;this.xScale=linear().domain([this.minX,this.maxX]).range([0,this.width]),this.yScale=linear().domain([this.minY,this.maxY]).range([this.height,0]),select(this.$refs.chart).attr("width",this.width).attr("height",this.height);const e=this.graphics.selectAll("circle").data(this.coordinateData);e.enter().append("circle").merge(e).attr("cx",t=>this.xScale(t.x)).attr("cy",t=>this.yScale(t.y)).attr("r",5),e.exit().remove()},updateColors(){if(!this.graphics)return;const e=this.graphics.selectAll("circle").data(this.coordinateData);e.attr("fill",(t,r)=>this.colorData[r]),e.exit().remove()}},components:{Tooltip},beforeDestroy(){window.removeEventListener("resize",this.handleResize)}},_hoisted_1$F={class:"scatter-plot-container",ref:"d3container"},_hoisted_2$q={ref:"chart"},_hoisted_3$i={ref:"graphics"};function _sfc_render$8(e,t,r,s,o,n){const f=resolveComponent("Tooltip");return openBlock(),createElementBlock("div",_hoisted_1$F,[(openBlock(),createElementBlock("svg",_hoisted_2$q,[createBaseVNode("g",_hoisted_3$i,null,512)],512)),createVNode(f,{showToolTip:o.showToolTip,position:o.tooltipPosition,tooltipText:o.tooltipText},null,8,["showToolTip","position","tooltipText"])],512)}const D3Scatter=_export_sfc(_sfc_main$a,[["render",_sfc_render$8],["__scopeId","data-v-c9dd22ca"]]),_sfc_main$9={props:{colorScale:{type:Object}},data(){return{chartData:null,chartOptions:null,atomColors:[],atomsToSelect:5e3}},components:{D3Scatter},computed:{d3CoordinateData(){return this.selectedIndices.map(e=>this.coordinateData[e]).map((e,t)=>({x:e.x,y:e.y,tooltip:this.getLabel(t),index:t}))},d3ColorData(){return this.selectedIndices.map(e=>this.atomColors[e])},minmaxCoords(){return this.coordinateData.length>0?this.findMinAndMax(this.coordinateData):{minX:-1,maxX:1,minY:-1,maxY:1}}},emits:["selectPotential","unSelect"],watch:{atomColorValues(e){this.colorScale!=null&&this.colorScale.update(e),this.updateColors()},minmaxCoords(e){this.potentialStore.updateSelection(e.minX,e.maxX,e.minY,e.maxY,this.atomsToSelect,!1)}},methods:{selectPotential(e){this.$emit("selectPotential",e)},getLabel(e){const t=this.atomData[e];return[`Cluster: ${t.cluster}`,`Local_energy: ${t.local_energy}`,`Medoid: ${t.medoid}`,`Species: ${t.species}`,`Surface: ${t.surface}`]},updateColors(){this.atomColors=this.atomColorValues.map(e=>{const t=this.colorScale?this.colorScale.getColorForValue(e):{r:0,g:0,b:255};return`rgb(${t.r},${t.g},${t.b})`})},findMinAndMax(e){var t=e[0].x,r=e[0].y,s=e[0].x,o=e[0].y;return e.forEach(n=>{n.x>s&&(s=n.x),n.x<t&&(t=n.x),n.y>o&&(o=n.y),n.y<r&&(r=n.y)}),{minX:t,maxX:s,minY:r,maxY:o}},updateSelection(e){this.potentialStore.updateSelection(e.XRange[0],e.XRange[1],e.YRange[0],e.YRange[1],this.atomsToSelect,e.zoomIn)}},setup(){const e=usePotentialStore(),{atomData:t,coordinateData:r,atomColorValues:s,selectedIndices:o}=storeToRefs(e);return{atomData:t,coordinateData:r,atomColorValues:s,selectedIndices:o,potentialStore:e}},mounted(){this.updateColors(),this.potentialStore.updateSelection(this.minmaxCoords.minX,this.minmaxCoords.maxX,this.minmaxCoords.minY,this.minmaxCoords.maxY,this.atomsToSelect,!1)}},_hoisted_1$E={class:"h-full"};function _sfc_render$7(e,t,r,s,o,n){const f=resolveComponent("D3Scatter");return openBlock(),createElementBlock("div",_hoisted_1$E,[createVNode(f,{minX:n.minmaxCoords.minX,maxX:n.minmaxCoords.maxX,minY:n.minmaxCoords.minY,maxY:n.minmaxCoords.maxY,onSelected:n.selectPotential,onZooming:n.updateSelection,colorData:n.d3ColorData,coordinateData:n.d3CoordinateData},null,8,["minX","maxX","minY","maxY","onSelected","onZooming","colorData","coordinateData"])])}const StructureSelector=_export_sfc(_sfc_main$9,[["render",_sfc_render$7]]);var DomHandler={innerWidth(e){if(e){let t=e.offsetWidth,r=getComputedStyle(e);return t+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),t}return 0},width(e){if(e){let t=e.offsetWidth,r=getComputedStyle(e);return t-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),t}return 0},getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)},getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)},getOuterWidth(e,t){if(e){let r=e.offsetWidth;if(t){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}return 0},getOuterHeight(e,t){if(e){let r=e.offsetHeight;if(t){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}return 0},getClientHeight(e,t){if(e){let r=e.clientHeight;if(t){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}return 0},getViewport(){let e=window,t=document,r=t.documentElement,s=t.getElementsByTagName("body")[0],o=e.innerWidth||r.clientWidth||s.clientWidth,n=e.innerHeight||r.clientHeight||s.clientHeight;return{width:o,height:n}},getOffset(e){if(e){let t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}return{top:"auto",left:"auto"}},index(e){if(e){let t=e.parentNode.childNodes,r=0;for(let s=0;s<t.length;s++){if(t[s]===e)return r;t[s].nodeType===1&&r++}}return-1},addMultipleClasses(e,t){if(e&&t)if(e.classList){let r=t.split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=t.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}},addClass(e,t){e&&t&&(e.classList?e.classList.add(t):e.className+=" "+t)},removeClass(e,t){e&&t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},hasClass(e,t){return e?e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className):!1},find(e,t){return this.isElement(e)?e.querySelectorAll(t):[]},findSingle(e,t){return this.isElement(e)?e.querySelector(t):null},getHeight(e){if(e){let t=e.offsetHeight,r=getComputedStyle(e);return t-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),t}return 0},getWidth(e){if(e){let t=e.offsetWidth,r=getComputedStyle(e);return t-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),t}return 0},absolutePosition(e,t){if(e){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,n=t.offsetHeight,f=t.offsetWidth,c=t.getBoundingClientRect(),y=this.getWindowScrollTop(),_=this.getWindowScrollLeft(),b=this.getViewport(),C,M;c.top+n+s>b.height?(C=c.top+y-s,e.style.transformOrigin="bottom",C<0&&(C=y)):(C=n+c.top+y,e.style.transformOrigin="top"),c.left+o>b.width?M=Math.max(0,c.left+_+f-o):M=c.left+_,e.style.top=C+"px",e.style.left=M+"px"}},relativePosition(e,t){if(e){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=t.offsetHeight,o=t.getBoundingClientRect(),n=this.getViewport();let f,c;o.top+s+r.height>n.height?(f=-1*r.height,e.style.transformOrigin="bottom",o.top+f<0&&(f=-1*o.top)):(f=s,e.style.transformOrigin="top"),r.width>n.width?c=o.left*-1:o.left+r.width>n.width?c=(o.left+r.width-n.width)*-1:c=0,e.style.top=f+"px",e.style.left=c+"px"}},getParents(e,t=[]){return e.parentNode===null?t:this.getParents(e.parentNode,t.concat([e.parentNode]))},getScrollableParents(e){let t=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=n=>{let f=window.getComputedStyle(n,null);return s.test(f.getPropertyValue("overflow"))||s.test(f.getPropertyValue("overflowX"))||s.test(f.getPropertyValue("overflowY"))};for(let n of r){let f=n.nodeType===1&&n.dataset.scrollselectors;if(f){let c=f.split(",");for(let y of c){let _=this.findSingle(n,y);_&&o(_)&&t.push(_)}}n.nodeType!==9&&o(n)&&t.push(n)}}return t},getHiddenElementOuterHeight(e){if(e){e.style.visibility="hidden",e.style.display="block";let t=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",t}return 0},getHiddenElementOuterWidth(e){if(e){e.style.visibility="hidden",e.style.display="block";let t=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",t}return 0},getHiddenElementDimensions(e){if(e){let t={};return e.style.visibility="hidden",e.style.display="block",t.width=e.offsetWidth,t.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",t}return 0},fadeIn(e,t){if(e){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity+(new Date().getTime()-r)/t,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}},fadeOut(e,t){if(e){let r=1,s=50,o=t,n=s/o,f=setInterval(()=>{r-=n,r<=0&&(r=0,clearInterval(f)),e.style.opacity=r},s)}},getUserAgent(){return navigator.userAgent},appendChild(e,t){if(this.isElement(t))t.appendChild(e);else if(t.el&&t.elElement)t.elElement.appendChild(e);else throw new Error("Cannot append "+t+" to "+e)},isElement(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},scrollInView(e,t){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),n=o?parseFloat(o):0,f=e.getBoundingClientRect(),y=t.getBoundingClientRect().top+document.body.scrollTop-(f.top+document.body.scrollTop)-s-n,_=e.scrollTop,b=e.clientHeight,C=this.getOuterHeight(t);y<0?e.scrollTop=_+y:y+C>b&&(e.scrollTop=_+y-b+C)},clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}},getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null},calculateScrollbarWidth(){if(this.calculatedScrollbarWidth!=null)return this.calculatedScrollbarWidth;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),this.calculatedScrollbarWidth=t,t},getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser},resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),t=/(chrome)[ ]([\w.]+)/.exec(e)||/(webkit)[ ]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},isVisible(e){return e&&e.offsetParent!=null},invokeElementMethod(e,t,r){e[t].apply(e,r)},isExist(e){return!!(e!==null&&typeof e<"u"&&e.nodeName&&e.parentNode)},isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)},focus(e,t){e&&document.activeElement!==e&&e.focus(t)},isFocusableElement(e,t=""){return this.isElement(e)?e.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`):!1},getFocusableElements(e,t=""){let r=this.find(e,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`),s=[];for(let o of r)getComputedStyle(o).display!="none"&&getComputedStyle(o).visibility!="hidden"&&s.push(o);return s},getFirstFocusableElement(e,t){const r=this.getFocusableElements(e,t);return r.length>0?r[0]:null},getLastFocusableElement(e,t){const r=this.getFocusableElements(e,t);return r.length>0?r[r.length-1]:null},getNextFocusableElement(e,t,r){const s=this.getFocusableElements(e,r),o=s.length>0?s.findIndex(f=>f===t):-1,n=o>-1&&s.length>=o+1?o+1:-1;return n>-1?s[n]:null},isClickable(e){if(e){const t=e.nodeName,r=e.parentElement&&e.parentElement.nodeName;return t==="INPUT"||t==="TEXTAREA"||t==="BUTTON"||t==="A"||r==="INPUT"||r==="TEXTAREA"||r==="BUTTON"||r==="A"||!!e.closest(".p-button, .p-checkbox, .p-radiobutton")}return!1},applyStyle(e,t){if(typeof t=="string")e.style.cssText=t;else for(let r in t)e.style[r]=t[r]},isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isAndroid(){return/(android)/i.test(navigator.userAgent)},isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},exportCSV(e,t){let r=new Blob([e],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(r,t+".csv");else{let s=document.createElement("a");s.download!==void 0?(s.setAttribute("href",URL.createObjectURL(r)),s.setAttribute("download",t+".csv"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)):(e="data:text/csv;charset=utf-8,"+e,window.open(encodeURI(e)))}}};class ConnectedOverlayScrollHandler{constructor(t,r=()=>{}){this.element=t,this.listener=r}bindScrollListener(){this.scrollableParents=DomHandler.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}function primebus(){const e=new Map;return{on(t,r){let s=e.get(t);s?s.push(r):s=[r],e.set(t,s)},off(t,r){let s=e.get(t);s&&s.splice(s.indexOf(r)>>>0,1)},emit(t,r){let s=e.get(t);s&&s.slice().map(o=>{o(r)})}}}var ObjectUtils={equals(e,t,r){return r?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.deepEquals(e,t)},deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),s=Array.isArray(t),o,n,f;if(r&&s){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!this.deepEquals(e[o],t[o]))return!1;return!0}if(r!=s)return!1;var c=e instanceof Date,y=t instanceof Date;if(c!=y)return!1;if(c&&y)return e.getTime()==t.getTime();var _=e instanceof RegExp,b=t instanceof RegExp;if(_!=b)return!1;if(_&&b)return e.toString()==t.toString();var C=Object.keys(e);if(n=C.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,C[o]))return!1;for(o=n;o--!==0;)if(f=C[o],!this.deepEquals(e[f],t[f]))return!1;return!0}return e!==e&&t!==t},resolveFieldData(e,t){if(e&&Object.keys(e).length&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")===-1)return e[t];{let o=t.split("."),n=e;for(var r=0,s=o.length;r<s;++r){if(n==null)return null;n=n[o[r]]}return n}}else return null},isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},getItemValue(e,...t){return this.isFunction(e)?e(...t):e},filter(e,t,r){var s=[];if(e){for(let o of e)for(let n of t)if(String(this.resolveFieldData(o,n)).toLowerCase().indexOf(r.toLowerCase())>-1){s.push(o);break}}return s},reorderArray(e,t,r){e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))},findIndexInList(e,t){let r=-1;if(t){for(let s=0;s<t.length;s++)if(t[s]===e){r=s;break}}return r},contains(e,t){if(e!=null&&t&&t.length){for(let r of t)if(this.equals(e,r))return!0}return!1},insertIntoOrderedArray(e,t,r,s){if(r.length>0){let o=!1;for(let n=0;n<r.length;n++)if(this.findIndexInList(r[n],s)>t){r.splice(n,0,e),o=!0;break}o||r.push(e)}else r.push(e)},removeAccents(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e},getVNodeProp(e,t){let r=e.props;if(r){let s=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=Object.prototype.hasOwnProperty.call(r,s)?s:t;return e.type.props[t].type===Boolean&&r[o]===""?!0:r[o]}return null},convertToFlatCase(e){return this.isNotEmpty(e)?e.replace(/(-|_)/g,"").toLowerCase():e},isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!(e instanceof Date)&&typeof e=="object"&&Object.keys(e).length===0},isNotEmpty(e){return!this.isEmpty(e)},isPrintableCharacter(e=""){return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)},findLast(e,t){let r;if(this.isNotEmpty(e))try{r=e.findLast(t)}catch{r=[...e].reverse().find(t)}return r},findLastIndex(e,t){let r=-1;if(this.isNotEmpty(e))try{r=e.findLastIndex(t)}catch{r=e.lastIndexOf([...e].reverse().find(t))}return r}},lastId=0;function UniqueComponentId(e="pv_id_"){return lastId++,`${e}${lastId}`}function handler(){let e=[];const t=(f,c,y=999)=>{const _=o(f,c,y),b=_.value+(_.key===f?0:y)+1;return e.push({key:f,value:b}),b},r=f=>{e=e.filter(c=>c.value!==f)},s=(f,c)=>o(f,c).value,o=(f,c,y=0)=>[...e].reverse().find(_=>c?!0:_.key===f)||{key:f,value:y},n=f=>f&&parseInt(f.style.zIndex,10)||0;return{get:n,set:(f,c,y)=>{c&&(c.style.zIndex=String(t(f,!0,y)))},clear:f=>{f&&(r(n(f)),f.style.zIndex="")},getCurrent:f=>s(f,!0)}}var ZIndexUtils=handler();const FilterMatchMode={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},FilterOperator={AND:"and",OR:"or"},FilterService={filter(e,t,r,s,o){let n=[];if(e)for(let f of e)for(let c of t){let y=ObjectUtils.resolveFieldData(f,c);if(this.filters[s](y,r,o)){n.push(f);break}}return n},filters:{startsWith(e,t,r){if(t==null||t.trim()==="")return!0;if(e==null)return!1;let s=ObjectUtils.removeAccents(t.toString()).toLocaleLowerCase(r);return ObjectUtils.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains(e,t,r){if(t==null||typeof t=="string"&&t.trim()==="")return!0;if(e==null)return!1;let s=ObjectUtils.removeAccents(t.toString()).toLocaleLowerCase(r);return ObjectUtils.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)!==-1},notContains(e,t,r){if(t==null||typeof t=="string"&&t.trim()==="")return!0;if(e==null)return!1;let s=ObjectUtils.removeAccents(t.toString()).toLocaleLowerCase(r);return ObjectUtils.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)===-1},endsWith(e,t,r){if(t==null||t.trim()==="")return!0;if(e==null)return!1;let s=ObjectUtils.removeAccents(t.toString()).toLocaleLowerCase(r),o=ObjectUtils.removeAccents(e.toString()).toLocaleLowerCase(r);return o.indexOf(s,o.length-s.length)!==-1},equals(e,t,r){return t==null||typeof t=="string"&&t.trim()===""?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()===t.getTime():ObjectUtils.removeAccents(e.toString()).toLocaleLowerCase(r)==ObjectUtils.removeAccents(t.toString()).toLocaleLowerCase(r)},notEquals(e,t,r){return t==null||typeof t=="string"&&t.trim()===""?!1:e==null?!0:e.getTime&&t.getTime?e.getTime()!==t.getTime():ObjectUtils.removeAccents(e.toString()).toLocaleLowerCase(r)!=ObjectUtils.removeAccents(t.toString()).toLocaleLowerCase(r)},in(e,t){if(t==null||t.length===0)return!0;for(let r=0;r<t.length;r++)if(ObjectUtils.equals(e,t[r]))return!0;return!1},between(e,t){return t==null||t[0]==null||t[1]==null?!0:e==null?!1:e.getTime?t[0].getTime()<=e.getTime()&&e.getTime()<=t[1].getTime():t[0]<=e&&e<=t[1]},lt(e,t){return t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()<t.getTime():e<t},lte(e,t){return t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()<=t.getTime():e<=t},gt(e,t){return t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()>t.getTime():e>t},gte(e,t){return t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()>=t.getTime():e>=t},dateIs(e,t){return t==null?!0:e==null?!1:e.toDateString()===t.toDateString()},dateIsNot(e,t){return t==null?!0:e==null?!1:e.toDateString()!==t.toDateString()},dateBefore(e,t){return t==null?!0:e==null?!1:e.getTime()<t.getTime()},dateAfter(e,t){return t==null?!0:e==null?!1:e.getTime()>t.getTime()}},register(e,t){this.filters[e]=t}};var script$H={name:"BaseComponent",props:{pt:{type:Object,default:void 0}},methods:{getOption(e={},t=""){const r=ObjectUtils.convertToFlatCase(t);return e[Object.keys(e).find(s=>ObjectUtils.convertToFlatCase(s)===r)||""]},getPTValue(e={},t="",r={}){const s=ObjectUtils.getItemValue(this.getOption(e,t),r),o=ObjectUtils.getItemValue(this.getOption(this.defaultPT,t),r);return mergeProps(s,o)},ptm(e="",t={}){return this.getPTValue(this.pt,e,{props:this.$props,state:this.$data,...t})},ptmo(e={},t="",r={}){return this.getPTValue(e,t,r)}},computed:{defaultPT(){return ObjectUtils.getItemValue(this.getOption(this.$primevue.config.pt,this.$.type.name),this.defaultsParams)},defaultsParams(){return{instance:this.$}}}},script$G={name:"BaseIcon",props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},methods:{pti(){const e=ObjectUtils.isEmpty(this.label);return{class:["p-icon",{"p-icon-spin":this.spin}],role:e?void 0:"img","aria-label":e?void 0:this.label,"aria-hidden":e}}}};function styleInject$6(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$6=`
.p-icon {
    display: inline-block;
}
.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}
@-webkit-keyframes p-icon-spin {
0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
}
100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
}
}
@keyframes p-icon-spin {
0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
}
100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
}
}
`;styleInject$6(css_248z$6);var script$F={name:"ChevronDownIcon",extends:script$G};const _hoisted_1$D=createBaseVNode("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"},null,-1),_hoisted_2$p=[_hoisted_1$D];function render$F(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$p,16)}script$F.render=render$F;var script$E={name:"FilterIcon",extends:script$G};const _hoisted_1$C=createBaseVNode("g",{"clip-path":"url(#clip0_390_17708)"},[createBaseVNode("path",{d:"M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z",fill:"currentColor"})],-1),_hoisted_2$o=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_390_17708"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$h=[_hoisted_1$C,_hoisted_2$o];function render$E(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$h,16)}script$E.render=render$E;var script$D={name:"SpinnerIcon",extends:script$G};const _hoisted_1$B=createBaseVNode("g",{"clip-path":"url(#clip0_417_21408)"},[createBaseVNode("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"})],-1),_hoisted_2$n=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_417_21408"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$g=[_hoisted_1$B,_hoisted_2$n];function render$D(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$g,16)}script$D.render=render$D;var script$C={name:"TimesIcon",extends:script$G};const _hoisted_1$A=createBaseVNode("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"},null,-1),_hoisted_2$m=[_hoisted_1$A];function render$C(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$m,16)}script$C.render=render$C;var OverlayEventBus=primebus(),script$B={name:"Portal",props:{appendTo:{type:String,default:"body"},disabled:{type:Boolean,default:!1}},data(){return{mounted:!1}},mounted(){this.mounted=DomHandler.isClient()},computed:{inline(){return this.disabled||this.appendTo==="self"}}};function render$B(e,t,r,s,o,n){return n.inline?renderSlot(e.$slots,"default",{key:0}):o.mounted?(openBlock(),createBlock(Teleport,{key:1,to:r.appendTo},[renderSlot(e.$slots,"default")],8,["to"])):createCommentVNode("",!0)}script$B.render=render$B;let timeout;function bindEvents(e){e.addEventListener("mousedown",onMouseDown)}function unbindEvents(e){e.removeEventListener("mousedown",onMouseDown)}function create(e){let t=document.createElement("span");t.className="p-ink",t.setAttribute("role","presentation"),t.setAttribute("aria-hidden","true"),e.appendChild(t),t.addEventListener("animationend",onAnimationEnd)}function remove(e){let t=getInk(e);t&&(unbindEvents(e),t.removeEventListener("animationend",onAnimationEnd),t.remove())}function onMouseDown(e){let t=e.currentTarget,r=getInk(t);if(!r||getComputedStyle(r,null).display==="none")return;if(DomHandler.removeClass(r,"p-ink-active"),!DomHandler.getHeight(r)&&!DomHandler.getWidth(r)){let f=Math.max(DomHandler.getOuterWidth(t),DomHandler.getOuterHeight(t));r.style.height=f+"px",r.style.width=f+"px"}let s=DomHandler.getOffset(t),o=e.pageX-s.left+document.body.scrollTop-DomHandler.getWidth(r)/2,n=e.pageY-s.top+document.body.scrollLeft-DomHandler.getHeight(r)/2;r.style.top=n+"px",r.style.left=o+"px",DomHandler.addClass(r,"p-ink-active"),timeout=setTimeout(()=>{r&&DomHandler.removeClass(r,"p-ink-active")},401)}function onAnimationEnd(e){timeout&&clearTimeout(timeout),DomHandler.removeClass(e.currentTarget,"p-ink-active")}function getInk(e){for(let t=0;t<e.children.length;t++)if(typeof e.children[t].className=="string"&&e.children[t].className.indexOf("p-ink")!==-1)return e.children[t];return null}const Ripple={mounted(e,t){t.instance.$primevue&&t.instance.$primevue.config&&t.instance.$primevue.config.ripple&&(create(e),bindEvents(e))},unmounted(e){remove(e)}};var script$A={name:"VirtualScroller",extends:script$H,emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},resizeDelay:{type:Number,default:10},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1},tabindex:{type:Number,default:0},inline:{type:Boolean,default:!1},step:{type:Number,default:0},appendOnly:{type:Boolean,default:!1},autoSize:{type:Boolean,default:!1}},data(){return{first:this.isBoth()?{rows:0,cols:0}:0,last:this.isBoth()?{rows:0,cols:0}:0,page:this.isBoth()?{rows:0,cols:0}:0,numItemsInViewport:this.isBoth()?{rows:0,cols:0}:0,lastScrollPos:this.isBoth()?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,resizeTimeout:null,defaultWidth:0,defaultHeight:0,defaultContentWidth:0,defaultContentHeight:0,isRangeChanged:!1,lazyLoadState:{},resizeListener:null,initialized:!1,watch:{numToleratedItems(e){this.d_numToleratedItems=e},loading(e){this.d_loading=e},items(e,t){(!t||t.length!==(e||[]).length)&&(this.init(),this.calculateAutoSize())},itemSize(){this.init(),this.calculateAutoSize()},orientation(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},scrollHeight(){this.init(),this.calculateAutoSize()},scrollWidth(){this.init(),this.calculateAutoSize()}},mounted(){this.viewInit(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0,this.lazyLoadState=this.lazyLoadState||{}},updated(){!this.initialized&&this.viewInit()},unmounted(){this.unbindResizeListener(),this.initialized=!1},methods:{viewInit(){DomHandler.isVisible(this.element)&&(this.setContentEl(this.content),this.init(),this.bindResizeListener(),this.defaultWidth=DomHandler.getWidth(this.element),this.defaultHeight=DomHandler.getHeight(this.element),this.defaultContentWidth=DomHandler.getWidth(this.content),this.defaultContentHeight=DomHandler.getHeight(this.content),this.initialized=!0)},init(){this.disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize())},isVertical(){return this.orientation==="vertical"},isHorizontal(){return this.orientation==="horizontal"},isBoth(){return this.orientation==="both"},scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.element&&this.element.scrollTo(e)},scrollToIndex(e,t="auto"){const r=this.isBoth(),s=this.isHorizontal(),o=this.first,{numToleratedItems:n}=this.calculateNumItems(),f=this.getContentPosition(),c=this.itemSize,y=(E=0,P)=>E<=P?0:E,_=(E,P,a)=>E*P+a,b=(E=0,P=0)=>this.scrollTo({left:E,top:P,behavior:t});let C=r?{rows:0,cols:0}:0,M=!1;r?(C={rows:y(e[0],n[0]),cols:y(e[1],n[1])},b(_(C.cols,c[1],f.left),_(C.rows,c[0],f.top)),M=C.rows!==o.rows||C.cols!==o.cols):(C=y(e,n),s?b(_(C,c,f.left),0):b(0,_(C,c,f.top)),M=C!==o),this.isRangeChanged=M,this.first=C},scrollInView(e,t,r="auto"){if(t){const s=this.isBoth(),o=this.isHorizontal(),{first:n,viewport:f}=this.getRenderedRange(),c=(b=0,C=0)=>this.scrollTo({left:b,top:C,behavior:r}),y=t==="to-start",_=t==="to-end";if(y){if(s)f.first.rows-n.rows>e[0]?c(f.first.cols*this.itemSize[1],(f.first.rows-1)*this.itemSize[0]):f.first.cols-n.cols>e[1]&&c((f.first.cols-1)*this.itemSize[1],f.first.rows*this.itemSize[0]);else if(f.first-n>e){const b=(f.first-1)*this.itemSize;o?c(b,0):c(0,b)}}else if(_){if(s)f.last.rows-n.rows<=e[0]+1?c(f.first.cols*this.itemSize[1],(f.first.rows+1)*this.itemSize[0]):f.last.cols-n.cols<=e[1]+1&&c((f.first.cols+1)*this.itemSize[1],f.first.rows*this.itemSize[0]);else if(f.last-n<=e+1){const b=(f.first+1)*this.itemSize;o?c(b,0):c(0,b)}}}else this.scrollToIndex(e,r)},getRenderedRange(){const e=(s,o)=>Math.floor(s/(o||s));let t=this.first,r=0;if(this.element){const s=this.isBoth(),o=this.isHorizontal(),{scrollTop:n,scrollLeft:f}=this.element.scrollTop;s?(t={rows:e(n,this.itemSize[0]),cols:e(f,this.itemSize[1])},r={rows:t.rows+this.numItemsInViewport.rows,cols:t.cols+this.numItemsInViewport.cols}):(t=e(o?f:n,this.itemSize),r=t+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:t,last:r}}},calculateNumItems(){const e=this.isBoth(),t=this.isHorizontal(),r=this.itemSize,s=this.getContentPosition(),o=this.element?this.element.offsetWidth-s.left:0,n=this.element?this.element.offsetHeight-s.top:0,f=(b,C)=>Math.ceil(b/(C||b)),c=b=>Math.ceil(b/2),y=e?{rows:f(n,r[0]),cols:f(o,r[1])}:f(t?o:n,r),_=this.d_numToleratedItems||(e?[c(y.rows),c(y.cols)]:c(y));return{numItemsInViewport:y,numToleratedItems:_}},calculateOptions(){const e=this.isBoth(),t=this.first,{numItemsInViewport:r,numToleratedItems:s}=this.calculateNumItems(),o=(f,c,y,_=!1)=>this.getLast(f+c+(f<y?2:3)*y,_),n=e?{rows:o(t.rows,r.rows,s[0]),cols:o(t.cols,r.cols,s[1],!0)}:o(t,r,s);this.last=n,this.numItemsInViewport=r,this.d_numToleratedItems=s,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=e?Array.from({length:r.rows}).map(()=>Array.from({length:r.cols})):Array.from({length:r})),this.lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this.step?e?{rows:0,cols:t.cols}:0:t,last:Math.min(this.step?this.step:n,this.items.length)},this.$emit("lazy-load",this.lazyLoadState)})},calculateAutoSize(){this.autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.content){const e=this.isBoth(),t=this.isHorizontal(),r=this.isVertical();this.content.style.minHeight=this.content.style.minWidth="auto",this.content.style.position="relative",this.element.style.contain="none";const[s,o]=[DomHandler.getWidth(this.content),DomHandler.getHeight(this.content)];s!==this.defaultContentWidth&&(this.element.style.width=""),o!==this.defaultContentHeight&&(this.element.style.height="");const[n,f]=[DomHandler.getWidth(this.element),DomHandler.getHeight(this.element)];(e||t)&&(this.element.style.width=n<this.defaultWidth?n+"px":this.scrollWidth||this.defaultWidth+"px"),(e||r)&&(this.element.style.height=f<this.defaultHeight?f+"px":this.scrollHeight||this.defaultHeight+"px"),this.content.style.minHeight=this.content.style.minWidth="",this.content.style.position="",this.element.style.contain=""}})},getLast(e=0,t){return this.items?Math.min(t?(this.columns||this.items[0]).length:this.items.length,e):0},getContentPosition(){if(this.content){const e=getComputedStyle(this.content),t=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),s=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),o=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:t,right:r,top:s,bottom:o,x:t+r,y:s+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize(){if(this.element){const e=this.isBoth(),t=this.isHorizontal(),r=this.element.parentElement,s=this.scrollWidth||`${this.element.offsetWidth||r.offsetWidth}px`,o=this.scrollHeight||`${this.element.offsetHeight||r.offsetHeight}px`,n=(f,c)=>this.element.style[f]=c;e||t?(n("height",o),n("width",s)):n("height",o)}},setSpacerSize(){const e=this.items;if(e){const t=this.isBoth(),r=this.isHorizontal(),s=this.getContentPosition(),o=(n,f,c,y=0)=>this.spacerStyle={...this.spacerStyle,[`${n}`]:(f||[]).length*c+y+"px"};t?(o("height",e,this.itemSize[0],s.y),o("width",this.columns||e[1],this.itemSize[1],s.x)):r?o("width",this.columns||e,this.itemSize,s.x):o("height",e,this.itemSize,s.y)}},setContentPosition(e){if(this.content&&!this.appendOnly){const t=this.isBoth(),r=this.isHorizontal(),s=e?e.first:this.first,o=(f,c)=>f*c,n=(f=0,c=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${f}px, ${c}px, 0)`};if(t)n(o(s.cols,this.itemSize[1]),o(s.rows,this.itemSize[0]));else{const f=o(s,this.itemSize);r?n(f,0):n(0,f)}}},onScrollPositionChange(e){const t=e.target,r=this.isBoth(),s=this.isHorizontal(),o=this.getContentPosition(),n=(u,g)=>u?u>g?u-g:u:0,f=(u,g)=>Math.floor(u/(g||u)),c=(u,g,A,x,l,v)=>u<=l?l:v?A-x-l:g+l-1,y=(u,g,A,x,l,v,w)=>u<=v?0:Math.max(0,w?u<g?A:u-v:u>g?A:u-2*v),_=(u,g,A,x,l,v)=>{let w=g+x+2*l;return u>=l&&(w+=l+1),this.getLast(w,v)},b=n(t.scrollTop,o.top),C=n(t.scrollLeft,o.left);let M=r?{rows:0,cols:0}:0,E=this.last,P=!1,a=this.lastScrollPos;if(r){const u=this.lastScrollPos.top<=b,g=this.lastScrollPos.left<=C;if(!this.appendOnly||this.appendOnly&&(u||g)){const A={rows:f(b,this.itemSize[0]),cols:f(C,this.itemSize[1])},x={rows:c(A.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],u),cols:c(A.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],g)};M={rows:y(A.rows,x.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],u),cols:y(A.cols,x.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],g)},E={rows:_(A.rows,M.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:_(A.cols,M.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},P=M.rows!==this.first.rows||E.rows!==this.last.rows||M.cols!==this.first.cols||E.cols!==this.last.cols||this.isRangeChanged,a={top:b,left:C}}}else{const u=s?C:b,g=this.lastScrollPos<=u;if(!this.appendOnly||this.appendOnly&&g){const A=f(u,this.itemSize),x=c(A,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,g);M=y(A,x,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,g),E=_(A,M,this.last,this.numItemsInViewport,this.d_numToleratedItems),P=M!==this.first||E!==this.last||this.isRangeChanged,a=u}}return{first:M,last:E,isRangeChanged:P,scrollPos:a}},onScrollChange(e){const{first:t,last:r,isRangeChanged:s,scrollPos:o}=this.onScrollPositionChange(e);if(s){const n={first:t,last:r};if(this.setContentPosition(n),this.first=t,this.last=r,this.lastScrollPos=o,this.$emit("scroll-index-change",n),this.lazy&&this.isPageChanged(t)){const f={first:this.step?Math.min(this.getPageByFirst(t)*this.step,this.items.length-this.step):t,last:Math.min(this.step?(this.getPageByFirst(t)+1)*this.step:r,this.items.length)};(this.lazyLoadState.first!==f.first||this.lazyLoadState.last!==f.last)&&this.$emit("lazy-load",f),this.lazyLoadState=f}}},onScroll(e){if(this.$emit("scroll",e),this.delay&&this.isPageChanged()){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:t}=this.onScrollPositionChange(e);(t||(this.step?this.isPageChanged():!1))&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this.lazy||this.loading===void 0)&&(this.d_loading=!1,this.page=this.getPageByFirst())},this.delay)}else this.onScrollChange(e)},onResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(DomHandler.isVisible(this.element)){const e=this.isBoth(),t=this.isVertical(),r=this.isHorizontal(),[s,o]=[DomHandler.getWidth(this.element),DomHandler.getHeight(this.element)],[n,f]=[s!==this.defaultWidth,o!==this.defaultHeight];(e?n||f:r?n:t?f:!1)&&(this.d_numToleratedItems=this.numToleratedItems,this.defaultWidth=s,this.defaultHeight=o,this.defaultContentWidth=DomHandler.getWidth(this.content),this.defaultContentHeight=DomHandler.getHeight(this.content),this.init())}},this.resizeDelay)},bindResizeListener(){this.resizeListener||(this.resizeListener=this.onResize.bind(this),window.addEventListener("resize",this.resizeListener),window.addEventListener("orientationchange",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("orientationchange",this.resizeListener),this.resizeListener=null)},getOptions(e){const t=(this.items||[]).length,r=this.isBoth()?this.first.rows+e:this.first+e;return{index:r,count:t,first:r===0,last:r===t-1,even:r%2===0,odd:r%2!==0}},getLoaderOptions(e,t){let r=this.loaderArr.length;return{index:e,count:r,first:e===0,last:e===r-1,even:e%2===0,odd:e%2!==0,...t}},getPageByFirst(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this.step||1))},isPageChanged(e){return this.step?this.page!==this.getPageByFirst(e??this.first):!0},setContentEl(e){this.content=e||this.content||DomHandler.findSingle(this.element,".p-virtualscroller-content")},elementRef(e){this.element=e},contentRef(e){this.content=e}},computed:{containerClass(){return["p-virtualscroller",{"p-virtualscroller-inline":this.inline,"p-virtualscroller-both p-both-scroll":this.isBoth(),"p-virtualscroller-horizontal p-horizontal-scroll":this.isHorizontal()},this.class]},contentClass(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass(){return["p-virtualscroller-loader",{"p-component-overlay":!this.$slots.loader}]},loadedItems(){return this.items&&!this.d_loading?this.isBoth()?this.items.slice(this.appendOnly?0:this.first.rows,this.last.rows).map(e=>this.columns?e:e.slice(this.appendOnly?0:this.first.cols,this.last.cols)):this.isHorizontal()&&this.columns?this.items:this.items.slice(this.appendOnly?0:this.first,this.last):[]},loadedRows(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns(){if(this.columns){const e=this.isBoth(),t=this.isHorizontal();if(e||t)return this.d_loading&&this.loaderDisabled?e?this.loaderArr[0]:this.loaderArr:this.columns.slice(e?this.first.cols:this.first,e?this.last.cols:this.last)}return this.columns}},components:{SpinnerIcon:script$D}};const _hoisted_1$z=["tabindex"];function render$A(e,t,r,s,o,n){const f=resolveComponent("SpinnerIcon");return r.disabled?(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(e.$slots,"default"),renderSlot(e.$slots,"content",{items:r.items,rows:r.items,columns:n.loadedColumns})],64)):(openBlock(),createElementBlock("div",mergeProps({key:0,ref:n.elementRef,class:n.containerClass,tabindex:r.tabindex,style:r.style,onScroll:t[0]||(t[0]=(...c)=>n.onScroll&&n.onScroll(...c))},e.ptm("root")),[renderSlot(e.$slots,"content",{styleClass:n.contentClass,items:n.loadedItems,getItemOptions:n.getOptions,loading:o.d_loading,getLoaderOptions:n.getLoaderOptions,itemSize:r.itemSize,rows:n.loadedRows,columns:n.loadedColumns,contentRef:n.contentRef,spacerStyle:o.spacerStyle,contentStyle:o.contentStyle,vertical:n.isVertical(),horizontal:n.isHorizontal(),both:n.isBoth()},()=>[createBaseVNode("div",mergeProps({ref:n.contentRef,class:n.contentClass,style:o.contentStyle},e.ptm("content")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.loadedItems,(c,y)=>renderSlot(e.$slots,"item",{key:y,item:c,options:n.getOptions(y)})),128))],16)]),r.showSpacer?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"p-virtualscroller-spacer",style:o.spacerStyle},e.ptm("spacer")),null,16)):createCommentVNode("",!0),!r.loaderDisabled&&r.showLoader&&o.d_loading?(openBlock(),createElementBlock("div",mergeProps({key:1,class:n.loaderClass},e.ptm("loader")),[e.$slots&&e.$slots.loader?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(o.loaderArr,(c,y)=>renderSlot(e.$slots,"loader",{key:y,options:n.getLoaderOptions(y,n.isBoth()&&{numCols:e.d_numItemsInViewport.cols})})),128)):createCommentVNode("",!0),renderSlot(e.$slots,"loadingicon",{},()=>[createVNode(f,mergeProps({spin:"",class:"p-virtualscroller-loading-icon"},e.ptm("loadingIcon")),null,16)])],16)):createCommentVNode("",!0)],16,_hoisted_1$z))}function styleInject$5(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$5=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}
.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    /* contain: content; */
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}
.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}
.p-virtualscroller .p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.p-virtualscroller-loader.p-component-overlay {
    display: flex;
    align-items: center;
    justify-content: center;
}
.p-virtualscroller-loading-icon {
    font-size: 2rem;
}
.p-virtualscroller-loading-icon.p-icon {
    width: 2rem;
    height: 2rem;
}
.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

/* Inline */
.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`;styleInject$5(css_248z$5);script$A.render=render$A;var script$z={name:"Dropdown",extends:script$H,emits:["update:modelValue","change","focus","blur","before-show","before-hide","show","hide","filter"],props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"200px"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:{type:String,default:null},disabled:{type:Boolean,default:!1},dataKey:null,showClear:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},panelClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},panelProps:{type:null,default:null},filterInputProps:{type:null,default:null},clearIconProps:{type:null,default:null},appendTo:{type:String,default:"body"},loading:{type:Boolean,default:!1},clearIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},filterIcon:{type:String,default:void 0},loadingIcon:{type:String,default:void 0},resetFilterOnHide:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!0},autoFilterFocus:{type:Boolean,default:!1},selectOnFocus:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},tabindex:{type:Number,default:0},"aria-label":{type:String,default:null},"aria-labelledby":{type:String,default:null}},outsideClickListener:null,scrollHandler:null,resizeListener:null,overlay:null,list:null,virtualScroller:null,searchTimeout:null,searchValue:null,isModelValueChanged:!1,focusOnHover:!1,data(){return{id:this.$attrs.id,focused:!1,focusedOptionIndex:-1,filterValue:null,overlayVisible:!1}},watch:{"$attrs.id":function(e){this.id=e||UniqueComponentId()},modelValue(){this.isModelValueChanged=!0},options(){this.autoUpdateModel()}},mounted(){this.id=this.id||UniqueComponentId(),this.autoUpdateModel()},updated(){this.overlayVisible&&this.isModelValueChanged&&this.scrollInView(this.findSelectedOptionIndex()),this.isModelValueChanged=!1},beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(ZIndexUtils.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex(e,t){return this.virtualScrollerDisabled?e:t&&t(e).index},getOptionLabel(e){return this.optionLabel?ObjectUtils.resolveFieldData(e,this.optionLabel):e},getOptionValue(e){return this.optionValue?ObjectUtils.resolveFieldData(e,this.optionValue):e},getOptionRenderKey(e,t){return(this.dataKey?ObjectUtils.resolveFieldData(e,this.dataKey):this.getOptionLabel(e))+"_"+t},getPTOptions(e,t,r,s){return this.ptm(s,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(r,t),disabled:this.isOptionDisabled(e)}})},isOptionDisabled(e){return this.optionDisabled?ObjectUtils.resolveFieldData(e,this.optionDisabled):!1},isOptionGroup(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel(e){return ObjectUtils.resolveFieldData(e,this.optionGroupLabel)},getOptionGroupChildren(e){return ObjectUtils.resolveFieldData(e,this.optionGroupChildren)},getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(t=>this.isOptionGroup(t)).length:e)+1},show(e){this.$emit("before-show"),this.overlayVisible=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1,e&&DomHandler.focus(this.$refs.focusInput)},hide(e){const t=()=>{this.$emit("before-hide"),this.overlayVisible=!1,this.focusedOptionIndex=-1,this.searchValue="",this.resetFilterOnHide&&(this.filterValue=null),e&&DomHandler.focus(this.$refs.focusInput)};setTimeout(()=>{t()},0)},onFocus(e){this.disabled||(this.focused=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1,this.overlayVisible&&this.scrollInView(this.focusedOptionIndex),this.$emit("focus",e))},onBlur(e){this.focused=!1,this.focusedOptionIndex=-1,this.searchValue="",this.$emit("blur",e)},onKeyDown(e){if(this.disabled){e.preventDefault();return}const t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,this.editable);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!t&&ObjectUtils.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}},onEditableInput(e){const t=e.target.value;this.searchValue="",!this.searchOptions(e,t)&&(this.focusedOptionIndex=-1),this.updateModel(e,t)},onContainerClick(e){this.disabled||this.loading||DomHandler.hasClass(e.target,"p-dropdown-clear-icon")||e.target.tagName==="INPUT"||(!this.overlay||!this.overlay.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0))},onClearClick(e){this.updateModel(e,null)},onFirstHiddenFocus(e){const t=e.relatedTarget===this.$refs.focusInput?DomHandler.getFirstFocusableElement(this.overlay,":not(.p-hidden-focusable)"):this.$refs.focusInput;DomHandler.focus(t)},onLastHiddenFocus(e){const t=e.relatedTarget===this.$refs.focusInput?DomHandler.getLastFocusableElement(this.overlay,":not(.p-hidden-focusable)"):this.$refs.focusInput;DomHandler.focus(t)},onOptionSelect(e,t,r=!0){const s=this.getOptionValue(t);this.updateModel(e,s),r&&this.hide(!0)},onOptionMouseMove(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)},onFilterChange(e){const t=e.target.value;this.filterValue=t,this.focusedOptionIndex=-1,this.$emit("filter",{originalEvent:e,value:t}),!this.virtualScrollerDisabled&&this.virtualScroller.scrollToIndex(0)},onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break}},onFilterBlur(){this.focusedOptionIndex=-1},onFilterUpdated(){this.overlayVisible&&this.alignOverlay()},onOverlayClick(e){OverlayEventBus.emit("overlay-click",{originalEvent:e,target:this.$el})},onOverlayKeyDown(e){switch(e.code){case"Escape":this.onEscapeKey(e);break}},onArrowDownKey(e){const t=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,t),!this.overlayVisible&&this.show(),e.preventDefault()},onArrowUpKey(e,t=!1){if(e.altKey&&!t)this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),e.preventDefault();else{const r=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show(),e.preventDefault()}},onArrowLeftKey(e,t=!1){t&&(this.focusedOptionIndex=-1)},onHomeKey(e,t=!1){t?(e.currentTarget.setSelectionRange(0,0),this.focusedOptionIndex=-1):(this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show()),e.preventDefault()},onEndKey(e,t=!1){if(t){const r=e.currentTarget,s=r.value.length;r.setSelectionRange(s,s),this.focusedOptionIndex=-1}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()},onPageUpKey(e){this.scrollInView(0),e.preventDefault()},onPageDownKey(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey(e){this.overlayVisible?(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.hide()):this.onArrowDownKey(e),e.preventDefault()},onSpaceKey(e,t=!1){!t&&this.onEnterKey(e)},onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()},onTabKey(e,t=!1){t||(this.overlayVisible&&this.hasFocusableElements()?(DomHandler.focus(this.$refs.firstHiddenFocusableElementOnOverlay),e.preventDefault()):(this.focusedOptionIndex!==-1&&this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(this.filter)))},onBackspaceKey(e,t=!1){t&&!this.overlayVisible&&this.show()},onOverlayEnter(e){ZIndexUtils.set("overlay",e,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.scrollInView(),this.autoFilterFocus&&DomHandler.focus(this.$refs.filterInput)},onOverlayAfterEnter(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave(e){ZIndexUtils.clear(e)},alignOverlay(){this.appendTo==="self"?DomHandler.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=DomHandler.getOuterWidth(this.$el)+"px",DomHandler.absolutePosition(this.overlay,this.$el))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&this.overlay&&!this.$el.contains(e.target)&&!this.overlay.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new ConnectedOverlayScrollHandler(this.$refs.container,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!DomHandler.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},hasFocusableElements(){return DomHandler.getFocusableElements(this.overlay,":not(.p-hidden-focusable)").length>0},isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))},isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)},isSelected(e){return this.isValidOption(e)&&ObjectUtils.equals(this.modelValue,this.getOptionValue(e),this.equalityKey)},findFirstOptionIndex(){return this.visibleOptions.findIndex(e=>this.isValidOption(e))},findLastOptionIndex(){return ObjectUtils.findLastIndex(this.visibleOptions,e=>this.isValidOption(e))},findNextOptionIndex(e){const t=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return t>-1?t+e+1:e},findPrevOptionIndex(e){const t=e>0?ObjectUtils.findLastIndex(this.visibleOptions.slice(0,e),r=>this.isValidOption(r)):-1;return t>-1?t:e},findSelectedOptionIndex(){return this.hasSelectedOption?this.visibleOptions.findIndex(e=>this.isValidSelectedOption(e)):-1},findFirstFocusedOptionIndex(){const e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex(){const e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions(e,t){this.searchValue=(this.searchValue||"")+t;let r=-1,s=!1;return this.focusedOptionIndex!==-1?(r=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(o=>this.isOptionMatched(o)),r=r===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(o=>this.isOptionMatched(o)):r+this.focusedOptionIndex):r=this.visibleOptions.findIndex(o=>this.isOptionMatched(o)),r!==-1&&(s=!0),r===-1&&this.focusedOptionIndex===-1&&(r=this.findFirstFocusedOptionIndex()),r!==-1&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),s},changeFocusedOptionIndex(e,t){this.focusedOptionIndex!==t&&(this.focusedOptionIndex=t,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions[t],!1))},scrollInView(e=-1){const t=e!==-1?`${this.id}_${e}`:this.focusedOptionId,r=DomHandler.findSingle(this.list,`li[id="${t}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"start"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroller&&this.virtualScroller.scrollToIndex(e!==-1?e:this.focusedOptionIndex)},0)},autoUpdateModel(){this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex],!1))},updateModel(e,t){this.$emit("update:modelValue",t),this.$emit("change",{originalEvent:e,value:t})},flatOptions(e){return(e||[]).reduce((t,r,s)=>{t.push({optionGroup:r,group:!0,index:s});const o=this.getOptionGroupChildren(r);return o&&o.forEach(n=>t.push(n)),t},[])},overlayRef(e){this.overlay=e},listRef(e,t){this.list=e,t&&t(e)},virtualScrollerRef(e){this.virtualScroller=e}},computed:{containerClass(){return["p-dropdown p-component p-inputwrapper",{"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.hasSelectedOption,"p-inputwrapper-focus":this.focused||this.overlayVisible,"p-overlay-open":this.overlayVisible}]},inputStyleClass(){return["p-dropdown-label p-inputtext",this.inputClass,{"p-placeholder":!this.editable&&this.label===this.placeholder,"p-dropdown-label-empty":!this.editable&&!this.$slots.value&&(this.label==="p-emptylabel"||this.label.length===0)}]},panelStyleClass(){return["p-dropdown-panel p-component",this.panelClass,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},visibleOptions(){const e=this.optionGroupLabel?this.flatOptions(this.options):this.options||[];if(this.filterValue){const t=FilterService.filter(e,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(this.optionGroupLabel){const r=this.options||[],s=[];return r.forEach(o=>{const f=this.getOptionGroupChildren(o).filter(c=>t.includes(c));f.length>0&&s.push({...o,[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...f]})}),this.flatOptions(s)}return t}return e},hasSelectedOption(){return ObjectUtils.isNotEmpty(this.modelValue)},label(){const e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.placeholder||"p-emptylabel"},editableInputValue(){const e=this.findSelectedOptionIndex();return e!==-1?this.getOptionLabel(this.visibleOptions[e]):this.modelValue||""},equalityKey(){return this.optionValue?null:this.dataKey},searchFields(){return this.filterFields||[this.optionLabel]},filterResultMessageText(){return ObjectUtils.isNotEmpty(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText(){return this.hasSelectedOption?this.selectionMessageText.replaceAll("{0}","1"):this.emptySelectionMessageText},focusedOptionId(){return this.focusedOptionIndex!==-1?`${this.id}_${this.focusedOptionIndex}`:null},ariaSetSize(){return this.visibleOptions.filter(e=>!this.isOptionGroup(e)).length},virtualScrollerDisabled(){return!this.virtualScrollerOptions}},directives:{ripple:Ripple},components:{VirtualScroller:script$A,Portal:script$B,TimesIcon:script$C,ChevronDownIcon:script$F,SpinnerIcon:script$D,FilterIcon:script$E}};const _hoisted_1$y=["id"],_hoisted_2$l=["id","value","placeholder","tabindex","disabled","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant"],_hoisted_3$f=["id","tabindex","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-disabled"],_hoisted_4$4=["value","placeholder","aria-owns","aria-activedescendant"],_hoisted_5$3=["id"],_hoisted_6$3=["id"],_hoisted_7$3=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove"];function render$z(e,t,r,s,o,n){const f=resolveComponent("SpinnerIcon"),c=resolveComponent("VirtualScroller"),y=resolveComponent("Portal"),_=resolveDirective("ripple");return openBlock(),createElementBlock("div",mergeProps({ref:"container",id:o.id,class:n.containerClass,onClick:t[15]||(t[15]=(...b)=>n.onContainerClick&&n.onContainerClick(...b))},e.ptm("root")),[r.editable?(openBlock(),createElementBlock("input",mergeProps({key:0,ref:"focusInput",id:r.inputId,type:"text",style:r.inputStyle,class:n.inputStyleClass,value:n.editableInputValue,placeholder:r.placeholder,tabindex:r.disabled?-1:r.tabindex,disabled:r.disabled,autocomplete:"off",role:"combobox","aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":o.overlayVisible,"aria-controls":o.id+"_list","aria-activedescendant":o.focused?n.focusedOptionId:void 0,onFocus:t[0]||(t[0]=(...b)=>n.onFocus&&n.onFocus(...b)),onBlur:t[1]||(t[1]=(...b)=>n.onBlur&&n.onBlur(...b)),onKeydown:t[2]||(t[2]=(...b)=>n.onKeyDown&&n.onKeyDown(...b)),onInput:t[3]||(t[3]=(...b)=>n.onEditableInput&&n.onEditableInput(...b))},{...r.inputProps,...e.ptm("input")}),null,16,_hoisted_2$l)):(openBlock(),createElementBlock("span",mergeProps({key:1,ref:"focusInput",id:r.inputId,style:r.inputStyle,class:n.inputStyleClass,tabindex:r.disabled?-1:r.tabindex,role:"combobox","aria-label":e.ariaLabel||(n.label==="p-emptylabel"?void 0:n.label),"aria-labelledby":e.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":o.overlayVisible,"aria-controls":o.id+"_list","aria-activedescendant":o.focused?n.focusedOptionId:void 0,"aria-disabled":r.disabled,onFocus:t[4]||(t[4]=(...b)=>n.onFocus&&n.onFocus(...b)),onBlur:t[5]||(t[5]=(...b)=>n.onBlur&&n.onBlur(...b)),onKeydown:t[6]||(t[6]=(...b)=>n.onKeyDown&&n.onKeyDown(...b))},{...r.inputProps,...e.ptm("input")}),[renderSlot(e.$slots,"value",{value:r.modelValue,placeholder:r.placeholder},()=>[createTextVNode(toDisplayString(n.label==="p-emptylabel"?" ":n.label||"empty"),1)])],16,_hoisted_3$f)),r.showClear&&r.modelValue!=null?renderSlot(e.$slots,"clearicon",{key:2,onClick:n.onClearClick},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.clearIcon?"i":"TimesIcon"),mergeProps({class:["p-dropdown-clear-icon",r.clearIcon],onClick:n.onClearClick},{...r.clearIconProps,...e.ptm("clearIcon")}),null,16,["class","onClick"]))]):createCommentVNode("",!0),createBaseVNode("div",mergeProps({class:"p-dropdown-trigger"},e.ptm("trigger")),[r.loading?renderSlot(e.$slots,"loadingicon",{key:0,class:"p-dropdown-trigger-icon"},()=>[r.loadingIcon?(openBlock(),createElementBlock("span",mergeProps({key:0,class:["p-dropdown-trigger-icon pi-spin",r.loadingIcon],"aria-hidden":"true"},e.ptm("loadingIcon")),null,16)):(openBlock(),createBlock(f,mergeProps({key:1,class:"p-dropdown-trigger-icon",spin:"","aria-hidden":"true"},e.ptm("loadingIcon")),null,16))]):renderSlot(e.$slots,"dropdownicon",{key:1,class:"p-dropdown-trigger-icon"},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.dropdownIcon?"span":"ChevronDownIcon"),mergeProps({class:["p-dropdown-trigger-icon",r.dropdownIcon],"aria-hidden":"true"},e.ptm("dropdownIcon")),null,16,["class"]))])],16),createVNode(y,{appendTo:r.appendTo},{default:withCtx(()=>[createVNode(Transition$1,{name:"p-connected-overlay",onEnter:n.onOverlayEnter,onAfterEnter:n.onOverlayAfterEnter,onLeave:n.onOverlayLeave,onAfterLeave:n.onOverlayAfterLeave},{default:withCtx(()=>[o.overlayVisible?(openBlock(),createElementBlock("div",mergeProps({key:0,ref:n.overlayRef,style:r.panelStyle,class:n.panelStyleClass,onClick:t[13]||(t[13]=(...b)=>n.onOverlayClick&&n.onOverlayClick(...b)),onKeydown:t[14]||(t[14]=(...b)=>n.onOverlayKeyDown&&n.onOverlayKeyDown(...b))},{...r.panelProps,...e.ptm("panel")}),[createBaseVNode("span",mergeProps({ref:"firstHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:t[7]||(t[7]=(...b)=>n.onFirstHiddenFocus&&n.onFirstHiddenFocus(...b))},e.ptm("hiddenFirstFocusableEl")),null,16),renderSlot(e.$slots,"header",{value:r.modelValue,options:n.visibleOptions}),r.filter?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"p-dropdown-header"},e.ptm("header")),[createBaseVNode("div",mergeProps({class:"p-dropdown-filter-container"},e.ptm("filterContainer")),[createBaseVNode("input",mergeProps({ref:"filterInput",type:"text",value:o.filterValue,onVnodeMounted:t[8]||(t[8]=(...b)=>n.onFilterUpdated&&n.onFilterUpdated(...b)),class:"p-dropdown-filter p-inputtext p-component",placeholder:r.filterPlaceholder,role:"searchbox",autocomplete:"off","aria-owns":o.id+"_list","aria-activedescendant":n.focusedOptionId,onKeydown:t[9]||(t[9]=(...b)=>n.onFilterKeyDown&&n.onFilterKeyDown(...b)),onBlur:t[10]||(t[10]=(...b)=>n.onFilterBlur&&n.onFilterBlur(...b)),onInput:t[11]||(t[11]=(...b)=>n.onFilterChange&&n.onFilterChange(...b))},{...r.filterInputProps,...e.ptm("filterInput")}),null,16,_hoisted_4$4),renderSlot(e.$slots,"filtericon",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.filterIcon?"span":"FilterIcon"),mergeProps({class:["p-dropdown-filter-icon",r.filterIcon]},e.ptm("filterIcon")),null,16,["class"]))])],16),createBaseVNode("span",mergeProps({role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenFilterResult")),toDisplayString(n.filterResultMessageText),17)],16)):createCommentVNode("",!0),createBaseVNode("div",mergeProps({class:"p-dropdown-items-wrapper",style:{"max-height":n.virtualScrollerDisabled?r.scrollHeight:""}},e.ptm("wrapper")),[createVNode(c,mergeProps({ref:n.virtualScrollerRef},{...r.virtualScrollerOptions,...e.ptm("virtualScroller")},{items:n.visibleOptions,style:{height:r.scrollHeight},tabindex:-1,disabled:n.virtualScrollerDisabled}),createSlots({content:withCtx(({styleClass:b,contentRef:C,items:M,getItemOptions:E,contentStyle:P,itemSize:a})=>[createBaseVNode("ul",mergeProps({ref:u=>n.listRef(u,C),id:o.id+"_list",class:["p-dropdown-items",b],style:P,role:"listbox"},e.ptm("list")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(M,(u,g)=>(openBlock(),createElementBlock(Fragment,{key:n.getOptionRenderKey(u,n.getOptionIndex(g,E))},[n.isOptionGroup(u)?(openBlock(),createElementBlock("li",mergeProps({key:0,id:o.id+"_"+n.getOptionIndex(g,E),style:{height:a?a+"px":void 0},class:"p-dropdown-item-group",role:"option"},e.ptm("itemGroup")),[renderSlot(e.$slots,"optiongroup",{option:u.optionGroup,index:n.getOptionIndex(g,E)},()=>[createTextVNode(toDisplayString(n.getOptionGroupLabel(u.optionGroup)),1)])],16,_hoisted_6$3)):withDirectives((openBlock(),createElementBlock("li",mergeProps({key:1,id:o.id+"_"+n.getOptionIndex(g,E),style:{height:a?a+"px":void 0},class:["p-dropdown-item",{"p-highlight":n.isSelected(u),"p-focus":o.focusedOptionIndex===n.getOptionIndex(g,E),"p-disabled":n.isOptionDisabled(u)}],role:"option","aria-label":n.getOptionLabel(u),"aria-selected":n.isSelected(u),"aria-disabled":n.isOptionDisabled(u),"aria-setsize":n.ariaSetSize,"aria-posinset":n.getAriaPosInset(n.getOptionIndex(g,E)),onClick:A=>n.onOptionSelect(A,u),onMousemove:A=>n.onOptionMouseMove(A,n.getOptionIndex(g,E))},n.getPTOptions(u,E,g,"item")),[renderSlot(e.$slots,"option",{option:u,index:n.getOptionIndex(g,E)},()=>[createTextVNode(toDisplayString(n.getOptionLabel(u)),1)])],16,_hoisted_7$3)),[[_]])],64))),128)),o.filterValue&&(!M||M&&M.length===0)?(openBlock(),createElementBlock("li",mergeProps({key:0,class:"p-dropdown-empty-message",role:"option"},e.ptm("emptyMessage")),[renderSlot(e.$slots,"emptyfilter",{},()=>[createTextVNode(toDisplayString(n.emptyFilterMessageText),1)])],16)):!r.options||r.options&&r.options.length===0?(openBlock(),createElementBlock("li",mergeProps({key:1,class:"p-dropdown-empty-message",role:"option"},e.ptm("emptyMessage")),[renderSlot(e.$slots,"empty",{},()=>[createTextVNode(toDisplayString(n.emptyMessageText),1)])],16)):createCommentVNode("",!0)],16,_hoisted_5$3)]),_:2},[e.$slots.loader?{name:"loader",fn:withCtx(({options:b})=>[renderSlot(e.$slots,"loader",{options:b})]),key:"0"}:void 0]),1040,["items","style","disabled"])],16),renderSlot(e.$slots,"footer",{value:r.modelValue,options:n.visibleOptions}),!r.options||r.options&&r.options.length===0?(openBlock(),createElementBlock("span",mergeProps({key:1,role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("emptyMessage")),toDisplayString(n.emptyMessageText),17)):createCommentVNode("",!0),createBaseVNode("span",mergeProps({role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenSelectedMessage")),toDisplayString(n.selectedMessageText),17),createBaseVNode("span",mergeProps({ref:"lastHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:t[12]||(t[12]=(...b)=>n.onLastHiddenFocus&&n.onLastHiddenFocus(...b))},e.ptm("hiddenLastFocusableEl")),null,16)],16)):createCommentVNode("",!0)]),_:3},8,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]),_:3},8,["appendTo"])],16,_hoisted_1$y)}function styleInject$4(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$4=`
.p-dropdown {
    display: inline-flex;
    cursor: pointer;
    position: relative;
    user-select: none;
}
.p-dropdown-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
}
.p-dropdown-trigger {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}
.p-dropdown-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    flex: 1 1 auto;
    width: 1%;
    text-overflow: ellipsis;
    cursor: pointer;
}
.p-dropdown-label-empty {
    overflow: hidden;
    opacity: 0;
}
input.p-dropdown-label {
    cursor: default;
}
.p-dropdown .p-dropdown-panel {
    min-width: 100%;
}
.p-dropdown-panel {
    position: absolute;
    top: 0;
    left: 0;
}
.p-dropdown-items-wrapper {
    overflow: auto;
}
.p-dropdown-item {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
}
.p-dropdown-item-group {
    cursor: auto;
}
.p-dropdown-items {
    margin: 0;
    padding: 0;
    list-style-type: none;
}
.p-dropdown-filter {
    width: 100%;
}
.p-dropdown-filter-container {
    position: relative;
}
.p-dropdown-filter-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
}
.p-fluid .p-dropdown {
    display: flex;
}
.p-fluid .p-dropdown .p-dropdown-label {
    width: 1%;
}
`;styleInject$4(css_248z$4);script$z.render=render$z;var script$y={name:"ProgressSpinner",extends:script$H,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},computed:{svgStyle(){return{"animation-duration":this.animationDuration}}}};const _hoisted_1$x=["fill","stroke-width"];function render$y(e,t,r,s,o,n){return openBlock(),createElementBlock("div",mergeProps({class:"p-progress-spinner",role:"progressbar"},e.ptm("root")),[(openBlock(),createElementBlock("svg",mergeProps({class:"p-progress-spinner-svg",viewBox:"25 25 50 50",style:n.svgStyle},e.ptm("spinner")),[createBaseVNode("circle",mergeProps({class:"p-progress-spinner-circle",cx:"50",cy:"50",r:"20",fill:r.fill,"stroke-width":r.strokeWidth,strokeMiterlimit:"10"},e.ptm("circle")),null,16,_hoisted_1$x)],16))],16)}function styleInject$3(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$3=`
.p-progress-spinner {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    display: inline-block;
}
.p-progress-spinner::before {
    content: '';
    display: block;
    padding-top: 100%;
}
.p-progress-spinner-svg {
    height: 100%;
    transform-origin: center center;
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}
`;styleInject$3(css_248z$3);script$y.render=render$y;const ColorScale_vue_vue_type_style_index_0_scoped_7165dba7_lang="",_sfc_main$8={props:{title:{type:String,default:"Some prop"}},computed:{continous(){return this.colorScale?this.colorScale.isContinous():null},colorStops(){return this.colorScale?this.colorScale.getColors():null},colorPoints(){return this.colorScale?this.colorScale.getSteps():null},boxStyle(){const e=this.colorStops?this.colorStops.length:1;return this.isHorizontal?{height:20,width:this.scaleWidth/(e+1)}:{height:this.scaleHeight/(e+1),width:50}},isHorizontal(){return this.scaleHeight<this.scaleWidth}},methods:{getColorString(e){return`rgb(${e.r},${e.g},${e.b})`},handleResize(){this.scaleWidth=this.scale.clientWidth,this.scaleHeight=this.scale.clientHeight}},setup(){const e=useColorStore(),t=ref(null),{colorScale:r,colorOptions:s}=storeToRefs(e);return{colorScale:r,colorOptions:s,colorStore:e,scale:t}},data(){return{scaleHeight:0,scaleWidth:0}},mounted(){window.addEventListener("resize",this.handleResize),this.handleResize()},beforeDestroy(){window.removeEventListener("resize",this.handleResize)}},_hoisted_1$w={class:"mb-2"},_hoisted_2$k={ref:"scale",class:"grid"},_hoisted_3$e={class:"flex justify-content-between"},_hoisted_4$3={key:0,class:"flex justify-content-between"},_hoisted_5$2={class:"label"},_hoisted_6$2={class:"label"},_hoisted_7$2={key:1,class:"flex justify-content-between"};function _sfc_render$6(e,t,r,s,o,n){return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$w,toDisplayString(r.title),1),createBaseVNode("div",_hoisted_2$k,[s.colorScale&&n.continous?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(n.colorStops,(f,c)=>(openBlock(),createElementBlock("div",{key:c,style:normalizeStyle({backgroundColor:n.getColorString(f),height:n.boxStyle.height+"px",width:n.boxStyle.width+"px"}),class:normalizeClass(n.isHorizontal?"row":"column")},null,6))),128)):createCommentVNode("",!0),s.colorScale&&!n.continous?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["w-full",n.isHorizontal?"row":"column"])},[createBaseVNode("div",_hoisted_3$e,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.colorStops,(f,c)=>(openBlock(),createElementBlock("div",{key:c,style:normalizeStyle({backgroundColor:n.getColorString(f),height:"20px",width:"50px"})},null,4))),128))])],2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["w-full",n.isHorizontal?"row":"column"])},[n.continous?(openBlock(),createElementBlock("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$2,toDisplayString(n.colorPoints[0].toFixed(2)),1),createBaseVNode("div",_hoisted_6$2,toDisplayString(n.colorPoints[n.colorPoints.length-1].toFixed(2)),1)])):(openBlock(),createElementBlock("div",_hoisted_7$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.colorPoints,(f,c)=>(openBlock(),createElementBlock("div",{key:c,class:"label"},toDisplayString(f),1))),128))]))],2)],512)],64)}const ColorScale=_export_sfc(_sfc_main$8,[["render",_sfc_render$6],["__scopeId","data-v-7165dba7"]]),StructureSelection_vue_vue_type_style_index_0_scoped_292a178a_lang="",_sfc_main$7={props:{potentialID:{type:String,default:""}},data(){return{loading:!0,selectedField:null,selectedScale:null,atomColors:[]}},components:{StructureSelector,DropDown:script$z,ProgressSpinner:script$y,ColorScale},computed:{colorScaleOptions(){return this.colorOptions.map(e=>e.name)},colorValueOptions(){return this.colorFieldOptions.map(e=>e.id)},colorField:{set(e){this.potentialStore.selectLabeling(e)},get(){return this.colorValueField}}},setup(){const e=usePotentialStore(),t=useColorStore(),{atomData:r,coordinateData:s,atomColorValues:o,colorFieldOptions:n,colorValueField:f}=storeToRefs(e),{colorScale:c,colorOptions:y}=storeToRefs(t);return{potentialStore:e,atomData:r,coordinateData:s,colorFieldOptions:n,colorValueField:f,atomColorValues:o,colorScale:c,colorOptions:y,colorStore:t}},watch:{selectedScale(e){this.colorStore.setScale(e,this.atomColorValues)},colorScale(){this.updateColors()},atomColorValues(e){this.colorScale!=null&&this.colorScale.update(e),this.updateColors()}},methods:{updateColors(){this.atomColors=this.atomColorValues.map(e=>{const t=this.colorScale?this.colorScale.getColorForValue(e):{r:0,g:0,b:255};return`rgb(${t.r},${t.g},${t.b})`})},selectPotential(e){this.potentialStore.selectPotential(this.atomData[e].moleculeID)}},mounted(){this.potentialStore.ready().then(()=>{this.selectedScale=this.colorOptions[0].name})}},_withScopeId=e=>(pushScopeId("data-v-292a178a"),e=e(),popScopeId(),e),_hoisted_1$v={class:"grid h-full"},_hoisted_2$j={class:"col w-6 h-full"},_hoisted_3$d={class:"row selheader"},_hoisted_4$2={class:"flex align-content-between justify-content-between"},_hoisted_5$1=_withScopeId(()=>createBaseVNode("label",{for:"ColorScaleSelection"}," Color Scale: ",-1)),_hoisted_6$1=_withScopeId(()=>createBaseVNode("label",{for:"ColorValue"}," Color Value based on ",-1)),_hoisted_7$1={key:0,class:"row selselector"},_hoisted_8={class:"h-full"},_hoisted_9={key:1,class:"row"};function _sfc_render$5(e,t,r,s,o,n){const f=resolveComponent("DropDown"),c=resolveComponent("ColorScale"),y=resolveComponent("StructureSelector"),_=resolveComponent("ProgressSpinner");return openBlock(),createElementBlock("div",_hoisted_1$v,[createBaseVNode("div",_hoisted_2$j,[createBaseVNode("div",_hoisted_3$d,[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",null,[_hoisted_5$1,createVNode(f,{id:"ColorScaleSelection",modelValue:o.selectedScale,"onUpdate:modelValue":t[0]||(t[0]=b=>o.selectedScale=b),options:n.colorScaleOptions,placeholder:"Select a color Scale"},null,8,["modelValue","options"])]),createBaseVNode("div",null,[_hoisted_6$1,createVNode(f,{id:"ColorValue",modelValue:n.colorField,"onUpdate:modelValue":t[1]||(t[1]=b=>n.colorField=b),options:s.colorFieldOptions,optionLabel:"label"},null,8,["modelValue","options"])])])]),s.colorScale?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8,[createVNode(c,{title:n.colorField.label},null,8,["title"]),createVNode(y,{colorScale:s.colorScale,onSelectPotential:n.selectPotential,onUnSelect:t[2]||(t[2]=b=>s.potentialStore.unselectPotential())},null,8,["colorScale","onSelectPotential"])])])):(openBlock(),createElementBlock("div",_hoisted_9,[createVNode(_)]))])])}const StructureSelection=_export_sfc(_sfc_main$7,[["render",_sfc_render$5],["__scopeId","data-v-292a178a"]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _3Dmol$1={exports:{}};/*!
 * 3dmol v2.0.3
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */(function(module,exports){(function(t,r){module.exports=r()})(commonjsGlobal,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":(e,t,r)=>{r.r(t),r.d(t,{IOBuffer:()=>c});var s=r("./node_modules/iobuffer/lib-esm/text.browser.js");const o=1024*8,n=(()=>{const y=new Uint8Array(4),_=new Uint32Array(y.buffer);return!((_[0]=1)&y[0])})(),f={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class c{constructor(_=o,b={}){let C=!1;typeof _=="number"?_=new ArrayBuffer(_):(C=!0,this.lastWrittenByte=_.byteLength);const M=b.offset?b.offset>>>0:0,E=_.byteLength-M;let P=M;(ArrayBuffer.isView(_)||_ instanceof c)&&(_.byteLength!==_.buffer.byteLength&&(P=_.byteOffset+M),_=_.buffer),C?this.lastWrittenByte=E:this.lastWrittenByte=0,this.buffer=_,this.length=E,this.byteLength=E,this.byteOffset=P,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,P,E),this._mark=0,this._marks=[]}available(_=1){return this.offset+_<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(_=1){return this.offset+=_,this}back(_=1){return this.offset-=_,this}seek(_){return this.offset=_,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const _=this._marks.pop();if(_===void 0)throw new Error("Mark stack empty");return this.seek(_),this}rewind(){return this.offset=0,this}ensureAvailable(_=1){if(!this.available(_)){const C=(this.offset+_)*2,M=new Uint8Array(C);M.set(new Uint8Array(this.buffer)),this.buffer=M.buffer,this.length=this.byteLength=C,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(_=1){return this.readArray(_,"uint8")}readArray(_,b){const C=f[b].BYTES_PER_ELEMENT*_,M=this.byteOffset+this.offset,E=this.buffer.slice(M,M+C);if(this.littleEndian===n&&b!=="uint8"&&b!=="int8"){const a=new Uint8Array(this.buffer.slice(M,M+C));a.reverse();const u=new f[b](a.buffer);return this.offset+=C,u.reverse(),u}const P=new f[b](E);return this.offset+=C,P}readInt16(){const _=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,_}readUint16(){const _=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,_}readInt32(){const _=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,_}readUint32(){const _=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,_}readFloat32(){const _=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_}readFloat64(){const _=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_}readBigInt64(){const _=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,_}readBigUint64(){const _=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,_}readChar(){return String.fromCharCode(this.readInt8())}readChars(_=1){let b="";for(let C=0;C<_;C++)b+=this.readChar();return b}readUtf8(_=1){return(0,s.decode)(this.readBytes(_))}decodeText(_=1,b="utf-8"){return(0,s.decode)(this.readBytes(_),b)}writeBoolean(_){return this.writeUint8(_?255:0),this}writeInt8(_){return this.ensureAvailable(1),this._data.setInt8(this.offset++,_),this._updateLastWrittenByte(),this}writeUint8(_){return this.ensureAvailable(1),this._data.setUint8(this.offset++,_),this._updateLastWrittenByte(),this}writeByte(_){return this.writeUint8(_)}writeBytes(_){this.ensureAvailable(_.length);for(let b=0;b<_.length;b++)this._data.setUint8(this.offset++,_[b]);return this._updateLastWrittenByte(),this}writeInt16(_){return this.ensureAvailable(2),this._data.setInt16(this.offset,_,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(_){return this.ensureAvailable(2),this._data.setUint16(this.offset,_,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(_){return this.ensureAvailable(4),this._data.setInt32(this.offset,_,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(_){return this.ensureAvailable(4),this._data.setUint32(this.offset,_,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(_){return this.ensureAvailable(4),this._data.setFloat32(this.offset,_,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(_){return this.ensureAvailable(8),this._data.setFloat64(this.offset,_,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(_){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,_,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(_){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,_,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(_){return this.writeUint8(_.charCodeAt(0))}writeChars(_){for(let b=0;b<_.length;b++)this.writeUint8(_.charCodeAt(b));return this}writeUtf8(_){return this.writeBytes((0,s.encode)(_))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js":function(){(function(e){if(e.TextEncoder&&e.TextDecoder)return!1;function t(s="utf-8"){if(s!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${s}') is invalid.`)}Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(s,o={stream:!1}){if(o.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let n=0;const f=s.length;let c=0,y=Math.max(32,f+(f>>1)+7),_=new Uint8Array(y>>3<<3);for(;n<f;){let b=s.charCodeAt(n++);if(b>=55296&&b<=56319){if(n<f){const C=s.charCodeAt(n);(C&64512)===56320&&(++n,b=((b&1023)<<10)+(C&1023)+65536)}if(b>=55296&&b<=56319)continue}if(c+4>_.length){y+=8,y*=1+n/s.length*2,y=y>>3<<3;const C=new Uint8Array(y);C.set(_),_=C}if(b&4294967168)if(!(b&4294965248))_[c++]=b>>6&31|192;else if(!(b&4294901760))_[c++]=b>>12&15|224,_[c++]=b>>6&63|128;else if(!(b&4292870144))_[c++]=b>>18&7|240,_[c++]=b>>12&63|128,_[c++]=b>>6&63|128;else continue;else{_[c++]=b;continue}_[c++]=b&63|128}return _.slice(0,c)};function r(s="utf-8",o={fatal:!1}){if(s!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${s}') is invalid.`);if(o.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(s,o={stream:!1}){if(o.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const n=new Uint8Array(s);let f=0;const c=n.length,y=[];for(;f<c;){const _=n[f++];if(_===0)break;if(!(_&128))y.push(_);else if((_&224)===192){const b=n[f++]&63;y.push((_&31)<<6|b)}else if((_&240)===224){const b=n[f++]&63,C=n[f++]&63;y.push((_&31)<<12|b<<6|C)}else if((_&248)===240){const b=n[f++]&63,C=n[f++]&63,M=n[f++]&63;let E=(_&7)<<18|b<<12|C<<6|M;E>65535&&(E-=65536,y.push(E>>>10&1023|55296),E=56320|E&1023),y.push(E)}}return String.fromCharCode.apply(null,y)},e.TextEncoder=t,e.TextDecoder=r})(typeof window<"u"?window:typeof self<"u"?self:this)},"./node_modules/iobuffer/lib-esm/text.browser.js":(e,t,r)=>{r.r(t),r.d(t,{decode:()=>s,encode:()=>n}),r("./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js");function s(f,c="utf8"){return new TextDecoder(c).decode(f)}const o=new TextEncoder;function n(f){return o.encode(f)}},"./node_modules/netcdfjs/src/data.js":(e,t,r)=>{r.r(t),r.d(t,{nonRecord:()=>o,record:()=>n});var s=r("./node_modules/netcdfjs/src/types.js");function o(f,c){const y=(0,s.str2num)(c.type);let _=c.size/(0,s.num2bytes)(y),b=new Array(_);for(let C=0;C<_;C++)b[C]=(0,s.readType)(f,y,1);return b}function n(f,c,y){const _=(0,s.str2num)(c.type),b=c.size?c.size/(0,s.num2bytes)(_):1;let C=y.length,M=new Array(C);const E=y.recordStep;for(let P=0;P<C;P++){let a=f.offset;M[P]=(0,s.readType)(f,_,b),f.seek(a+E)}return M}},"./node_modules/netcdfjs/src/header.js":(e,t,r)=>{r.r(t),r.d(t,{header:()=>_});var s=r("./node_modules/netcdfjs/src/types.js"),o=r("./node_modules/netcdfjs/src/utils.js");const n=0,f=10,c=11,y=12;function _(P,a){let u={recordDimension:{length:P.readUint32()}};u.version=a;let g=C(P);u.recordDimension.id=g.recordId,u.recordDimension.name=g.recordName,u.dimensions=g.dimensions,u.globalAttributes=M(P);let A=E(P,g.recordId,a);return u.variables=A.variables,u.recordDimension.recordStep=A.recordStep,u}const b=0;function C(P){let a,u;const g=P.readUint32();let A;if(g===n)return(0,o.notNetcdf)(P.readUint32()!==n,"wrong empty tag for list of dimensions"),[];{(0,o.notNetcdf)(g!==f,"wrong tag for list of dimensions");const x=P.readUint32();A=new Array(x);for(let l=0;l<x;l++){let v=(0,o.readName)(P);const w=P.readUint32();w===b&&(a=l,u=v),A[l]={name:v,size:w}}}return{dimensions:A,recordId:a,recordName:u}}function M(P){const a=P.readUint32();let u;if(a===n)return(0,o.notNetcdf)(P.readUint32()!==n,"wrong empty tag for list of attributes"),[];{(0,o.notNetcdf)(a!==y,"wrong tag for list of attributes");const g=P.readUint32();u=new Array(g);for(let A=0;A<g;A++){let x=(0,o.readName)(P),l=P.readUint32();(0,o.notNetcdf)(l<1||l>6,`non valid type ${l}`);let v=P.readUint32(),w=(0,s.readType)(P,l,v);(0,o.padding)(P),u[A]={name:x,type:(0,s.num2str)(l),value:w}}}return u}function E(P,a,u){const g=P.readUint32();let A=0,x;if(g===n)return(0,o.notNetcdf)(P.readUint32()!==n,"wrong empty tag for list of variables"),[];{(0,o.notNetcdf)(g!==c,"wrong tag for list of variables");const l=P.readUint32();x=new Array(l);for(let v=0;v<l;v++){let w=(0,o.readName)(P);const O=P.readUint32();let T=new Array(O);for(let B=0;B<O;B++)T[B]=P.readUint32();let D=M(P),I=P.readUint32();(0,o.notNetcdf)(I<1&&I>6,`non valid type ${I}`);const k=P.readUint32();let z=P.readUint32();u===2&&((0,o.notNetcdf)(z>0,"offsets larger than 4GB not supported"),z=P.readUint32());let L=!1;typeof a<"u"&&T[0]===a&&(A+=k,L=!0),x[v]={name:w,dimensions:T,attributes:D,type:(0,s.num2str)(I),size:k,offset:z,record:L}}}return{variables:x,recordStep:A}}},"./node_modules/netcdfjs/src/index.js":(e,t,r)=>{r.r(t),r.d(t,{NetCDFReader:()=>y});var s=r("./node_modules/iobuffer/lib-esm/IOBuffer.js"),o=r("./node_modules/netcdfjs/src/data.js"),n=r("./node_modules/netcdfjs/src/header.js"),f=r("./node_modules/netcdfjs/src/toString.js"),c=r("./node_modules/netcdfjs/src/utils.js");class y{constructor(b){const C=new s.IOBuffer(b);C.setBigEndian(),(0,c.notNetcdf)(C.readChars(3)!=="CDF","should start with CDF");const M=C.readByte();(0,c.notNetcdf)(M>2,"unknown version"),this.header=(0,n.header)(C,M),this.buffer=C}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(b){const C=this.globalAttributes.find(M=>M.name===b);return C?C.value:null}getDataVariableAsString(b){const C=this.getDataVariable(b);return C?C.join(""):null}get variables(){return this.header.variables}toString(){return f.toString.call(this)}getDataVariable(b){let C;return typeof b=="string"?C=this.header.variables.find(M=>M.name===b):C=b,(0,c.notNetcdf)(C===void 0,`variable not found: ${b}`),this.buffer.seek(C.offset),C.record?(0,o.record)(this.buffer,C,this.header.recordDimension):(0,o.nonRecord)(this.buffer,C)}dataVariableExists(b){return this.header.variables.find(M=>M.name===b)!==void 0}attributeExists(b){return this.globalAttributes.find(M=>M.name===b)!==void 0}}},"./node_modules/netcdfjs/src/toString.js":(e,t,r)=>{r.r(t),r.d(t,{toString:()=>s});function s(){let o=[];o.push("DIMENSIONS");for(let f of this.dimensions)o.push(`  ${f.name.padEnd(30)} = size: ${f.size}`);o.push(""),o.push("GLOBAL ATTRIBUTES");for(let f of this.globalAttributes)o.push(`  ${f.name.padEnd(30)} = ${f.value}`);let n=JSON.parse(JSON.stringify(this.variables));o.push(""),o.push("VARIABLES:");for(let f of n){f.value=this.getDataVariable(f);let c=JSON.stringify(f.value);c.length>50&&(c=c.substring(0,50)),isNaN(f.value.length)||(c+=` (length: ${f.value.length})`),o.push(`  ${f.name.padEnd(30)} = ${c}`)}return o.join(`
`)}},"./node_modules/netcdfjs/src/types.js":(e,t,r)=>{r.r(t),r.d(t,{num2bytes:()=>f,num2str:()=>n,readType:()=>_,str2num:()=>c});var s=r("./node_modules/netcdfjs/src/utils.js");const o={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function n(C){switch(Number(C)){case o.BYTE:return"byte";case o.CHAR:return"char";case o.SHORT:return"short";case o.INT:return"int";case o.FLOAT:return"float";case o.DOUBLE:return"double";default:return"undefined"}}function f(C){switch(Number(C)){case o.BYTE:return 1;case o.CHAR:return 1;case o.SHORT:return 2;case o.INT:return 4;case o.FLOAT:return 4;case o.DOUBLE:return 8;default:return-1}}function c(C){switch(String(C)){case"byte":return o.BYTE;case"char":return o.CHAR;case"short":return o.SHORT;case"int":return o.INT;case"float":return o.FLOAT;case"double":return o.DOUBLE;default:return-1}}function y(C,M){if(C!==1){let E=new Array(C);for(let P=0;P<C;P++)E[P]=M();return E}else return M()}function _(C,M,E){switch(M){case o.BYTE:return C.readBytes(E);case o.CHAR:return b(C.readChars(E));case o.SHORT:return y(E,C.readInt16.bind(C));case o.INT:return y(E,C.readInt32.bind(C));case o.FLOAT:return y(E,C.readFloat32.bind(C));case o.DOUBLE:return y(E,C.readFloat64.bind(C));default:(0,s.notNetcdf)(!0,`non valid type ${M}`);return}}function b(C){return C.charCodeAt(C.length-1)===0?C.substring(0,C.length-1):C}},"./node_modules/netcdfjs/src/utils.js":(e,t,r)=>{r.r(t),r.d(t,{notNetcdf:()=>s,padding:()=>o,readName:()=>n});function s(f,c){if(f)throw new TypeError(`Not a valid NetCDF v3.x file: ${c}`)}function o(f){f.offset%4!==0&&f.skip(4-f.offset%4)}function n(f){let c=f.readUint32(),y=f.readChars(c);return o(f),y}},"./src/WebGL/shaders/lib/basic/basic.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/basic/basic.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/instanced/instanced.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambert/lambert.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/outline/outline.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/outline/outline.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    gl_Position = projectionMatrix * mvPosition;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/screen/screen.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;

// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0

vec4 applyFXAA(vec2 fragCoord, sampler2D tex)
{
    vec4 color;
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec3 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP).xyz;
    vec3 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP).xyz;
    vec3 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP).xyz;
    vec3 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP).xyz;
    vec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)).xyz +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5).xyz +
        texture2D(tex, fragCoord  + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, 1.0);
    else
        color = vec4(rgbB, 1.0);
    return color;
}
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    gl_FragColor = vec4(vLight*vColor, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );


}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);
    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+adjust;
}

`},"./src/WebGL/shaders/lib/sprite/sprite.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a < alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogType > 0) {

        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = 0.0;

        if (fogType == 1) {
            fogFactor = smoothstep(fogNear, fogFar, depth);
        }

        else {
            const float LOG2 = 1.442695;
            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);
            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);
        }

        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    gl_FragColor = vec4(light*color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(projectionMatrix[3][3] == 0.0) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(projectionMatrix[3][3] == 0.0) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }
    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
    mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    to.xyz += normalize(to.xyz)*outlinePushback;
    pt.xyz += normalize(pt.xyz)*outlinePushback;

    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }
    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/volumetric/volumetric.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/WebGL/shaders/utils/stickimposterFragmentShader.partial.frag":(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});const s=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/GLDraw.ts":(e,t,r)=>{r.r(t),r.d(t,{CAP:()=>o,GLDraw:()=>n});var s=r("./src/WebGL/math/index.ts"),o;(function(f){f[f.NONE=0]="NONE",f[f.FLAT=1]="FLAT",f[f.ROUND=2]="ROUND"})(o||(o={}));var n;(function(f){function c(a,u,g){var A=Math.sqrt(a*a+u*u),x,l,v,w,O;A<1e-4?(l=0,v=1):(l=-a/A,v=u/A),u=-l*a+v*u,x=Math.sqrt(u*u+g*g),x<1e-4?(w=0,O=1):(w=g/x,O=u/x);var T=new Float32Array(9);return T[0]=v,T[1]=l,T[2]=0,T[3]=-l*O,T[4]=v*O,T[5]=w,T[6]=l*w,T[7]=-v*w,T[8]=O,T}class y{constructor(){this.cache={};let u=[],g=4,A=Math.pow(2,g),x=2,l=Math.pow(2,x),v=A/l,w;for(u[0]=new s.Vector3(-1,0,0),u[v]=new s.Vector3(0,0,1),u[v*2]=new s.Vector3(1,0,0),u[v*3]=new s.Vector3(0,0,-1),x=3;x<=g;x++){for(l=Math.pow(2,x-1),v=A/l,w=0;w<l-1;w++)u[v/2+w*v]=u[w*v].clone().add(u[(w+1)*v]).normalize();w=l-1,u[v/2+w*v]=u[w*v].clone().add(u[0]).normalize()}this.basisVectors=u}getVerticesForRadius(u,g,A){if(typeof this.cache<"u"&&this.cache[u]!==void 0&&this.cache[u][g+A]!==void 0)return this.cache[u][g+A];for(var x=this.basisVectors.length,l=[],v=[],w,O=0;O<x;O++)l.push(this.basisVectors[O].clone().multiplyScalar(u)),l.push(this.basisVectors[O].clone().multiplyScalar(u)),w=this.basisVectors[O].clone().normalize(),v.push(w),v.push(w);var T=[],D=10,I=x,k=0,z=Math.PI*2,L=0,B=Math.PI,H,V,N=!1,U=!1;for(V=0;V<=D;V++){N=V===0||V===D,U=V===D/2;var G=[],$=[];for(H=0;H<=I;H++){if(U){var W=H<I?2*H:0;$.push(W+1),G.push(W);continue}var j=H/I,se=V/D;if(!N||H===0)if(H<I){var he=new s.Vector3;he.x=-u*Math.cos(k+j*z)*Math.sin(L+se*B),g==1?he.y=0:he.y=u*Math.cos(L+se*B),he.z=u*Math.sin(k+j*z)*Math.sin(L+se*B),Math.abs(he.x)<1e-5&&(he.x=0),Math.abs(he.y)<1e-5&&(he.y=0),Math.abs(he.z)<1e-5&&(he.z=0),g==o.FLAT?(w=new s.Vector3(0,Math.cos(L+se*B),0),w.normalize()):(w=new s.Vector3(he.x,he.y,he.z),w.normalize()),l.push(he),v.push(w),G.push(l.length-1)}else G.push(l.length-I);else N&&G.push(l.length-1)}U&&T.push($),T.push(G)}var ce={vertices:l,normals:v,verticesRows:T,w:I,h:D};return u in this.cache||(this.cache[u]={}),this.cache[u][g+A]=ce,ce}}var _=new y;function b(a,u,g,A,x,l=0,v=0){if(!(!u||!g)){var w=v||l;x=x||{r:0,g:0,b:0};var O=c(g.x-u.x,g.y-u.y,g.z-u.z),T=_.getVerticesForRadius(A,v,"to"),D=T.w,I=T.h,k=w?I*D+2:2*D,z=a.updateGeoGroup(k),L=T.vertices,B=T.normals,H=T.verticesRows,V=H[I/2],N=H[I/2+1],U=z.vertices,G,$,W,j,se,he,ce=z.vertexArray,ue=z.normalArray,Ee=z.colorArray,pe=z.faceArray;for(W=0;W<D;++W){var fe=2*W;j=O[0]*L[fe].x+O[3]*L[fe].y+O[6]*L[fe].z,se=O[1]*L[fe].x+O[4]*L[fe].y+O[7]*L[fe].z,he=O[5]*L[fe].y+O[8]*L[fe].z,G=3*(U+fe),$=z.faceidx,ce[G]=j+u.x,ce[G+1]=se+u.y,ce[G+2]=he+u.z,ce[G+3]=j+g.x,ce[G+4]=se+g.y,ce[G+5]=he+g.z,ue[G]=j,ue[G+3]=j,ue[G+1]=se,ue[G+4]=se,ue[G+2]=he,ue[G+5]=he,Ee[G]=x.r,Ee[G+3]=x.r,Ee[G+1]=x.g,Ee[G+4]=x.g,Ee[G+2]=x.b,Ee[G+5]=x.b,pe[$]=N[W]+U,pe[$+1]=N[W+1]+U,pe[$+2]=V[W]+U,pe[$+3]=V[W]+U,pe[$+4]=N[W+1]+U,pe[$+5]=V[W+1]+U,z.faceidx+=6}if(w){var Ue=v?0:I/2,Oe=l?I+1:I/2+1,ee,J,ne,le,we,Pe,Be,Ce,be,ge,Ae,De,Re,Ge,Ke,Q,Z,ie,ye,xe,Ne,Ve,X,ve,Me,He,me,ze,Y,We,Ze,F;for(se=Ue;se<Oe;se++)if(se!==I/2){var Te=se<=I/2?g:u,Ie=_.getVerticesForRadius(A,v,"to"),q=_.getVerticesForRadius(A,l,"from");for(Te===g?(L=Ie.vertices,B=Ie.normals,H=Ie.verticesRows):Te==u&&(L=q.vertices,B=q.normals,H=q.verticesRows),j=0;j<D;j++)$=z.faceidx,ee=H[se][j+1],Y=(ee+U)*3,J=H[se][j],We=(J+U)*3,ne=H[se+1][j],Ze=(ne+U)*3,le=H[se+1][j+1],F=(le+U)*3,we=O[0]*L[ee].x+O[3]*L[ee].y+O[6]*L[ee].z,Pe=O[0]*L[J].x+O[3]*L[J].y+O[6]*L[J].z,Be=O[0]*L[ne].x+O[3]*L[ne].y+O[6]*L[ne].z,Ce=O[0]*L[le].x+O[3]*L[le].y+O[6]*L[le].z,be=O[1]*L[ee].x+O[4]*L[ee].y+O[7]*L[ee].z,ge=O[1]*L[J].x+O[4]*L[J].y+O[7]*L[J].z,Ae=O[1]*L[ne].x+O[4]*L[ne].y+O[7]*L[ne].z,De=O[1]*L[le].x+O[4]*L[le].y+O[7]*L[le].z,Re=O[5]*L[ee].y+O[8]*L[ee].z,Ge=O[5]*L[J].y+O[8]*L[J].z,Ke=O[5]*L[ne].y+O[8]*L[ne].z,Q=O[5]*L[le].y+O[8]*L[le].z,ce[Y]=we+Te.x,ce[We]=Pe+Te.x,ce[Ze]=Be+Te.x,ce[F]=Ce+Te.x,ce[Y+1]=be+Te.y,ce[We+1]=ge+Te.y,ce[Ze+1]=Ae+Te.y,ce[F+1]=De+Te.y,ce[Y+2]=Re+Te.z,ce[We+2]=Ge+Te.z,ce[Ze+2]=Ke+Te.z,ce[F+2]=Q+Te.z,Ee[Y]=x.r,Ee[We]=x.r,Ee[Ze]=x.r,Ee[F]=x.r,Ee[Y+1]=x.g,Ee[We+1]=x.g,Ee[Ze+1]=x.g,Ee[F+1]=x.g,Ee[Y+2]=x.b,Ee[We+2]=x.b,Ee[Ze+2]=x.b,Ee[F+2]=x.b,Z=O[0]*B[ee].x+O[3]*B[ee].y+O[6]*B[ee].z,ie=O[0]*B[J].x+O[3]*B[J].y+O[6]*B[J].z,ye=O[0]*B[ne].x+O[3]*B[ne].y+O[6]*B[ne].z,xe=O[0]*B[le].x+O[3]*B[le].y+O[6]*B[le].z,Ne=O[1]*B[ee].x+O[4]*B[ee].y+O[7]*B[ee].z,Ve=O[1]*B[J].x+O[4]*B[J].y+O[7]*B[J].z,X=O[1]*B[ne].x+O[4]*B[ne].y+O[7]*B[ne].z,ve=O[1]*B[le].x+O[4]*B[le].y+O[7]*B[le].z,Me=O[5]*B[ee].y+O[8]*B[ee].z,He=O[5]*B[J].y+O[8]*B[J].z,me=O[5]*B[ne].y+O[8]*B[ne].z,ze=O[5]*B[le].y+O[8]*B[le].z,se===0?(ue[Y]=Z,ue[Ze]=ye,ue[F]=xe,ue[Y+1]=Ne,ue[Ze+1]=X,ue[F+1]=ve,ue[Y+2]=Me,ue[Ze+2]=me,ue[F+2]=ze,pe[$]=ee+U,pe[$+1]=ne+U,pe[$+2]=le+U,z.faceidx+=3):se===Oe-1?(ue[Y]=Z,ue[We]=ie,ue[Ze]=ye,ue[Y+1]=Ne,ue[We+1]=Ve,ue[Ze+1]=X,ue[Y+2]=Me,ue[We+2]=He,ue[Ze+2]=me,pe[$]=ee+U,pe[$+1]=J+U,pe[$+2]=ne+U,z.faceidx+=3):(ue[Y]=Z,ue[We]=ie,ue[F]=xe,ue[Y+1]=Ne,ue[We+1]=Ve,ue[F+1]=ve,ue[Y+2]=Me,ue[We+2]=He,ue[F+2]=ze,ue[We]=ie,ue[Ze]=ye,ue[F]=xe,ue[We+1]=Ve,ue[Ze+1]=X,ue[F+1]=ve,ue[We+2]=He,ue[Ze+2]=me,ue[F+2]=ze,pe[$]=ee+U,pe[$+1]=J+U,pe[$+2]=le+U,pe[$+3]=J+U,pe[$+4]=ne+U,pe[$+5]=le+U,z.faceidx+=6)}}z.vertices+=k}}f.drawCylinder=b;function C(a,u,g,A,x){if(!u||!g)return;x=x||{r:0,g:0,b:0};let l=new s.Vector3(g.x-u.x,g.y-u.y,g.z-u.z);var v=c(l.x,l.y,l.z);l=l.normalize();var w=_.basisVectors.length,O=_.basisVectors,T=w+2,D=a.updateGeoGroup(T),I=D.vertices,k,z,L,B,H,V,N=D.vertexArray,U=D.normalArray,G=D.colorArray,$=D.faceArray;for(k=I*3,N[k]=u.x,N[k+1]=u.y,N[k+2]=u.z,U[k]=-l.x,U[k+1]=-l.y,U[k+2]=-l.z,G[k]=x.r,G[k+1]=x.g,G[k+2]=x.b,N[k+3]=g.x,N[k+4]=g.y,N[k+5]=g.z,U[k+3]=l.x,U[k+4]=l.y,U[k+5]=l.z,G[k+3]=x.r,G[k+4]=x.g,G[k+5]=x.b,k+=6,L=0;L<w;++L){var W=O[L].clone();W.multiplyScalar(A),B=v[0]*W.x+v[3]*W.y+v[6]*W.z,H=v[1]*W.x+v[4]*W.y+v[7]*W.z,V=v[5]*W.y+v[8]*W.z,N[k]=B+u.x,N[k+1]=H+u.y,N[k+2]=V+u.z,U[k]=B,U[k+1]=H,U[k+2]=V,G[k]=x.r,G[k+1]=x.g,G[k+2]=x.b,k+=3}for(D.vertices+=w+2,z=D.faceidx,L=0;L<w;L++){var j=I+2+L,se=I+2+(L+1)%w;$[z]=j,$[z+1]=se,$[z+2]=I,z+=3,$[z]=j,$[z+1]=se,$[z+2]=I+1,z+=3}D.faceidx+=6*w}f.drawCone=C;class M{constructor(){this.cache=new Map}getVerticesForRadius(u,g){g=g||2,this.cache.has(g)||this.cache.set(g,new Map);let A=this.cache.get(g);if(A.has(u))return A.get(u);var x={vertices:[],verticesRows:[],normals:[]},l=16*g,v=10*g;u<1&&(l=10*g,v=8*g);var w=0,O=Math.PI*2,T=0,D=Math.PI,I,k;for(k=0;k<=v;k++){let L=[];for(I=0;I<=l;I++){let B=I/l,H=k/v,V=-u*Math.cos(w+B*O)*Math.sin(T+H*D),N=u*Math.cos(T+H*D),U=u*Math.sin(w+B*O)*Math.sin(T+H*D);var z=new s.Vector3(V,N,U);z.normalize(),x.vertices.push({x:V,y:N,z:U}),x.normals.push(z),L.push(x.vertices.length-1)}x.verticesRows.push(L)}return A.set(u,x),x}}var E=new M;function P(a,u,g,A,x){var l=E.getVerticesForRadius(g,x),v=l.vertices,w=l.normals,O=a.updateGeoGroup(v.length),T=O.vertices,D=O.vertexArray,I=O.colorArray,k=O.faceArray,z=O.lineArray,L=O.normalArray;for(let V=0,N=v.length;V<N;++V){let U=3*(T+V),G=v[V];D[U]=G.x+u.x,D[U+1]=G.y+u.y,D[U+2]=G.z+u.z,I[U]=A.r,I[U+1]=A.g,I[U+2]=A.b}O.vertices+=v.length;let B=l.verticesRows,H=B.length-1;for(let V=0;V<H;V++){let N=B[V].length-1;for(let U=0;U<N;U++){let G=O.faceidx,$=O.lineidx,W=B[V][U+1]+T,j=W*3,se=B[V][U]+T,he=se*3,ce=B[V+1][U]+T,ue=ce*3,Ee=B[V+1][U+1]+T,pe=Ee*3,fe=w[W-T],Ue=w[se-T],Oe=w[ce-T],ee=w[Ee-T];Math.abs(v[W-T].y)===g?(L[j]=fe.x,L[ue]=Oe.x,L[pe]=ee.x,L[j+1]=fe.y,L[ue+1]=Oe.y,L[pe+1]=ee.y,L[j+2]=fe.z,L[ue+2]=Oe.z,L[pe+2]=ee.z,k[G]=W,k[G+1]=ce,k[G+2]=Ee,z[$]=W,z[$+1]=ce,z[$+2]=W,z[$+3]=Ee,z[$+4]=ce,z[$+5]=Ee,O.faceidx+=3,O.lineidx+=6):Math.abs(v[ce-T].y)===g?(L[j]=fe.x,L[he]=Ue.x,L[ue]=Oe.x,L[j+1]=fe.y,L[he+1]=Ue.y,L[ue+1]=Oe.y,L[j+2]=fe.z,L[he+2]=Ue.z,L[ue+2]=Oe.z,k[G]=W,k[G+1]=se,k[G+2]=ce,z[$]=W,z[$+1]=se,z[$+2]=W,z[$+3]=ce,z[$+4]=se,z[$+5]=ce,O.faceidx+=3,O.lineidx+=6):(L[j]=fe.x,L[he]=Ue.x,L[pe]=ee.x,L[j+1]=fe.y,L[he+1]=Ue.y,L[pe+1]=ee.y,L[j+2]=fe.z,L[he+2]=Ue.z,L[pe+2]=ee.z,L[he]=Ue.x,L[ue]=Oe.x,L[pe]=ee.x,L[he+1]=Ue.y,L[ue+1]=Oe.y,L[pe+1]=ee.y,L[he+2]=Ue.z,L[ue+2]=Oe.z,L[pe+2]=ee.z,k[G]=W,k[G+1]=se,k[G+2]=Ee,k[G+3]=se,k[G+4]=ce,k[G+5]=Ee,z[$]=W,z[$+1]=se,z[$+2]=W,z[$+3]=Ee,z[$+4]=se,z[$+5]=ce,z[$+6]=ce,z[$+7]=Ee,O.faceidx+=6,O.lineidx+=8)}}}f.drawSphere=P})(n||(n={}))},"./src/GLModel.ts":(e,t,r)=>{r.r(t),r.d(t,{GLModel:()=>a});var s=r("./src/WebGL/index.ts"),o=r("./src/WebGL/shapes/index.ts"),n=r("./src/WebGL/math/index.ts"),f=r("./src/colors.ts"),c=r("./src/GLDraw.ts"),y=r("./src/glcartoon.ts"),_=r("./src/utilities.ts"),b=r("./src/Gradient.ts"),C=r("./src/parsers/index.ts"),M=r("./node_modules/netcdfjs/src/index.js"),E=r("./node_modules/pako/dist/pako.esm.mjs"),P=r("./src/parsers/utils/assignBonds.ts");class a{static sameObj(g,A){return g&&A?JSON.stringify(g)==JSON.stringify(A):g==A}constructor(g,A){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new n.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=f.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=A||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:f.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=g}getRadiusFromStyle(g,A){var x=this.defaultSphereRadius;if(typeof A.radius<"u")x=A.radius;else if(a.vdwRadii[g.elem])x=a.vdwRadii[g.elem];else if(g.elem.length>1){let l=g.elem;l=l[0].toUpperCase()+l[1].toLowerCase(),a.vdwRadii[l]&&(x=a.vdwRadii[l])}return typeof A.scale<"u"&&(x*=A.scale),x}drawAtomCross(g,A){if(g.style.cross){var x=g.style.cross;if(!x.hidden){var l=x.linewidth||a.defaultlineWidth;A[l]||(A[l]=new s.Geometry);var v=A[l].updateGeoGroup(6),w=this.getRadiusFromStyle(g,x),O=[[w,0,0],[-w,0,0],[0,w,0],[0,-w,0],[0,0,w],[0,0,-w]],T=g.clickable||g.hoverable;T&&g.intersectionShape===void 0&&(g.intersectionShape={sphere:[],cylinder:[],line:[]});for(var D=(0,_.getColorFromStyle)(g,x),I=v.vertexArray,k=v.colorArray,z=0;z<6;z++){var L=v.vertices*3;if(v.vertices++,I[L]=g.x+O[z][0],I[L+1]=g.y+O[z][1],I[L+2]=g.z+O[z][2],k[L]=D.r,k[L+1]=D.g,k[L+2]=D.b,T){var B=new n.Vector3(O[z][0],O[z][1],O[z][2]);B.multiplyScalar(.1),B.set(B.x+g.x,B.y+g.y,B.z+g.z),g.intersectionShape.line.push(B)}}}}}getGoodCross(g,A,x,l){for(var v=null,w=-1,O=0,T=g.bonds.length;O<T;O++)if(g.bonds[O]!=A.index){let I=g.bonds[O],k=this.atoms[I],L=new n.Vector3(k.x,k.y,k.z).clone();L.sub(x);let B=L.clone();B.cross(l);var D=B.lengthSq();if(D>w&&(w=D,v=B,w>.1))return v}return v}getSideBondV(g,A,x){var l,v,w,O,T,D=new n.Vector3(g.x,g.y,g.z),I=new n.Vector3(A.x,A.y,A.z),k=I.clone(),z=null;if(k.sub(D),g.bonds.length===1)A.bonds.length===1?(z=k.clone(),Math.abs(z.x)>1e-4?z.y+=1:z.x+=1):(l=(x+1)%A.bonds.length,v=A.bonds[l],w=this.atoms[v],O=new n.Vector3(w.x,w.y,w.z),T=O.clone(),T.sub(D),z=T.clone(),z.cross(k));else if(z=this.getGoodCross(g,A,D,k),z.lengthSq()<.01){var L=this.getGoodCross(A,g,D,k);L!=null&&(z=L)}return z.lengthSq()<.01&&(z=k.clone(),Math.abs(z.x)>1e-4?z.y+=1:z.x+=1),z.cross(k),z.normalize(),z}addLine(g,A,x,l,v,w){g[x]=l.x,g[x+1]=l.y,g[x+2]=l.z,A[x]=w.r,A[x+1]=w.g,A[x+2]=w.b,g[x+3]=v.x,g[x+4]=v.y,g[x+5]=v.z,A[x+3]=w.r,A[x+4]=w.g,A[x+5]=w.b}drawBondLines(g,A,x){if(g.style.line){var l=g.style.line;if(!l.hidden){var v,w,O,T,D=l.linewidth||a.defaultlineWidth;x[D]||(x[D]=new s.Geometry);for(var I=x[D].updateGeoGroup(6*g.bonds.length),k=I.vertexArray,z=I.colorArray,L=0;L<g.bonds.length;L++){var B=g.bonds[L],H=A[B];if(H.style.line&&!(g.index>=H.index)){var V=new n.Vector3(g.x,g.y,g.z),N=new n.Vector3(H.x,H.y,H.z),U=V.clone().add(N).multiplyScalar(.5),G=!1,$=g.clickable||g.hoverable,W=H.clickable||H.hoverable;($||W)&&($&&(g.intersectionShape===void 0&&(g.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),g.intersectionShape.line.push(V),g.intersectionShape.line.push(U)),W&&(H.intersectionShape===void 0&&(H.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),H.intersectionShape.line.push(U),H.intersectionShape.line.push(N)));var j=(0,_.getColorFromStyle)(g,g.style.line),se=(0,_.getColorFromStyle)(H,H.style.line);if(g.bondStyles&&g.bondStyles[L]){var he=g.bondStyles[L];if(!he.iswire)continue;he.singleBond&&(G=!0),typeof he.color1<"u"&&(j=f.CC.color(he.color1)),typeof he.color2<"u"&&(se=f.CC.color(he.color2))}var ce=I.vertices*3,ue,Ee;if(g.bondOrder[L]>1&&g.bondOrder[L]<4&&!G){var pe=this.getSideBondV(g,H,L),fe=N.clone();fe.sub(V),g.bondOrder[L]==2?(pe.multiplyScalar(.1),v=V.clone(),v.add(pe),w=V.clone(),w.sub(pe),O=v.clone(),O.add(fe),T=w.clone(),T.add(fe),j==se?(I.vertices+=4,this.addLine(k,z,ce,v,O,j),this.addLine(k,z,ce+6,w,T,j)):(I.vertices+=8,fe.multiplyScalar(.5),ue=v.clone(),ue.add(fe),Ee=w.clone(),Ee.add(fe),this.addLine(k,z,ce,v,ue,j),this.addLine(k,z,ce+6,ue,O,se),this.addLine(k,z,ce+12,w,Ee,j),this.addLine(k,z,ce+18,Ee,T,se))):g.bondOrder[L]==3&&(pe.multiplyScalar(.1),v=V.clone(),v.add(pe),w=V.clone(),w.sub(pe),O=v.clone(),O.add(fe),T=w.clone(),T.add(fe),j==se?(I.vertices+=6,this.addLine(k,z,ce,V,N,j),this.addLine(k,z,ce+6,v,O,j),this.addLine(k,z,ce+12,w,T,j)):(I.vertices+=12,fe.multiplyScalar(.5),ue=v.clone(),ue.add(fe),Ee=w.clone(),Ee.add(fe),this.addLine(k,z,ce,V,U,j),this.addLine(k,z,ce+6,U,N,se),this.addLine(k,z,ce+12,v,ue,j),this.addLine(k,z,ce+18,ue,O,se),this.addLine(k,z,ce+24,w,Ee,j),this.addLine(k,z,ce+30,Ee,T,se)))}else j==se?(I.vertices+=2,this.addLine(k,z,ce,V,N,j)):(I.vertices+=4,this.addLine(k,z,ce,V,U,j),this.addLine(k,z,ce+6,U,N,se))}}}}}drawAtomSphere(g,A){if(g.style.sphere){var x=g.style.sphere;if(!x.hidden){var l=(0,_.getColorFromStyle)(g,x),v=this.getRadiusFromStyle(g,x);if((g.clickable===!0||g.hoverable)&&g.intersectionShape!==void 0){var w=new n.Vector3(g.x,g.y,g.z);g.intersectionShape.sphere.push(new o.Sphere(w,v))}c.GLDraw.drawSphere(A,g,v,l)}}}drawAtomClickSphere(g){if(g.style.clicksphere){var A=g.style.clicksphere;if(!A.hidden){var x=this.getRadiusFromStyle(g,A);if((g.clickable===!0||g.hoverable)&&g.intersectionShape!==void 0){var l=new n.Vector3(g.x,g.y,g.z);g.intersectionShape.sphere.push(new o.Sphere(l,x))}}}}drawAtomInstanced(g,A){if(g.style.sphere){var x=g.style.sphere;if(!x.hidden){var l=this.getRadiusFromStyle(g,x),v=(0,_.getColorFromStyle)(g,x),w=A.updateGeoGroup(1),O=w.vertices,T=O*3,D=w.vertexArray,I=w.colorArray,k=w.radiusArray;if(D[T]=g.x,D[T+1]=g.y,D[T+2]=g.z,I[T]=v.r,I[T+1]=v.g,I[T+2]=v.b,k[O]=l,(g.clickable===!0||g.hoverable)&&g.intersectionShape!==void 0){var z=new n.Vector3(g.x,g.y,g.z);g.intersectionShape.sphere.push(new o.Sphere(z,l))}w.vertices+=1}}}drawSphereImposter(g,A,x,l){var v=g.updateGeoGroup(4),w,O=v.vertices,T=O*3,D=v.vertexArray,I=v.colorArray;for(w=0;w<4;w++)D[T+3*w]=A.x,D[T+3*w+1]=A.y,D[T+3*w+2]=A.z;var k=v.normalArray;for(w=0;w<4;w++)I[T+3*w]=l.r,I[T+3*w+1]=l.g,I[T+3*w+2]=l.b;k[T+0]=-x,k[T+1]=x,k[T+2]=0,k[T+3]=-x,k[T+4]=-x,k[T+5]=0,k[T+6]=x,k[T+7]=-x,k[T+8]=0,k[T+9]=x,k[T+10]=x,k[T+11]=0,v.vertices+=4;var z=v.faceArray,L=v.faceidx;z[L+0]=O,z[L+1]=O+1,z[L+2]=O+2,z[L+3]=O+2,z[L+4]=O+3,z[L+5]=O,v.faceidx+=6}drawAtomImposter(g,A){if(g.style.sphere){var x=g.style.sphere;if(!x.hidden){var l=this.getRadiusFromStyle(g,x),v=(0,_.getColorFromStyle)(g,x);if((g.clickable===!0||g.hoverable)&&g.intersectionShape!==void 0){var w=new n.Vector3(g.x,g.y,g.z);g.intersectionShape.sphere.push(new o.Sphere(w,l))}this.drawSphereImposter(A,g,l,v)}}}static drawStickImposter(g,A,x,l,v){for(var w=g.updateGeoGroup(4),O=w.vertices,T=O*3,D=w.vertexArray,I=w.colorArray,k=w.radiusArray,z=w.normalArray,L=v.r,B=v.g,H=v.b,V=function(W){var j=-W;return j==0&&(j=-1e-4),j},N=T,U=0;U<4;U++)D[N]=A.x,z[N]=x.x,I[N]=L,N++,D[N]=A.y,z[N]=x.y,I[N]=B,N++,D[N]=A.z,z[N]=x.z,U<2?I[N]=H:I[N]=V(H),N++;w.vertices+=4,k[O]=-l,k[O+1]=l,k[O+2]=-l,k[O+3]=l;var G=w.faceArray,$=w.faceidx;G[$+0]=O,G[$+1]=O+1,G[$+2]=O+2,G[$+3]=O+2,G[$+4]=O+3,G[$+5]=O,w.faceidx+=6}drawBondSticks(g,A,x){if(g.style.stick){var l=g.style.stick;if(!l.hidden){var v=l.radius||this.defaultStickRadius,w=v,O=l.singleBonds||!1,T=0,D=0,I,k,z,L,B,H,V,N,U,G,$,W=(0,_.getColorFromStyle)(g,l),j,se,he;!g.capDrawn&&g.bonds.length<4&&(T=2);var ce=c.GLDraw.drawCylinder;for(x.imposter&&(ce=a.drawStickImposter),z=0;z<g.bonds.length;z++){var ue=g.bonds[z],Ee=A[ue];if(j=se=he=null,g.index<Ee.index){var pe=Ee.style;if(!pe.stick||pe.stick.hidden)continue;var fe=(0,_.getColorFromStyle)(Ee,pe.stick);if(w=v,L=O,g.bondStyles&&g.bondStyles[z]){if(B=g.bondStyles[z],B.iswire)continue;B.radius&&(w=B.radius),B.singleBond&&(L=!0),typeof B.color1<"u"&&(W=f.CC.color(B.color1)),typeof B.color2<"u"&&(fe=f.CC.color(B.color2))}var Ue=new n.Vector3(g.x,g.y,g.z),Oe=new n.Vector3(Ee.x,Ee.y,Ee.z);if(g.bondOrder[z]<=1||L||g.bondOrder[z]>3){if(g.bondOrder[z]<1&&(w*=g.bondOrder[z]),!Ee.capDrawn&&Ee.bonds.length<4&&(D=2),W!=fe?(j=new n.Vector3().addVectors(Ue,Oe).multiplyScalar(.5),ce(x,Ue,j,w,W,T,0),ce(x,j,Oe,w,fe,0,D)):ce(x,Ue,Oe,w,W,T,D),I=g.clickable||g.hoverable,k=Ee.clickable||Ee.hoverable,I||k){if(j||(j=new n.Vector3().addVectors(Ue,Oe).multiplyScalar(.5)),I){var ee=new o.Cylinder(Ue,j,w),J=new o.Sphere(Ue,w);g.intersectionShape.cylinder.push(ee),g.intersectionShape.sphere.push(J)}if(k){var ne=new o.Cylinder(Oe,j,w),le=new o.Sphere(Oe,w);Ee.intersectionShape.cylinder.push(ne),Ee.intersectionShape.sphere.push(le)}}}else if(g.bondOrder[z]>1){var we=0,Pe=0;w!=v&&(we=2,Pe=2);var Be=Oe.clone(),Ce=null;Be.sub(Ue);var be,ge,Ae,De,Re;Ce=this.getSideBondV(g,Ee,z),g.bondOrder[z]==2?(be=w/2.5,Ce.multiplyScalar(be*1.5),ge=Ue.clone(),ge.add(Ce),Ae=Ue.clone(),Ae.sub(Ce),De=ge.clone(),De.add(Be),Re=Ae.clone(),Re.add(Be),W!=fe?(j=new n.Vector3().addVectors(ge,De).multiplyScalar(.5),se=new n.Vector3().addVectors(Ae,Re).multiplyScalar(.5),ce(x,ge,j,be,W,we,0),ce(x,j,De,be,fe,0,Pe),ce(x,Ae,se,be,W,we,0),ce(x,se,Re,be,fe,0,Pe)):(ce(x,ge,De,be,W,we,Pe),ce(x,Ae,Re,be,W,we,Pe)),I=g.clickable||g.hoverable,k=Ee.clickable||Ee.hoverable,(I||k)&&(j||(j=new n.Vector3().addVectors(ge,De).multiplyScalar(.5)),se||(se=new n.Vector3().addVectors(Ae,Re).multiplyScalar(.5)),I&&(H=new o.Cylinder(ge,j,be),V=new o.Cylinder(Ae,se,be),g.intersectionShape.cylinder.push(H),g.intersectionShape.cylinder.push(V)),k&&(U=new o.Cylinder(De,j,be),G=new o.Cylinder(Re,se,be),Ee.intersectionShape.cylinder.push(U),Ee.intersectionShape.cylinder.push(G)))):g.bondOrder[z]==3&&(be=w/4,Ce.cross(Be),Ce.normalize(),Ce.multiplyScalar(be*3),ge=Ue.clone(),ge.add(Ce),Ae=Ue.clone(),Ae.sub(Ce),De=ge.clone(),De.add(Be),Re=Ae.clone(),Re.add(Be),W!=fe?(j=new n.Vector3().addVectors(ge,De).multiplyScalar(.5),se=new n.Vector3().addVectors(Ae,Re).multiplyScalar(.5),he=new n.Vector3().addVectors(Ue,Oe).multiplyScalar(.5),ce(x,ge,j,be,W,we,0),ce(x,j,De,be,fe,0,Pe),ce(x,Ue,he,be,W,T,0),ce(x,he,Oe,be,fe,0,D),ce(x,Ae,se,be,W,we,0),ce(x,se,Re,be,fe,0,Pe)):(ce(x,ge,De,be,W,we,Pe),ce(x,Ue,Oe,be,W,T,D),ce(x,Ae,Re,be,W,we,Pe)),I=g.clickable||g.hoverable,k=Ee.clickable||Ee.hoverable,(I||k)&&(j||(j=new n.Vector3().addVectors(ge,De).multiplyScalar(.5)),se||(se=new n.Vector3().addVectors(Ae,Re).multiplyScalar(.5)),he||(he=new n.Vector3().addVectors(Ue,Oe).multiplyScalar(.5)),I&&(H=new o.Cylinder(ge.clone(),j.clone(),be),V=new o.Cylinder(Ae.clone(),se.clone(),be),N=new o.Cylinder(Ue.clone(),he.clone(),be),g.intersectionShape.cylinder.push(H),g.intersectionShape.cylinder.push(V),g.intersectionShape.cylinder.push(N)),k&&(U=new o.Cylinder(De.clone(),j.clone(),be),G=new o.Cylinder(Re.clone(),se.clone(),be),$=new o.Cylinder(Oe.clone(),he.clone(),be),Ee.intersectionShape.cylinder.push(U),Ee.intersectionShape.cylinder.push(G),Ee.intersectionShape.cylinder.push($))))}}}var Ge=!1,Ke=0,Q=!1;for(z=0;z<g.bonds.length;z++)L=O,g.bondStyles&&g.bondStyles[z]&&(B=g.bondStyles[z],B.singleBond&&(L=!0),B.radius&&B.radius!=v&&(Q=!0)),(L||g.bondOrder[z]==1)&&Ke++;Q?Ke>0&&(Ge=!0):Ke==0&&(g.bonds.length>0||l.showNonBonded)&&(Ge=!0),Ge&&(w=v,x.imposter?this.drawSphereImposter(x.sphereGeometry,g,w,W):c.GLDraw.drawSphere(x,g,w,W))}}}createMolObj(g,A){A=A||{};var x=new s.Object3D,l=[],v={},w={},O=this.drawAtomSphere,T=null,D=null;A.supportsImposters?(O=this.drawAtomImposter,T=new s.Geometry(!0),T.imposter=!0,D=new s.Geometry(!0,!0),D.imposter=!0,D.sphereGeometry=new s.Geometry(!0),D.sphereGeometry.imposter=!0,D.drawnCaps={}):A.supportsAIA?(O=this.drawAtomInstanced,T=new s.Geometry(!1,!0,!0),T.instanced=!0,D=new s.Geometry(!0)):(T=new s.Geometry(!0),D=new s.Geometry(!0));var I,k,z,L,B={},H=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(I=0,z=g.length;I<z;I++){var V=g[I];if(V&&V.style){(V.clickable||V.hoverable)&&V.intersectionShape===void 0&&(V.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),L={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(k in L)V.style[k]?V.style[k].opacity?L[k]=parseFloat(V.style[k].opacity):L[k]=1:L[k]=void 0,B[k]?L[k]!=null&&B[k]!=L[k]&&(console.log("Warning: "+k+" opacity is ambiguous"),B[k]=1):B[k]=L[k];O.call(this,V,T),this.drawAtomClickSphere(V),this.drawAtomCross(V,w),this.drawBondLines(V,g,v),this.drawBondSticks(V,g,D),typeof V.style.cartoon<"u"&&!V.style.cartoon.hidden&&(V.style.cartoon.color==="spectrum"&&typeof V.resi=="number"&&!V.hetflag&&(V.resi<H[0]&&(H[0]=V.resi),V.resi>H[1]&&(H[1]=V.resi)),l.push(V))}}if(l.length>0&&(0,y.drawCartoon)(x,l,H,this.defaultCartoonQuality),T&&T.vertices>0){T.initTypedArrays();var N=null,U=null;T.imposter?N=new s.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):T.instanced?(U=new s.Geometry(!0),c.GLDraw.drawSphere(U,{x:0,y:0,z:0},1,new f.Color(.5,.5,.5)),U.initTypedArrays(),N=new s.InstancedMaterial({sphereMaterial:new s.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:U})):N=new s.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),B.sphere<1&&B.sphere>=0&&(N.transparent=!0,N.opacity=B.sphere),U=new s.Mesh(T,N),x.add(U)}if(D.vertices>0){var G=null,$=null,W=D.sphereGeometry;(!W||typeof W.vertices>"u"||W.vertices==0)&&(W=null),D.initTypedArrays(),W&&W.initTypedArrays();var j={ambient:0,vertexColors:!0,reflectivity:0};D.imposter?(G=new s.StickImposterMaterial(j),$=new s.SphereImposterMaterial(j)):(G=new s.MeshLambertMaterial(j),$=new s.MeshLambertMaterial(j),G.wireframe&&(D.setUpWireframe(),W&&W.setUpWireframe())),B.stick<1&&B.stick>=0&&(G.transparent=!0,G.opacity=B.stick,$.transparent=!0,$.opacity=B.stick);var se=new s.Mesh(D,G);if(x.add(se),W){var he=new s.Mesh(W,$);x.add(he)}}var ce;for(I in v)if(v.hasOwnProperty(I)){ce=I;var ue=new s.LineBasicMaterial({linewidth:ce,vertexColors:!0});B.line<1&&B.line>=0&&(ue.transparent=!0,ue.opacity=B.line),v[I].initTypedArrays();var Ee=new s.Line(v[I],ue,s.LineStyle.LinePieces);x.add(Ee)}for(I in w)if(w.hasOwnProperty(I)){ce=I;var pe=new s.LineBasicMaterial({linewidth:ce,vertexColors:!0});B.cross<1&&B.cross>=0&&(pe.transparent=!0,pe.opacity=B.cross),w[I].initTypedArrays();var fe=new s.Line(w[I],pe,s.LineStyle.LinePieces);x.add(fe)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Ue=new s.Object3D,Oe;for(Oe=0;Oe<this.modelData.symmetries.length;Oe++){var ee=new s.Object3D;ee=x.clone(),ee.matrix.copy(this.modelData.symmetries[Oe]),ee.matrixAutoUpdate=!1,Ue.add(ee)}return Ue}return x}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(g){this.atoms=g.atoms,this.frames=g.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const g=this.modelData.cryst;this.modelData.cryst.matrix=(0,n.conversionMatrix3)(g.a,g.b,g.c,g.alpha,g.beta,g.gamma)}return this.modelData.cryst}else return null}setCrystData(g,A,x,l,v,w){g=g||1,A=A||1,x=x||1,l=l||90,v=v||90,w=w||90;const O=(0,n.conversionMatrix3)(g,A,x,l,v,w);this.modelData.cryst={a:g,b:A,c:x,alpha:l,beta:v,gamma:w,matrix:O}}setCrystMatrix(g){g=g||new n.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:g}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(g){typeof g>"u"?this.modelData.symmetries=[this.idMatrix]:this.modelData.symmetries=g}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(g,A,x,l){var v=A-g;return v<-x?A+l:v>x?A-l:A}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var g=this.box[0],A=this.box[1],x=this.box[2],l=g*.9,v=A*.9,w=x*.9,O=0;O<this.atomdfs.length;O++)for(var T=this.atomdfs[O],D=1;D<T.length;D++){var I=this.atoms[T[D][0]],k=this.atoms[T[D][1]];I.x=this.adjustCoord(k.x,I.x,l,g),I.y=this.adjustCoord(k.y,I.y,v,A),I.z=this.adjustCoord(k.z,I.z,w,x)}}setFrame(g,A){var x=this.getNumFrames();let l=this;return new Promise(function(v,w){if(x==0&&v(),(g<0||g>=x)&&(g=x-1),l.frames.url!=null){var O=l.frames.url;(0,_.getbin)(O+"/traj/frame/"+g+"/"+l.frames.path,void 0,"POST",void 0).then(function(T){for(var D=new Float32Array(T,44),I=0,k=0;k<l.atoms.length;k++)l.atoms[k].x=D[I++],l.atoms[k].y=D[I++],l.atoms[k].z=D[I++];l.box&&l.atomdfs&&l.adjustCoordinatesToBox(),v()}).catch(w)}else l.atoms=l.frames[g],v();l.molObj=null,l.modelDatas&&g<l.modelDatas.length&&(l.modelData=l.modelDatas[g],l.unitCellObjects&&A&&(A.removeUnitCell(l),A.addUnitCell(l)))})}addFrame(g){this.frames.push(g)}vibrate(g=10,A=1,x=!1,l,v){var w=0,O=g;x&&(w=-g,O=g),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),w<O&&(this.frames=[]),x&&(this.frames.origIndex=g);for(var T=w;T<O;T++){var D=[],I=this.frames.length;if(T==0&&!v){this.frames.push(this.atoms);continue}for(var k=0;k<this.atoms.length;k++){var z=(0,_.getAtomProperty)(this.atoms[k],"dx"),L=(0,_.getAtomProperty)(this.atoms[k],"dy"),B=(0,_.getAtomProperty)(this.atoms[k],"dz"),H=new n.Vector3(z,L,B),V=new n.Vector3(this.atoms[k].x,this.atoms[k].y,this.atoms[k].z),N=T*A/g;H.multiplyScalar(N),V.add(H);var U={};for(var G in this.atoms[k])U[G]=this.atoms[k][G];if(U.x=V.x,U.y=V.y,U.z=V.z,D.push(U),l&&v){var $=(0,_.extend)({},v),W=new n.Vector3(z,L,B);if(W.multiplyScalar(A),W.add(V),$.start=V,$.end=W,$.frame=I,!$.color){var j=U.style.sphere;j||(j=U.style.stick),j||(j=U.style.line),$.color=(0,_.getColorFromStyle)(U,j)}l.addArrow($)}}this.frames.push(D)}}setAtomDefaults(g){for(let A=0;A<g.length;A++){let x=g[A];x&&(x.style=x.style||(0,_.deepCopy)(a.defaultAtomStyle),x.color=x.color||this.ElementColors[x.elem]||this.defaultColor,x.model=this.id,(x.clickable||x.hoverable)&&(x.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(g,A,x={}){var l=a.parseMolData(g,A,x);this.dontDuplicateAtoms=!x.duplicateAssemblyAtoms;var v=l.modelData;if(v&&(Array.isArray(v)?(this.modelData=v[0],x.frames&&(this.modelDatas=v)):this.modelData=v),l.box?this.box=l.box:this.box=null,this.frames.length==0){for(let O=0;O<l.length;O++)l[O].length!=0&&this.frames.push(l[O]);this.frames[0]&&(this.atoms=this.frames[0])}else if(x.frames)for(let O=0;O<l.length;O++)this.frames.push(l[O]);else for(var w=0;w<l.length;w++)this.addAtoms(l[w]);for(let O=0;O<this.frames.length;O++)this.setAtomDefaults(this.frames[O]);x.vibrate&&x.vibrate.frames&&x.vibrate.amplitude&&this.vibrate(x.vibrate.frames,x.vibrate.amplitude),x.style&&this.setStyle({},x.style)}setDontDuplicateAtoms(g){this.dontDuplicateAtoms=g}setModelData(g){this.modelData=g}propertyMatches(g,A){if(g==A)return!0;if(typeof A=="string"&&typeof g=="number"){var x=A.match(/(-?\d+)\s*-\s*(-?\d+)/);if(x){var l=parseInt(x[1]),v=parseInt(x[2]);if(x&&g>=l&&g<=v)return!0}}return!1}static deepCopyAndCache(g,A){if(typeof g!="object"||g==null||g.__cache_created)return g;const x={};for(const l in g){const v=g[l];if(Array.isArray(v)){x[l]=[];for(let w=0;w<v.length;w++)x[l].push(a.deepCopyAndCache(v[w],A))}else typeof v=="object"&&l!="properties"&&l!="model"?x[l]=a.deepCopyAndCache(v,A):x[l]=v;if(l=="and"||l=="or"){const w=[];for(const O of x[l]){const T=new Set;for(const D of A.selectedAtoms(O))T.add(D.index);w.push(T)}if(l=="and"){const O=function(D,I){const k=new Set;for(const z of I)D.has(z)&&k.add(z);return k};let T=new Set(w[0]);for(const D of w.splice(1))T=O(T,D);x[l].__cached_results=T}else if(l=="or"){const O=new Set;for(const T of w)for(const D of T)O.add(D);x[l].__cached_results=O}}}return x.__cache_created=!0,x}atomIsSelected(g,A){if(typeof A>"u")return!0;var x=!!A.invert,l=!0;for(var v in A)if(v=="and"||v=="or"||v=="not"){if(v=="not"){if(this.atomIsSelected(g,A[v])){l=!1;break}}else if(A[v].__cached_results===void 0&&(A=a.deepCopyAndCache(A,this)),l=A[v].__cached_results.has(g.index),!l)break}else if(v==="predicate"){if(!A.predicate(g)){l=!1;break}}else if(v=="properties"&&g[v]){for(var w in A.properties)if(!w.startsWith("__cache")){if(typeof g.properties[w]>"u"){l=!1;break}if(g.properties[w]!=A.properties[w]){l=!1;break}}}else if(A.hasOwnProperty(v)&&v!="props"&&v!="invert"&&v!="model"&&v!="byres"&&v!="expand"&&v!="within"&&v!="and"&&v!="or"&&v!="not"&&!v.startsWith("__cache")){if(typeof g[v]>"u"){l=!1;break}var O=!1;if(v==="bonds"){var T=A[v];if(T!=g.bonds.length){l=!1;break}}else if(Array.isArray(A[v])){var D=A[v],I=g[v];for(let k=0;k<D.length;k++)if(this.propertyMatches(I,D[k])){O=!0;break}if(!O){l=!1;break}}else{let k=A[v];if(!this.propertyMatches(g[v],k)){l=!1;break}}}return x?!l:l}static squaredDistance(g,A){var x=A.x-g.x,l=A.y-g.y,v=A.z-g.z;return x*x+l*l+v*v}expandAtomList(g,A){if(A<=0)return g;for(var x=(0,_.getExtent)(g,void 0),l=[[],[],[]],v=0;v<3;v++)l[0][v]=x[0][v]-A,l[1][v]=x[1][v]+A,l[2][v]=x[2][v];var w=[];for(let I=0;I<this.atoms.length;I++){var O=this.atoms[I].x,T=this.atoms[I].y,D=this.atoms[I].z;O>=l[0][0]&&O<=l[1][0]&&T>=l[0][1]&&T<=l[1][1]&&D>=l[0][2]&&D<=l[1][2]&&(O>=x[0][0]&&O<=x[1][0]&&T>=x[0][1]&&T<=x[1][1]&&D>=x[0][2]&&D<=x[1][2]||w.push(this.atoms[I]))}return w}static getFloat(g){return typeof g=="number"?g:parseFloat(g)}selectedAtoms(g,A){var x=[];g=a.deepCopyAndCache(g||{},this),A||(A=this.atoms);for(var l=A.length,v=0;v<l;v++){var w=A[v];w&&this.atomIsSelected(w,g)&&x.push(w)}if(g.hasOwnProperty("expand")){const U=a.getFloat(g.expand);let G=this.expandAtomList(x,U),$=x.length;const W=U*U;for(let j=0;j<G.length;j++)for(let se=0;se<$;se++){var O=a.squaredDistance(G[j],x[se]);O<W&&O>0&&x.push(G[j])}}if(g.hasOwnProperty("within")&&g.within.hasOwnProperty("sel")&&g.within.hasOwnProperty("distance")){var T=this.selectedAtoms(g.within.sel,this.atoms),D={};const U=a.getFloat(g.within.distance),G=U*U;for(let $=0;$<T.length;$++)for(let W=0;W<x.length;W++){let j=a.squaredDistance(T[$],x[W]);j<G&&j>0&&(D[W]=1)}var I=[];if(g.within.invert)for(let $=0;$<x.length;$++)D[$]||I.push(x[$]);else for(let $ in D)I.push(x[$]);x=I}if(g.hasOwnProperty("byres")){var k={},z=[],L=[];for(let U=0;U<x.length;U++){let G=x[U];var B=G.chain,H=G.resi;if(k[B]===void 0&&(k[B]={}),G.hasOwnProperty("resi")&&k[B][H]===void 0){for(k[B][H]=!0,L.push(G);L.length>0;)if(G=L.pop(),B=G.chain,H=G.resi,z[G.index]===void 0){z[G.index]=!0;for(var V=0;V<G.bonds.length;V++){var N=this.atoms[G.bonds[V]];z[N.index]===void 0&&N.hasOwnProperty("resi")&&N.chain==B&&N.resi==H&&(L.push(N),x.push(N))}}}}}return x}addAtoms(g){this.molObj=null;var A=this.atoms.length,x=[],l;for(l=0;l<g.length;l++)typeof g[l].index>"u"&&(g[l].index=l),typeof g[l].serial>"u"&&(g[l].serial=l),x[g[l].index]=A+l;for(l=0;l<g.length;l++){var v=g[l],w=x[v.index],O=(0,_.extend)({},v);O.index=w,O.bonds=[],O.bondOrder=[],O.model=this.id,O.style=O.style||(0,_.deepCopy)(a.defaultAtomStyle),typeof O.color>"u"&&(O.color=this.ElementColors[O.elem]||this.defaultColor);for(var T=v.bonds?v.bonds.length:0,D=0;D<T;D++){var I=x[v.bonds[D]];typeof I<"u"&&(O.bonds.push(I),O.bondOrder.push(v.bondOrder?v.bondOrder[D]:1))}this.atoms.push(O)}}assignBonds(){(0,P.assignBonds)(this.atoms)}removeAtoms(g){this.molObj=null;var A=[],x;for(x=0;x<g.length;x++)A[g[x].index]=!0;var l=[];for(x=0;x<this.atoms.length;x++){var v=this.atoms[x];A[v.index]||l.push(v)}this.atoms=[],this.addAtoms(l)}setStyle(g,A,x){typeof A>"u"&&typeof x>"u"&&(A=g,g={}),typeof A=="string"&&(A=(0,_.specStringToObject)(A));var l=!1,v=this,w=function(T){var D=v.selectedAtoms(g,T);for(let I=0;I<T.length;I++)T[I]&&(T[I].capDrawn=!1);for(let I=0;I<D.length;I++){l=!0,(D[I].clickable||D[I].hoverable)&&(D[I].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),x||(D[I].style={});for(let k in A)A.hasOwnProperty(k)&&(D[I].style[k]=D[I].style[k]||{},Object.assign(D[I].style[k],A[k]))}};w(this.atoms);for(var O=0;O<this.frames.length;O++)this.frames[O]!==this.atoms&&w(this.frames[O]);l&&(this.molObj=null)}setClickable(g,A,x){if(A=!!A,x=(0,_.makeFunction)(x),x===null){console.log("Callback is not a function");return}var l=this.selectedAtoms(g,this.atoms),v=l.length;for(let w=0;w<v;w++)l[w].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},l[w].clickable=A,x&&(l[w].callback=x);v>0&&(this.molObj=null)}setHoverable(g,A,x,l){if(A=!!A,x=(0,_.makeFunction)(x),l=(0,_.makeFunction)(l),x===null){console.log("Hover_callback is not a function");return}if(l===null){console.log("Unhover_callback is not a function");return}var v=this.selectedAtoms(g,this.atoms),w=v.length;for(let O=0;O<w;O++)v[O].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},v[O].hoverable=A,x&&(v[O].hover_callback=x),l&&(v[O].unhover_callback=l);w>0&&(this.molObj=null)}enableContextMenu(g,A){A=!!A;var x,l=this.selectedAtoms(g,this.atoms),v=l.length;for(x=0;x<v;x++)l[x].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},l[x].contextMenuEnabled=A;v>0&&(this.molObj=null)}setColorByElement(g,A){if(!(this.molObj!==null&&a.sameObj(A,this.lastColors))){this.lastColors=A;var x=this.selectedAtoms(g,x);x.length>0&&(this.molObj=null);for(var l=0;l<x.length;l++){var v=x[l];typeof A[v.elem]<"u"&&(v.color=A[v.elem])}}}setColorByProperty(g,A,x,l){var v,w,O=this.selectedAtoms(g,O);for(this.lastColors=null,O.length>0&&(this.molObj=null),typeof x=="string"&&typeof b.Gradient.builtinGradients[x]<"u"&&(x=new b.Gradient.builtinGradients[x]),x=x,l||(l=x.range()),l||(l=(0,_.getPropertyRange)(O,A)),v=0;v<O.length;v++){w=O[v];var T=(0,_.getAtomProperty)(w,A);T!=null&&(w.color=x.valueToHex(parseFloat(w.properties[A]),l))}}setColorByFunction(g,A){var x=this.selectedAtoms(g,x);if(typeof A=="function"){this.lastColors=null,x.length>0&&(this.molObj=null);for(let l=0;l<x.length;l++){let v=x[l];v.color=A(v)}}}toCDObject(g=!1){var A={a:[],b:[]};g&&(A.s=[]);for(let l=0;l<this.atoms.length;l++){let v={},w=this.atoms[l];if(v.x=w.x,v.y=w.y,v.z=w.z,w.elem!="C"&&(v.l=w.elem),g){for(var x=0;x<A.s.length&&JSON.stringify(w.style)!==JSON.stringify(A.s[x]);)x++;x===A.s.length&&A.s.push(w.style),x!==0&&(v.s=x)}A.a.push(v);for(let O=0;O<w.bonds.length;O++){let T=l,D=w.bonds[O];if(T>=D)continue;let I={b:T,e:D},k=w.bondOrder[O];k!=1&&(I.o=k),A.b.push(I)}}return A}globj(g,A){(this.molObj===null||A.regen)&&(this.molObj=this.createMolObj(this.atoms,A),this.renderedMolObj&&(g.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),g.add(this.renderedMolObj))}exportVRML(){var g=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return g.vrml()}removegl(g){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),g.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(g,A,x,l){for(var v=this.selectedAtoms(A,v),w=(0,_.deepCopy)(l),O=0;O<v.length;O++){var T=v[O],D=null;typeof T[g]<"u"?D=String(T[g]):typeof T.properties[g]<"u"&&(D=String(T.properties[g])),D!=null&&(w.position=T,x.addLabel(D,w))}}addResLabels(g,A,x,l=!1){var v=[],w=function(T,D){for(var I=T.selectedAtoms(g,I),k={},z=0;z<I.length;z++){var L=I[z],B=L.chain,H=L.resn,V=L.resi,N=H+""+V;k[B]||(k[B]={}),k[B][N]||(k[B][N]=[]),k[B][N].push(L)}var U=(0,_.deepCopy)(x);for(let $ in k)if(k.hasOwnProperty($)){var G=k[$];for(let W in G)if(G.hasOwnProperty(W)){let j=G[W],se=new n.Vector3(0,0,0);for(let ce=0;ce<j.length;ce++){let ue=j[ce];se.x+=ue.x,se.y+=ue.y,se.z+=ue.z}se.divideScalar(j.length),U.position=se,U.frame=D;let he=A.addLabel(W,U,void 0,!0);v.push(he)}}};if(l){var O=this.getNumFrames();let T=this.atoms;for(let D=0;D<O;D++)this.frames[D]&&(this.atoms=this.frames[D],w(this,D));this.atoms=T}else w(this);return v}setupDFS(){this.atomdfs=[];var g=this,A=new Int8Array(this.atoms.length);A.fill(0);for(var x=function(O,T,D){D.push([O,T]);var I=g.atoms[O];A[O]=1;for(var k=0;k<I.bonds.length;k++){var z=I.bonds[k];g.atoms[z]&&!A[z]&&x(z,O,D)}},l=0;l<this.atoms.length;l++){var v=this.atoms[l];if(v&&!A[l]){var w=[];x(l,-1,w),this.atomdfs.push(w)}}}setCoordinatesFromURL(g,A){this.frames=[];var x=this;return this.box&&this.setupDFS(),g.startsWith("http")||(g="http://"+g),(0,_.get)(g+"/traj/numframes/"+A,function(l){if(!isNaN(parseInt(l)))return x.frames.push(x.atoms),x.frames.numFrames=l,x.frames.url=g,x.frames.path=A,x.setFrame(0)})}setCoordinates(g,A){if(A=A||"",!g)return[];if(/\.gz$/.test(A)){A=A.replace(/\.gz$/,"");try{g=(0,E.inflate)(g,{to:"string"})}catch(k){console.log(k)}}var x={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(x.hasOwnProperty(A)){this.frames=[];for(var l=this.atoms.length,v=a.parseCrd(g,A),w=0;w<v.length;){for(var O=[],T=0;T<l;T++){var D={};for(var I in this.atoms[T])D[I]=this.atoms[T][I];O[T]=D,O[T].x=v[w++],O[T].y=v[w++],O[T].z=v[w++]}this.frames.push(O)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(g){}static parseCrd(g,A){var x=[],l=0;if(A=="pdb")for(var v=g.indexOf(`
ATOM`);v!=-1;){for(;g.slice(v,v+5)==`
ATOM`||g.slice(v,v+7)==`
HETATM`;)x[l++]=parseFloat(g.slice(v+31,v+39)),x[l++]=parseFloat(g.slice(v+39,v+47)),x[l++]=parseFloat(g.slice(v+47,v+55)),v=g.indexOf(`
`,v+54),g.slice(v,v+4)==`
TER`&&(v=g.indexOf(`
`,v+5));v=g.indexOf(`
ATOM`,v)}else if(A=="netcdf"){var w=new M.NetCDFReader(g);x=[].concat.apply([],w.getDataVariable("coordinates"))}else{if(A=="array"||Array.isArray(g))return g.flat(2);{let O=g.indexOf(`
`);A=="inpcrd"&&(O=g.indexOf(`
`,O+1)),g=g.slice(O+1),x=g.match(/\S+/g).map(parseFloat)}}return x}static parseMolData(g,A="",x){if(!g)return[];if(/\.gz$/.test(A)){A=A.replace(/\.gz$/,"");try{g=(0,E.inflate)(g,{to:"string"})}catch(w){console.log(w)}}typeof C.Parsers[A]>"u"&&(A=A.split(".").pop(),typeof C.Parsers[A]>"u"&&(console.log("Unknown format: "+A),g instanceof Uint8Array?A="mmtf":g.match(/^@<TRIPOS>MOLECULE/gm)?A="mol2":g.match(/^data_/gm)&&g.match(/^loop_/gm)?A="cif":g.match(/^HETATM/gm)||g.match(/^ATOM/gm)?A="pdb":g.match(/ITEM: TIMESTEP/gm)?A="lammpstrj":g.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?A="sdf":g.match(/^%VERSION\s+VERSION_STAMP/gm)?A="prmtop":A="xyz",console.log("Best guess: "+A)));var l=C.Parsers[A],v=l(g,x);return v}}a.defaultAtomStyle={line:{}},a.defaultlineWidth=1,a.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86}},"./src/GLShape.ts":(e,t,r)=>{r.r(t),r.d(t,{GLShape:()=>M,splitMesh:()=>E});var s=r("./src/WebGL/index.ts"),o=r("./src/WebGL/shapes/index.ts"),n=r("./src/WebGL/math/index.ts"),f=r("./src/colors.ts"),c=r("./src/ProteinSurface4.ts"),y=r("./src/VolumeData.ts"),_=r("./src/GLDraw.ts"),b=r("./src/glcartoon.ts"),C=r("./src/utilities.ts");class M{static finalizeGeo(a){var u=a.updateGeoGroup(0);u.vertices>0&&u.truncateArrayBuffers(!0,!0)}static updateColor(a,u){u=u||f.CC.color(u),a.colorsNeedUpdate=!0;var g,A,x;u.constructor!==Array&&(g=u.r,A=u.g,x=u.b);for(let l in a.geometryGroups){let v=a.geometryGroups[l],w=v.colorArray;for(let O=0,T=v.vertices;O<T;++O){if(u.constructor===Array){let D=u[O];g=D.r,A=D.g,x=D.b}w[O*3]=g,w[O*3+1]=A,w[O*3+2]=x}}}static drawArrow(a,u,g){var A=g.start,x=g.end,l=g.radius,v=g.radiusRatio,w=g.mid,O=g.midpos;if(!(A&&x))return;var T=u.updateGeoGroup(51),D=new n.Vector3(x.x,x.y,x.z).sub(A);if(O){let me=D.length();O>0?w=O/me:w=(me+O)/me}D.multiplyScalar(w);var I=new n.Vector3(A.x,A.y,A.z).add(D),k=D.clone().negate();let z=new n.Vector3(A.x,A.y,A.z);a.intersectionShape.cylinder.push(new o.Cylinder(z,I.clone(),l)),a.intersectionShape.sphere.push(new o.Sphere(z,l));var L=[];L[0]=D.clone(),Math.abs(L[0].x)>1e-4?L[0].y+=1:L[0].x+=1,L[0].cross(D),L[0].normalize(),L[4]=L[0].clone(),L[4].crossVectors(L[0],D),L[4].normalize(),L[8]=L[0].clone().negate(),L[12]=L[4].clone().negate(),L[2]=L[0].clone().add(L[4]).normalize(),L[6]=L[4].clone().add(L[8]).normalize(),L[10]=L[8].clone().add(L[12]).normalize(),L[14]=L[12].clone().add(L[0]).normalize(),L[1]=L[0].clone().add(L[2]).normalize(),L[3]=L[2].clone().add(L[4]).normalize(),L[5]=L[4].clone().add(L[6]).normalize(),L[7]=L[6].clone().add(L[8]).normalize(),L[9]=L[8].clone().add(L[10]).normalize(),L[11]=L[10].clone().add(L[12]).normalize(),L[13]=L[12].clone().add(L[14]).normalize(),L[15]=L[14].clone().add(L[0]).normalize();var B=T.vertices,H=T.vertexArray,V=T.faceArray,N=T.normalArray,U=T.lineArray,G,$,W;for($=0,W=L.length;$<W;++$){G=3*(B+3*$);var j=L[$].clone().multiplyScalar(l).add(A),se=L[$].clone().multiplyScalar(l).add(I),he=L[$].clone().multiplyScalar(l*v).add(I);if(H[G]=j.x,H[G+1]=j.y,H[G+2]=j.z,H[G+3]=se.x,H[G+4]=se.y,H[G+5]=se.z,H[G+6]=he.x,H[G+7]=he.y,H[G+8]=he.z,$>0){var ce=H[G-3],ue=H[G-2],Ee=H[G-1],pe=new n.Vector3(ce,ue,Ee),fe=new n.Vector3(x.x,x.y,x.z),Ue=I.clone(),Oe=new n.Vector3(he.x,he.y,he.z);a.intersectionShape.triangle.push(new o.Triangle(Oe,fe,pe)),a.intersectionShape.triangle.push(new o.Triangle(pe.clone(),Ue,Oe.clone()))}}T.vertices+=48,G=T.vertices*3,H[G]=A.x,H[G+1]=A.y,H[G+2]=A.z,H[G+3]=I.x,H[G+4]=I.y,H[G+5]=I.z,H[G+6]=x.x,H[G+7]=x.y,H[G+8]=x.z,T.vertices+=3;var ee,J,ne,le,we,Pe,Be,Ce,be,ge,Ae,De,Re,Ge,Ke,Q,Z,ie,ye,xe=T.vertices-3,Ne=T.vertices-2,Ve=T.vertices-1,X=xe*3,ve=Ne*3,Me=Ve*3;for($=0,W=L.length-1;$<W;++$){var He=B+3*$;G=He*3,J=T.faceidx,ne=T.lineidx,le=He,ge=le*3,we=He+1,Ae=we*3,Pe=He+2,De=Pe*3,Be=He+4,Re=Be*3,Ce=He+5,Ge=Ce*3,be=He+3,Ke=be*3,Q=Z=L[$],ie=ye=L[$+1],N[ge]=Q.x,N[Ae]=Z.x,N[Ke]=ye.x,N[ge+1]=Q.y,N[Ae+1]=Z.y,N[Ke+1]=ye.y,N[ge+2]=Q.z,N[Ae+2]=Z.z,N[Ke+2]=ye.z,N[Ae]=Z.x,N[Re]=ie.x,N[Ke]=ye.x,N[Ae+1]=Z.y,N[Re+1]=ie.y,N[Ke+1]=ye.y,N[Ae+2]=Z.z,N[Re+2]=ie.z,N[Ke+2]=ye.z,N[De]=Z.x,N[Ge]=ie.x,N[De+1]=Z.y,N[Ge+1]=ie.y,N[De+2]=Z.z,N[Ge+2]=ie.z,V[J]=le,V[J+1]=we,V[J+2]=be,V[J+3]=we,V[J+4]=Be,V[J+5]=be,V[J+6]=le,V[J+7]=be,V[J+8]=xe,V[J+9]=Pe,V[J+10]=Ne,V[J+11]=Ce,V[J+12]=Pe,V[J+13]=Ve,V[J+14]=Ce,U[ne]=le,U[ne+1]=we,U[ne+2]=le,U[ne+3]=be,U[ne+4]=Be,U[ne+5]=be,U[ne+6]=le,U[ne+7]=be,U[ne+8]=Pe,U[ne+9]=we,U[ne+10]=Pe,U[ne+11]=Ce,U[ne+12]=Be,U[ne+13]=Ce,U[ne+14]=Pe,U[ne+15]=Ve,U[ne+16]=Pe,U[ne+17]=Ce,U[ne+18]=Ve,U[ne+19]=Ce,T.faceidx+=15,T.lineidx+=20}ee=[B+45,B+46,B+1,B,B+47,B+2],J=T.faceidx,ne=T.lineidx,le=ee[0],ge=le*3,we=ee[1],Ae=we*3,Pe=ee[4],De=Pe*3,Be=ee[2],Re=Be*3,Ce=ee[5],Ge=Ce*3,be=ee[3],Ke=be*3,Q=Z=L[15],ie=ye=L[0],N[ge]=Q.x,N[Ae]=Z.x,N[Ke]=ye.x,N[ge+1]=Q.y,N[Ae+1]=Z.y,N[Ke+1]=ye.y,N[ge+2]=Q.z,N[Ae+2]=Z.z,N[Ke+2]=ye.z,N[Ae]=Z.x,N[Re]=ie.x,N[Ke]=ye.x,N[Ae+1]=Z.y,N[Re+1]=ie.y,N[Ke+1]=ye.y,N[Ae+2]=Z.z,N[Re+2]=ie.z,N[Ke+2]=ye.z,N[De]=Z.x,N[Ge]=ie.x,N[De+1]=Z.y,N[Ge+1]=ie.y,N[De+2]=Z.z,N[Ge+2]=ie.z,D.normalize(),k.normalize(),N[X]=k.x,N[ve]=N[Me]=D.x,N[X+1]=k.y,N[ve+1]=N[Me+1]=D.y,N[X+2]=k.z,N[ve+2]=N[Me+2]=D.z,V[J]=le,V[J+1]=we,V[J+2]=be,V[J+3]=we,V[J+4]=Be,V[J+5]=be,V[J+6]=le,V[J+7]=be,V[J+8]=xe,V[J+9]=Pe,V[J+10]=Ne,V[J+11]=Ce,V[J+12]=Pe,V[J+13]=Ve,V[J+14]=Ce,U[ne]=le,U[ne+1]=we,U[ne+2]=le,U[ne+3]=be,U[ne+4]=Be,U[ne+5]=be,U[ne+6]=le,U[ne+7]=be,U[ne+8]=Pe,U[ne+9]=we,U[ne+10]=Pe,U[ne+11]=Ce,U[ne+12]=Be,U[ne+13]=Ce,U[ne+14]=Pe,U[ne+15]=Ve,U[ne+16]=Pe,U[ne+17]=Ce,U[ne+18]=Ve,U[ne+19]=Ce,T.faceidx+=15,T.lineidx+=20}static updateBoundingFromPoints(a,u,g,A){a.center.set(0,0,0);let x=1/0,l=1/0,v=1/0,w=-1/0,O=-1/0,T=-1/0;a.box&&(x=a.box.min.x,w=a.box.max.x,l=a.box.min.y,O=a.box.max.y,v=a.box.min.z,T=a.box.max.z);for(let z=0,L=A;z<L;z++){var D=g[z*3],I=g[z*3+1],k=g[z*3+2];D<x&&(x=D),I<l&&(l=I),k<v&&(v=k),D>w&&(w=D),I>O&&(O=I),k>T&&(T=k)}a.center.set((w+x)/2,(O+l)/2,(T+v)/2),a.radius=a.center.distanceTo({x:w,y:O,z:T}),a.box={min:{x,y:l,z:v},max:{x:w,y:O,z:T}}}static addCustomGeo(a,u,g,A,x){var l=u.addGeoGroup(),v=g.vertexArr,w=g.normalArr,O=g.faceArr;l.vertices=v.length,l.faceidx=O.length;var T,D,I,k,z,L,B,H,V,N=l.vertexArray,U=l.colorArray;for(A.constructor!==Array&&(H=A.r,V=A.g,k=A.b),L=0,B=l.vertices;L<B;++L)T=L*3,D=v[L],N[T]=D.x,N[T+1]=D.y,N[T+2]=D.z,A.constructor===Array&&(z=A[L],H=z.r,V=z.g,k=z.b),U[T]=H,U[T+1]=V,U[T+2]=k;if(x)for(L=0,B=l.faceidx/3;L<B;++L){T=L*3,I=O[T],k=O[T+1],z=O[T+2];var G=new n.Vector3,$=new n.Vector3,W=new n.Vector3;a.intersectionShape.triangle.push(new o.Triangle(G.copy(v[I]),$.copy(v[k]),W.copy(v[z])))}if(x){var j=new n.Vector3(0,0,0),se=0;for(let ue=0;ue<u.geometryGroups.length;ue++)j.add(u.geometryGroups[ue].getCentroid()),se++;j.divideScalar(se),M.updateBoundingFromPoints(a.boundingSphere,{centroid:j},N,l.vertices)}if(l.faceArray=new Uint16Array(O),l.truncateArrayBuffers(!0,!0),w.length<l.vertices)l.setNormals();else{var he=l.normalArray=new Float32Array(l.vertices*3),ce;for(L=0,B=l.vertices;L<B;++L)T=L*3,ce=w[L],he[T]=ce.x,he[T+1]=ce.y,he[T+2]=ce.z}l.setLineIndices(),l.lineidx=l.lineArray.length}static updateFromStyle(a,u){typeof u.color<"u"?(a.color=u.color||new f.Color,u.color instanceof f.Color||(a.color=f.CC.color(u.color))):a.color=f.CC.color(0),a.wireframe=!!u.wireframe,a.opacity=u.alpha?(0,n.clamp)(u.alpha,0,1):1,typeof u.opacity<"u"&&(a.opacity=(0,n.clamp)(u.opacity,0,1)),a.side=u.side!==void 0?u.side:s.DoubleSide,a.linewidth=typeof u.linewidth>"u"?1:u.linewidth,a.clickable=!!u.clickable,a.callback=(0,C.makeFunction)(u.callback),a.hoverable=!!u.hoverable,a.hover_callback=(0,C.makeFunction)(u.hover_callback),a.unhover_callback=(0,C.makeFunction)(u.unhover_callback),a.hidden=u.hidden,a.frame=u.frame}constructor(a){this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.side=s.DoubleSide,this.stylespec=a||{},this.boundingSphere=new o.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},M.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new s.Geometry(!0),this.linegeo=new s.Geometry(!0)}updateStyle(a){for(var u in a)this.stylespec[u]=a[u];if(M.updateFromStyle(this,this.stylespec),a.voldata&&a.volscheme){(0,C.adjustVolumeStyle)(a);const g=a.volscheme,A=a.voldata,x=f.CC,l=g.range()||[-1,1];this.geo.setColors(function(v,w,O){let T=A.getVal(v,w,O);return x.color(g.valueToHex(T,l))}),delete this.color}}addCustom(a){a.vertexArr=a.vertexArr||[],a.faceArr=a.faceArr||[],a.normalArr=a.normalArr||[],M.drawCustom(this,this.geo,a)}addSphere(a){a.center||(a.center=new n.Vector3(0,0,0)),a.radius=a.radius?(0,n.clamp)(a.radius,0,1/0):1.5,a.color=f.CC.color(a.color),this.intersectionShape.sphere.push(new o.Sphere(a.center,a.radius)),_.GLDraw.drawSphere(this.geo,a.center,a.radius,a.color,a.quality),this.components.push({centroid:new n.Vector3(a.center.x,a.center.y,a.center.z)});var u=this.geo.updateGeoGroup(0);M.updateBoundingFromPoints(this.boundingSphere,this.components,u.vertexArray,u.vertices)}addBox(a){var u=a.dimensions||{w:1,h:1,d:1},g;typeof u.w=="number"?g={x:u.w,y:0,z:0}:g=u.w;var A;typeof u.h=="number"?A={x:0,y:u.h,z:0}:A=u.h;var x;typeof u.d=="number"?x={x:0,y:0,z:u.d}:x=u.d;var l=a.corner;l==null&&(a.center!==void 0?l={x:a.center.x-.5*(g.x+A.x+x.x),y:a.center.y-.5*(g.y+A.y+x.y),z:a.center.z-.5*(g.z+A.z+x.z)}:l={x:0,y:0,z:0});var v=[{x:l.x,y:l.y,z:l.z},{x:l.x+g.x,y:l.y+g.y,z:l.z+g.z},{x:l.x+A.x,y:l.y+A.y,z:l.z+A.z},{x:l.x+g.x+A.x,y:l.y+g.y+A.y,z:l.z+g.z+A.z},{x:l.x+x.x,y:l.y+x.y,z:l.z+x.z},{x:l.x+g.x+x.x,y:l.y+g.y+x.y,z:l.z+g.z+x.z},{x:l.x+A.x+x.x,y:l.y+A.y+x.y,z:l.z+A.z+x.z},{x:l.x+g.x+A.x+x.x,y:l.y+g.y+A.y+x.y,z:l.z+g.z+A.z+x.z}],w=[],O=[];w.splice(w.length,0,v[0],v[1],v[2],v[3]),O.splice(O.length,0,0,2,1,1,2,3);var T=4;w.splice(w.length,0,v[2],v[3],v[6],v[7]),O.splice(O.length,0,T+0,T+2,T+1,T+1,T+2,T+3),T+=4,w.splice(w.length,0,v[4],v[5],v[0],v[1]),O.splice(O.length,0,T+0,T+2,T+1,T+1,T+2,T+3),T+=4,w.splice(w.length,0,v[6],v[7],v[4],v[5]),O.splice(O.length,0,T+0,T+2,T+1,T+1,T+2,T+3),T+=4,w.splice(w.length,0,v[3],v[1],v[7],v[5]),O.splice(O.length,0,T+0,T+2,T+1,T+1,T+2,T+3),T+=4,w.splice(w.length,0,v[2],v[6],v[0],v[4]),O.splice(O.length,0,T+0,T+2,T+1,T+1,T+2,T+3),T+=4;var D=(0,C.extend)({},a);D.vertexArr=w,D.faceArr=O,D.normalArr=[],M.drawCustom(this,this.geo,D);var I=new n.Vector3;this.components.push({centroid:I.addVectors(v[0],v[7]).multiplyScalar(.5)});var k=this.geo.updateGeoGroup(0);M.updateBoundingFromPoints(this.boundingSphere,this.components,k.vertexArray,k.vertices)}addCylinder(a){var u,g;a.start?u=new n.Vector3(a.start.x||0,a.start.y||0,a.start.z||0):u=new n.Vector3(0,0,0),a.end?(g=new n.Vector3(a.end.x,a.end.y||0,a.end.z||0),typeof g.x>"u"&&(g.x=3)):g=new n.Vector3(0,0,0);var A=a.radius||.1,x=f.CC.color(a.color);this.intersectionShape.cylinder.push(new o.Cylinder(u,g,A)),_.GLDraw.drawCylinder(this.geo,u,g,A,x,a.fromCap,a.toCap);var l=new n.Vector3;this.components.push({centroid:l.addVectors(u,g).multiplyScalar(.5)});var v=this.geo.updateGeoGroup(0);M.updateBoundingFromPoints(this.boundingSphere,this.components,v.vertexArray,v.vertices)}addDashedCylinder(a){a.dashLength=a.dashLength||.25,a.gapLength=a.gapLength||.25;var u;a.start?u=new n.Vector3(a.start.x||0,a.start.y||0,a.start.z||0):u=new n.Vector3(0,0,0);var g;a.end?(g=new n.Vector3(a.end.x,a.end.y||0,a.end.z||0),typeof g.x>"u"&&(g.x=3)):g=new n.Vector3(3,0,0);for(var A=a.radius||.1,x=f.CC.color(a.color),l=Math.sqrt(Math.pow(u.x-g.x,2)+Math.pow(u.y-g.y,2)+Math.pow(u.z-g.z,2)),v=l/(a.gapLength+a.dashLength),w=new n.Vector3(a.start.x||0,a.start.y||0,a.start.z||0),O=new n.Vector3(a.end.x,a.end.y||0,a.end.z||0),T=new n.Vector3((g.x-u.x)/(l/a.gapLength),(g.y-u.y)/(l/a.gapLength),(g.z-u.z)/(l/a.gapLength)),D=new n.Vector3((g.x-u.x)/(l/a.dashLength),(g.y-u.y)/(l/a.dashLength),(g.z-u.z)/(l/a.dashLength)),I=0;I<v;I++)O=new n.Vector3(w.x+D.x,w.y+D.y,w.z+D.z),this.intersectionShape.cylinder.push(new o.Cylinder(w,O,A)),_.GLDraw.drawCylinder(this.geo,w,O,A,x,a.fromCap,a.toCap),w=new n.Vector3(O.x+T.x,O.y+T.y,O.z+T.z);var k=new n.Vector3;this.components.push({centroid:k.addVectors(u,g).multiplyScalar(.5)});var z=this.geo.updateGeoGroup(0);M.updateBoundingFromPoints(this.boundingSphere,this.components,z.vertexArray,z.vertices)}addCurve(a){a.points=a.points||[],a.smooth=a.smooth||10,typeof a.fromCap>"u"&&(a.fromCap=2),typeof a.toCap>"u"&&(a.toCap=2);var u=(0,b.subdivide_spline)(a.points,a.smooth);if(u.length<3){console.log("Too few points in addCurve");return}var g=a.radius||.1,A=f.CC.color(a.color),x=0,l=u.length-1,v=u[0].distanceTo(u[1]),w=Math.ceil(2*g/v);if(a.toArrow){l-=w;let I={start:u[l],end:u[u.length-1],radius:g,color:A,mid:1e-4};this.addArrow(I)}if(a.fromArrow){x+=w;let I={start:u[x],end:u[0],radius:g,color:A,mid:1e-4};this.addArrow(I)}for(var O=Math.ceil(u.length/2),T={radius:g,color:A,fromCap:2,toCap:2},D=x;D<l;D++)T.start=u[D],T.end=u[D+1],T.fromCap=2,T.toCap=2,D<O?(T.fromCap=2,T.toCap=0):D>O?(T.fromCap=0,T.toCap=2):(T.fromCap=2,T.toCap=2),this.addCylinder(T)}addLine(a){var u,g;a.start?u=new n.Vector3(a.start.x||0,a.start.y||0,a.start.z||0):u=new n.Vector3(0,0,0),a.end?(g=new n.Vector3(a.end.x,a.end.y||0,a.end.z||0),typeof g.x>"u"&&(g.x=3)):g=new n.Vector3(3,0,0);var A=this.geo.updateGeoGroup(2),x=A.vertices,l=x*3,v=A.vertexArray;v[l]=u.x,v[l+1]=u.y,v[l+2]=u.z,v[l+3]=g.x,v[l+4]=g.y,v[l+5]=g.z,A.vertices+=2;var w=A.lineArray,O=A.lineidx;w[O]=x,w[O+1]=x+1,A.lineidx+=2;var T=new n.Vector3;this.components.push({centroid:T.addVectors(u,g).multiplyScalar(.5)}),A=this.geo.updateGeoGroup(0),M.updateBoundingFromPoints(this.boundingSphere,this.components,A.vertexArray,A.vertices)}addArrow(a){if(a.start?a.start=new n.Vector3(a.start.x||0,a.start.y||0,a.start.z||0):a.start=new n.Vector3(0,0,0),a.dir instanceof n.Vector3&&typeof a.length=="number"){var u=a.dir.clone().multiplyScalar(a.length).add(a.start);a.end=u}else a.end?(a.end=new n.Vector3(a.end.x,a.end.y||0,a.end.z||0),typeof a.end.x>"u"&&(a.end.x=3)):a.end=new n.Vector3(3,0,0);a.radius=a.radius||.1,a.radiusRatio=a.radiusRatio||1.618034,a.mid=0<a.mid&&a.mid<1?a.mid:.618034,M.drawArrow(this,this.geo,a);var g=new n.Vector3;this.components.push({centroid:g.addVectors(a.start,a.end).multiplyScalar(.5)});var A=this.geo.updateGeoGroup(0);M.updateBoundingFromPoints(this.boundingSphere,this.components,A.vertexArray,A.vertices)}static distance_from(a,u){return Math.sqrt(Math.pow(a.x-u.x,2)+Math.pow(a.y-u.y,2)+Math.pow(a.z-u.z,2))}static inSelectedRegion(a,u,g){for(var A=0;A<u.length;A++)if(M.distance_from(u[A],a)<=g)return!0;return!1}addIsosurface(a,u,g){var A=u.isoval!==void 0&&typeof u.isoval=="number"?u.isoval:0,x=!!u.voxel,l=u.smoothness===void 0?1:u.smoothness,v=a.size.x,w=a.size.y,O=a.size.z,T=new Int16Array(v*w*O),D=a.data,I,k;for(I=0,k=T.length;I<k;++I)T[I]=-1;var z=new Uint8Array(v*w*O);for(I=0,k=D.length;I<k;++I){var L=A>=0?D[I]-A:A-D[I];L>0&&(z[I]|=M.ISDONE)}var B=[],H=[];c.MarchingCube.march(z,B,H,{fulltable:!0,voxel:x,unitCube:a.unit,origin:a.origin,matrix:a.matrix,nX:v,nY:w,nZ:O}),!x&&l>0&&c.MarchingCube.laplacianSmooth(l,B,H);var V=[],N=[],U=[];if(u.selectedRegion&&u.coords===void 0&&(u.coords=u.selectedRegion),u.coords!==void 0){var G=u.coords[0].x,$=u.coords[0].y,W=u.coords[0].z,j=u.coords[0].x,se=u.coords[0].y,he=u.coords[0].z;for(let J=0;J<u.coords.length;J++)u.coords[J].x>G?G=u.coords[J].x:u.coords[J].x<j&&(j=u.coords[J].x),u.coords[J].y>$?$=u.coords[J].y:u.coords[J].y<se&&(se=u.coords[J].y),u.coords[J].z>W?W=u.coords[J].z:u.coords[J].z<he&&(he=u.coords[J].z);var ce=2;u.radius!==void 0&&(ce=u.radius),u.selectedOffset!==void 0&&(ce=u.selectedOffset),u.seldist!==void 0&&(ce=u.seldist),j-=ce,G+=ce,se-=ce,$+=ce,he-=ce,W+=ce;for(let J=0;J<B.length;J++)B[J].x>j&&B[J].x<G&&B[J].y>se&&B[J].y<$&&B[J].z>he&&B[J].z<W&&M.inSelectedRegion(B[J],u.coords,ce)?(V.push(N.length),N.push(B[J])):V.push(-1);for(let J=0;J+2<H.length;J+=3)V[H[J]]!==-1&&V[H[J+1]]!==-1&&V[H[J+2]]!==-1&&(U.push(H[J]-(H[J]-V[H[J]])),U.push(H[J+1]-(H[J+1]-V[H[J+1]])),U.push(H[J+2]-(H[J+2]-V[H[J+2]])));B=N,H=U}M.drawCustom(this,this.geo,{vertexArr:B,faceArr:H,normalArr:[],clickable:u.clickable,hoverable:u.hoverable}),this.updateStyle(u);var ue=new n.Vector3(a.origin.x,a.origin.y,a.origin.z),Ee=new n.Vector3(a.size.x*a.unit.x,a.size.y*a.unit.y,a.size.z*a.unit.z),pe=new n.Vector3(0,0,0),fe=ue.clone(),Ue=ue.clone().add(Ee);for(let J=0;J<B.length;J++)pe.add(B[J]),fe.max(B[J]),Ue.min(B[J]);pe.divideScalar(B.length);var Oe=pe.distanceTo(Ue),ee=pe.distanceTo(fe);this.boundingSphere.center=pe,this.boundingSphere.radius=Math.max(Oe,ee),typeof g=="function"&&g()}addVolumetricData(a,u,g){a=new y.VolumeData(a,u),this.addIsosurface(a,g)}finalize(){return M.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(a){if(this.renderedShapeObj&&(a.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){M.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&M.updateColor(this.geo,this.color),this.shapeObj=new s.Object3D;var u=null;this.side==s.DoubleSide?u=new s.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:s.Coloring.VertexColors}):u=new s.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:s.Coloring.VertexColors});var g=new s.Mesh(this.geo,u);this.shapeObj.add(g);var A=new s.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),x=new s.Line(this.linegeo,A,s.LineStyle.LinePieces);this.shapeObj.add(x),this.renderedShapeObj=this.shapeObj.clone(),a.add(this.renderedShapeObj)}}removegl(a){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),a.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}M.ISDONE=2,M.drawCustom=function(P,a,u){var g=u,A=g.vertexArr,x=g.faceArr;(A.length===0||x.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var l=u.color;typeof l>"u"&&(l=P.color),l=f.CC.color(l);for(var v=E(g),w=0,O=v.length;w<O;w++)M.addCustomGeo(P,a,v[w],v[w].colorArr?v[w].colorArr:l,u.clickable)};function E(P){var a=64e3;if(P.vertexArr.length<a)return[P];var u=[{vertexArr:[],normalArr:[],faceArr:[]}];P.colorArr&&(u.colorArr=[]);var g=[],A=[],x=0,l=P.faceArr;for(let w=0,O=l.length;w<O;w+=3){let T=u[x];for(let D=0;D<3;D++){var v=l[w+D];g[v]!==x&&(g[v]=x,A[v]=T.vertexArr.length,T.vertexArr.push(P.vertexArr[v]),P.normalArr&&P.normalArr[v]&&T.normalArr.push(P.normalArr[v]),P.colorArr&&P.colorArr[v]&&T.colorArr.push(P.colorArr[v])),T.faceArr.push(A[v])}T.vertexArr.length>=a&&(u.push({vertexArr:[],normalArr:[],faceArr:[]}),P.colorArr&&(u.colorArr=[]),x++)}return u}},"./src/GLViewer.ts":(e,t,r)=>{r.r(t),r.d(t,{GLViewer:()=>a,createStereoViewer:()=>A,createViewer:()=>u,createViewerGrid:()=>g});var s=r("./src/WebGL/index.ts"),o=r("./src/WebGL/math/index.ts"),n=r("./src/colors.ts"),f=r("./src/utilities.ts"),c=r("./src/Gradient.ts"),y=r("./src/GLModel.ts"),_=r("./src/Label.ts"),b=r("./src/GLShape.ts"),C=r("./src/VolumeData.ts"),M=r("./src/ProteinSurface4.ts"),E=r("./src/VolumetricRender.ts"),P=r("./node_modules/upng-js/UPNG.js");class a{getRect(){let l=this.container,v=l.getBoundingClientRect();if(v.width==0&&v.height==0&&l.style.display==="none"){let w=l.style.position,O=l.style.visibility;l.style.display="block",l.style.visibility="hidden",l.style.position="absolute",v=l.getBoundingClientRect(),l.style.display="none",l.style.visibility=O,l.style.position=w}return v}getWidth(){return this.getRect().width}getHeight(){return this.getRect().height}setupRenderer(){this.renderer=new s.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH||1,containerHeight:this.HEIGHT||1}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new s.Scene,this.scene.fog=new s.Fog(this.bgColor,100,200),this.modelGroup=new s.Object3D,this.rotationGroup=new s.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new o.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var l=new s.Light(16777215);l.position=new o.Vector3(.2,.2,1).normalize(),l.intensity=1,this.scene.add(l)}initContainer(l){this.container=l,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var l=0;for(let w in this.surfaces)if(this.surfaces.hasOwnProperty(w)){var v=parseInt(w);isNaN(v)||v>l&&(l=v)}return l+1}setSlabAndFog(){let l=this.camera.position.z-this.rotationGroup.position.z;l<1&&(l=1),this.camera.near=l+this.slabNear,this.camera.near<1&&(this.camera.near=1),this.camera.far=l+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=l*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(l){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!l&&this.linkedViewers.length>0))for(var v=this._viewer.getView(),w=0;w<this.linkedViewers.length;w++){var O=this.linkedViewers[w];O.setView(v,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledAtoms.splice(0,this.contextMenuEnabledAtoms.length);for(let l=0,v=this.models.length;l<v;l++){let w=this.models[l];if(w){let O=w.selectedAtoms({clickable:!0}),T=w.selectedAtoms({hoverable:!0}),D=w.selectedAtoms({contextMenuEnabled:!0});for(let I=0;I<T.length;I++)this.hoverables.push(T[I]);for(let I=0;I<O.length;I++)this.clickables.push(O[I]);for(let I=0;I<D.length;I++)this.contextMenuEnabledAtoms.push(D[I])}}for(let l=0,v=this.shapes.length;l<v;l++){let w=this.shapes[l];w&&w.clickable&&this.clickables.push(w),w&&w.hoverable&&this.hoverables.push(w)}}handleClickSelection(l,v,w){let O=this.targetedObjects(l,v,this.clickables);if(O.length){var T=O[0].clickable;T.callback!==void 0&&(typeof T.callback!="function"&&(T.callback=(0,f.makeFunction)(T.callback)),typeof T.callback=="function"&&T.callback(T,this._viewer,w,this.container,O))}}canvasOffset(){let l=this.glDOM,v=l.getBoundingClientRect(),w=l.ownerDocument,O=w.documentElement,T=w.defaultView;return{top:v.top+T.pageYOffset-O.clientTop,left:v.left+T.pageXOffset-O.clientLeft}}setHover(l,v,w){this.current_hover!=l&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,f.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,v,this.container,w)),this.current_hover=l,l&&l.hover_callback!==void 0&&(typeof l.hover_callback!="function"&&(l.hover_callback=(0,f.makeFunction)(l.hover_callback)),typeof l.hover_callback=="function"&&l.hover_callback(l,this._viewer,v,this.container,w)))}handleHoverSelection(l,v,w){if(this.hoverables.length==0)return;let O=this.targetedObjects(l,v,this.hoverables);if(O.length){var T=O[0].clickable;this.setHover(T,w,O),this.current_hover=T}else this.setHover(null)}handleHoverContinue(l,v){let w=this.targetedObjects(l,v,this.hoverables);(w.length==0||w[0]===void 0)&&this.setHover(null),w[0]!==void 0&&w[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(l,{allowTolerance:v=l.targetTouches,tolerance:w=5}={}){const O=this.getX(l),T=this.getY(l);if(v){const D=Math.abs(O-this.mouseStartX),I=Math.abs(T-this.mouseStartY);return D<=w&&I<=w}else return O===this.mouseStartX&&T===this.mouseStartY}calcTouchDistance(l){var v=l.targetTouches[0].pageX-l.targetTouches[1].pageX,w=l.targetTouches[0].pageY-l.targetTouches[1].pageY;return Math.sqrt(v*v+w*w)}getX(l){var v=l.pageX;return v==null&&(v=l.pageX),l.targetTouches&&l.targetTouches[0]?v=l.targetTouches[0].pageX:l.changedTouches&&l.changedTouches[0]&&(v=l.changedTouches[0].pageX),v}getY(l){var v=l.pageY;return v==null&&(v=l.pageY),l.targetTouches&&l.targetTouches[0]?v=l.targetTouches[0].pageY:l.changedTouches&&l.changedTouches[0]&&(v=l.changedTouches[0].pageY),v}isInViewer(l,v){if(this.viewers!=null&&!this.control_all){var w=this.WIDTH/this.cols,O=this.HEIGHT/this.rows,T=this.canvasOffset(),D=l-T.left,I=v-T.top,k=this.rows-Math.floor(I/O)-1,z=Math.floor(D/w);if(k!=this.row||z!=this.col)return!1}return!0}adjustZoomToLimits(l){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let v=this.CAMERA_Z-this.config.lowerZoomLimit;l>v&&(l=v)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let v=this.CAMERA_Z-this.config.upperZoomLimit;l<v&&(l=v)}return l>this.CAMERA_Z&&(l=this.CAMERA_Z*.999),l}static slerp(l,v,w){if(w==1)return v.clone();if(w==0)return l.clone();let O=l.x*v.x+l.y*v.y+l.z*v.z+l.w*v.w;if(O>.9995){let B=new o.Quaternion(l.x+w*(v.x-l.x),l.y+w*(v.y-l.y),l.z+w*(v.z-l.z),l.w+w*(v.w-l.w));return B.normalize(),B}O<0&&(v=v.clone().multiplyScalar(-1),O=-O),O>1?O=1:O<-1&&(O=-1);var T=Math.acos(O),D=T*w,I=v.clone();I.sub(l.clone().multiplyScalar(O)),I.normalize();var k=Math.cos(D),z=Math.sin(D),L=new o.Quaternion(l.x*k+I.x*z,l.y*k+I.y*z,l.z*k+I.z*z,l.w*k+I.w*z);return L.normalize(),L}constructor(l,v={}){this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledAtoms=[],this.current_hover=null,this.hoverDuration=500,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new o.Quaternion(0,0,0,1),this.dq=new o.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=v,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=n.elementColors.defaultColors),this.nomouse=this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=n.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=parseFloat(this.config.camerax)),this._viewer=this,this.container=l,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row,this.col=this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new s.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new o.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new o.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new s.Raycaster(new o.Vector3(0,0,0),new o.Vector3(0,0,0)),this.projector=new s.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=n.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container));try{typeof this.callback=="function"&&this.callback(this)}catch(w){console.log("error with glviewer callback: "+w)}}targetedObjects(l,v,w){var O={x:l,y:v,z:-1};return Array.isArray(w)||(w=this.selectedAtoms(w)),w.length==0?[]:(this.raycaster.setFromCamera(O,this.camera),this.raycaster.intersectObjects(this.modelGroup,w))}modelToScreen(l){let v=!1;Array.isArray(l)||(l=[l],v=!0);let w=[],O=this.canvasOffset();return l.forEach(T=>{let D=new o.Vector3(T.x,T.y,T.z);D.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(D,this.camera);let I=this.WIDTH*(D.x+1)/2+O.left,k=-this.HEIGHT*(D.y-1)/2+O.top;w.push({x:I,y:k})}),v&&(w=w[0]),w}screenOffsetToModel(l,v,w){var O=l/this.WIDTH,T=v/this.HEIGHT,D=w===void 0?this.rotationGroup.position.z:w,I=this.rotationGroup.quaternion,k=new o.Vector3(0,0,D);return this.projector.projectVector(k,this.camera),k.x+=O*2,k.y-=T*2,this.projector.unprojectVector(k,this.camera),k.z=0,k.applyQuaternion(I),k}screenToModelDistance(l,v){let w=this.canvasOffset(),O=new o.Vector3(v.x,v.y,v.z);O.applyMatrix4(this.modelGroup.matrixWorld);let T=O.clone();this.projector.projectVector(O,this.camera);let D=new o.Vector3((l.x-w.left)*2/this.WIDTH-1,(l.y-w.top)*2/-this.HEIGHT+1,O.z);return this.projector.unprojectVector(D,this.camera),D.distanceTo(T)}setViewChangeCallback(l){(typeof l=="function"||l==null)&&(this.viewChangeCallback=l)}setStateChangeCallback(l){(typeof l=="function"||l==null)&&(this.stateChangeCallback=l)}getConfig(){return this.config}setConfig(l){this.config=l}getInternalState(){var l={models:[],surfaces:[],shapes:[],labels:[]};for(let v=0;v<this.models.length;v++)this.models[v]&&(l.models[v]=this.models[v].getInternalState());return l}setInternalState(l){this.clear();var v=l.models;for(let w=0;w<v.length;w++)v[w]&&(this.models[w]=new y.GLModel(w),this.models[w].setInternalState(v[w]));this.render()}setZoomLimits(l,v){typeof l<"u"&&(this.config.lowerZoomLimit=l),v&&(this.config.upperZoomLimit=v),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(l){l.fov!==void 0&&(this.fov=l.fov,this.camera.fov=this.fov),l.z!==void 0&&(this.CAMERA_Z=l.z,this.camera.z=this.CAMERA_Z),l.orthographic!==void 0&&(this.camera.ortho=l.orthographic)}_handleMouseDown(l){if(l.preventDefault(),!this.scene)return;var v=this.getX(l),w=this.getY(l);if(v===void 0)return;this.isDragging=!0,this.mouseButton=l.which,this.mouseStartX=v,this.mouseStartY=w,this.touchHold=!0,this.touchDistanceStart=0,l.targetTouches&&l.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(l)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let O=this;setTimeout(function(){l.targetTouches&&O.touchHold==!0&&(O.glDOM=O.renderer.domElement,O.glDOM.dispatchEvent(new Event("contextmenu")))},1e3)}_handleMouseUp(l){if(this.touchHold=!1,this.isDragging&&this.scene){var v=this.getX(l),w=this.getY(l);if(this.closeEnoughForClick(l)){var O=this.canvasOffset(),T=(v-O.left)/this.WIDTH*2-1,D=-((w-O.top)/this.HEIGHT)*2+1;this.handleClickSelection(T,D,l)}}this.isDragging=!1}_handleMouseScroll(l){if(l.preventDefault(),!!this.scene){var v=this.getX(l),w=this.getY(l);if(v!==void 0&&this.isInViewer(v,w)){var O=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,T=1;l.ctrlKey&&(T=-1),l.detail?this.rotationGroup.position.z+=T*O*l.detail/10:l.wheelDelta&&(this.rotationGroup.position.z-=T*O*l.wheelDelta/400),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(l){let v=this;return l=l||1,new Promise(function(w){let O=0,T=v.viewChangeCallback,D=[],I=[],k=Date.now();v.viewChangeCallback=function(){I.push(Date.now()-k),k=Date.now(),D.push(new Promise(z=>{v.getCanvas().toBlob(function(L){L.arrayBuffer().then(z)},"image/png")})),O+=1,O==l&&(v.viewChangeCallback=T,Promise.all(D).then(z=>{let L=[];for(let G=0;G<z.length;G++){let $=(0,P.decode)(z[G]);L.push((0,P.toRGBA8)($)[0])}let B=v.getCanvas().width,H=v.getCanvas().height,V=(0,P.encode)(L,B,H,0,I),N=new Blob([V],{type:"image/png"}),U=new FileReader;U.onload=function(G){w(G.target.result)},U.readAsDataURL(N)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(l){this.hoverDuration=l}_handleMouseMove(l){clearTimeout(this.hoverTimeout);var v=this.canvasOffset(),w=(this.getX(l)-v.left)/this.WIDTH*2-1,O=-((this.getY(l)-v.top)/this.HEIGHT)*2+1;let T=this;if(this.current_hover!==null&&this.handleHoverContinue(w,O),this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){T.handleHoverSelection(w,O,l)},this.hoverDuration)),l.preventDefault(),!!this.scene&&this.isDragging){var D=0,I=this.getX(l),k=this.getY(l);if(I!==void 0&&this.isInViewer(I,k)){var z=(I-this.mouseStartX)/this.WIDTH,L=(k-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&l.targetTouches&&l.targetTouches.length==2){var B=this.calcTouchDistance(l);D=2,L=(B-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else l.targetTouches&&l.targetTouches.length==3&&(D=1);var H=this.renderer.getXRatio(),V=this.renderer.getYRatio();z*=H,L*=V;var N=Math.sqrt(z*z+L*L),U;if(D==3||this.mouseButton==3&&l.ctrlKey)this.slabNear=this.cslabNear+z*100,this.slabFar=this.cslabFar-L*100;else if(D==2||this.mouseButton==3||l.shiftKey)U=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,U<80&&(U=80),this.rotationGroup.position.z=this.cz+L*U,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(D==1||this.mouseButton==2||l.ctrlKey){var G=this.screenOffsetToModel(H*(I-this.mouseStartX),V*(k-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,G)}else if((D===0||this.mouseButton==1)&&N!==0){var $=Math.sin(N*Math.PI)/N;this.dq.x=Math.cos(N*Math.PI),this.dq.y=0,this.dq.z=$*z,this.dq.w=-$*L,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}}_handleContextMenu(l){l.preventDefault();var v=this.getX(l),w=this.getY(l);if(!(v!=this.mouseStartX||w!=this.mouseStartY)){var k=this.mouseStartX,z=this.mouseStartY,I=this.canvasOffset(),O=(k-I.left)/this.WIDTH*2-1,T=-((z-I.top)/this.HEIGHT)*2+1;let L=this.targetedObjects(O,T,this.contextMenuEnabledAtoms);var D=null;L.length&&(D=L[0].clickable);var I=this.canvasOffset(),k=this.mouseStartX-I.left,z=this.mouseStartY-I.top;this.userContextMenuHandler&&this.userContextMenuHandler(D,k,z,L)}}setContainer(l){let v=(0,f.getElement)(l)||this.container;return this.initContainer(v),this}setBackgroundColor(l,v){(typeof v>"u"||v<0||v>1)&&(v=1);var w=n.CC.color(l);return this.scene.fog.color=w,this.bgColor=w.getHex(),this.renderer.setClearColorHex(w.getHex(),v),this.show(),this}setProjection(l){this.camera.ortho=l==="orthographic",this.setSlabAndFog()}setViewStyle(l){if(l.style==="outline"){var v={};l.color&&(v.color=n.CC.color(l.color)),l.width&&(v.width=l.width),this.renderer.enableOutline(v)}else this.renderer.disableOutline();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(l){return this.WIDTH=l||this.WIDTH,this.updateSize(),this}setHeight(l){return this.HEIGHT=l||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let l=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0&&(this.container.querySelector("canvas").remove(),this.setupRenderer(),this.initContainer(this.container),l=!0),this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),l){let v=this.renderer.supportedExtensions();v.regen=!0,this._viewer.render(null,v)}else this.show();return this}getModel(l){return l===void 0?this.models.length==0?null:this.models[this.models.length-1]:l instanceof y.GLModel?l:l in this.models?this.models[l]:this.models.length==0?null:this.models[this.models.length-1]}spin(l,v=1){if(clearInterval(this.spinInterval),typeof l>"u"&&(l="y"),typeof l=="boolean")if(l)l="y";else return;Array.isArray(l)&&(l={x:l[0],y:l[1],z:l[2]});var w=this;this.spinInterval=setInterval(function(){!w.getCanvas().isConnected&&w.renderer.isLost()&&clearInterval(w.spinInterval),w.rotate(1*v,l)},25)}animateMotion(l,v,w,O,T,D){var I=20,k=Math.ceil(l/I);k<1&&(k=1),this.incAnim();var z={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(v){let H=new Array(k);for(let G=0;G<k;G++){let $=(G+1)/k,W={mpos:z.mpos,rz:z.rz,rot:z.rot};W.mpos=w.clone().sub(z.mpos).multiplyScalar($).add(z.mpos),W.rz=z.rz+$*(O-z.rz),W.rot=a.slerp(z.rot,T,$),W.cam=D.clone().sub(z.cam).multiplyScalar($).add(z.cam),H[G]=W}let V=0,N=this,U=function(){var G=H[V];V+=1,N.modelGroup.position=G.mpos,N.rotationGroup.position.z=G.rz,N.rotationGroup.quaternion=G.rot,N.camera.lookAt(G.cam),V<H.length?setTimeout(U,I):N.decAnim(),N.show()};setTimeout(U,I)}else{var L={};let H=1/k;if(w&&(L.mpos=w.clone().sub(z.mpos).multiplyScalar(H)),typeof O<"u"&&O!=null&&(L.rz=H*(O-z.rz)),T){var B=a.slerp(z.rot,T,H);L.rot=z.rot.clone().inverse().multiply(B)}D&&(L.cam=D.clone().sub(z.cam).multiplyScalar(H));let V=0,N=this,U=function(){V+=1,L.mpos&&N.modelGroup.position.add(L.mpos),L.rz&&(N.rotationGroup.position.z+=L.rz),L.rot&&N.rotationGroup.quaternion.multiply(L.rot),L.cam&&(N.lookingAt.add(L.cam),N.camera.lookAt(N.lookingAt)),V<k?setTimeout(U,I):N.decAnim(),N.show()};setTimeout(U,I)}}rotate(l,v="y",w=0,O=!1){if(v=="x"?v={x:1,y:0,z:0}:v=="y"?v={x:0,y:1,z:0}:v=="z"&&(v={x:0,y:0,z:1}),v=="vx"?v={vx:1,vy:0,vz:0}:v=="vy"?v={vx:0,vy:1,vz:0}:v=="vz"&&(v={vx:0,vy:0,vz:1}),typeof v.vx<"u"){var T=new o.Vector3(v.vx,v.vy,v.vz);T.applyQuaternion(this.rotationGroup.quaternion),v={x:T.x,y:T.y,z:T.z}}var D=function(L){var B=Math.sin(L/2),H=Math.cos(L/2),V=0,N=0,U=0;return V=v.x*B,N=v.y*B,U=v.z*B,new o.Quaternion(V,N,U,H).normalize()},I=Math.PI*l/180,k=D(I);if(w){var z=new o.Quaternion().copy(this.rotationGroup.quaternion).multiply(k);this.animateMotion(w,O,this.modelGroup.position,this.rotationGroup.position.z,z,this.lookingAt)}else this.rotationGroup.quaternion.multiply(k),this.show();return this}surfacesFinished(){for(var l in this.surfaces)if(!this.surfaces[l][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var l=this.modelGroup.position,v=this.rotationGroup.quaternion;return[l.x,l.y,l.z,this.rotationGroup.position.z,v.x,v.y,v.z,v.w]}setView(l,v){return l===void 0||!(l instanceof Array||l.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=l[0],this.modelGroup.position.y=l[1],this.modelGroup.position.z=l[2],this.rotationGroup.position.z=l[3],this.rotationGroup.quaternion.x=l[4],this.rotationGroup.quaternion.y=l[5],this.rotationGroup.quaternion.z=l[6],this.rotationGroup.quaternion.w=l[7],typeof l[8]<"u"&&(this.rotationGroup.position.x=l[8],this.rotationGroup.position.y=l[9]),this.show(v),this)}render(l,v){this.renderer.setViewport(),this.updateClickables();var w=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var O,T;for(v||(v=this.renderer.supportedExtensions()),O=0;O<this.models.length;O++)this.models[O]&&this.models[O].globj(this.modelGroup,v);for(O=0;O<this.shapes.length;O++)this.shapes[O]&&(typeof this.shapes[O].frame>"u"||this.viewer_frame<0||this.shapes[O].frame<0||this.shapes[O].frame==this.viewer_frame?this.shapes[O].globj(this.modelGroup,v):this.shapes[O].removegl(this.modelGroup));for(O=0;O<this.labels.length;O++)this.labels[O]&&typeof this.labels[O].frame<"u"&&this.labels[O].frame>=0&&(this.modelGroup.remove(this.labels[O].sprite),(this.viewer_frame<0||this.labels[O].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[O].sprite));for(O in this.surfaces)if(this.surfaces.hasOwnProperty(O)){var D=this.surfaces[O];for(T=0;T<D.length;T++)if(D.hasOwnProperty(T)){var I=D[T].geo;if(!D[T].finished||v.regen){I.verticesNeedUpdate=!0,I.elementsNeedUpdate=!0,I.normalsNeedUpdate=!0,I.colorsNeedUpdate=!0,I.buffersNeedUpdate=!0,I.boundingSphere=null,D[T].done&&(D[T].finished=!0),D[T].lastGL&&this.modelGroup.remove(D[T].lastGL);var k=null;if(D[T].mat instanceof s.LineBasicMaterial?k=new s.Line(I,D[T].mat):k=new s.Mesh(I,D[T].mat),D[T].mat.transparent&&D[T].mat.opacity==0?k.visible=!1:k.visible=!0,D[T].symmetries.length>1||D[T].symmetries.length==1&&!D[T].symmetries[T].isIdentity()){var z,L=new s.Object3D;for(z=0;z<D[T].symmetries.length;z++){var B=k.clone();B.matrix=D[T].symmetries[z],B.matrixAutoUpdate=!1,L.add(B)}D[T].lastGL=L,this.modelGroup.add(L)}else D[T].lastGL=k,this.modelGroup.add(k)}}}return this.setView(w),typeof l=="function"&&l(this),this}getModelList(l){let v=[];if(typeof l>"u"||typeof l.model>"u")for(let O=0;O<this.models.length;O++)this.models[O]&&v.push(this.models[O]);else{let O=l.model;Array.isArray(O)||(O=[O]);for(let T=0;T<O.length;T++)if(typeof O[T]=="number"){var w=O[T];w<0&&(w+=this.models.length),v.push(this.models[w])}else v.push(O[T])}return v}getAtomsFromSel(l){var v=[];typeof l>"u"&&(l={});var w=this.getModelList(l);for(let O=0;O<w.length;O++)v=v.concat(w[O].selectedAtoms(l));return v}atomIsSelected(l,v){typeof v>"u"&&(v={});for(var w=this.getModelList(v),O=0;O<w.length;O++)if(w[O].atomIsSelected(l,v))return!0;return!1}selectedAtoms(l){return this.getAtomsFromSel(l)}getUniqueValues(l,v){typeof v>"u"&&(v={});var w=this.getAtomsFromSel(v),O={};for(var T in w)if(w[T].hasOwnProperty(l)){var D=w[T][l];O[D]=!0}return Object.keys(O)}pdbData(l){for(var v=this.getAtomsFromSel(l),w="",O=0,T=v.length;O<T;++O)w+=v[O].pdbline+`
`;return w}zoom(l=2,v=0,w=!1){var O=(this.CAMERA_Z-this.rotationGroup.position.z)/l,T=this.CAMERA_Z-O;return v>0?this.animateMotion(v,w,this.modelGroup.position,this.adjustZoomToLimits(T),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(T),this.show()),this}translate(l,v,w=0,O=!1){var T=l/this.WIDTH,D=v/this.HEIGHT,I=new o.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(I,this.camera),I.x-=T,I.y-=D,this.projector.unprojectVector(I,this.camera),I.z=0;var k=this.lookingAt.clone().add(I);return w>0?this.animateMotion(w,O,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,k):(this.lookingAt=k,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(l,v,w=0,O=!1){var T=this.screenOffsetToModel(l,v),D=this.modelGroup.position.clone().add(T);return w>0?this.animateMotion(w,O,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=D,this.show()),this}fitSlab(l){l=l||{};var v=this.getAtomsFromSel(l),w=(0,f.getExtent)(v),O=w[1][0]-w[0][0],T=w[1][1]-w[0][1],D=w[1][2]-w[0][2],I=Math.sqrt(O*O+T*T+D*D);return I<5&&(I=5),this.slabNear=-I/1.9,this.slabFar=I/2,this}center(l={},v=0,w=!1){var O,T,D=this.getAtomsFromSel(l),I=(0,f.getExtent)(D);(0,f.isEmptyObject)(l)?(this.shapes.forEach($=>{if($&&$.boundingSphere&&$.boundingSphere.center){var W=$.boundingSphere.center,j=$.boundingSphere.radius;j>0?(D.push(new o.Vector3(W.x+j,W.y,W.z)),D.push(new o.Vector3(W.x-j,W.y,W.z)),D.push(new o.Vector3(W.x,W.y+j,W.z)),D.push(new o.Vector3(W.x,W.y-j,W.z)),D.push(new o.Vector3(W.x,W.y,W.z+j)),D.push(new o.Vector3(W.x,W.y,W.z-j))):D.push(W)}}),I=(0,f.getExtent)(D),O=D,T=I):(O=this.getAtomsFromSel({}),T=(0,f.getExtent)(O));var k=new o.Vector3(I[2][0],I[2][1],I[2][2]),z=T[1][0]-T[0][0],L=T[1][1]-T[0][1],B=T[1][2]-T[0][2],H=Math.sqrt(z*z+L*L+B*B);H<5&&(H=5),this.slabNear=-H/1.9,this.slabFar=H/2,z=I[1][0]-I[0][0],L=I[1][1]-I[0][1],B=I[1][2]-I[0][2],H=Math.sqrt(z*z+L*L+B*B),H<5&&(H=5);for(var V=25,N=0;N<D.length;N++)if(D[N]){var U=k.distanceToSquared(D[N]);U>V&&(V=U)}H=Math.sqrt(V)*2;var G=k.clone().multiplyScalar(-1);return v>0?this.animateMotion(v,w,G,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.show()),this}zoomTo(l={},v=0,w=!1){let O=this.getAtomsFromSel(l),T=(0,f.getExtent)(O),D=T;if((0,f.isEmptyObject)(l)){let W=O&&O.length;if(this.shapes.forEach(j=>{if(j&&j.boundingSphere){if(j.boundingSphere.box){let ce=j.boundingSphere.box;O.push(new o.Vector3(ce.min.x,ce.min.y,ce.min.z)),O.push(new o.Vector3(ce.max.x,ce.max.y,ce.max.z))}else if(j.boundingSphere.center){var se=j.boundingSphere.center,he=j.boundingSphere.radius;he>0?(O.push(new o.Vector3(se.x+he,se.y,se.z)),O.push(new o.Vector3(se.x-he,se.y,se.z)),O.push(new o.Vector3(se.x,se.y+he,se.z)),O.push(new o.Vector3(se.x,se.y-he,se.z)),O.push(new o.Vector3(se.x,se.y,se.z+he)),O.push(new o.Vector3(se.x,se.y,se.z-he))):O.push(se)}}}),D=(0,f.getExtent)(O),!W)for(let j=0;j<3;j++)T[2][j]=(D[0][j]+D[1][j])/2}else{let W=this.getAtomsFromSel({});D=(0,f.getExtent)(W)}var I=new o.Vector3(T[2][0],T[2][1],T[2][2]),k=D[1][0]-D[0][0],z=D[1][1]-D[0][1],L=D[1][2]-D[0][2],B=Math.sqrt(k*k+z*z+L*L);B<5&&(B=5),this.slabNear=-B/1.9,this.slabFar=B/2,Object.keys(l).length===0&&(this.slabNear=Math.min(-B*2,-50),this.slabFar=Math.max(B*2,50));var H=this.config.minimumZoomToDistance||5;k=T[1][0]-T[0][0],z=T[1][1]-T[0][1],L=T[1][2]-T[0][2],B=Math.sqrt(k*k+z*z+L*L),B<H&&(B=H);for(var V=H*H,N=0;N<O.length;N++)if(O[N]){var U=I.distanceToSquared(O[N]);U>V&&(V=U)}B=Math.sqrt(V)*2;var G=I.clone().multiplyScalar(-1),$=-(B*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return $=this.adjustZoomToLimits($),v>0?this.animateMotion(v,w,G,$,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.rotationGroup.position.z=$,this.show()),this}setSlab(l,v){this.slabNear=l,this.slabFar=v}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(l,v={},w,O=!1){if(w){var T=(0,f.getExtent)(this.getAtomsFromSel(w));v.position={x:T[2][0],y:T[2][1],z:T[2][2]}}var D=new _.Label(l,v);return D.setContext(),this.modelGroup.add(D.sprite),this.labels.push(D),O||this.show(),D}addResLabels(l,v,w=!1){let O=this.labels.length;return this.applyToModels("addResLabels",l,this,v,w),this.show(),this.labels.slice(O)}addPropertyLabels(l,v,w){return this.applyToModels("addPropertyLabels",l,v,this,w),this.show(),this}removeLabel(l){for(var v=0;v<this.labels.length;v++)if(this.labels[v]==l){this.labels.splice(v,1),l.dispose(),this.modelGroup.remove(l.sprite);break}return this.show(),this}removeAllLabels(){for(var l=0;l<this.labels.length;l++)this.labels[l]&&this.labels[l].sprite&&this.modelGroup.remove(this.labels[l].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}setLabelStyle(l,v){return this.modelGroup.remove(l.sprite),l.dispose(),l.stylespec=v,l.setContext(),this.modelGroup.add(l.sprite),this.show(),l}setLabelText(l,v){return this.modelGroup.remove(l.sprite),l.dispose(),l.text=v,l.setContext(),this.modelGroup.add(l.sprite),this.show(),l}addShape(l){l=l||{};var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,this.shapes.push(v),v}removeShape(l){if(!l)return this;for(l.removegl(this.modelGroup),delete this.shapes[l.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var l=0;l<this.shapes.length;l++){var v=this.shapes[l];v&&v.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(l){if(l.hasOwnProperty("x")&&l.hasOwnProperty("y")&&l.hasOwnProperty("z"))return l;var v=this.getAtomsFromSel(l);if(v.length==0)return{x:0,y:0,z:0};var w=(0,f.getExtent)(v);return{x:w[0][0]+(w[1][0]-w[0][0])/2,y:w[0][1]+(w[1][1]-w[0][1])/2,z:w[0][2]+(w[1][2]-w[0][2])/2}}addSphere(l){l=l||{},l.center=this.getSelectionCenter(l.center);var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,v.addSphere(l),this.shapes.push(v),v.finalize(),v}addBox(l={}){l.corner!=null&&(l.corner=this.getSelectionCenter(l.corner)),l.center!=null&&(l.center=this.getSelectionCenter(l.center));var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,v.addBox(l),this.shapes.push(v),v.finalize(),v}addArrow(l={}){l.start=this.getSelectionCenter(l.start),l.end=this.getSelectionCenter(l.end);var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,v.addArrow(l),this.shapes.push(v),v.finalize(),v}addCylinder(l={}){l.start=this.getSelectionCenter(l.start),l.end=this.getSelectionCenter(l.end);var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,l.dashed?v.addDashedCylinder(l):v.addCylinder(l),this.shapes.push(v),v.finalize(),v}addCurve(l={}){var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,v.addCurve(l),this.shapes.push(v),v.finalize(),v}addLine(l={}){l.start=this.getSelectionCenter(l.start),l.end=this.getSelectionCenter(l.end),l.wireframe=!0;var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,l.dashed?v=this.addLineDashed(l,v):v.addLine(l),this.shapes.push(v),v.finalize(),v}addUnitCell(l,v){l=this.getModel(l),v=v||{alabel:"a",blabel:"b",clabel:"c"},v.box=v.box||{},v.astyle=v.astyle||{color:"red",radius:.1,midpos:-1},v.bstyle=v.bstyle||{color:"green",radius:.1,midpos:-1},v.cstyle=v.cstyle||{color:"blue",radius:.1,midpos:-1},v.alabelstyle=v.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},v.blabelstyle=v.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},v.clabelstyle=v.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},l.unitCellObjects&&this.removeUnitCell(l),l.unitCellObjects={shapes:[],labels:[]};var w=l.getCrystData(),O=null;if(w){if(w.matrix)O=w.matrix;else{var T=w.a,D=w.b,I=w.c,k=w.alpha,z=w.beta,L=w.gamma;k=k*Math.PI/180,z=z*Math.PI/180,L=L*Math.PI/180;var B,H,V;B=Math.cos(z),H=(Math.cos(k)-Math.cos(z)*Math.cos(L))/Math.sin(L),V=Math.sqrt(Math.max(0,1-B*B-H*H)),O=new o.Matrix3(T,D*Math.cos(L),I*B,0,D*Math.sin(L),I*H,0,0,I*V)}var N=[new o.Vector3(0,0,0),new o.Vector3(1,0,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(1,1,0),new o.Vector3(0,1,1),new o.Vector3(1,0,1),new o.Vector3(1,1,1)];if(w.matrix4)for(let G=0;G<N.length;G++)w.size&&N[G].multiplyVectors(N[G],w.size),N[G]=N[G].applyMatrix4(w.matrix4);else for(let G=0;G<N.length;G++)N[G]=N[G].applyMatrix3(O);if(v.box&&!v.box.hidden){v.box.wireframe=!0;var U=new b.GLShape(v.box);U.shapePosition=this.shapes.length,U.addLine({start:N[0],end:N[1]}),U.addLine({start:N[0],end:N[2]}),U.addLine({start:N[1],end:N[4]}),U.addLine({start:N[2],end:N[4]}),U.addLine({start:N[0],end:N[3]}),U.addLine({start:N[3],end:N[5]}),U.addLine({start:N[2],end:N[5]}),U.addLine({start:N[1],end:N[6]}),U.addLine({start:N[4],end:N[7]}),U.addLine({start:N[6],end:N[7]}),U.addLine({start:N[3],end:N[6]}),U.addLine({start:N[5],end:N[7]}),this.shapes.push(U),l.unitCellObjects.shapes.push(U),U.finalize()}if(!v.astyle.hidden){v.astyle.start=N[0],v.astyle.end=N[1];let G=this.addArrow(v.astyle);l.unitCellObjects.shapes.push(G)}if(!v.bstyle.hidden){v.bstyle.start=N[0],v.bstyle.end=N[2];let G=this.addArrow(v.bstyle);l.unitCellObjects.shapes.push(G)}if(!v.cstyle.hidden){v.cstyle.start=N[0],v.cstyle.end=N[3];let G=this.addArrow(v.cstyle);l.unitCellObjects.shapes.push(G)}if(v.alabel){v.alabelstyle.position=N[1];let G=this.addLabel(v.alabel,v.alabelstyle);l.unitCellObjects.labels.push(G)}if(v.blabel){v.blabelstyle.position=N[2];let G=this.addLabel(v.blabel,v.blabelstyle);l.unitCellObjects.labels.push(G)}if(v.clabel){v.clabelstyle.position=N[3];let G=this.addLabel(v.clabel,v.clabelstyle);l.unitCellObjects.labels.push(G)}}}removeUnitCell(l){if(l=this.getModel(l),l.unitCellObjects){let v=this;l.unitCellObjects.shapes.forEach(function(w){v.removeShape(w)}),l.unitCellObjects.labels.forEach(function(w){v.removeLabel(w)})}delete l.unitCellObjects}replicateUnitCell(l=3,v=l,w=v,O,T){O=this.getModel(O);let D=O.getCrystData();if(D){const I=O.selectedAtoms({}),k=D.matrix;let z=function(L){return L%2==0?-L/2:Math.ceil(L/2)};for(let L=0;L<l;L++)for(let B=0;B<v;B++)for(let H=0;H<w;H++){if(L==0&&B==0&&H==0)continue;let V=new o.Vector3(z(L),z(B),z(H));V.applyMatrix3(k);let N=[];for(let U=0;U<I.length;U++){let G={};for(let $ in I[U])G[$]=I[U][$];G.x+=V.x,G.y+=V.y,G.z+=V.z,N.push(G)}O.addAtoms(N)}T&&O.assignBonds()}}addLineDashed(l,v){l.dashLength=l.dashLength||.5,l.gapLength=l.gapLength||.5;var w;l.start?w=new o.Vector3(l.start.x||0,l.start.y||0,l.start.z||0):w=new o.Vector3(0,0,0);var O;l.end?O=new o.Vector3(l.end.x,l.end.y||0,l.end.z||0):O=new o.Vector3(0,0,0);var T=new o.Vector3,D=new o.Vector3,I=new o.Vector3,k,z,L,B=w.clone(),H=0;for(T.subVectors(O,w),k=T.length(),T.normalize(),D=T.clone(),I=T.clone(),D.multiplyScalar(l.dashLength),I.multiplyScalar(l.gapLength),z=D.length(),L=I.length();H<k;){if(H+z>k){l.start=w,l.end=O,v.addLine(l);break}B.addVectors(w,D),l.start=w,l.end=B,v.addLine(l),w=B.clone(),H+=z,B.addVectors(w,I),w=B.clone(),H+=L}return v.finalize(),v}addCustom(l){l=l||{};var v=new b.GLShape(l);return v.shapePosition=this.shapes.length,v.addCustom(l),this.shapes.push(v),v.finalize(),v}addVolumetricData(l,v,w={}){var O=new C.VolumeData(l,v);return w.hasOwnProperty("transferfn")?this.addVolumetricRender(O,w):this.addIsosurface(O,w)}addIsosurface(l,v={},w){var O=new b.GLShape(v);return O.shapePosition=this.shapes.length,O.addIsosurface(l,v,w),this.shapes.push(O),O}addVolumetricRender(l,v){v=v||{};var w=new E.GLVolumetricRender(l,v);return w.shapePosition=this.shapes.length,this.shapes.push(w),w}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(l){l?this.scene.fog=new s.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}setFrame(l){this.viewer_frame=l;let v=this;return new Promise(function(w){var O=v.models.map(function(T){return T.setFrame(l,v)});Promise.all(O).then(function(){w()})})}getFrame(){return this.viewer_frame}getNumFrames(){var l=0;for(let v=0;v<this.models.length;v++)this.models[v].getNumFrames()>l&&(l=this.models[v].getNumFrames());for(let v=0;v<this.shapes.length;v++)this.shapes[v].frame&&this.shapes[v].frame>=l&&(l=this.shapes[v].frame+1);for(let v=0;v<this.labels.length;v++)this.labels[v].frame&&this.labels[v].frame>=l&&(l=this.labels[v].frame+1);return l}animate(l){this.incAnim();var v=100,w="forward",O=0;l=l||{},l.interval&&(v=l.interval),l.loop&&(w=l.loop),l.reps&&(O=l.reps);var T=this.getNumFrames(),D=this,I=0;l.startFrame&&(I=l.startFrame%T);var k=1;l.step&&(k=l.step,O/=k);var z=0,L=T*O,B=new Date,H,V,N=function(U){B=new Date,U=="forward"?D.setFrame(I).then(function(){I=(I+k)%T,H()}):U=="backward"?D.setFrame(T-1-I).then(function(){I=(I+k)%T,H()}):D.setFrame(I).then(function(){I+=k,k*=I%(T-1)==0?-1:1,H()})};return H=function(){if(D.render(),!D.getCanvas().isConnected)D.stopAnimate();else if(++z==L||!D.isAnimated())V.cancel(),D.animationTimers.delete(V),D.decAnim();else{var U=v-(new Date().getTime()-B.getTime());U=U>0?U:0,D.animationTimers.delete(V),V=new f.PausableTimer(N,U,w),D.animationTimers.add(V)}},V=new f.PausableTimer(N,0,w),this.animationTimers.add(V),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(l){l.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(l){l.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(l){l.resume()}),this}isAnimated(){return this.animated>0}addModel(l,v="",w){w&&!w.defaultcolors?(w.defaultcolors=this.defaultcolors,w.cartoonQuality=w.cartoonQuality||this.config.cartoonQuality):typeof w>"u"&&(w={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality});var O=new y.GLModel(this.models.length,w);return O.addMolData(l,v,w),this.models.push(O),O}addModels(l,v,w){w=w||{},w.multimodel=!0,w.frames=!0;for(var O=y.GLModel.parseMolData(l,v,w),T=0;T<O.length;T++){var D=new y.GLModel(this.models.length,this.defaultcolors);D.setAtomDefaults(O[T]),D.addFrame(O[T]),D.setFrame(0),O.modelData&&D.setModelData(O.modelData[T]),D.setDontDuplicateAtoms(!w.duplicateAssemblyAtoms),this.models.push(D)}return this.models}addModelsAsFrames(l,v,w){w=w||{},w.multimodel=!0,w.frames=!0;var O=new y.GLModel(this.models.length,this.defaultcolors);return O.addMolData(l,v,w),this.models.push(O),O}addAsOneMolecule(l,v,w){w=w||{},w.multimodel=!0,w.onemol=!0;var O=new y.GLModel(this.models.length,this.defaultcolors);return O.addMolData(l,v,w),this.models.push(O),O}removeModel(l){if(l=this.getModel(l),!!l){for(l.removegl(this.modelGroup),delete this.models[l.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var l=0;l<this.models.length;l++){var v=this.models[l];v&&v.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(l,v){var w={};return v===void 0?w.m=this.models.map(function(O){return O.toCDObject(l)}):w.m=[this.models[v].toCDObject()],JSON.stringify(w)}exportVRML(){var l=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new s.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var v=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=l,v}createModelFrom(l,v=!1){for(var w=new y.GLModel(this.models.length,this.defaultcolors),O=0;O<this.models.length;O++)if(this.models[O]){var T=this.models[O].selectedAtoms(l);w.addAtoms(T),v&&this.models[O].removeAtoms(T)}return this.models.push(w),w}applyToModels(l,v,w,O,T,D,I){for(var k=this.getModelList(v),z=0;z<k.length;z++)k[z][l](v,w,O,T,D,I)}setStyle(l,v){return typeof v>"u"&&(v=l,l={}),this.applyToModels("setStyle",l,v,!1),this}addStyle(l,v){return typeof v>"u"&&(v=l,l={}),this.applyToModels("setStyle",l,v,!0),this}setClickable(l,v,w){return this.applyToModels("setClickable",l,v,w),this}setHoverable(l,v,w,O){return this.applyToModels("setHoverable",l,v,w,O),this}enableContextMenu(l,v){return this.applyToModels("enableContextMenu",l,v),this}vibrate(l,v,w,O){return this.applyToModels("vibrate",l,v,w,this,O),this}setColorByProperty(l,v,w,O){return this.applyToModels("setColorByProperty",l,v,w,O),this}setColorByElement(l,v){return this.applyToModels("setColorByElement",l,v),this}static getAtomsWithin(l,v){var w=[];for(let T=0;T<l.length;T++){var O=l[T];typeof O>"u"||O.x<v[0][0]||O.x>v[1][0]||O.y<v[0][1]||O.y>v[1][1]||O.z<v[0][2]||O.z>v[1][2]||w.push(O)}return w}static volume(l){var v=l[1][0]-l[0][0],w=l[1][1]-l[0][1],O=l[1][2]-l[0][2];return v*w*O}carveUpExtent(l,v,w){let O=[],T={};for(let B=0,H=v.length;B<H;B++)T[v[B].index]=B;let D=function(B){let H=[];for(let V=0,N=B.length;V<N;V++)B[V].index in T&&H.push(T[B[V].index]);return H},I=function(B){let H=[];return H[0]=[B[0][0],B[0][1],B[0][2]],H[1]=[B[1][0],B[1][1],B[1][2]],H},k=function(B){if(a.volume(B)<a.maxVolume)return[B];var H=B[1][0]-B[0][0],V=B[1][1]-B[0][1],N=B[1][2]-B[0][2],U;H>V&&H>N?U=0:V>H&&V>N?U=1:U=2;var G=I(B),$=I(B),W=(B[1][U]-B[0][U])/2+B[0][U];G[1][U]=W,$[0][U]=W;var j=k(G),se=k($);return j.concat(se)},z=k(l),L=6;for(let B=0,H=z.length;B<H;B++){let V=I(z[B]);V[0][0]-=L,V[0][1]-=L,V[0][2]-=L,V[1][0]+=L,V[1][1]+=L,V[1][2]+=L;let N=a.getAtomsWithin(v,V),U=a.getAtomsWithin(w,z[B]);O.push({extent:z[B],atoms:D(N),toshow:D(U)})}return O}static generateSurfaceMesh(l,v,w){var O=new s.Geometry(!0),T=O.updateGeoGroup(0),D=[];for(let Oe=0,ee=l.length;Oe<ee;Oe++){var I=l[Oe];I&&(typeof I.surfaceColor<"u"?D[Oe]=I.surfaceColor:I.color&&(D[Oe]=n.CC.color(I.color)))}var k=T.vertexArray,z=v.vertices;for(let Oe=0,ee=z.length;Oe<ee;Oe++){let J=T.vertices*3;k[J]=z[Oe].x,k[J+1]=z[Oe].y,k[J+2]=z[Oe].z,T.vertices++}var L=T.colorArray;if(w.voldata&&w.volscheme){var B=w.volscheme,H=w.voldata,V=B.range()||[-1,1];for(let Oe=0,ee=z.length;Oe<ee;Oe++){let J=H.getVal(z[Oe].x,z[Oe].y,z[Oe].z),ne=n.CC.color(B.valueToHex(J,V)),le=Oe*3;L[le]=ne.r,L[le+1]=ne.g,L[le+2]=ne.b}}else if(D.length>0)for(let Oe=0,ee=z.length;Oe<ee;Oe++){let J=z[Oe].atomid,ne=Oe*3;L[ne]=D[J].r,L[ne+1]=D[J].g,L[ne+2]=D[J].b}var N=v.faces;T.faceidx=N.length,O.initTypedArrays();var U=T.vertexArray,G=T.normalArray,$,W,j,se;for(let Oe=0,ee=N.length;Oe<ee;Oe+=3){var he=N[Oe],ce=N[Oe+1],ue=N[Oe+2],Ee=he*3,pe=ce*3,fe=ue*3;$=new o.Vector3(U[Ee],U[Ee+1],U[Ee+2]),W=new o.Vector3(U[pe],U[pe+1],U[pe+2]),j=new o.Vector3(U[fe],U[fe+1],U[fe+2]),j.subVectors(j,W),$.subVectors($,W),j.cross($),se=j,se.normalize(),G[Ee]+=se.x,G[pe]+=se.x,G[fe]+=se.x,G[Ee+1]+=se.y,G[pe+1]+=se.y,G[fe+1]+=se.y,G[Ee+2]+=se.z,G[pe+2]+=se.z,G[fe+2]+=se.z}T.faceArray=new Uint16Array(N);var Ue=new s.Mesh(O,w);return Ue}static generateMeshSyncHelper(l,v,w,O,T,D){var I=new M.ProteinSurface;return I.initparm(v,l!==1,D),I.fillvoxels(T,w),I.buildboundary(),(l==M.SurfaceType.SES||l==M.SurfaceType.MS)&&(I.fastdistancemap(),I.boundingatom(!1),I.fillvoxelswaals(T,w)),I.marchingcube(l),I.getFacesAndVertices(O)}static getMatWithStyle(l){var v=new s.MeshLambertMaterial;v.vertexColors=s.Coloring.VertexColors;for(var w in l)w==="color"||w==="map"||l.hasOwnProperty(w)&&(v[w]=l[w]);return l.opacity!==void 0&&(l.opacity===1?v.transparent=!1:v.transparent=!0),v}addMesh(l){var v={geo:l.geometry,mat:l.material,done:!0,finished:!1},w=this.nextSurfID();return this.surfaces[w]=v,w}static shallowCopy(l){var v=[];let w=l.length;for(let O=0;O<w;O++)v[O]=(0,f.extend)({},l[O]);return v}addSurface(l,v={},w={},O,T,D){let I=this.nextSurfID(),k=null,z=this,L=M.SurfaceType.VDW;typeof l=="string"?a.surfaceTypeMap[l.toUpperCase()]!==void 0?L=a.surfaceTypeMap[l]:console.log("Surface type : "+l+" is not recognized"):typeof l=="number"&&(L=l);var B=null,H=null,V=a.shallowCopy(this.getAtomsFromSel(w));O?B=a.shallowCopy(this.getAtomsFromSel(O)):B=V,(0,f.adjustVolumeStyle)(v);var N=!1,U;for(U=0;U<this.models.length;U++)if(this.models[U]){var G=this.models[U].getSymmetries();if(G.length>1||G.length==1&&!G[0].isIdentity()){N=!0;break}}var $=function(Ee,pe,fe){T?H=a.shallowCopy(z.getAtomsFromSel(T)):H=fe;var Ue,Oe=(0,f.getExtent)(fe,!0);if(v.map&&v.map.prop){var ee=v.map.prop;let De=(0,c.getGradient)(v.map.scheme||v.map.gradient||new c.Gradient.RWB),Re=De.range();Re||(Re=(0,f.getPropertyRange)(fe,ee)),v.colorscheme={prop:ee,gradient:De}}for(let De=0,Re=pe.length;De<Re;De++)Ue=pe[De],Ue.surfaceColor=(0,f.getColorFromStyle)(Ue,v);var J=a.volume(Oe),ne=z.carveUpExtent(Oe,pe,fe);if(H&&H.length&&H.length>0){var le=(0,f.getExtent)(H,!0),we=function(De,Re){var Ge=function(Z,ie){var ye=Z.extent,xe=ye[1][0]-ye[0][0],Ne=ye[1][1]-ye[0][1],Ve=ye[1][2]-ye[0][2],X=xe-ie[2][0];X*=X;var ve=Ne-ie[2][1];ve*=ve;var Me=Ve-ie[2][2];return Me*=Me,X+ve+Me},Ke=Ge(De,le),Q=Ge(Re,le);return Ke-Q};ne.sort(we)}var Pe=[];for(let De=0,Re=pe.length;De<Re;De++)Ue=pe[De],Pe[De]={x:Ue.x,y:Ue.y,z:Ue.z,serial:De,elem:Ue.elem};var Be=!!M.syncSurface;if(Be){var Ce=function(Re){return new Promise(function(Ge){for(var Ke=a.generateMeshSyncHelper(L,ne[Re].extent,ne[Re].atoms,ne[Re].toshow,Pe,J),Q=(0,b.splitMesh)({vertexArr:Ke.vertices,faceArr:Ke.faces}),Z=0,ie=Q.length;Z<ie;Z++){Ke={vertices:Q[Z].vertexArr,faces:Q[Z].faceArr};var ye=a.generateSurfaceMesh(pe,Ke,k);(0,f.mergeGeos)(Ee.geo,ye)}z.render(),Ge()})},be=[];for(let De=0;De<ne.length;De++)be.push(Ce(De));return Promise.all(be).then(function(){return Ee.done=!0,Promise.resolve(I)})}else{var ge=[];L<0&&(L=0);for(let De=0,Re=a.numWorkers;De<Re;De++){var Ae=new Worker($3Dmol.SurfaceWorker);ge.push(Ae),Ae.postMessage({type:-1,atoms:Pe,volume:J})}return new Promise(function(De,Re){var Ge=0,Ke=function(){!ge||!ge.length||ge.forEach(function(ye){ye&&ye.terminate&&ye.terminate()})},Q=function(ye){for(var xe=(0,b.splitMesh)({vertexArr:ye.data.vertices,faceArr:ye.data.faces}),Ne=0,Ve=xe.length;Ne<Ve;Ne++){var X={vertices:xe[Ne].vertexArr,faces:xe[Ne].faceArr},ve=a.generateSurfaceMesh(pe,X,k);(0,f.mergeGeos)(Ee.geo,ve)}z.render(),Ge++,Ge==ne.length&&(Ee.done=!0,Ke(),De(I))},Z=function(ye){Ke(),console.log(ye.message+" ("+ye.filename+":"+ye.lineno+")"),Re(ye)};for(let ye=0;ye<ne.length;ye++){var ie=ge[ye%ge.length];ie.onmessage=Q,ie.onerror=Z,ie.postMessage({type:L,expandedExtent:ne[ye].extent,extendedAtoms:ne[ye].atoms,atomsToShow:ne[ye].toshow})}})}};v=v||{},k=a.getMatWithStyle(v);var W=[];W.style=v,W.atomsel=w,W.allsel=O,W.focus=T;var j=null;if(N){var se={},he={};for(U=0;U<this.models.length;U++)se[U]=[],he[U]=[];for(U=0;U<B.length;U++)se[B[U].model].push(B[U]);for(U=0;U<V.length;U++)he[V[U].model].push(V[U]);var ce=[];for(U=0;U<this.models.length;U++)he[U].length>0&&(W.push({geo:new s.Geometry(!0),mat:k,done:!1,finished:!1,symmetries:this.models[U].getSymmetries()}),ce.push($(W[W.length-1],se[U],he[U])));j=Promise.all(ce)}else W.push({geo:new s.Geometry(!0),mat:k,done:!1,finished:!1,symmetries:[new o.Matrix4]}),j=$(W[W.length-1],B,V);return this.surfaces[I]=W,j.surfid=I,D&&typeof D=="function"?(j.then(function(ue){D(ue)}),I):j}setSurfaceMaterialStyle(l,v){if((0,f.adjustVolumeStyle)(v),this.surfaces[l]){var w=this.surfaces[l];w.style=v;for(var O=0;O<w.length;O++){var T=w[O].mat=a.getMatWithStyle(v);if(w[O].mat.side=s.FrontSide,v.color){w[O].mat.color=v.color,w[O].geo.colorsNeedUpdate=!0;const D=n.CC.color(v.color);w[O].geo.setColors(function(){return D})}else if(T.voldata&&T.volscheme){const D=T.volscheme,I=T.voldata,k=n.CC,z=D.range()||[-1,1];w[O].geo.setColors(function(L,B,H){let V=I.getVal(L,B,H);return k.color(D.valueToHex(V,z))})}w[O].finished=!1}}return this}getSurface(l){return this.surfaces[l]}removeSurface(l){for(var v=this.surfaces[l],w=0;w<v.length;w++)v[w]&&v[w].lastGL&&(v[w].geo!==void 0&&v[w].geo.dispose(),v[w].mat!==void 0&&v[w].mat.dispose(),this.modelGroup.remove(v[w].lastGL));return delete this.surfaces[l],this.show(),this}removeAllSurfaces(){for(var l in this.surfaces)if(this.surfaces.hasOwnProperty(l)){for(var v=this.surfaces[l],w=0;w<v.length;w++)v[w]&&v[w].lastGL&&(v[w].geo!==void 0&&v[w].geo.dispose(),v[w].mat!==void 0&&v[w].mat.dispose(),this.modelGroup.remove(v[w].lastGL));delete this.surfaces[l]}return this.show(),this}jmolMoveTo(){var l=this.modelGroup.position,v="center { "+-l.x+" "+-l.y+" "+-l.z+" }; ",w=this.rotationGroup.quaternion;return v+="moveto .5 quaternion { "+w.x+" "+w.y+" "+w.z+" "+w.w+" };",v}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(l,v){v=v||{};var w=this.getAtomsFromSel(v);if(typeof l=="function")for(let D=0,I=w.length;D<I;D++){let k=w[D];l(k)}else for(let D=0,I=w.length;D<I;D++){var O=w[D];for(let k=0,z=l.length;k<z;k++){let L=l[k];if(L.props)for(var T in L.props)L.props.hasOwnProperty(T)&&this.atomIsSelected(O,L)&&(O.properties||(O.properties={}),O.properties[T]=L.props[T])}}return this}linkViewer(l){return this.linkedViewers.push(l),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(l){this.rotationGroup.position.z=this.CAMERA_Z-l}setAutoEyeSeparation(l,v){var w=this.getPerceivedDistance();return v||(v=5),l||this.camera.position.x>0?this.camera.position.x=w*Math.tan(Math.PI/180*v):this.camera.position.x=-w*Math.tan(Math.PI/180*v),this.camera.lookAt(new o.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(l){this.config.cartoonQuality=l}}a.numWorkers=4,a.maxVolume=64e3,a.surfaceTypeMap={VDW:M.SurfaceType.VDW,MS:M.SurfaceType.MS,SAS:M.SurfaceType.SAS,SES:M.SurfaceType.SES};function u(x,l){if(x=(0,f.getElement)(x),!!x){l=l||{};try{var v=new a(x,l);return v}catch(w){throw"error creating viewer: "+w}}}function g(x,l={},v={}){if(x=(0,f.getElement)(x),!!x){var w=[],O=document.createElement("canvas");v.rows=l.rows,v.cols=l.cols,v.control_all=l.control_all!=null?l.control_all:!1,x.appendChild(O);try{for(var T=0;T<l.rows;T++){for(var D=[],I=0;I<l.cols;I++){v.row=T,v.col=I,v.canvas=O,v.viewers=w,v.control_all=l.control_all;var k=u(x,v);D.push(k)}w.unshift(D)}}catch(z){throw"error creating viewer grid: "+z}return w}}function A(x){var l=this;if(x=(0,f.getElement)(x),!!x){var v=g(x,{rows:1,cols:2,control_all:!0});this.glviewer1=v[0][0],this.glviewer2=v[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var w=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(T){return typeof l.glviewer1[T]=="function"}),O=0;O<w.length;O++)this[w[O]]=function(T){return function(){var D=this.glviewer1[T].apply(this.glviewer1,arguments),I=this.glviewer2[T].apply(this.glviewer2,arguments);return[D,I]}}(w[O]);this.setCoordinates=function(T,D,I){for(var k=0;k<T.length;k++)T[k].setCoordinates(D,I)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(T){this.glviewer1.render(),this.glviewer2.render(),T&&T(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts":(e,t,r)=>{r.r(t),r.d(t,{CustomLinear:()=>b,Gradient:()=>M,GradientType:()=>o,ROYGB:()=>y,RWB:()=>c,Sinebow:()=>_,builtinGradients:()=>C,getGradient:()=>f,normalizeValue:()=>n});var s=r("./src/colors.ts");class o{}function n(E,P,a){return P>=E?(a<E&&(a=E),a>P&&(a=P),{lo:E,hi:P,val:a}):(a>E&&(a=E),a<P&&(a=P),a=E-a+P,{lo:P,hi:E,val:a})}function f(E){if(E instanceof o)return E;if(E.gradient!==void 0&&C[E.gradient]){let P=E.min===void 0?-1:E.min,a=E.max===void 0?1:E.max;return E.mid===void 0?E.colors===void 0?new C[E.gradient](P,a):new C[E.gradient](P,a,E.colors):new C[E.gradient](P,a,E.mid)}return E}class c extends o{constructor(P,a,u){super(),this.gradient="RWB",this.mult=1,this.mid=u,this.min=P,this.max=a,typeof a>"u"&&Array.isArray(P)&&P.length>=2?(this.max=P[1],this.min=P[0]):P&&a&&!Array.isArray(P)&&(this.min=P,this.max=a)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(P,a){var u,g;if(P=this.mult*P,a?(u=a[0],g=a[1]):(u=this.min,g=this.max),P===void 0)return 16777215;var A=n(u,g,P);u=A.lo,g=A.hi,P=A.val;var x=(g+u)/2;a&&typeof a[2]<"u"?x=a[2]:typeof this.mid<"u"?x=this.mid:x=(u+g)/2;var l,v;return P<x?(l=Math.floor(255*Math.sqrt((P-u)/(x-u))),v=16711680+256*l+l,v):P>x?(l=Math.floor(255*Math.sqrt(1-(P-x)/(g-x))),v=65536*l+256*l+255,v):16777215}}class y extends o{constructor(P,a){super(),this.gradient="ROYGB",this.mult=1,this.min=P,this.max=a,typeof a>"u"&&Array.isArray(P)&&P.length>=2?(this.max=P[1],this.min=P[0]):P&&a&&!Array.isArray(P)&&(this.min=P,this.max=a)}valueToHex(P,a){var u,g;if(P=this.mult*P,a?(u=a[0],g=a[1]):(u=this.min,g=this.max),typeof P>"u")return 16777215;var A=n(u,g,P);u=A.lo,g=A.hi,P=A.val;var x=(u+g)/2,l=(u+x)/2,v=(x+g)/2,w,O;return P<l?(w=Math.floor(255*Math.sqrt((P-u)/(l-u))),O=16711680+256*w+0,O):P<x?(w=Math.floor(255*Math.sqrt(1-(P-l)/(x-l))),O=65536*w+65280+0,O):P<v?(w=Math.floor(255*Math.sqrt((P-x)/(v-x))),O=65280+1*w,O):(w=Math.floor(255*Math.sqrt(1-(P-v)/(g-v))),O=0+256*w+255,O)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class _ extends o{constructor(P,a){super(),this.gradient="Sinebow",this.mult=1,this.min=P,this.max=a,typeof a>"u"&&Array.isArray(P)&&P.length>=2&&(this.max=P[1],this.min=P[0]),a<P&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(P,a){var u,g;if(P=this.mult*P,a?(u=a[0],g=a[1]):(u=this.min,g=this.max),typeof P>"u")return 16777215;var A=M.normalizeValue(u,g,P);u=A.lo,g=A.hi,P=A.val;var x=(P-u)/(g-u),l=5*x/6+.5,v=Math.sin(Math.PI*l);v*=v*255;var w=Math.sin(Math.PI*(l+1/3));w*=w*255;var O=Math.sin(Math.PI*(l+2/3));return O*=O*255,65536*Math.floor(v)+256*Math.floor(O)+1*Math.floor(w)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class b extends o{constructor(P,a,u){super(),this.gradient="linear",this.colors=new Array;var g;if(Array.isArray(P)&&P.length>=2?(this.max=P[1],this.min=P[0],g=a):(this.min=P,this.max=a,g=u),g)for(let A of g)this.colors.push(s.CC.color(A));else this.colors.push(s.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(P,a){var u,g;if(a?(u=a[0],g=a[1]):(u=this.min,g=this.max),P===void 0)return 16777215;var A=n(u,g,P);u=A.lo,g=A.hi,P=A.val;let x=this.colors.length,l=(g-u)/x,v=Math.min(Math.floor((P-u)/l),x-1),w=Math.min(v+1,x-1),O=(P-u-v*l)/l,T=this.colors[v],D=this.colors[w];return new s.Color(T.r+O*(D.r-T.r),T.g+O*(D.g-T.g),T.b+O*(D.b-T.b)).getHex()}}const C={rwb:c,RWB:c,roygb:y,ROYGB:y,sinebow:_,linear:b};class M extends o{valueToHex(P,a){return 0}range(){return null}}M.RWB=c,M.ROYGB=y,M.Sinebow=_,M.CustomLinear=b,M.builtinGradients=C,M.normalizeValue=n,M.getGradient=f},"./src/Label.ts":(e,t,r)=>{r.r(t),r.d(t,{Label:()=>_,LabelCount:()=>f});var s=r("./src/WebGL/index.ts"),o=r("./src/Gradient.ts"),n=r("./src/colors.ts");let f=0;function c(b,C,M,E,P,a,u){b.beginPath(),b.moveTo(C+a,M),b.lineTo(C+E-a,M),b.quadraticCurveTo(C+E,M,C+E,M+a),b.lineTo(C+E,M+P-a),b.quadraticCurveTo(C+E,M+P,C+E-a,M+P),b.lineTo(C+a,M+P),b.quadraticCurveTo(C,M+P,C,M+P-a),b.lineTo(C,M+a),b.quadraticCurveTo(C,M,C+a,M),b.closePath(),b.fill(),u&&b.stroke()}function y(b,C,M){var E=M;return typeof b<"u"&&(b instanceof n.Color?E=b.scaled():(E=n.CC.color(b),typeof E.scaled<"u"&&(E=E.scaled()))),typeof C<"u"&&(E.a=parseFloat(C)),E}class _{constructor(C,M){this.id=f++,this.stylespec=M||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new s.Sprite,this.text=C,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}setContext(){var C=this.stylespec,M=typeof C.useScreen>"u"?!1:C.useScreen,E=C.showBackground;(E==="0"||E==="false")&&(E=!1),typeof E>"u"&&(E=!0);var P=C.font?C.font:"sans-serif",a=parseInt(C.fontSize)?parseInt(C.fontSize):18,u=y(C.fontColor,C.fontOpacity,{r:255,g:255,b:255,a:1}),g=C.padding?C.padding:4,A=C.borderThickness?C.borderThickness:0,x=y(C.backgroundColor,C.backgroundOpacity,{r:0,g:0,b:0,a:1}),l=y(C.borderColor,C.borderOpacity,x),v=C.position?C.position:{x:-10,y:1,z:1},w=C.inFront!==void 0?C.inFront:!0;(w==="false"||w==="0")&&(w=!1);var O=C.alignment||s.SpriteAlignment.topLeft;typeof O=="string"&&O in s.SpriteAlignment&&(O=s.SpriteAlignment[O]);var T="";C.bold&&(T="bold "),this.context.font=T+a+"px  "+P;var D=this.context.measureText(this.text),I=D.width;E||(A=0);var k=I+2.5*A+2*g,z=a*1.25+2*A+2*g;if(C.backgroundImage){var L=C.backgroundImage,B=C.backgroundWidth?C.backgroundWidth:L.width,H=C.backgroundHeight?C.backgroundHeight:L.height;B>k&&(k=B),H>z&&(z=H)}if(this.canvas.width=k,this.canvas.height=z,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),T="",C.bold&&(T="bold "),this.context.font=T+a+"px  "+P,this.context.fillStyle="rgba("+x.r+","+x.g+","+x.b+","+x.a+")",this.context.strokeStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",C.backgroundGradient){let N=this.context.createLinearGradient(0,z/2,k,z/2),U=o.Gradient.getGradient(C.backgroundGradient),G=U.range(),$=-1,W=1;G&&($=G[0],W=G[1]);let j=W-$;for(let se=0;se<1.01;se+=.1){let he=y(U.valueToHex($+j*se)),ce="rgba("+he.r+","+he.g+","+he.b+","+he.a+")";N.addColorStop(se,ce)}this.context.fillStyle=N}this.context.lineWidth=A,E&&c(this.context,A,A,k-2*A,z-2*A,6,A>0),C.backgroundImage&&this.context.drawImage(L,0,0,k,z),this.context.fillStyle="rgba("+u.r+","+u.g+","+u.b+","+u.a+")",this.context.fillText(this.text,A+g,a+A+g,I);var V=new s.Texture(this.canvas);V.needsUpdate=!0,this.sprite.material=new s.SpriteMaterial({map:V,useScreenCoordinates:M,alignment:O,depthTest:!w,screenOffset:C.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(v.x,v.y,v.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts":(e,t,r)=>{r.r(t),r.d(t,{MarchingCube:()=>y,MarchingCubeInitializer:()=>c,PointGrid:()=>_,ProteinSurface:()=>b,SurfaceType:()=>o,setSyncSurface:()=>f,syncSurface:()=>n});var s=r("./src/WebGL/math/index.ts"),o;(function(C){C[C.VDW=1]="VDW",C[C.MS=2]="MS",C[C.SAS=3]="SAS",C[C.SES=4]="SES"})(o||(o={}));var n=!1;function f(C){n=C}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(n=!0);class c{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(M,E,P,a){let u=!!a.fulltable,g=a.hasOwnProperty("origin")&&a.origin.hasOwnProperty("x")?a.origin:{x:0,y:0,z:0},A=!!a.voxel,x=a.matrix,l=a.nX||0,v=a.nY||0,w=a.nZ||0,O=a.scale||1,T=null;a.unitCube?T=a.unitCube:T={x:O,y:O,z:O};let D=new Int32Array(l*v*w),I,k;for(I=0,k=D.length;I<k;++I)D[I]=-1;let z=function(V,N,U,G,$,W){let j={x:0,y:0,z:0},se=!!(G&1<<$),he=!!(G&1<<W),ce=$;if(!se&&he&&(ce=W),ce&1&&U++,ce&2&&N++,ce&4&&V++,x){let Ee=new s.Vector3(V,N,U);Ee=Ee.applyMatrix4(x),j={x:Ee.x,y:Ee.y,z:Ee.z}}else j.x=g.x+T.x*V,j.y=g.y+T.y*N,j.z=g.z+T.z*U;let ue=(v*V+N)*w+U;return A?(E.push(j),E.length-1):(D[ue]<0&&(D[ue]=E.length,E.push(j)),D[ue])},L=new Int32Array(12),B=u?this.edgeTable2:this.edgeTable,H=u?this.triTable2:this.triTable;for(I=0;I<l-1;++I)for(let V=0;V<v-1;++V)for(let N=0;N<w-1;++N){let U=0;for(let W=0;W<8;++W){let j=(v*(I+((W&4)>>2))+V+((W&2)>>1))*w+N+(W&1),se=!!(M[j]&this.ISDONE);U|=se<<W}if(U===0||U===255)continue;let G=B[U];if(G===0)continue;let $=H[U];G&1&&(L[0]=z(I,V,N,U,0,1)),G&2&&(L[1]=z(I,V,N,U,1,3)),G&4&&(L[2]=z(I,V,N,U,3,2)),G&8&&(L[3]=z(I,V,N,U,2,0)),G&16&&(L[4]=z(I,V,N,U,4,5)),G&32&&(L[5]=z(I,V,N,U,5,7)),G&64&&(L[6]=z(I,V,N,U,7,6)),G&128&&(L[7]=z(I,V,N,U,6,4)),G&256&&(L[8]=z(I,V,N,U,0,4)),G&512&&(L[9]=z(I,V,N,U,1,5)),G&1024&&(L[10]=z(I,V,N,U,3,7)),G&2048&&(L[11]=z(I,V,N,U,2,6));for(let W=0;W<$.length;W+=3){let j=L[$[W]],se=L[$[W+1]],he=L[$[W+2]];A&&W>=3&&(E.push(E[j]),j=E.length-1,E.push(E[se]),se=E.length-1,E.push(E[he]),he=E.length-1),P.push(j),P.push(se),P.push(he)}}}laplacianSmooth(M,E,P){let a=new Array(E.length),u,g,A,x,l;for(u=0,g=E.length;u<g;u++)a[u]={x:0,y:0,z:0};let v=new Array(20),w;for(u=0;u<20;u++)v[u]=new Array(E.length);for(u=0,g=E.length;u<g;u++)v[0][u]=0;for(u=0,g=P.length/3;u<g;u++){let D=u*3,I=u*3+1,k=u*3+2;for(w=!0,A=0,x=v[0][P[D]];A<x;A++)if(P[I]==v[A+1][P[D]]){w=!1;break}for(w&&(v[0][P[D]]++,v[v[0][P[D]]][P[D]]=P[I]),w=!0,A=0,x=v[0][P[D]];A<x;A++)if(P[k]==v[A+1][P[D]]){w=!1;break}for(w&&(v[0][P[D]]++,v[v[0][P[D]]][P[D]]=P[k]),w=!0,A=0,x=v[0][P[I]];A<x;A++)if(P[D]==v[A+1][P[I]]){w=!1;break}for(w&&(v[0][P[I]]++,v[v[0][P[I]]][P[I]]=P[D]),w=!0,A=0,x=v[0][P[I]];A<x;A++)if(P[k]==v[A+1][P[I]]){w=!1;break}for(w&&(v[0][P[I]]++,v[v[0][P[I]]][P[I]]=P[k]),w=!0,A=0;A<v[0][P[k]];A++)if(P[D]==v[A+1][P[k]]){w=!1;break}for(w&&(v[0][P[k]]++,v[v[0][P[k]]][P[k]]=P[D]),w=!0,A=0,x=v[0][P[k]];A<x;A++)if(P[I]==v[A+1][P[k]]){w=!1;break}w&&(v[0][P[k]]++,v[v[0][P[k]]][P[k]]=P[I])}let O=1,T=.5;for(l=0;l<M;l++){for(u=0,g=E.length;u<g;u++)if(v[0][u]<3)a[u].x=E[u].x,a[u].y=E[u].y,a[u].z=E[u].z;else if(v[0][u]==3||v[0][u]==4){for(a[u].x=0,a[u].y=0,a[u].z=0,A=0,x=v[0][u];A<x;A++)a[u].x+=E[v[A+1][u]].x,a[u].y+=E[v[A+1][u]].y,a[u].z+=E[v[A+1][u]].z;a[u].x+=T*E[u].x,a[u].y+=T*E[u].y,a[u].z+=T*E[u].z,a[u].x/=T+v[0][u],a[u].y/=T+v[0][u],a[u].z/=T+v[0][u]}else{for(a[u].x=0,a[u].y=0,a[u].z=0,A=0,x=v[0][u];A<x;A++)a[u].x+=E[v[A+1][u]].x,a[u].y+=E[v[A+1][u]].y,a[u].z+=E[v[A+1][u]].z;a[u].x+=O*E[u].x,a[u].y+=O*E[u].y,a[u].z+=O*E[u].z,a[u].x/=O+v[0][u],a[u].y/=O+v[0][u],a[u].z/=O+v[0][u]}for(u=0,g=E.length;u<g;u++)E[u].x=a[u].x,E[u].y=a[u].y,E[u].z=a[u].z}}}let y=new c;class _{constructor(M,E,P){this.data=new Int32Array(M*E*P*3),this.width=E,this.height=P}set(M,E,P,a){let u=((M*this.width+E)*this.height+P)*3;this.data[u]=a.ix,this.data[u+1]=a.iy,this.data[u+2]=a.iz}get(M,E,P){let a=((M*this.width+E)*this.height+P)*3;return{ix:this.data[a],iy:this.data[a+1],iz:this.data[a+2]}}}class b{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])]}getVDWIndex(M){return!M.elem||typeof this.vdwRadii[M.elem]>"u"?"X":M.elem}getFacesAndVertices(M){let E={};for(let u=0,g=M.length;u<g;u++)E[M[u]]=!0;let P=this.verts;for(let u=0,g=P.length;u<g;u++)P[u].x=P[u].x/this.scaleFactor-this.ptranx,P[u].y=P[u].y/this.scaleFactor-this.ptrany,P[u].z=P[u].z/this.scaleFactor-this.ptranz;let a=[];for(let u=0,g=this.faces.length;u<g;u+=3){let A=this.faces[u],x=this.faces[u+1],l=this.faces[u+2],v=P[A].atomid,w=P[x].atomid,O=P[l].atomid,T=v;w<T&&(T=w),O<T&&(T=O),E[T]&&A!==x&&x!==l&&A!==l&&(a.push(A),a.push(x),a.push(l))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:P,faces:a}}initparm(M,E,P){P>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let a=1/this.scaleFactor*5.5;this.pminx=M[0][0],this.pmaxx=M[1][0],this.pminy=M[0][1],this.pmaxy=M[1][1],this.pminz=M[0][2],this.pmaxz=M[1][2],E?(this.pminx-=this.probeRadius+a,this.pminy-=this.probeRadius+a,this.pminz-=this.probeRadius+a,this.pmaxx+=this.probeRadius+a,this.pmaxy+=this.probeRadius+a,this.pmaxz+=this.probeRadius+a):(this.pminx-=a,this.pminy-=a,this.pminz-=a,this.pmaxx+=a,this.pmaxy+=a,this.pmaxz+=a),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(E),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(M){let E={};for(const P in this.vdwRadii){let a=this.vdwRadii[P];M?E[P]=(a+this.probeRadius)*this.scaleFactor+.5:E[P]=a*this.scaleFactor+.5;let u=E[P]*E[P];this.widxz[P]=Math.floor(E[P])+1,this.depty[P]=new Int32Array(this.widxz[P]*this.widxz[P]);let g=0;for(let A=0;A<this.widxz[P];A++)for(let x=0;x<this.widxz[P];x++){let l=A*A+x*x;if(l>u)this.depty[P][g]=-1;else{let v=Math.sqrt(u-l);this.depty[P][g]=Math.floor(v)}g++}}}fillvoxels(M,E){for(let P=0,a=this.vpBits.length;P<a;P++)this.vpBits[P]=0,this.vpDistance[P]=-1,this.vpAtomID[P]=-1;for(let P in E){let a=M[E[P]];a!==void 0&&this.fillAtom(a,M)}for(let P=0,a=this.vpBits.length;P<a;P++)this.vpBits[P]&this.INOUT&&(this.vpBits[P]|=this.ISDONE)}fillAtom(M,E){let P=Math.floor(.5+this.scaleFactor*(M.x+this.ptranx)),a=Math.floor(.5+this.scaleFactor*(M.y+this.ptrany)),u=Math.floor(.5+this.scaleFactor*(M.z+this.ptranz)),g=this.getVDWIndex(M),A=0,x=this.pWidth*this.pHeight;for(let l=0,v=this.widxz[g];l<v;l++)for(let w=0;w<v;w++){if(this.depty[g][A]!=-1){for(let O=-1;O<2;O++)for(let T=-1;T<2;T++)for(let D=-1;D<2;D++)if(O!==0&&T!==0&&D!==0){let I=O*l,k=D*w;for(let z=0;z<=this.depty[g][A];z++){let L=z*T,B=P+I,H=a+L,V=u+k;if(B<0||H<0||V<0||B>=this.pLength||H>=this.pWidth||V>=this.pHeight)continue;let N=B*x+H*this.pHeight+V;if(!(this.vpBits[N]&this.INOUT))this.vpBits[N]|=this.INOUT,this.vpAtomID[N]=M.serial;else{let U=E[this.vpAtomID[N]];if(U.serial!=M.serial){let G=P+I-Math.floor(.5+this.scaleFactor*(U.x+this.ptranx)),$=a+L-Math.floor(.5+this.scaleFactor*(U.y+this.ptrany)),W=u+k-Math.floor(.5+this.scaleFactor*(U.z+this.ptranz));I*I+L*L+k*k<G*G+$*$+W*W&&(this.vpAtomID[N]=M.serial)}}}}}A++}}fillvoxelswaals(M,E){for(let P=0,a=this.vpBits.length;P<a;P++)this.vpBits[P]&=~this.ISDONE;for(let P in E){let a=M[E[P]];a!==void 0&&this.fillAtomWaals(a,M)}}fillAtomWaals(M,E){let P=0,a=Math.floor(.5+this.scaleFactor*(M.x+this.ptranx)),u=Math.floor(.5+this.scaleFactor*(M.y+this.ptrany)),g=Math.floor(.5+this.scaleFactor*(M.z+this.ptranz)),A=this.getVDWIndex(M),x=this.pWidth*this.pHeight;for(let l=0,v=this.widxz[A];l<v;l++)for(let w=0;w<v;w++){if(this.depty[A][P]!=-1){for(let O=-1;O<2;O++)for(let T=-1;T<2;T++)for(let D=-1;D<2;D++)if(O!==0&&T!==0&&D!==0){let I=O*l,k=D*w;for(let z=0;z<=this.depty[A][P];z++){let L=z*T,B=a+I,H=u+L,V=g+k;if(B<0||H<0||V<0||B>=this.pLength||H>=this.pWidth||V>=this.pHeight)continue;let N=B*x+H*this.pHeight+V;if(!(this.vpBits[N]&this.ISDONE))this.vpBits[N]|=this.ISDONE,this.vpAtomID[N]=M.serial;else{let U=E[this.vpAtomID[N]];if(U.serial!=M.serial){let G=a+I-Math.floor(.5+this.scaleFactor*(U.x+this.ptranx)),$=u+L-Math.floor(.5+this.scaleFactor*(U.y+this.ptrany)),W=g+k-Math.floor(.5+this.scaleFactor*(U.z+this.ptranz));I*I+L*L+k*k<G*G+$*$+W*W&&(this.vpAtomID[N]=M.serial)}}}}}P++}}buildboundary(){let M=this.pWidth*this.pHeight;for(let E=0;E<this.pLength;E++)for(let P=0;P<this.pHeight;P++)for(let a=0;a<this.pWidth;a++){let u=E*M+a*this.pHeight+P;if(this.vpBits[u]&this.INOUT){let g=0;for(;g<26;){let A=E+this.nb[g][0],x=P+this.nb[g][2],l=a+this.nb[g][1];if(A>-1&&A<this.pLength&&l>-1&&l<this.pWidth&&x>-1&&x<this.pHeight&&!(this.vpBits[A*M+l*this.pHeight+x]&this.INOUT)){this.vpBits[u]|=this.ISBOUND;break}else g++}}}}fastdistancemap(){let M=new _(this.pLength,this.pWidth,this.pHeight),E=this.pWidth*this.pHeight,P=this.cutRadius*this.cutRadius,a=[],u=[],g;for(let l=0;l<this.pLength;l++)for(let v=0;v<this.pWidth;v++)for(let w=0;w<this.pHeight;w++)if(g=l*E+v*this.pHeight+w,this.vpBits[g]&=~this.ISDONE,this.vpBits[g]&this.INOUT&&this.vpBits[g]&this.ISBOUND){let O={ix:l,iy:v,iz:w};M.set(l,v,w,O),a.push(O),this.vpDistance[g]=0,this.vpBits[g]|=this.ISDONE,this.vpBits[g]&=~this.ISBOUND}do{u=this.fastoneshell(a,M),a=[];for(let l=0,v=u.length;l<v;l++)g=E*u[l].ix+this.pHeight*u[l].iy+u[l].iz,this.vpBits[g]&=~this.ISBOUND,this.vpDistance[g]<=1.0404*P&&a.push({ix:u[l].ix,iy:u[l].iy,iz:u[l].iz})}while(a.length!==0);a=[],u=[],M=null;let A=this.scaleFactor-.5;A<0&&(A=0);let x=P-.5/(.1+A);for(let l=0;l<this.pLength;l++)for(let v=0;v<this.pWidth;v++)for(let w=0;w<this.pHeight;w++)g=l*E+v*this.pHeight+w,this.vpBits[g]&=~this.ISBOUND,this.vpBits[g]&this.INOUT&&(!(this.vpBits[g]&this.ISDONE)||this.vpBits[g]&this.ISDONE&&this.vpDistance[g]>=x)&&(this.vpBits[g]|=this.ISBOUND)}fastoneshell(M,E){let P,a,u,g,A,x,l,v,w,O=[];if(M.length===0)return O;let T={ix:-1,iy:-1,iz:-1},D=this.pWidth*this.pHeight;for(let I=0,k=M.length;I<k;I++){P=M[I].ix,a=M[I].iy,u=M[I].iz,v=E.get(P,a,u);for(let z=0;z<6;z++)T.ix=P+this.nb[z][0],T.iy=a+this.nb[z][1],T.iz=u+this.nb[z][2],T.ix<this.pLength&&T.ix>-1&&T.iy<this.pWidth&&T.iy>-1&&T.iz<this.pHeight&&T.iz>-1&&(w=T.ix*D+this.pHeight*T.iy+T.iz,this.vpBits[w]&this.INOUT&&!(this.vpBits[w]&this.ISDONE)?(E.set(T.ix,T.iy,u+this.nb[z][2],v),g=T.ix-v.ix,A=T.iy-v.iy,x=T.iz-v.iz,l=g*g+A*A+x*x,this.vpDistance[w]=l,this.vpBits[w]|=this.ISDONE,this.vpBits[w]|=this.ISBOUND,O.push({ix:T.ix,iy:T.iy,iz:T.iz})):this.vpBits[w]&this.INOUT&&this.vpBits[w]&this.ISDONE&&(g=T.ix-v.ix,A=T.iy-v.iy,x=T.iz-v.iz,l=g*g+A*A+x*x,l<this.vpDistance[w]&&(E.set(T.ix,T.iy,T.iz,v),this.vpDistance[w]=l,this.vpBits[w]&this.ISBOUND||(this.vpBits[w]|=this.ISBOUND,O.push({ix:T.ix,iy:T.iy,iz:T.iz})))))}for(let I=0,k=M.length;I<k;I++){P=M[I].ix,a=M[I].iy,u=M[I].iz,v=E.get(P,a,u);for(let z=6;z<18;z++)T.ix=P+this.nb[z][0],T.iy=a+this.nb[z][1],T.iz=u+this.nb[z][2],T.ix<this.pLength&&T.ix>-1&&T.iy<this.pWidth&&T.iy>-1&&T.iz<this.pHeight&&T.iz>-1&&(w=T.ix*D+this.pHeight*T.iy+T.iz,this.vpBits[w]&this.INOUT&&!(this.vpBits[w]&this.ISDONE)?(E.set(T.ix,T.iy,u+this.nb[z][2],v),g=T.ix-v.ix,A=T.iy-v.iy,x=T.iz-v.iz,l=g*g+A*A+x*x,this.vpDistance[w]=l,this.vpBits[w]|=this.ISDONE,this.vpBits[w]|=this.ISBOUND,O.push({ix:T.ix,iy:T.iy,iz:T.iz})):this.vpBits[w]&this.INOUT&&this.vpBits[w]&this.ISDONE&&(g=T.ix-v.ix,A=T.iy-v.iy,x=T.iz-v.iz,l=g*g+A*A+x*x,l<this.vpDistance[w]&&(E.set(T.ix,T.iy,T.iz,v),this.vpDistance[w]=l,this.vpBits[w]&this.ISBOUND||(this.vpBits[w]|=this.ISBOUND,O.push({ix:T.ix,iy:T.iy,iz:T.iz})))))}for(let I=0,k=M.length;I<k;I++){P=M[I].ix,a=M[I].iy,u=M[I].iz,v=E.get(P,a,u);for(let z=18;z<26;z++)T.ix=P+this.nb[z][0],T.iy=a+this.nb[z][1],T.iz=u+this.nb[z][2],T.ix<this.pLength&&T.ix>-1&&T.iy<this.pWidth&&T.iy>-1&&T.iz<this.pHeight&&T.iz>-1&&(w=T.ix*D+this.pHeight*T.iy+T.iz,this.vpBits[w]&this.INOUT&&!(this.vpBits[w]&this.ISDONE)?(E.set(T.ix,T.iy,u+this.nb[z][2],v),g=T.ix-v.ix,A=T.iy-v.iy,x=T.iz-v.iz,l=g*g+A*A+x*x,this.vpDistance[w]=l,this.vpBits[w]|=this.ISDONE,this.vpBits[w]|=this.ISBOUND,O.push({ix:T.ix,iy:T.iy,iz:T.iz})):this.vpBits[w]&this.INOUT&&this.vpBits[w]&this.ISDONE&&(g=T.ix-v.ix,A=T.iy-v.iy,x=T.iz-v.iz,l=g*g+A*A+x*x,l<this.vpDistance[w]&&(E.set(T.ix,T.iy,T.iz,v),this.vpDistance[w]=l,this.vpBits[w]&this.ISBOUND||(this.vpBits[w]|=this.ISBOUND,O.push({ix:T.ix,iy:T.iy,iz:T.iz})))))}return O}marchingcubeinit(M){for(let E=0,P=this.vpBits.length;E<P;E++)M==1?this.vpBits[E]&=~this.ISBOUND:M==4?(this.vpBits[E]&=~this.ISDONE,this.vpBits[E]&this.ISBOUND&&(this.vpBits[E]|=this.ISDONE),this.vpBits[E]&=~this.ISBOUND):M==2?this.vpBits[E]&this.ISBOUND&&this.vpBits[E]&this.ISDONE?this.vpBits[E]&=~this.ISBOUND:this.vpBits[E]&this.ISBOUND&&!(this.vpBits[E]&this.ISDONE)&&(this.vpBits[E]|=this.ISDONE):M==3&&(this.vpBits[E]&=~this.ISBOUND)}marchingcube(M){this.marchingcubeinit(M),this.verts=[],this.faces=[],y.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let E=this.pWidth*this.pHeight;for(let P=0,a=this.verts.length;P<a;P++)this.verts[P].atomid=this.vpAtomID[this.verts[P].x*E+this.pHeight*this.verts[P].y+this.verts[P].z];y.laplacianSmooth(1,this.verts,this.faces)}}},"./src/VolumeData.ts":(e,t,r)=>{r.r(t),r.d(t,{VolumeData:()=>y});var s=r("./src/utilities.ts"),o=r("./src/WebGL/math/index.ts"),n=r("./src/parsers/VASP.ts"),f=r("./src/parsers/CUBE.ts"),c=r("./node_modules/pako/dist/pako.esm.mjs");class y{constructor(b,C,M){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(g){var A=g/(this.size.y*this.size.z),x=g%(this.size.y*this.size.z),l=g%this.size.z;return A*=this.unit.x,x*=this.unit.y,l*=this.unit.z,A+=this.origin.x,x+=this.origin.y,l+=this.origin.z,{x:A,y:x,z:l}},this.vasp=function(g){var A=g.replace(/^\s+/,"").split(/[\n\r]/),x=(0,n.VASP)(g)[0],l=x.length;if(l==0){console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var v=1.889725992,w=.036749309,O=parseFloat(A[1]),T;T=A[2].replace(/^\s+/,"").split(/\s+/);var D=new o.Vector3(parseFloat(T[0]),parseFloat(T[1]),parseFloat(T[2])).multiplyScalar(O*v);T=A[3].replace(/^\s+/,"").split(/\s+/);var I=new o.Vector3(parseFloat(T[0]),parseFloat(T[1]),parseFloat(T[2])).multiplyScalar(O*v);T=A[4].replace(/^\s+/,"").split(/\s+/);var k=new o.Vector3(parseFloat(T[0]),parseFloat(T[1]),parseFloat(T[2])).multiplyScalar(O*v),z=D.x*(I.y*k.z-k.y*I.z)-I.x*(D.y*k.z-k.y*D.z)+k.x*(D.y*I.z-I.y*D.z);z=Math.abs(z)/Math.pow(v,3);var L=1/z;A.splice(0,8+l+1);var B=A[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),H=Math.abs(B[0]),V=Math.abs(B[1]),N=Math.abs(B[2]),U=this.origin=new o.Vector3(0,0,0);this.size={x:H,y:V,z:N},this.unit=new o.Vector3(D.x,I.y,k.z),D=D.multiplyScalar(1/(v*H)),I=I.multiplyScalar(1/(v*V)),k=k.multiplyScalar(1/(v*N)),(D.y!=0||D.z!=0||I.x!=0||I.z!=0||k.x!=0||k.y!=0)&&(this.matrix=new o.Matrix4(D.x,I.x,k.x,0,D.y,I.y,k.y,0,D.z,I.z,k.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(U.x,U.y,U.z)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1)),A.splice(0,1);var G=A.join(" ");G=G.replace(/^\s+/,""),G=G.split(/[\s\r]+/),G.splice(H*V*N+1);for(var $=new Float32Array(G),W=0;W<$.length;W++)$[W]=$[W]*L*w;this.data=$},this.dx=function(g){var A=g.split(/[\n\r]+/),x,l=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,v=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,w=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,O=/data follows/,T=0;for(T=0;T<A.length;T++){var D=A[T];if(x=l.exec(D)){var I=parseInt(x[1]),k=parseInt(x[2]),z=parseInt(x[3]);this.size={x:I,y:k,z}}else if(x=w.exec(D)){var L=parseFloat(x[1]);if((parseFloat(x[2])!=0||parseFloat(x[3])!=0)&&console.log("Non-orthogonal delta matrix not currently supported in dx format"),T+=1,D=A[T],x=w.exec(D),x==null){console.log("Parse error in dx delta matrix");return}var B=parseFloat(x[2]);if((parseFloat(x[1])!=0||parseFloat(x[3])!=0)&&console.log("Non-orthogonal delta matrix not currently supported in dx format"),T+=1,D=A[T],x=w.exec(D),x==null){console.log("Parse error in dx delta matrix");return}var H=parseFloat(x[3]);(parseFloat(x[1])!=0||parseFloat(x[2])!=0)&&console.log("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new o.Vector3(L,B,H)}else if(x=v.exec(D)){var V=parseFloat(x[1]),N=parseFloat(x[2]),U=parseFloat(x[3]);this.origin=new o.Vector3(V,N,U)}else if(x=O.exec(D))break}if(T+=1,!this.size||!this.origin||!this.unit||!this.size){console.log("Error parsing dx format");return}var G=A.splice(T).join(" ");G=G.split(/[\s\r]+/),this.data=new Float32Array(G)},C=C.toLowerCase(),/\.gz$/.test(C)){C=C.replace(/\.gz$/,"");try{this[C]&&this.isbinary.has(C)?(typeof b=="string"&&(b=(0,s.base64ToArray)(b)),b=(0,c.inflate)(b)):b=new TextDecoder("utf-8").decode((0,c.inflate)(b))}catch(g){console.log(g)}}if(this[C]&&(this.isbinary.has(C)&&typeof b=="string"&&(b=(0,s.base64ToArray)(b)),this[C](b)),M){if(M.negate)for(let g=0,A=this.data.length;g<A;g++)this.data[g]=-this.data[g];if(M.normalize){var E=0;for(let g=0,A=this.data.length;g<A;g++)E+=this.data[g];var P=E/this.data.length;E=0;for(let g=0,A=this.data.length;g<A;g++){var a=this.data[g]-P;E+=a*a}var u=E/this.data.length;for(let g=0,A=this.data.length;g<A;g++)this.data[g]=(this.data[g]-P)/u}}}getIndex(b,C,M){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new o.Matrix4().getInverse(this.matrix));var E=new o.Vector3(b,C,M);E=E.applyMatrix4(this.inversematrix),b=E.x,C=E.y,M=E.z}else b-=this.origin.x,C-=this.origin.y,M-=this.origin.z,b/=this.unit.x,C/=this.unit.y,M/=this.unit.z;return b=Math.round(b),C=Math.round(C),M=Math.round(M),b<0||b>=this.size.x||C<0||C>=this.size.y||M<0||M>=this.size.z?-1:b*this.size.y*this.size.z+C*this.size.z+M}getVal(b,C,M){let E=this.getIndex(b,C,M);return E<0?0:this.data[E]}cube(b){var C=b.split(/\r?\n/);if(!(C.length<6)){var M=(0,f.CUBE)(b,{}).modelData[0].cryst,E=C[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),P=parseFloat(E[0]),a=Math.abs(P);this.origin=M.origin,this.size=M.size,this.unit=M.unit,this.matrix=M.matrix4;var u=6;P<0&&u++;var g=C.splice(a+u).join(" ");g=g.replace(/^\s+/,""),g=g.split(/[\s\r]+/),this.data=new Float32Array(g)}}ccp4(b){var C={};b=new Int8Array(b);var M=new Int32Array(b.buffer,0,56),E=new Float32Array(b.buffer,0,56),P=new DataView(b.buffer);if(C.MAP=String.fromCharCode(P.getUint8(208),P.getUint8(209),P.getUint8(210),P.getUint8(211)),C.MACHST=[P.getUint8(212),P.getUint8(213)],C.MACHST[0]===17&&C.MACHST[1]===17)for(var a=b.byteLength,u=0;u<a;u+=4)P.setFloat32(u,P.getFloat32(u),!0);C.NX=M[0],C.NY=M[1],C.NZ=M[2],C.MODE=M[3],C.NXSTART=M[4],C.NYSTART=M[5],C.NZSTART=M[6],C.MX=M[7],C.MY=M[8],C.MZ=M[9],C.xlen=E[10],C.ylen=E[11],C.zlen=E[12],C.alpha=E[13],C.beta=E[14],C.gamma=E[15],C.MAPC=M[16],C.MAPR=M[17],C.MAPS=M[18],C.DMIN=E[19],C.DMAX=E[20],C.DMEAN=E[21],C.ISPG=M[22],C.NSYMBT=M[23],C.LSKFLG=M[24],C.originX=E[49],C.originY=E[50],C.originZ=E[51],C.ARMS=E[54];var g=C,A=[g.xlen,0,0],x=[g.ylen*Math.cos(Math.PI/180*g.gamma),g.ylen*Math.sin(Math.PI/180*g.gamma),0],l=[g.zlen*Math.cos(Math.PI/180*g.beta),g.zlen*(Math.cos(Math.PI/180*g.alpha)-Math.cos(Math.PI/180*g.gamma)*Math.cos(Math.PI/180*g.beta))/Math.sin(Math.PI/180*g.gamma),0];l[2]=Math.sqrt(g.zlen*g.zlen*Math.sin(Math.PI/180*g.beta)*Math.sin(Math.PI/180*g.beta)-l[1]*l[1]);var v=[0,A,x,l],w=[0,g.MX,g.MY,g.MZ],O=[0,g.MAPC,g.MAPR,g.MAPS];this.matrix=new o.Matrix4,this.matrix.set(v[O[1]][0]/w[O[1]],v[O[2]][0]/w[O[2]],v[O[3]][0]/w[O[3]],0,v[O[1]][1]/w[O[1]],v[O[2]][1]/w[O[2]],v[O[3]][1]/w[O[3]],0,v[O[1]][2]/w[O[1]],v[O[2]][2]/w[O[2]],v[O[3]][2]/w[O[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(g.NXSTART+g.originX,g.NYSTART+g.originY,g.NZSTART+g.originZ)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1),this.size={x:C.NX,y:C.NY,z:C.NZ},this.dimensionorder=[C.MAPC,C.MAPR,C.MAPS];var T=new Float32Array(b.buffer,1024+C.NSYMBT),D=C.NX,I=C.NY,k=C.NZ;this.data=new Float32Array(D*I*k);for(let z=0;z<D;z++)for(let L=0;L<I;L++)for(let B=0;B<k;B++)this.data[(z*I+L)*k+B]=T[(B*I+L)*D+z]}}},"./src/VolumetricRender.ts":(e,t,r)=>{r.r(t),r.d(t,{GLVolumetricRender:()=>y});var s=r("./src/WebGL/shapes/index.ts"),o=r("./src/WebGL/math/index.ts"),n=r("./src/WebGL/index.ts"),f=r("./src/colors.ts"),c=r("./src/GLShape.ts");class y{static interpolateArray(b,C){function M(l,v,w){return l+(v-l)*w}var E=[],P=(b.length-1)/(C-1);E[0]=b[0];for(var a=1;a<C-1;a++){var u=a*P,g=Math.floor(u),A=Math.ceil(u),x=u-g;E[a]=M(b[g],b[A],x)}return E[C-1]=b[b.length-1],E}constructor(b,C){this.hidden=!1,this.boundingSphere=new s.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,C=C||{};var M=Object.assign([],C.transferfn);this.subsamples=C.subsamples||5;let E=256;M.forEach(function(D){D.value=parseFloat(D.value)}),M.sort(function(D,I){return D.value-I.value}),this.min=M[0].value,M.length==0&&M.push(M[0]),this.max=M[M.length-1].value;var P,a,u,g,A,x,l,v,w,O;for(let D=0;D<M.length-1;D++)if(u=f.CC.color(M[D].color),g=f.CC.color(M[D+1].color),w=M[D].opacity,O=M[D+1].opacity,P=Math.floor((M[D].value-this.min)*E/(this.max-this.min)),a=Math.floor((M[D+1].value-this.min)*E/(this.max-this.min)),P!=a){A=y.interpolateArray([u.r*255,g.r*255],a-P),x=y.interpolateArray([u.g*255,g.g*255],a-P),l=y.interpolateArray([u.b*255,g.b*255],a-P),v=y.interpolateArray([w*255,O*255],a-P);for(let I=0;I<A.length;I++)this.transferfunctionbuffer.push(A[I]),this.transferfunctionbuffer.push(x[I]),this.transferfunctionbuffer.push(l[I]),this.transferfunctionbuffer.push(v[I])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),b.matrix){let D=new o.Vector3(0,0,0),I=new o.Vector3(b.size.x,b.size.y,b.size.z),k=new o.Vector3(1,1,1);D.applyMatrix4(b.matrix),I.applyMatrix4(b.matrix),k.applyMatrix4(b.matrix).sub(D),this.extent=[[D.x,D.y,D.z],[I.x,I.y,I.z]];for(let H=1;H<7;H++)I.x=H&1?b.size.x:0,I.y=H&2?b.size.y:0,I.z=H&4?b.size.z:0,I.applyMatrix4(b.matrix),this.extent[0][0]=Math.min(this.extent[0][0],I.x),this.extent[0][1]=Math.min(this.extent[0][1],I.y),this.extent[0][2]=Math.min(this.extent[0][2],I.z),this.extent[1][0]=Math.max(this.extent[1][0],I.x),this.extent[1][1]=Math.max(this.extent[1][1],I.y),this.extent[1][2]=Math.max(this.extent[1][2],I.z);let z=I.x-D.x,L=I.y-D.y,B=I.z-D.z;this.maxdepth=Math.sqrt(z*z+L*L+B*B),this.minunit=Math.min(Math.min(k.x,k.y),k.z),this.texmatrix=new o.Matrix4().identity().scale({x:b.size.x,y:b.size.y,z:b.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(b.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new o.Matrix4().identity();let D=b.unit.x*b.size.x,I=b.unit.y*b.size.y,k=b.unit.z*b.size.z;this.texmatrix.makeTranslation(-b.origin.x/D,-b.origin.y/I,-b.origin.z/k),this.texmatrix.scale({x:1/D,y:1/I,z:1/k}),this.minunit=Math.min(Math.min(b.unit.x,b.unit.y),b.unit.z),this.extent=[[b.origin.x,b.origin.y,b.origin.z],[b.origin.x+D,b.origin.y+I,b.origin.z+k]],this.maxdepth=Math.sqrt(D*D+I*I+k*k)}var T=new c.GLShape({});if(T.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=T.finalize(),this.boundingSphere.center=new o.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,C.coords!==void 0&&C.seldist!==void 0){let D=new Uint8Array(b.data.length),I=C.seldist,k=I*I;for(let z=0,L=C.coords.length;z<L;z++){let B=C.coords[z],H=B.x-I,V=B.y-I,N=B.z-I,U=B.x+I,G=B.y+I,$=B.z+I;if(b.getIndex(H,V,N)>=0||b.getIndex(U,G,$)>=0)for(let W=H;W<U;W+=this.minunit)for(let j=V;j<G;j+=this.minunit)for(let se=N;se<$;se+=this.minunit){let he=b.getIndex(W,j,se);he>=0&&!D[he]&&(W-B.x)*(W-B.x)+(j-B.y)*(j-B.y)+(se-B.z)*(se-B.z)<k&&(D[he]=1)}}for(let z=0,L=b.data.length;z<L;z++)D[z]==0&&(b.data[z]=1/0)}this.data=b}globj(b){if(this.renderedShapeObj&&(b.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new n.Object3D;var C=null,M=new n.Texture(this.data,!0),E=new n.Texture(this.transferfunctionbuffer,!1);M.needsUpdate=!0,E.needsUpdate=!0,E.flipY=!1,C=new n.VolumetricMaterial({transferfn:E,transfermin:this.min,transfermax:this.max,map:M,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var P=new n.Mesh(this.geo,C);this.shapeObj.add(P),this.renderedShapeObj=this.shapeObj.clone(),b.add(this.renderedShapeObj)}}removegl(b){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),b.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts":(e,t,r)=>{r.r(t),r.d(t,{Camera:()=>n});var s=r("./src/WebGL/core/index.ts"),o=r("./src/WebGL/math/index.ts");class n extends s.Object3D{constructor(c=50,y=1,_=.1,b=2e3,C=!1){super(),this.projectionMatrix=new o.Matrix4,this.projectionMatrixInverse=new o.Matrix4,this.matrixWorldInverse=new o.Matrix4,this.fov=c,this.aspect=y,this.near=_,this.far=b;var M=this.position.z;this.right=M*Math.tan(Math.PI/180*c),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!C,this.updateProjectionMatrix()}lookAt(c){this.matrix.lookAt(this.position,c,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof o.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts":(e,t,r)=>{r.r(t),r.d(t,{Fog:()=>o});var s=r("./src/colors.ts");class o{constructor(f,c=1,y=1e3){this.name="",this.color=new s.Color(f),this.near=c,this.far=y}clone(){return new o(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts":(e,t,r)=>{r.r(t),r.d(t,{Renderer:()=>E});var s=r("./src/WebGL/Camera.ts"),o=r("./src/WebGL/constants/Sides.ts"),n=r("./src/WebGL/constants/TextureConstants.ts"),f=r("./src/WebGL/core/index.ts"),c=r("./src/colors.ts"),y=r("./src/WebGL/materials/index.ts"),_=r("./src/WebGL/math/index.ts"),b=r("./src/WebGL/objects/index.ts"),C=r("./src/WebGL/shaders/index.ts"),M=r("./src/WebGL/SpritePlugin.ts");class E{constructor(a){this.context=null,this.devicePixelRatio=1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldBlending=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._projScreenMatrix=new _.Matrix4,this._vector3=new _.Vector3,this._worldInverse=new _.Matrix4,this._projInverse=new _.Matrix4,this._textureMatrix=new _.Matrix4,this._direction=new _.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new M.SpritePlugin,this._screenshader=null,this._vertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,a=a||{},this.row=a.row,this.col=a.col,this.rows=a.rows,this.cols=a.cols,this._canvas=a.canvas!==void 0?a.canvas:document.createElement("canvas"),this._precision=a.precision!==void 0?a.precision:"highp",this._alpha=a.alpha!==void 0?a.alpha:!0,this._premultipliedAlpha=a.premultipliedAlpha!==void 0?a.premultipliedAlpha:!0,this._antialias=a.antialias!==void 0?a.antialias:!1,this._stencil=a.stencil!==void 0?a.stencil:!0,this._preserveDrawingBuffer=a.preserveDrawingBuffer!==void 0?a.preserveDrawingBuffer:!1,this._clearColor=a.clearColor!==void 0?new c.Color(a.clearColor):new c.Color(0),this._clearAlpha=a.clearAlpha!==void 0?a.clearAlpha:0,this._outlineMaterial=new y.MeshOutlineMaterial(a.outline),this._outlineSphereImposterMaterial=new y.SphereImposterOutlineMaterial(a.outline),this._outlineStickImposterMaterial=new y.StickImposterOutlineMaterial(a.outline),this._outlineEnabled=!!a.outline,this.domElement=this._canvas,this._canvas.id=a.id,this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this)}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1()}}getContext(){return this._gl}isLost(){return this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(a,u){this._clearColor.setHex(a),this._clearAlpha=u,this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(a){this._outlineMaterial=new y.MeshOutlineMaterial(a),this._outlineSphereImposterMaterial=new y.SphereImposterOutlineMaterial(a),this._outlineStickImposterMaterial=new y.StickImposterOutlineMaterial(a),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}setViewport(){if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var a=this._canvas.width/this.cols,u=this._canvas.height/this.rows;this._viewportWidth=a,this._viewportHeight=u,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(a*this.col,u*this.row,a,u),this._gl.viewport(a*this.col,u*this.row,a,u)}}setSize(a,u){if(this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var g=a/this.cols,A=u/this.rows;this._canvas.width=a*this.devicePixelRatio,this._canvas.height=u*this.devicePixelRatio,this._viewportWidth=g*this.devicePixelRatio,this._viewportHeight=A*this.devicePixelRatio,this._canvas.style.width=a+"px",this._canvas.style.height=u+"px",this.setViewport()}else this._viewportWidth=this._canvas.width=a*this.devicePixelRatio,this._viewportHeight=this._canvas.height=u*this.devicePixelRatio,this._canvas.style.width=a+"px",this._canvas.style.height=u+"px",this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}clear(a,u,g){var A=0;(a===void 0||a)&&(A|=this._gl.COLOR_BUFFER_BIT),(u===void 0||u)&&(A|=this._gl.DEPTH_BUFFER_BIT),(g===void 0||g)&&(A|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(A)}clearTarget(a,u,g){this.clear(a,u,g)}setMaterialFaces(a,u){var g=a.side===o.DoubleSide,A=a.side===o.BackSide;a.imposter||(A=u?!A:A),this._oldDoubleSided!==g&&(g?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=g),this._oldFlipSided!==A&&(A?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=A),this._gl.cullFace(this._gl.BACK)}setDepthTest(a){this._oldDepthTest!==a&&(a?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=a)}setDepthWrite(a){this._oldDepthWrite!==a&&(this._gl.depthMask(a),this._oldDepthWrite=a)}setBlending(a){a?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND),this._oldBlending=a}initMaterial(a,u,g,A){a.addEventListener("dispose",this.onMaterialDispose.bind(this));var x,l;if(l=a.shaderID,l){var v=C.ShaderLib[l];a.vertexShader=v.vertexShader,a.fragmentShader=v.fragmentShader,a.uniforms=C.ShaderUtils.clone(v.uniforms)}x={wireframe:a.wireframe,fragdepth:a.imposter,volumetric:a.volumetric},a.program=this.buildProgram(a.fragmentShader,a.vertexShader,a.uniforms,x)}renderBuffer(a,u,g,A,x,l){if(A.visible){var v,w;v=this.setProgram(a,u,g,A,l,this),w=v.attributes;var O=!1,T=A.wireframe?1:0,D=x.id*16777215+v.id*2+T;D!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=D,O=!0),O&&(this.disableAttributes(),w.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglVertexBuffer),this.enableAttribute(w.position),this._gl.vertexAttribPointer(w.position,3,this._gl.FLOAT,!1,0,0)),w.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglColorBuffer),this.enableAttribute(w.color),this._gl.vertexAttribPointer(w.color,3,this._gl.FLOAT,!1,0,0)),w.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglNormalBuffer),this.enableAttribute(w.normal),this._gl.vertexAttribPointer(w.normal,3,this._gl.FLOAT,!1,0,0)),w.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglOffsetBuffer),this.enableAttribute(w.offset),this._gl.vertexAttribPointer(w.offset,3,this._gl.FLOAT,!1,0,0)),w.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglRadiusBuffer),this.enableAttribute(w.radius),this._gl.vertexAttribPointer(w.radius,1,this._gl.FLOAT,!1,0,0)));var I,k;if(l instanceof b.Mesh){if(A.shaderID==="instanced"){var z=A.sphere.geometryGroups[0];O&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,z.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,x.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,z.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,x.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,z.faceArray,this._gl.STATIC_DRAW)),I=z.faceidx,this._extInstanced.vertexAttribDivisorANGLE(w.offset,1),this._extInstanced.vertexAttribDivisorANGLE(w.radius,1),this._extInstanced.vertexAttribDivisorANGLE(w.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,I,this._gl.UNSIGNED_SHORT,0,x.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(w.offset,0),this._extInstanced.vertexAttribDivisorANGLE(w.radius,0),this._extInstanced.vertexAttribDivisorANGLE(w.color,0)}else A.wireframe?(k=x.lineidx,this.setLineWidth(A.wireframeLinewidth),O&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,x.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,k,this._gl.UNSIGNED_SHORT,0)):(I=x.faceidx,O&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,x.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,I,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=I,this.info.render.faces+=I/3}else l instanceof b.Line&&(k=x.vertices,this.setLineWidth(A.linewidth),this._gl.drawArrays(this._gl.LINES,0,k),this.info.render.calls++)}}render(a,u,g){if(!(u instanceof s.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var A,x,l,v,w,O=a.__lights,T=a.fog;this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&a.updateMatrixWorld(),u.parent===void 0&&u.updateMatrixWorld(),u.matrixWorldInverse.getInverse(u.matrixWorld),this._projScreenMatrix.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this.autoUpdateObjects&&this.initWebGLObjects(a),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),(this.autoClear||g)&&(this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil)),w=a.__webglObjects;var D=!1;for(A=0,x=w.length;A<x;A++)l=w[A],v=l.object,l.render=!1,v.visible&&(this.setupMatrices(v,u),this.unrollBufferMaterial(l),l.render=!0,l.volumetric&&(D=!0));var I=null;this.setBlending(!1),this.renderObjects(a.__webglObjects,!0,"opaque",u,O,T,!1,I),this.renderSprites(a,u,!1),this.renderObjects(a.__webglObjects,!0,"blank",u,O,T,!0,I),this.renderObjects(a.__webglObjects,!1,"transparent",u,O,T,!0,I),D&&this._fb&&(this.reinitFrameBuffer(),this.renderObjects(a.__webglObjects,!1,"volumetric",u,O,T,!0,I)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(a,u,!0)}reinitFrameBuffer(){this.isWebGL1()||(this._fb=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0))}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let a=this._viewportWidth,u=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,a,u),this._gl.viewport(0,0,a,u),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,a,u,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,a,u,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let a=this._viewportWidth,u=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,a,u),this._gl.viewport(0,0,a,u),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var g=C.ShaderLib.screen;this._screenshader=this.buildProgram(g.fragmentShader,g.vertexShader,g.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var A=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(A),this._gl.STATIC_DRAW)}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(a){if(a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]),a.__objectsAdded.length){for(;a.__objectsAdded.length;)this.addObject(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;a.__objectsRemoved.length;)this.removeObject(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var u=0,g=a.__webglObjects.length;u<g;u++)this.updateObject(a.__webglObjects[u].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(a,u){(a==null||u==null)&&(a=this._canvas.width,u=this._canvas.height);var g=a/u;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var A=a/this.cols,x=u/this.rows;g=A/x}return g}setTexture(a,u,g){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",this.onTextureDispose.bind(this)),a.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+u);var A=g?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(A,a.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,a.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,a.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,a.unpackAlignment);var x=this.paramToGL(a.format),l=this.paramToGL(a.type);if(g)this.setTextureParameters(this._gl.TEXTURE_3D,a),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,a.image.size.z,a.image.size.y,a.image.size.x,0,this._gl.RED,this._gl.FLOAT,a.image.data);else{var v=a.image,w=v.width,O=v.height;typeof w>"u"&&(w=v.length,x==this._gl.RGBA&&(w/=4),O=1),this.setTextureParameters(this._gl.TEXTURE_2D,a),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,x,x,l,a.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,x,w,O,0,x,l,a.image)}a.needsUpdate=!1,a.onUpdate&&a.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+u),g?this._gl.bindTexture(this._gl.TEXTURE_3D,a.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,a.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(a){this._enabledAttributes[a]||(this._gl.enableVertexAttribArray(a),this._enabledAttributes[a]=!0)}disableAttributes(){for(let a in this._enabledAttributes)this._enabledAttributes[a]&&(this._gl.disableVertexAttribArray(a),this._enabledAttributes[a]=!1)}setPolygonOffset(a,u,g){this._oldPolygonOffset!==a&&(a?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(a){a!==this._oldLineWidth&&(this._gl.lineWidth(a),this._oldLineWidth=a)}deallocateGeometry(a){if(a.__webglInit=void 0,a.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(a.__webglVertexBuffer),a.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(a.__webglColorBuffer),a.geometryGroups!==void 0)for(var u=0,g=a.groups;u<g;u++){var A=a.geometryGroups[u];A.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(A.__webglVertexBuffer),A.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(A.__webglColorBuffer),A.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(A.__webglNormalBuffer),A.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(A.__webglFaceBuffer),A.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(A.__webglLineBuffer)}}deallocateMaterial(a){var u=a.program;if(u!==void 0){a.program=void 0;var g,A,x,l=!1;for(g=0,A=this._programs.length;g<A;g++)if(x=this._programs[g],x.program===u){x.usedTimes--,x.usedTimes===0&&(l=!0);break}if(l===!0){var v=[];for(g=0,A=this._programs.length;g<A;g++)x=this._programs[g],x.program!==u&&v.push(x);this._programs=v,this._gl.deleteProgram(u),this.info.memory.programs--}}}deallocateTexture(a){if(a.image&&a.image.__webglTextureCube)this._gl.deleteTexture(a.image.__webglTextureCube);else{if(!a.__webglInit)return;a.__webglInit=!1,this._gl.deleteTexture(a.__webglTexture)}}onGeometryDispose(a){var u=a.target;u.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(u),this.info.memory.geometries--}onTextureDispose(a){var u=a.target;u.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(u),this.info.memory.textures--}onMaterialDispose(a){var u=a.target;u.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(u)}getShader(a,u){var g;return!this.isWebGL1()&&!u.startsWith("#version")&&(u=u.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),a=="fragment"?u=u.replace(/varying/g,"in"):u=u.replace(/varying/g,"out"),u=u.replace(/attribute/g,"in"),u=u.replace(/texture2D/g,"texture"),u=u.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),u=u.replace(/gl_FragColor/g,"glFragColor"),u=`#version 300 es
`+u),a==="fragment"?g=this._gl.createShader(this._gl.FRAGMENT_SHADER):a==="vertex"&&(g=this._gl.createShader(this._gl.VERTEX_SHADER)),this._gl.shaderSource(g,u),this._gl.compileShader(g),this._gl.getShaderParameter(g,this._gl.COMPILE_STATUS)?g:(console.error(this._gl.getShaderInfoLog(g)),console.error("could not initialize shader"),null)}buildProgram(a,u,g,A){var x,l,v,w,O=[];O.push(a),O.push(u);for(x in A)O.push(x),O.push(A[x]);for(w=O.join(),x=0,l=this._programs.length;x<l;x++){var T=this._programs[x];if(T.code===w)return T.usedTimes++,T.program}if(this.isWebGL1()&&A.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");v=this._gl.createProgram();var D=this._precision,I="precision "+D+" float;",k=[A.volumetric?"#version 300 es":"",I].join(`
`),z=[A.volumetric?"#version 300 es":"",A.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",A.wireframe?"#define WIREFRAME 1":"",I].join(`
`),L=this.getShader("fragment",z+a),B=this.getShader("vertex",k+u);this._gl.attachShader(v,B),this._gl.attachShader(v,L),this._gl.linkProgram(v),this._gl.getProgramParameter(v,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),v.uniforms={},v.attributes={};var H,V,N;H=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"];for(V in g)H.push(V);for(N=0;N<H.length;N++){var U=H[N];v.uniforms[U]=this._gl.getUniformLocation(v,U)}for(H=["position","normal","color","lineDistance","offset","radius"],N=0;N<H.length;N++){var G=H[N];v.attributes[G]=this._gl.getAttribLocation(v,G)}return v.id=this._programs_counter++,this._programs.push({program:v,code:w,usedTimes:1}),this.info.memory.programs=this._programs.length,v}setProgram(a,u,g,A,x,l){A.needsUpdate&&(A.program&&this.deallocateMaterial(A),this.initMaterial(A,u,g,x),A.needsUpdate=!1);var v=!1,w=A.program,O=w.uniforms,T=A.uniforms;if(w!=this._currentProgram&&(this._gl.useProgram(w),this._currentProgram=w,v=!0),A.id!=this._currentMaterialId&&(this._currentMaterialId=A.id,v=!0),a!=this._currentCamera&&(this._currentCamera=a,v=!0),this._gl.uniformMatrix4fv(O.projectionMatrix,!1,a.projectionMatrix.elements),this._gl.uniformMatrix4fv(O.modelViewMatrix,!1,x._modelViewMatrix.elements),this._gl.uniformMatrix3fv(O.normalMatrix,!1,x._normalMatrix.elements),v){if(T.fogColor.value=g.color,T.fogNear.value=g.near,T.fogFar.value=g.far,A.shaderID.startsWith("lambert")||A.shaderID==="instanced"||A.shaderID.endsWith("imposter"))this._gl.uniformMatrix4fv(O.viewMatrix,!1,a.matrixWorldInverse.elements),this._lightsNeedUpdate&&(this.setupLights(w,u),this._lightsNeedUpdate=!1),T.directionalLightColor.value=this._lights.directional.colors,T.directionalLightDirection.value=this._lights.directional.positions;else if(A.shaderID.endsWith("outline"))T.outlineColor.value=A.outlineColor,T.outlineWidth.value=A.outlineWidth,T.outlinePushback.value=A.outlinePushback;else if(A.shaderID==="volumetric"){x._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(x._modelViewMatrix),this._projInverse.getInverse(a.projectionMatrix),this._textureMatrix.multiplyMatrices(x.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(O.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(O.projinv,!1,this._projInverse.elements);let D=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);T.step.value=x.material.unit*D,T.maxdepth.value=x.material.maxdepth*D,T.transfermax.value=x.material.transfermax,T.transfermin.value=x.material.transfermin,T.subsamples.value=x.material.subsamples,l.setTexture(x.material.transferfn,4,!1),l.setTexture(x.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}T.opacity.value=A.opacity,this.loadMaterialUniforms(O,T)}return w}loadMaterialUniforms(a,u){var g,A,x,l;for(g in u)a[g]&&(A=u[g].type,x=u[g].value,l=a[g],A==="f"?this._gl.uniform1f(l,x):A==="i"?this._gl.uniform1i(l,x):A==="fv"?this._gl.uniform3fv(l,x):A==="c"?this._gl.uniform3f(l,x.r,x.g,x.b):A==="f4"&&this._gl.uniform4f(l,x[0],x[1],x[2],x[3]))}addObject(a,u){var g,A,x,l;if(!a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new _.Matrix4,a._normalMatrix=new _.Matrix3,a.geometry!==void 0&&a.geometry.__webglInit===void 0&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),a instanceof b.Mesh||a instanceof b.Line))for(x=a.geometry,a.material,g=0,A=x.geometryGroups.length;g<A;g++)l=x.geometryGroups[g],l.id=this._geometryGroupCounter++,l.__webglVertexBuffer||(a instanceof b.Mesh?(this.createMeshBuffers(l),x.elementsNeedUpdate=!0,x.normalsNeedUpdate=!0):a instanceof b.Line&&this.createLineBuffers(l),x.verticesNeedUpdate=!0,x.colorsNeedUpdate=!0);if(!a.__webglActive){if(a instanceof b.Mesh||a instanceof b.Line)for(x=a.geometry,g=0,A=x.geometryGroups.length;g<A;g++)l=x.geometryGroups[g],this.addBuffer(u.__webglObjects,l,a);else a instanceof b.Sprite&&u.__webglSprites.push(a);a.__webglActive=!0}}updateObject(a){var u=a.geometry,g;if(a instanceof b.Mesh||a instanceof b.Line){for(var A=0,x=u.geometryGroups.length;A<x;A++)g=u.geometryGroups[A],(u.verticesNeedUpdate||u.elementsNeedUpdate||u.colorsNeedUpdate||u.normalsNeedUpdate)&&this.setBuffers(g,this._gl.STATIC_DRAW);u.verticesNeedUpdate=!1,u.elementsNeedUpdate=!1,u.normalsNeedUpdate=!1,u.colorsNeedUpdate=!1,u.buffersNeedUpdate=!1}}removeObject(a,u){a instanceof b.Mesh||a instanceof b.Line?this.removeInstances(u.__webglObjects,a):a instanceof b.Sprite&&this.removeInstancesDirect(u.__webglSprites,a),a.__webglActive=!1}removeInstances(a,u){for(var g=a.length-1;g>=0;--g)a[g].object===u&&a.splice(g,1)}removeInstancesDirect(a,u){for(var g=a.length-1;g>=0;--g)a[g]===u&&a.splice(g,1)}unrollBufferMaterial(a){var u=a.object,g=u.material;if(g.volumetric)a.opaque=null,a.transparent=null,a.volumetric=g;else if(g.transparent){if(a.opaque=null,a.volumetric=null,a.transparent=g,!g.wireframe){var A=g.clone();A.opacity=0,a.blank=A}}else a.opaque=g,a.transparent=null,a.volumetric=null}setBuffers(a,u){var g=a.vertexArray,A=a.colorArray;if(a.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,g,u)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,g,u)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,A,u),a.normalArray&&a.__webglNormalBuffer!==void 0){var x=a.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,x,u)}if(a.radiusArray&&a.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,a.radiusArray,u)),a.faceArray&&a.__webglFaceBuffer!==void 0){var l=a.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,a.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,l,u)}if(a.lineArray&&a.__webglLineBuffer!==void 0){var v=a.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,a.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,v,u)}}createMeshBuffers(a){a.radiusArray&&(a.__webglRadiusBuffer=this._gl.createBuffer()),a.useOffset&&(a.__webglOffsetBuffer=this._gl.createBuffer()),a.__webglVertexBuffer=this._gl.createBuffer(),a.__webglNormalBuffer=this._gl.createBuffer(),a.__webglColorBuffer=this._gl.createBuffer(),a.__webglFaceBuffer=this._gl.createBuffer(),a.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(a){a.__webglVertexBuffer=this._gl.createBuffer(),a.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(a,u,g){a.push({buffer:u,object:g,opaque:null,transparent:null})}setupMatrices(a,u){a._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,a.matrixWorld),a._normalMatrix.getInverse(a._modelViewMatrix),a._normalMatrix.transpose()}filterFallback(a){return this._gl.LINEAR}setTextureParameters(a,u){a==this._gl.TEXTURE_2D?(this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(u.magFilter)),this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(u.minFilter))):(this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(a){return a===n.UnsignedByteType?this._gl.UNSIGNED_BYTE:a===n.RGBAFormat?this._gl.RGBA:a===n.NearestFilter?this._gl.NEAREST:0}setupLights(a,u){var g,A,x,l=0,v=0,w=0,O,T,D=this._lights,I=D.directional.colors,k=D.directional.positions,z=0,L=0;for(g=0,A=u.length;g<A;g++)if(x=u[g],O=x.color,T=x.intensity,x.distance,x instanceof f.Light){if(this._direction.getPositionFromMatrix(x.matrixWorld),this._vector3.getPositionFromMatrix(x.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;k[L]=this._direction.x,k[L+1]=this._direction.y,k[L+2]=this._direction.z,I[L]=O.r*T,I[L+1]=O.g*T,I[L+2]=O.b*T,L+=3,z++}D.ambient[0]=l,D.ambient[1]=v,D.ambient[2]=w,D.directional.length=z}initGL(){try{if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,stencil:this._stencil,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,stencil:this._stencil,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,stencil:this._stencil,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var a=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(a[6])}catch(u){console.error(u)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearColor(0,0,0,1),this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(a,u,g,A,x,l,v,I){var O,T,D,I,k,z,L;u?(k=a.length-1,z=-1,L=-1):(k=0,z=a.length,L=1);for(var B=k;B!==z;B+=L)if(O=a[B],O.render){if(T=O.object,D=O.buffer,I=O[g],!I)continue;v&&this.setBlending(!0),this.setDepthTest(I.depthTest),this.setDepthWrite(I.depthWrite),this.setPolygonOffset(I.polygonOffset,I.polygonOffsetFactor,I.polygonOffsetUnits);var H=T._modelViewMatrix.isReflected();this.setMaterialFaces(I,H),this.renderBuffer(A,x,l,I,D,T),(this._outlineEnabled||I.outline)&&(I.shaderID=="sphereimposter"?this.renderBuffer(A,x,l,this._outlineSphereImposterMaterial,D,T):I.shaderID=="stickimposter"?this.renderBuffer(A,x,l,this._outlineStickImposterMaterial,D,T):!I.wireframe&&I.shaderID!=="basic"&&I.opacity!==0&&this.renderBuffer(A,x,l,this._outlineMaterial,D,T))}}renderSprites(a,u,g){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldBlending=-1,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(a,u,this._currentWidth,this._currentHeight,g),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldBlending=-1,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts":(e,t,r)=>{r.r(t),r.d(t,{SpritePlugin:()=>o});var s=r("./src/WebGL/shaders/index.ts");class o{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(c){this.gl=c.context,this.renderer=c,this.precision=c.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var y=0;this.sprite.vertices[y++]=-1,this.sprite.vertices[y++]=-1,this.sprite.vertices[y++]=0,this.sprite.vertices[y++]=0,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=-1,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=0,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=-1,this.sprite.vertices[y++]=1,this.sprite.vertices[y++]=0,this.sprite.vertices[y++]=1,y=0,this.sprite.faces[y++]=0,this.sprite.faces[y++]=1,this.sprite.faces[y++]=2,this.sprite.faces[y++]=0,this.sprite.faces[y++]=2,this.sprite.faces[y++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(s.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const _={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),_.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),_.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),_.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),_.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),_.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),_.color=this.gl.getUniformLocation(this.sprite.program,"color"),_.map=this.gl.getUniformLocation(this.sprite.program,"map"),_.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),_.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),_.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),_.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),_.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),_.fogType=this.gl.getUniformLocation(this.sprite.program,"fogType"),_.fogDensity=this.gl.getUniformLocation(this.sprite.program,"fogDensity"),_.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),_.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),_.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),_.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=_}render(c,y,_,b,C){var M,E,P,a,u,g,A,x,l,v;if(!this.gl)throw new Error("WebGLRenderer not initialized");let w=[];(M=c==null?void 0:c.__webglSprites)===null||M===void 0||M.forEach(se=>{(C&&se.material.depthTest==!1||!C&&se.material.depthTest)&&w.push(se)});let O=w.length;if(!O)return;const T=this.sprite.attributes,D=this.sprite.uniforms;if(!D)throw new Error("Uniforms not defined");var I=_*.5,k=b*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(T.position),this.gl.enableVertexAttribArray(T.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(T.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(T.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(D.projectionMatrix,!1,y.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(D.map,0);var z=0,L=0,B=c.fog;B?(this.gl.uniform3f(D.fogColor,B.color.r,B.color.g,B.color.b),this.gl.uniform1f(D.fogNear,B.near),this.gl.uniform1f(D.fogFar,B.far),this.gl.uniform1i(D.fogType,1),z=1,L=1):(this.gl.uniform1i(D.fogType,0),z=0,L=0);var H;let V,N,U,G,$=[];for(H=0;H<O;H++)V=w[H],N=V.material,N&&(N.depthTest==!1&&!C||!V.visible||N.opacity===0||(N.useScreenCoordinates?V.z=-V.position.z:(V._modelViewMatrix.multiplyMatrices(y.matrixWorldInverse,V.matrixWorld),V.z=-V._modelViewMatrix.elements[14])));for(w.sort(n),H=0;H<O;H++)if(V=w[H],N=V.material,!!N&&!(!V.visible||N.opacity===0)&&N.map&&N.map.image&&N.map.image.width){this.gl.uniform1f((D==null?void 0:D.alphaTest)||null,N.alphaTest);var W=N.map.image.width,j=N.map.image.height;$[0]=W*this.renderer.devicePixelRatio/_,$[1]=j*this.renderer.devicePixelRatio/b,N.useScreenCoordinates===!0?(this.gl.uniform1i(D.useScreenCoordinates,1),this.gl.uniform3f(D.screenPosition,(V.position.x*this.renderer.devicePixelRatio-I)/I,(k-V.position.y*this.renderer.devicePixelRatio)/k,Math.max(0,Math.min(1,V.position.z)))):(this.gl.uniform1i(D.useScreenCoordinates,0),this.gl.uniformMatrix4fv(D.modelViewMatrix,!1,V._modelViewMatrix.elements)),c.fog&&N.fog?G=L:G=0,z!==G&&(this.gl.uniform1i(D.fogType,G),z=G),U=1/(N.scaleByViewport?b:1),$[0]*=U*V.scale.x,$[1]*=U*V.scale.y;let se=(E=N==null?void 0:N.alignment)===null||E===void 0?void 0:E.x,he=(P=N==null?void 0:N.alignment)===null||P===void 0?void 0:P.y;N.screenOffset&&(se=(se||0)+2*N.screenOffset.x/W,he=(he||0)+2*N.screenOffset.y/j),this.gl.uniform2f(D.uvScale,((a=N==null?void 0:N.uvScale)===null||a===void 0?void 0:a.x)||1,((u=N==null?void 0:N.uvScale)===null||u===void 0?void 0:u.y)||1),this.gl.uniform2f(D.uvOffset,((g=N==null?void 0:N.uvOffset)===null||g===void 0?void 0:g.x)||0,((A=N==null?void 0:N.uvOffset)===null||A===void 0?void 0:A.y)||0),this.gl.uniform2f(D.alignment,se||0,he||0),this.gl.uniform1f(D.opacity,N.opacity),this.gl.uniform3f(D.color,((x=N==null?void 0:N.color)===null||x===void 0?void 0:x.r)||0,((l=N==null?void 0:N.color)===null||l===void 0?void 0:l.g)||0,((v=N==null?void 0:N.color)===null||v===void 0?void 0:v.b)||0),this.gl.uniform1f(D.rotation,V.rotation),this.gl.uniform2fv(D.scale,$),this.renderer.setDepthTest(N.depthTest),this.renderer.setDepthWrite(N.depthWrite),this.renderer.setTexture(N.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(c,y){if(!this.gl)throw new Error("WebGL Rendering context not found");var _=this.gl.createProgram();if(!_)throw new Error("Error creating webgl program");var b=this.gl.createShader(this.gl.FRAGMENT_SHADER),C=this.gl.createShader(this.gl.VERTEX_SHADER);if(!b)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!C)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var M="precision "+y+` float;
`;if(this.gl.shaderSource(b,M+c.fragmentShader),this.gl.shaderSource(C,M+c.vertexShader),this.gl.compileShader(b),this.gl.compileShader(C),!this.gl.getShaderParameter(b,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(C,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(b)} 
      ${this.gl.getShaderInfoLog(C)}`);return this.gl.attachShader(_,b),this.gl.attachShader(_,C),this.gl.linkProgram(_),this.gl.getProgramParameter(_,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),_}}function n(f,c){return f.z!==c.z?c.z-f.z:c.id-f.id}},"./src/WebGL/constants/Coloring.ts":(e,t,r)=>{r.r(t),r.d(t,{Coloring:()=>s});var s;(function(o){o[o.NoColors=0]="NoColors",o[o.FaceColors=1]="FaceColors",o[o.VertexColors=2]="VertexColors"})(s||(s={}))},"./src/WebGL/constants/Shading.ts":(e,t,r)=>{r.r(t),r.d(t,{Shading:()=>s});var s;(function(o){o[o.NoShading=0]="NoShading",o[o.FlatShading=1]="FlatShading",o[o.SmoothShading=2]="SmoothShading"})(s||(s={}))},"./src/WebGL/constants/Sides.ts":(e,t,r)=>{r.r(t),r.d(t,{BackSide:()=>o,DoubleSide:()=>n,FrontSide:()=>s});const s=0,o=1,n=2},"./src/WebGL/constants/SpriteAlignment.ts":(e,t,r)=>{r.r(t),r.d(t,{SpriteAlignment:()=>o});var s=r("./src/WebGL/math/index.ts");const o={topLeft:new s.Vector2(1,-1),topCenter:new s.Vector2(0,-1),topRight:new s.Vector2(-1,-1),centerLeft:new s.Vector2(1,0),center:new s.Vector2(0,0),centerRight:new s.Vector2(-1,0),bottomLeft:new s.Vector2(1,1),bottomCenter:new s.Vector2(0,1),bottomRight:new s.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts":(e,t,r)=>{r.r(t),r.d(t,{ClampToEdgeWrapping:()=>s,FloatType:()=>y,LinearFilter:()=>o,LinearMipMapLinearFilter:()=>f,NearestFilter:()=>n,R32Format:()=>C,RFormat:()=>b,RGBAFormat:()=>_,UnsignedByteType:()=>c});const s=1001,o=1006,n=1007,f=1008,c=1009,y=1010,_=1021,b=1022,C=1023},"./src/WebGL/constants/TextureOperations.ts":(e,t,r)=>{r.r(t),r.d(t,{TextureOperations:()=>s});var s;(function(o){o[o.MultiplyOperation=0]="MultiplyOperation",o[o.MixOperation=1]="MixOperation",o[o.AddOperation=2]="AddOperation"})(s||(s={}))},"./src/WebGL/constants/index.ts":(e,t,r)=>{r.r(t),r.d(t,{BackSide:()=>o.BackSide,ClampToEdgeWrapping:()=>c.ClampToEdgeWrapping,Coloring:()=>s.Coloring,DoubleSide:()=>o.DoubleSide,FloatType:()=>c.FloatType,FrontSide:()=>o.FrontSide,LinearFilter:()=>c.LinearFilter,LinearMipMapLinearFilter:()=>c.LinearMipMapLinearFilter,NearestFilter:()=>c.NearestFilter,R32Format:()=>c.R32Format,RFormat:()=>c.RFormat,RGBAFormat:()=>c.RGBAFormat,Shading:()=>n.Shading,SpriteAlignment:()=>f.SpriteAlignment,TextureOperations:()=>y.TextureOperations,UnsignedByteType:()=>c.UnsignedByteType});var s=r("./src/WebGL/constants/Coloring.ts"),o=r("./src/WebGL/constants/Sides.ts"),n=r("./src/WebGL/constants/Shading.ts"),f=r("./src/WebGL/constants/SpriteAlignment.ts"),c=r("./src/WebGL/constants/TextureConstants.ts"),y=r("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts":(e,t,r)=>{r.r(t),r.d(t,{EventDispatcher:()=>s});class s{constructor(){this.listeners={}}dispatchEvent(n){var f=this.listeners[n.type];if(f!==void 0){n.target=this;for(var c=0,y=f.length;c<y;c++)f[c].call(this,n)}}removeEventListener(n,f){if(!f)this.listeners[n]=[];else{var c=this.listeners[n].indexOf(f);c!==-1&&this.listeners[n].splice(c,1)}}addEventListener(n,f){this.listeners[n]===void 0&&(this.listeners[n]=[]),this.listeners[n].indexOf(f)===-1&&this.listeners[n].push(f)}}},"./src/WebGL/core/Geometry.ts":(e,t,r)=>{r.r(t),r.d(t,{Geometry:()=>_,GeometryGroup:()=>y,GeometryIDCount:()=>b});var s=r("./src/WebGL/materials/LineBasicMaterial.ts"),o=r("./src/WebGL/core/EventDispatcher.ts"),n=r("./src/WebGL/math/index.ts"),f=r("./src/colors.ts");const c=65535;class y{constructor(M=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=M}setColors(M){var E=this.vertexArray,P=this.colorArray;if(!E)throw new Error("vertex array not initialized");if(!P)throw new Error("color array not initialized");if(E.length!=P.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var a=0;a<E.length;a+=3){var u=M(E[a],E[a+1],E[a+2]);u instanceof f.Color||(u=f.CC.color(u)),P[a]=u.r,P[a+1]=u.g,P[a+2]=u.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var M=new n.Vector3,E,P,a,u,g=0;g<this.vertices;++g)E=g*3,P=this.vertexArray[E],a=this.vertexArray[E+1],u=this.vertexArray[E+2],M.x+=P,M.y+=a,M.z+=u;return M.divideScalar(this.vertices),M}setNormals(){var M=this.faceArray,E=this.vertexArray,P=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!M)throw new Error("face array not initialized");if(!E)throw new Error("vertex array not initialized");if(!P)throw new Error("normal array not initialized");for(var a,u,g,A,x,l,v,w=0;w<M.length/3;++w)a=M[w*3]*3,u=M[w*3+1]*3,g=M[w*3+2]*3,A=new n.Vector3(E[a],E[a+1],E[a+2]),x=new n.Vector3(E[u],E[u+1],E[u+2]),l=new n.Vector3(E[g],E[g+1],E[g+2]),A.subVectors(A,x),l.subVectors(l,x),l.cross(A),v=l,v.normalize(),P[a]+=v.x,P[u]+=v.x,P[g]+=v.x,P[a+1]+=v.y,P[u+1]+=v.y,P[g+1]+=v.y,P[a+2]+=v.z,P[u+2]+=v.z,P[g+2]+=v.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var M=this.faceArray,E=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!M)throw new Error("face array not initialized");for(var P=0;P<this.faceidx/3;++P){var a=P*3,u=a*2,g=M[a],A=M[a+1],x=M[a+2];E[u]=g,E[u+1]=A,E[u+2]=g,E[u+3]=x,E[u+4]=A,E[u+5]=x}}}vrml(M,E){var P,a,u,g,A,x,l,v,w,O,T,D,I,k,z,L="";L+=M+`Shape {
`+M+` appearance Appearance {
`+M+`  material Material {
`+M+"   diffuseColor "+((P=E==null?void 0:E.color)===null||P===void 0?void 0:P.r)+" "+((a=E==null?void 0:E.color)===null||a===void 0?void 0:a.g)+" "+((u=E==null?void 0:E.color)===null||u===void 0?void 0:u.b)+`
`,E!=null&&E.transparent&&(L+=M+"   transparency "+(1-E.opacity)+`
`),L+=M+`  }
`,L+=M+` }
`;var B=M;if(M+=" ",E instanceof s.LineBasicMaterial){L+=M+`geometry IndexedLineSet {
`+M+` colorPerVertex TRUE
`+M+` coord Coordinate {
`+M+`  point [
`;let V,N,U;for(let G=0;G<this.vertices;++G){let $=G*3;V=(g=this.vertexArray)===null||g===void 0?void 0:g[$],N=(A=this.vertexArray)===null||A===void 0?void 0:A[$+1],U=(x=this.vertexArray)===null||x===void 0?void 0:x[$+2],L+=M+"   "+V+" "+N+" "+U+`,
`}if(L+=M+`  ]
`,L+=M+` }
`,this.colorArray){L+=M+` color Color {
`+M+`  color [
`;for(let G=0;G<this.vertices;++G){let $=G*3;V=this.colorArray[$],N=this.colorArray[$+1],U=this.colorArray[$+2],L+=M+"   "+V+" "+N+" "+U+`,
`}L+=M+`  ]
`,L+=M+` }
`}L+=M+` coordIndex [
`;for(let G=0;G<this.vertices;G+=2)L+=M+"  "+G+", "+(G+1)+`, -1,
`;L+=M+` ]
`,L+=M+`}
`}else{L+=M+`geometry IndexedFaceSet {
`+M+` colorPerVertex TRUE
`+M+` normalPerVertex TRUE
`+M+` solid FALSE
`,L+=M+` coord Coordinate {
`+M+`  point [
`;let V,N,U;for(let G=0;G<this.vertices;++G){let $=G*3;V=(l=this.vertexArray)===null||l===void 0?void 0:l[$],N=(v=this.vertexArray)===null||v===void 0?void 0:v[$+1],U=(w=this.vertexArray)===null||w===void 0?void 0:w[$+2],L+=M+"   "+V+" "+N+" "+U+`,
`}L+=M+`  ]
`,L+=M+` }
`,L+=M+` normal Normal {
`+M+`  vector [
`;for(let G=0;G<this.vertices;++G){let $=G*3;V=(O=this.normalArray)===null||O===void 0?void 0:O[$],N=(T=this.normalArray)===null||T===void 0?void 0:T[$+1],U=(D=this.normalArray)===null||D===void 0?void 0:D[$+2],L+=M+"   "+V+" "+N+" "+U+`,
`}if(L+=M+`  ]
`,L+=M+` }
`,this.colorArray){L+=M+` color Color {
`+M+`  color [
`;for(let G=0;G<this.vertices;++G){let $=G*3;V=this.colorArray[$],N=this.colorArray[$+1],U=this.colorArray[$+2],L+=M+"   "+V+" "+N+" "+U+`,
`}L+=M+`  ]
`,L+=M+` }
`}L+=M+` coordIndex [
`;for(var H=0;H<this.faceidx;H+=3)V=(I=this.faceArray)===null||I===void 0?void 0:I[H],N=(k=this.faceArray)===null||k===void 0?void 0:k[H+1],U=(z=this.faceArray)===null||z===void 0?void 0:z[H+2],L+=M+"  "+V+", "+N+", "+U+`, -1,
`;L+=M+` ]
`,L+=M+`}
`}return L+=B+"}",L}truncateArrayBuffers(M=!0,E=!1){var P=this.vertexArray,a=this.colorArray,u=this.normalArray,g=this.faceArray,A=this.lineArray,x=this.radiusArray;this.vertexArray=(P==null?void 0:P.subarray(0,this.vertices*3))||null,this.colorArray=(a==null?void 0:a.subarray(0,this.vertices*3))||null,M?(this.normalArray=(u==null?void 0:u.subarray(0,this.vertices*3))||null,this.faceArray=(g==null?void 0:g.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(A==null?void 0:A.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),x&&(this.radiusArray=x.subarray(0,this.vertices)),E&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class _ extends o.EventDispatcher{constructor(M=!1,E=!1,P=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=b++,this.mesh=M,this.radii=E,this.offset=P}updateGeoGroup(M=0){var E,P=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!P||P.vertices+M>(((E=P==null?void 0:P.vertexArray)===null||E===void 0?void 0:E.length)||0)/3)&&(P=this.addGeoGroup()),P}vrml(M,E){for(var P="",a=this.geometryGroups.length,u=0;u<a;u++){var g=this.geometryGroups[u];P+=g.vrml(M,E)+`,
`}return P}addGeoGroup(){var M=new y(this.geometryGroups.length);return this.geometryGroups.push(M),this.groups=this.geometryGroups.length,M.vertexArray=new Float32Array(c*3),M.colorArray=new Float32Array(c*3),this.mesh&&(M.normalArray=new Float32Array(c*3),M.faceArray=new Uint16Array(c*6),M.lineArray=new Uint16Array(c*6)),this.radii&&(M.radiusArray=new Float32Array(c)),M.useOffset=this.offset,M}setUpNormals(...M){for(var E=0;E<this.groups;E++){var P=this.geometryGroups[E];P.setNormals(...M)}}setColors(...M){for(var E=this.geometryGroups.length,P=0;P<E;P++){var a=this.geometryGroups[P];a.setColors(...M)}}setUpWireframe(...M){for(var E=0;E<this.groups;E++){var P=this.geometryGroups[E];P.setLineIndices(...M)}}initTypedArrays(){for(var M=0;M<this.groups;M++){var E=this.geometryGroups[M];E.__inittedArrays!==!0&&E.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var M=0,E=0;E<this.groups;E++)M+=this.geometryGroups[E].vertices;return M}}let b=0},"./src/WebGL/core/Object3D.ts":(e,t,r)=>{r.r(t),r.d(t,{Light:()=>y,Object3D:()=>f,Object3DIDCount:()=>n,Scene:()=>c});var s=r("./src/WebGL/math/index.ts"),o=r("./src/colors.ts");let n=0;class f{constructor(){this.id=n++,this.name="",this.children=[],this.position=new s.Vector3,this.rotation=new s.Vector3,this.matrix=new s.Matrix4,this.matrixWorld=new s.Matrix4,this.quaternion=new s.Quaternion,this.eulerOrder="XYZ",this.up=new s.Vector3(0,1,0),this.scale=new s.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(b){this.matrix.lookAt(b,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof s.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(b){if(b===this){console.error("Can't add $3Dmol.Object3D to itself");return}b.parent=this,this.children.push(b);for(var C=this;C.parent!==void 0;)C=C.parent;C!==void 0&&C instanceof c&&C.__addObject(b)}remove(b){var C=this.children.indexOf(b);if(C!==-1){b.parent=void 0,this.children.splice(C,1);for(var M=this;M.parent!==void 0;)M=M.parent;M!==void 0&&M instanceof c&&M.__removeObject(b)}}vrml(b){b||(b=" ");var C=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),M=0,E=0,P=0;if(C!=0){let g=Math.sin(C/2);M=this.quaternion.x/g,E=this.quaternion.y/g,P=this.quaternion.z/g}var a=b+`Transform {
`+b+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+b+" rotation "+M+" "+E+" "+P+" "+C+`
`+b+` children [
`;this.geometry&&(a+=this.geometry.vrml(b,this.material));for(var u=0;u<this.children.length;u++)a+=this.children[u].vrml(b+" ")+`,
`;return a+=` ]
`,a+="}",a}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof s.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(b){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||b===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var C=0;C<this.children.length;C++)this.children[C].updateMatrixWorld(!0)}clone(b){b===void 0&&(b=new f),b.name=this.name,b.up.copy(this.up),b.position.copy(this.position),b.rotation instanceof s.Vector3&&this.rotation instanceof s.Vector3?b.rotation.copy(this.rotation):b.rotation=this.rotation,b.eulerOrder=this.eulerOrder,b.scale.copy(this.scale),b.rotationAutoUpdate=this.rotationAutoUpdate,b.matrix.copy(this.matrix),b.matrixWorld.copy(this.matrixWorld),b.quaternion.copy(this.quaternion),b.matrixAutoUpdate=this.matrixAutoUpdate,b.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,b.useQuaternion=this.useQuaternion,b.visible=this.visible;for(var C=0;C<this.children.length;C++){var M=this.children[C];b.add(M.clone())}return b}setVisible(b){this.visible=b;for(var C=0;C<this.children.length;C++){var M=this.children[C];M.setVisible(b)}}}class c extends f{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(b){if(b instanceof y)this.__lights.indexOf(b)===-1&&this.__lights.push(b),b.target&&b.target.parent===void 0&&this.add(b.target);else if(this.__objects.indexOf(b)===-1){this.__objects.push(b),this.__objectsAdded.push(b);var C=this.__objectsRemoved.indexOf(b);C!==-1&&this.__objectsRemoved.splice(C,1)}for(var M=0;M<b.children.length;M++)this.__addObject(b.children[M])}__removeObject(b){var C;if(b instanceof y)C=this.__lights.indexOf(b),C!==-1&&this.__lights.splice(C,1);else if(C=this.__objects.indexOf(b),C!==-1){this.__objects.splice(C,1),this.__objectsRemoved.push(b);var M=this.__objectsAdded.indexOf(b);M!==-1&&this.__objectsAdded.splice(C,1)}for(var E=0;E<b.children.length;E++)this.__removeObject(b.children[E])}}class y extends f{constructor(b,C=1){super(),this.position=new s.Vector3(0,1,0),this.target=new f,this.castShadow=!1,this.onlyShadow=!1,this.color=new o.Color(b),this.intensity=C}}},"./src/WebGL/core/Projector.ts":(e,t,r)=>{r.r(t),r.d(t,{Projector:()=>n});var s=r("./src/WebGL/math/index.ts");const o=new s.Matrix4;class n{static unprojectVector(c,y){return y.projectionMatrixInverse.getInverse(y.projectionMatrix),o.multiplyMatrices(y.matrixWorld,y.projectionMatrixInverse),c.applyProjection(o)}static projectVector(c,y){return y.matrixWorldInverse.getInverse(y.matrixWorld),o.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),c.applyProjection(o)}projectVector(c,y){return n.projectVector(c,y)}unprojectVector(c,y){return n.unprojectVector(c,y)}}},"./src/WebGL/core/Raycaster.ts":(e,t,r)=>{r.r(t),r.d(t,{Raycaster:()=>c,intersectObject:()=>g});var s=r("./src/WebGL/math/index.ts"),o=r("./src/WebGL/shapes/index.ts");const n=(A,x)=>A.distance-x.distance,f=new s.Matrix4;class c{constructor(x,l,v,w){this.precision=1e-4,this.linePrecision=.2,this.ray=new s.Ray(x,l),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=w||0,this.far=v||1/0}set(x,l){this.ray.set(x,l)}setFromCamera(x,l){l.ortho?(this.ray.origin.set(x.x,x.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld)):(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(x.x,x.y,x.z),l.projectionMatrixInverse.getInverse(l.projectionMatrix),f.multiplyMatrices(l.matrixWorld,l.projectionMatrixInverse),this.ray.direction.applyProjection(f),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(x,l){for(var v=[],w=0,O=l.length;w<O;w++)g(x,l[w],this,v);return v.sort(n),v}}const y=A=>Math.min(Math.max(A,-1),1);var _=new o.Sphere,b=new o.Cylinder,C=new o.Triangle,M=new s.Vector3,E=new s.Vector3,P=new s.Vector3,a=new s.Vector3,u=new s.Vector3;function g(A,x,l,v){if(u.getPositionFromMatrix(A.matrixWorld),x.intersectionShape===void 0)return v;var w=x.intersectionShape,O=l.linePrecision;O*=A.matrixWorld.getMaxScaleOnAxis();var T=O*O;if(x.boundingSphere!==void 0&&x.boundingSphere instanceof o.Sphere&&(_.copy(x.boundingSphere),_.applyMatrix4(A.matrixWorld),!l.ray.isIntersectionSphere(_)))return v;var D,I,k,z,L,B,H,V,N,U,G,$,W,j;for(D=0,I=w.triangle.length;D<I;D++)if(w.triangle[D]instanceof o.Triangle){if(C.copy(w.triangle[D]),C.applyMatrix4(A.matrixWorld),k=C.getNormal(),z=l.ray.direction.dot(k),z>=0||(M.subVectors(C.a,l.ray.origin),H=k.dot(M)/z,H<0))continue;E.copy(l.ray.direction).multiplyScalar(H).add(l.ray.origin),E.sub(C.a),P.copy(C.b).sub(C.a),a.copy(C.c).sub(C.a);var se=P.dot(a),he=P.lengthSq(),ce=a.lengthSq();if($=(he*E.dot(a)-se*E.dot(P))/(he*ce-se*se),$<0||$>1||(G=(E.dot(P)-$*se)/he,G<0||G>1||G+$>1))continue;v.push({clickable:x,distance:H})}for(D=0,I=w.cylinder.length;D<I;D++)if(w.cylinder[D]instanceof o.Cylinder){if(b.copy(w.cylinder[D]),b.applyMatrix4(A.matrixWorld),M.subVectors(b.c1,l.ray.origin),L=M.dot(b.direction),B=M.dot(l.ray.direction),z=y(l.ray.direction.dot(b.direction)),N=1-z*z,N===0)continue;W=(z*B-L)/N,j=(B-z*L)/N,E.copy(b.direction).multiplyScalar(W).add(b.c1),P.copy(l.ray.direction).multiplyScalar(j).add(l.ray.origin),V=a.subVectors(E,P).lengthSq();var ue=b.radius*b.radius;if(V<=ue){if(U=(z*L-B)*(z*L-B)-N*(M.lengthSq()-L*L-ue),U<=0?$=H=Math.sqrt(V):$=H=(B-z*L-Math.sqrt(U))/N,G=z*$-L,G<0||G*G>b.lengthSq()||$<0)continue;v.push({clickable:x,distance:H})}}for(D=0,I=w.line.length;D<I;D+=2){E.copy(w.line[D]),E.applyMatrix4(A.matrixWorld),P.copy(w.line[D+1]),P.applyMatrix4(A.matrixWorld),a.subVectors(P,E);var Ee=a.lengthSq();a.normalize(),M.subVectors(E,l.ray.origin);var pe=M.dot(a);B=M.dot(l.ray.direction),z=y(l.ray.direction.dot(a)),N=1-z*z,N!==0&&(W=(z*B-pe)/N,j=(B-z*pe)/N,E.add(a.multiplyScalar(W)),P.copy(l.ray.direction).multiplyScalar(j).add(l.ray.origin),V=a.subVectors(P,E).lengthSq(),V<T&&W*W<Ee&&v.push({clickable:x,distance:j}))}for(D=0,I=w.sphere.length;D<I;D++)if(w.sphere[D]instanceof o.Sphere&&(_.copy(w.sphere[D]),_.applyMatrix4(A.matrixWorld),l.ray.isIntersectionSphere(_))){E.subVectors(_.center,l.ray.origin);var fe=E.dot(l.ray.direction);if(U=fe*fe-(E.lengthSq()-_.radius*_.radius),fe<0)return v;U<=0?H=fe:H=fe-Math.sqrt(U),v.push({clickable:x,distance:H})}return v}},"./src/WebGL/core/Texture.ts":(e,t,r)=>{r.r(t),r.d(t,{Texture:()=>c,TextureIdCount:()=>y});var s=r("./src/WebGL/constants/TextureConstants.ts"),o=r("./src/WebGL/math/index.ts"),n=r("./src/WebGL/core/EventDispatcher.ts"),f=r("./src/WebGL/core/UVMapping.ts");class c extends n.EventDispatcher{constructor(b,C){super(),this.id=y++,this.name="",this.image=b,this.mapping=new f.UVMapping,this.wrapS=s.ClampToEdgeWrapping,this.wrapT=s.ClampToEdgeWrapping,this.anisotropy=1,C?(this.format=s.RFormat,this.type=s.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=s.NearestFilter,this.minFilter=s.NearestFilter):(this.format=s.RGBAFormat,this.type=s.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=s.LinearFilter,this.minFilter=s.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(b=new c){return b.image=this.image,b.mapping=this.mapping,b.wrapS=this.wrapS,b.wrapT=this.wrapT,b.magFilter=this.magFilter,b.minFilter=this.minFilter,b.anisotropy=this.anisotropy,b.format=this.format,b.type=this.type,b.offset.copy(this.offset),b.repeat.copy(this.repeat),b.premultiplyAlpha=this.premultiplyAlpha,b.flipY=this.flipY,b.unpackAlignment=this.unpackAlignment,b}dispose(){this.dispatchEvent({type:"dispose"})}}let y=0},"./src/WebGL/core/UVMapping.ts":(e,t,r)=>{r.r(t),r.d(t,{UVMapping:()=>s});class s{}},"./src/WebGL/core/index.ts":(e,t,r)=>{r.r(t),r.d(t,{EventDispatcher:()=>s.EventDispatcher,Geometry:()=>o.Geometry,GeometryGroup:()=>o.GeometryGroup,GeometryIDCount:()=>o.GeometryIDCount,Light:()=>n.Light,Object3D:()=>n.Object3D,Object3DIDCount:()=>n.Object3DIDCount,Projector:()=>f.Projector,Raycaster:()=>c.Raycaster,Scene:()=>n.Scene,Texture:()=>y.Texture,TextureIdCount:()=>y.TextureIdCount,UVMapping:()=>_.UVMapping,intersectObject:()=>c.intersectObject});var s=r("./src/WebGL/core/EventDispatcher.ts"),o=r("./src/WebGL/core/Geometry.ts"),n=r("./src/WebGL/core/Object3D.ts"),f=r("./src/WebGL/core/Projector.ts"),c=r("./src/WebGL/core/Raycaster.ts"),y=r("./src/WebGL/core/Texture.ts"),_=r("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts":(e,t,r)=>{r.r(t),r.d(t,{BackSide:()=>s.BackSide,Camera:()=>b.Camera,ClampToEdgeWrapping:()=>s.ClampToEdgeWrapping,Coloring:()=>s.Coloring,Cylinder:()=>_.Cylinder,DoubleSide:()=>s.DoubleSide,EventDispatcher:()=>o.EventDispatcher,FloatType:()=>s.FloatType,Fog:()=>C.Fog,FrontSide:()=>s.FrontSide,Geometry:()=>o.Geometry,GeometryGroup:()=>o.GeometryGroup,GeometryIDCount:()=>o.GeometryIDCount,ImposterMaterial:()=>n.ImposterMaterial,InstancedMaterial:()=>n.InstancedMaterial,Light:()=>o.Light,Line:()=>c.Line,LineBasicMaterial:()=>n.LineBasicMaterial,LineStyle:()=>c.LineStyle,LinearFilter:()=>s.LinearFilter,LinearMipMapLinearFilter:()=>s.LinearMipMapLinearFilter,Material:()=>n.Material,MaterialIdCount:()=>n.MaterialIdCount,Matrix3:()=>f.Matrix3,Matrix4:()=>f.Matrix4,Mesh:()=>c.Mesh,MeshDoubleLambertMaterial:()=>n.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>n.MeshLambertMaterial,MeshOutlineMaterial:()=>n.MeshOutlineMaterial,NearestFilter:()=>s.NearestFilter,Object3D:()=>o.Object3D,Object3DIDCount:()=>o.Object3DIDCount,Projector:()=>o.Projector,Quaternion:()=>f.Quaternion,R32Format:()=>s.R32Format,RFormat:()=>s.RFormat,RGBAFormat:()=>s.RGBAFormat,Ray:()=>f.Ray,Raycaster:()=>o.Raycaster,Renderer:()=>M.Renderer,Scene:()=>o.Scene,ShaderLib:()=>y.ShaderLib,ShaderUtils:()=>y.ShaderUtils,Shading:()=>s.Shading,Sphere:()=>_.Sphere,SphereImposterMaterial:()=>n.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>n.SphereImposterOutlineMaterial,Sprite:()=>c.Sprite,SpriteAlignment:()=>s.SpriteAlignment,SpriteMaterial:()=>n.SpriteMaterial,SpritePlugin:()=>E.SpritePlugin,StickImposterMaterial:()=>n.StickImposterMaterial,StickImposterOutlineMaterial:()=>n.StickImposterOutlineMaterial,Texture:()=>o.Texture,TextureIdCount:()=>o.TextureIdCount,TextureOperations:()=>s.TextureOperations,Triangle:()=>_.Triangle,UVMapping:()=>o.UVMapping,UnsignedByteType:()=>s.UnsignedByteType,Vector2:()=>f.Vector2,Vector3:()=>f.Vector3,VolumetricMaterial:()=>n.VolumetricMaterial,basic:()=>y.basic,clamp:()=>f.clamp,clone:()=>y.clone,conversionMatrix3:()=>f.conversionMatrix3,degToRad:()=>f.degToRad,instanced:()=>y.instanced,intersectObject:()=>o.intersectObject,lambert:()=>y.lambert,lambertdouble:()=>y.lambertdouble,outline:()=>y.outline,screen:()=>y.screen,screenaa:()=>y.screenaa,sphereimposter:()=>y.sphereimposter,sphereimposteroutline:()=>y.sphereimposteroutline,sprite:()=>y.sprite,stickimposter:()=>y.stickimposter,stickimposteroutline:()=>y.stickimposteroutline,volumetric:()=>y.volumetric});var s=r("./src/WebGL/constants/index.ts"),o=r("./src/WebGL/core/index.ts"),n=r("./src/WebGL/materials/index.ts"),f=r("./src/WebGL/math/index.ts"),c=r("./src/WebGL/objects/index.ts"),y=r("./src/WebGL/shaders/index.ts"),_=r("./src/WebGL/shapes/index.ts"),b=r("./src/WebGL/Camera.ts"),C=r("./src/WebGL/Fog.ts"),M=r("./src/WebGL/Renderer.ts"),E=r("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{ImposterMaterial:()=>y});var s=r("./src/WebGL/constants/Coloring.ts"),o=r("./src/WebGL/constants/Shading.ts"),n=r("./src/colors.ts"),f=r("./src/WebGL/math/index.ts"),c=r("./src/WebGL/materials/Material.ts");class y extends c.Material{constructor(b){super(),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new f.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID=null,this.vertexColors=s.Coloring.NoColors,this.skinning=!1,this.setValues(b)}clone(b=new y){return super.clone.call(this,b),b.color.copy(this.color),b.ambient.copy(this.ambient),b.emissive.copy(this.emissive),b.wrapAround=this.wrapAround,b.wrapRGB.copy(this.wrapRGB),b.map=this.map,b.lightMap=this.lightMap,b.specularMap=this.specularMap,b.envMap=this.envMap,b.combine=this.combine,b.reflectivity=this.reflectivity,b.refractionRatio=this.refractionRatio,b.fog=this.fog,b.shading=this.shading,b.shaderID=this.shaderID,b.vertexColors=this.vertexColors,b.skinning=this.skinning,b.morphTargets=this.morphTargets,b.morphNormals=this.morphNormals,b}}},"./src/WebGL/materials/InstancedMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{InstancedMaterial:()=>y});var s=r("./src/WebGL/constants/Coloring.ts"),o=r("./src/WebGL/constants/Shading.ts"),n=r("./src/colors.ts"),f=r("./src/WebGL/math/index.ts"),c=r("./src/WebGL/materials/Material.ts");class y extends c.Material{constructor(b){super(),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.wrapAround=!1,this.wrapRGB=new f.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=s.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(b)}clone(b=new y){return super.clone.call(this,b),b.color.copy(this.color),b.ambient.copy(this.ambient),b.emissive.copy(this.emissive),b.wrapAround=this.wrapAround,b.wrapRGB.copy(this.wrapRGB),b.map=this.map,b.lightMap=this.lightMap,b.specularMap=this.specularMap,b.envMap=this.envMap,b.combine=this.combine,b.reflectivity=this.reflectivity,b.refractionRatio=this.refractionRatio,b.fog=this.fog,b.shading=this.shading,b.shaderID=this.shaderID,b.vertexColors=this.vertexColors,b.skinning=this.skinning,b.morphTargets=this.morphTargets,b.morphNormals=this.morphNormals,b.sphere=this.sphere,b}}},"./src/WebGL/materials/LineBasicMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{LineBasicMaterial:()=>n});var s=r("./src/colors.ts"),o=r("./src/WebGL/materials/Material.ts");class n extends o.Material{constructor(c){super(),this.color=new s.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(c)}clone(c=new n){return super.clone.call(this,c),c.color.copy(this.color),c}}},"./src/WebGL/materials/Material.ts":(e,t,r)=>{r.r(t),r.d(t,{Material:()=>c,MaterialIdCount:()=>y});var s=r("./src/WebGL/constants/Sides.ts"),o=r("./src/WebGL/core/index.ts"),n=r("./src/WebGL/math/index.ts"),f=r("./src/colors.ts");class c extends o.EventDispatcher{constructor(){super(...arguments),this.id=y++,this.name="",this.side=s.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.stencilTest=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1}setValues(b={}){if(b!==void 0)for(var C in b){var M=b[C];if(M===void 0){console.warn("$3Dmol.Material: '"+C+"' parameter is undefined.");continue}if(C in this){var E=this[C];E instanceof f.Color&&M instanceof f.Color?E.copy(M):E instanceof f.Color?E.set(M):E instanceof n.Vector3&&M instanceof n.Vector3?E.copy(M):this[C]=M}}}clone(b=new c){return b.name=this.name,b.side=this.side,b.opacity=this.opacity,b.transparent=this.transparent,b.depthTest=this.depthTest,b.depthWrite=this.depthWrite,b.stencilTest=this.stencilTest,b.polygonOffset=this.polygonOffset,b.polygonOffsetFactor=this.polygonOffsetFactor,b.polygonOffsetUnits=this.polygonOffsetUnits,b.alphaTest=this.alphaTest,b.overdraw=this.overdraw,b.visible=this.visible,b}dispose(){this.dispatchEvent({type:"dispose"})}}let y=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{MeshDoubleLambertMaterial:()=>n});var s=r("./src/WebGL/constants/Sides.ts"),o=r("./src/WebGL/materials/MeshLambertMaterial.ts");class n extends o.MeshLambertMaterial{constructor(c){super(c),this.shaderID="lambertdouble",this.side=s.DoubleSide,this.outline=!1}clone(c=new n){return super.clone.call(this,c),c}}},"./src/WebGL/materials/MeshLambertMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{MeshLambertMaterial:()=>y});var s=r("./src/WebGL/constants/Coloring.ts"),o=r("./src/WebGL/constants/Shading.ts"),n=r("./src/WebGL/materials/Material.ts"),f=r("./src/colors.ts"),c=r("./src/WebGL/math/index.ts");class y extends n.Material{constructor(b){super(),this.color=new f.Color(16777215),this.ambient=new f.Color(1048575),this.emissive=new f.Color(0),this.wrapAround=!1,this.wrapRGB=new c.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=o.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=s.Coloring.NoColors,this.skinning=!1,this.setValues(b)}clone(b=new y){return super.clone.call(this,b),b.color.copy(this.color),b.ambient.copy(this.ambient),b.emissive.copy(this.emissive),b.wrapAround=this.wrapAround,b.wrapRGB.copy(this.wrapRGB),b.map=this.map,b.lightMap=this.lightMap,b.specularMap=this.specularMap,b.envMap=this.envMap,b.combine=this.combine,b.reflectivity=this.reflectivity,b.refractionRatio=this.refractionRatio,b.fog=this.fog,b.shading=this.shading,b.shaderID=this.shaderID,b.vertexColors=this.vertexColors,b.skinning=this.skinning,b.morphTargets=this.morphTargets,b.morphNormals=this.morphNormals,b}}},"./src/WebGL/materials/MeshOutlineMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{MeshOutlineMaterial:()=>n});var s=r("./src/colors.ts"),o=r("./src/WebGL/materials/Material.ts");class n extends o.Material{constructor(c){super(),c=c||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=c.color||new s.Color(0,0,0),this.outlineWidth=c.width||.1,this.outlinePushback=c.pushback||1}clone(c=new n){return super.clone.call(this,c),c.fog=this.fog,c.shaderID=this.shaderID,c.wireframe=this.wireframe,c}}},"./src/WebGL/materials/SphereImposterMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{SphereImposterMaterial:()=>o});var s=r("./src/WebGL/materials/ImposterMaterial.ts");class o extends s.ImposterMaterial{constructor(f){super(f),this.shaderID="sphereimposter",this.setValues(f)}clone(f=new o){return super.clone.call(this,f),f}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{SphereImposterOutlineMaterial:()=>n});var s=r("./src/colors.ts"),o=r("./src/WebGL/materials/ImposterMaterial.ts");class n extends o.ImposterMaterial{constructor(c){super(c),c=c||{},this.shaderID="sphereimposteroutline",this.outlineColor=c.color||new s.Color(0,0,0),this.outlineWidth=c.width||.1,this.outlinePushback=c.pushback||1,this.setValues(c)}clone(c=new n){return super.clone.call(this,c),c.outlineColor=this.outlineColor,c.outlineWidth=this.outlineWidth,c.outlinePushback=this.outlinePushback,c}}},"./src/WebGL/materials/SpriteMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{SpriteMaterial:()=>y});var s=r("./src/WebGL/constants/SpriteAlignment.ts"),o=r("./src/WebGL/core/Texture.ts"),n=r("./src/colors.ts"),f=r("./src/WebGL/math/index.ts"),c=r("./src/WebGL/materials/Material.ts");class y extends c.Material{constructor(b){super(),this.color=new n.Color(16777215),this.map=new o.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new f.Vector2(0,0),this.uvScale=new f.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=s.SpriteAlignment.center.clone(),this.setValues(b),b=b||{},b.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),b.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),b.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(b=new y){return super.clone.call(this,b),b.color.copy(this.color),b.map=this.map,b.useScreenCoordinates=this.useScreenCoordinates,b.screenOffset=this.screenOffset,b.sizeAttenuation=this.sizeAttenuation,b.scaleByViewport=this.scaleByViewPort,b.alignment.copy(this.alignment),b.uvOffset.copy(this.uvOffset),b}}},"./src/WebGL/materials/StickImposterMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{StickImposterMaterial:()=>o});var s=r("./src/WebGL/materials/ImposterMaterial.ts");class o extends s.ImposterMaterial{constructor(f){super(f),this.shaderID="stickimposter",this.setValues(f)}clone(f=new o){return super.clone.call(this,f),f}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{StickImposterOutlineMaterial:()=>n});var s=r("./src/colors.ts"),o=r("./src/WebGL/materials/ImposterMaterial.ts");class n extends o.ImposterMaterial{constructor(c={}){super(c),this.shaderID="stickimposteroutline",this.outlineColor=new s.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,c.color&&(this.outlineColor=c.color),c.width&&(this.outlineWidth=c.width),c.pushback&&(this.outlinePushback=c.pushback),this.setValues(c)}clone(c=new n){return super.clone.call(this,c),c.outlineColor=this.outlineColor,c.outlineWidth=this.outlineWidth,c.outlinePushback=this.outlinePushback,c}}},"./src/WebGL/materials/VolumetricMaterial.ts":(e,t,r)=>{r.r(t),r.d(t,{VolumetricMaterial:()=>f});var s=r("./src/WebGL/constants/Sides.ts"),o=r("./src/colors.ts"),n=r("./src/WebGL/materials/Material.ts");class f extends n.Material{constructor(y){super(),this.transparent=!1,this.volumetric=!0,this.color=new o.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=s.FrontSide,this.setValues(y)}clone(y=new f){return super.clone.call(this,y),y.transparent=this.transparent,y.volumetric=this.volumetric,y.color=this.color,y.transferfn=this.transferfn,y.map=this.map,y.extent=this.extent,y.maxdepth=this.maxdepth,y.unit=this.unit,y.texmatrix=this.texmatrix,y.transfermin=this.transfermin,y.transfermax=this.transfermax,y.subsamples=this.subsamples,y.shaderID=this.shaderID,y.side=this.side,y}}},"./src/WebGL/materials/index.ts":(e,t,r)=>{r.r(t),r.d(t,{ImposterMaterial:()=>s.ImposterMaterial,InstancedMaterial:()=>o.InstancedMaterial,LineBasicMaterial:()=>n.LineBasicMaterial,Material:()=>f.Material,MaterialIdCount:()=>f.MaterialIdCount,MeshDoubleLambertMaterial:()=>c.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>y.MeshLambertMaterial,MeshOutlineMaterial:()=>_.MeshOutlineMaterial,SphereImposterMaterial:()=>b.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>C.SphereImposterOutlineMaterial,SpriteMaterial:()=>M.SpriteMaterial,StickImposterMaterial:()=>E.StickImposterMaterial,StickImposterOutlineMaterial:()=>P.StickImposterOutlineMaterial,VolumetricMaterial:()=>a.VolumetricMaterial});var s=r("./src/WebGL/materials/ImposterMaterial.ts"),o=r("./src/WebGL/materials/InstancedMaterial.ts"),n=r("./src/WebGL/materials/LineBasicMaterial.ts"),f=r("./src/WebGL/materials/Material.ts"),c=r("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),y=r("./src/WebGL/materials/MeshLambertMaterial.ts"),_=r("./src/WebGL/materials/MeshOutlineMaterial.ts"),b=r("./src/WebGL/materials/SphereImposterMaterial.ts"),C=r("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),M=r("./src/WebGL/materials/SpriteMaterial.ts"),E=r("./src/WebGL/materials/StickImposterMaterial.ts"),P=r("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),a=r("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts":(e,t,r)=>{r.r(t),r.d(t,{Quaternion:()=>s});class s{constructor(n,f,c,y){this.x=n||0,this.y=f||0,this.z=c||0,this.w=y!==void 0?y:1}set(n,f,c,y){return this.x=n,this.y=f,this.z=c,this.w=y,this}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let n=this.length();return n===0?(this.x=0,this.y=0,this.z=0,this.w=1):(n=1/n,this.x*=n,this.y*=n,this.z*=n,this.w*=n),this}multiply(n){return this.multiplyQuaternions(this,n)}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}multiplyQuaternions(n,f){const c=n.x,y=n.y,_=n.z,b=n.w,C=f.x,M=f.y,E=f.z,P=f.w;return this.x=c*P+b*C+y*E-_*M,this.y=y*P+b*M+_*C-c*E,this.z=_*P+b*E+c*M-y*C,this.w=b*P-c*C-y*M-_*E,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}clone(){return new s(this.x,this.y,this.z,this.w)}setFromEuler(n){const f=Math.cos(n.x/2),c=Math.cos(n.y/2),y=Math.cos(n.z/2),_=Math.sin(n.x/2),b=Math.sin(n.y/2),C=Math.sin(n.z/2);return this.x=_*c*y+f*b*C,this.y=f*b*y-_*c*C,this.z=f*c*C+_*b*y,this.w=f*c*y-_*b*C,this}}},"./src/WebGL/math/Vector2.ts":(e,t,r)=>{r.r(t),r.d(t,{Vector2:()=>s});class s{constructor(n,f){this.x=n||0,this.y=f||0}set(n,f){return this.x=n,this.y=f,this}subVectors(n,f){return this.x=n.x-f.x,this.y=n.y-f.y,this}copy(n){return this.x=n.x,this.y=n.y,this}clone(){return new s(this.x,this.y)}}},"./src/WebGL/math/index.ts":(e,t,r)=>{r.r(t),r.d(t,{Matrix3:()=>y.Matrix3,Matrix4:()=>y.Matrix4,Quaternion:()=>s.Quaternion,Ray:()=>y.Ray,Vector2:()=>o.Vector2,Vector3:()=>y.Vector3,clamp:()=>n.clamp,conversionMatrix3:()=>f.conversionMatrix3,degToRad:()=>c.degToRad});var s=r("./src/WebGL/math/Quaternion.ts"),o=r("./src/WebGL/math/Vector2.ts"),n=r("./src/WebGL/math/utils/clamp.ts"),f=r("./src/WebGL/math/utils/conversionMatrix3.ts"),c=r("./src/WebGL/math/utils/degToRad.ts"),y=r("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts":(e,t,r)=>{r.r(t),r.d(t,{Matrix3:()=>M,Matrix4:()=>b,Ray:()=>E,Vector3:()=>C});var s=r("./src/WebGL/math/utils/degToRad.ts"),o=r("./src/WebGL/math/utils/clamp.ts"),n,f,c,y,_;class b{constructor(a=1,u=0,g=0,A=0,x=0,l=1,v=0,w=0,O=0,T=0,D=1,I=0,k=0,z=0,L=0,B=1){typeof a<"u"&&typeof a!="number"?this.elements=new Float32Array(a):(this.elements=new Float32Array(16),this.elements[0]=a,this.elements[4]=u,this.elements[8]=g,this.elements[12]=A,this.elements[1]=x,this.elements[5]=l,this.elements[9]=v,this.elements[13]=w,this.elements[2]=O,this.elements[6]=T,this.elements[10]=D,this.elements[14]=I,this.elements[3]=k,this.elements[7]=z,this.elements[11]=L,this.elements[15]=B)}makeScale(a,u,g){throw new Error("Method not implemented.")}set(a,u,g,A,x,l,v,w,O,T,D,I,k,z,L,B){const H=this.elements;return H[0]=a,H[4]=u,H[8]=g,H[12]=A,H[1]=x,H[5]=l,H[9]=v,H[13]=w,H[2]=O,H[6]=T,H[10]=D,H[14]=I,H[3]=k,H[7]=z,H[11]=L,H[15]=B,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(a){const u=a.elements;return this.set(u[0],u[4],u[8],u[12],u[1],u[5],u[9],u[13],u[2],u[6],u[10],u[14],u[3],u[7],u[11],u[15]),this}matrix3FromTopLeft(){const a=this.elements;return new M(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10])}setRotationFromEuler(a,u){const g=this.elements,{x:A,y:x,z:l}=a,v=Math.cos(A),w=Math.sin(A),O=Math.cos(x),T=Math.sin(x),D=Math.cos(l),I=Math.sin(l);if(u===void 0||u==="XYZ"){const k=v*D,z=v*I,L=w*D,B=w*I;g[0]=O*D,g[4]=-O*I,g[8]=T,g[1]=z+L*T,g[5]=k-B*T,g[9]=-w*O,g[2]=B-k*T,g[6]=L+z*T,g[10]=v*O}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${u}`);return this}setRotationFromQuaternion(a){const u=this.elements,{x:g,y:A,z:x,w:l}=a,v=g+g,w=A+A,O=x+x,T=g*v,D=g*w,I=g*O,k=A*w,z=A*O,L=x*O,B=l*v,H=l*w,V=l*O;return u[0]=1-(k+L),u[4]=D-V,u[8]=I+H,u[1]=D+V,u[5]=1-(T+L),u[9]=z-B,u[2]=I-H,u[6]=z+B,u[10]=1-(T+k),this}multiplyMatrices(a,u){const g=a.elements,A=u.elements,x=this.elements,l=g[0],v=g[4],w=g[8],O=g[12],T=g[1],D=g[5],I=g[9],k=g[13],z=g[2],L=g[6],B=g[10],H=g[14],V=g[3],N=g[7],U=g[11],G=g[15],$=A[0],W=A[4],j=A[8],se=A[12],he=A[1],ce=A[5],ue=A[9],Ee=A[13],pe=A[2],fe=A[6],Ue=A[10],Oe=A[14],ee=A[3],J=A[7],ne=A[11],le=A[15];return x[0]=l*$+v*he+w*pe+O*ee,x[4]=l*W+v*ce+w*fe+O*J,x[8]=l*j+v*ue+w*Ue+O*ne,x[12]=l*se+v*Ee+w*Oe+O*le,x[1]=T*$+D*he+I*pe+k*ee,x[5]=T*W+D*ce+I*fe+k*J,x[9]=T*j+D*ue+I*Ue+k*ne,x[13]=T*se+D*Ee+I*Oe+k*le,x[2]=z*$+L*he+B*pe+H*ee,x[6]=z*W+L*ce+B*fe+H*J,x[10]=z*j+L*ue+B*Ue+H*ne,x[14]=z*se+L*Ee+B*Oe+H*le,x[3]=V*$+N*he+U*pe+G*ee,x[7]=V*W+N*ce+U*fe+G*J,x[11]=V*j+N*ue+U*Ue+G*ne,x[15]=V*se+N*Ee+U*Oe+G*le,this}multiplyScalar(a){const u=this.elements;return u[0]*=a,u[4]*=a,u[8]*=a,u[12]*=a,u[1]*=a,u[5]*=a,u[9]*=a,u[13]*=a,u[2]*=a,u[6]*=a,u[10]*=a,u[14]*=a,u[3]*=a,u[7]*=a,u[11]*=a,u[15]*=a,this}makeTranslation(a,u,g){return this.set(1,0,0,a,0,1,0,u,0,0,1,g,0,0,0,1),this}snap(a){const u=Math.pow(10,4),g=this.elements;for(let A=0;A<16;A++){const x=Math.round(g[A]);x===Math.round(g[A]*u)/u&&(g[A]=x)}return this}transpose(){const a=this.elements;let u;return u=a[1],a[1]=a[4],a[4]=u,u=a[2],a[2]=a[8],a[8]=u,u=a[6],a[6]=a[9],a[9]=u,u=a[3],a[3]=a[12],a[12]=u,u=a[7],a[7]=a[13],a[13]=u,u=a[11],a[11]=a[14],a[14]=u,this}setPosition(a){const u=this.elements;return u[12]=a.x,u[13]=a.y,u[14]=a.z,this}translate(a){const u=this.elements;return u[12]+=a.x,u[13]+=a.y,u[14]+=a.z,this}getInverse(a,u){const g=this.elements,A=a.elements,x=A[0],l=A[4],v=A[8],w=A[12],O=A[1],T=A[5],D=A[9],I=A[13],k=A[2],z=A[6],L=A[10],B=A[14],H=A[3],V=A[7],N=A[11],U=A[15];g[0]=D*B*V-I*L*V+I*z*N-T*B*N-D*z*U+T*L*U,g[4]=w*L*V-v*B*V-w*z*N+l*B*N+v*z*U-l*L*U,g[8]=v*I*V-w*D*V+w*T*N-l*I*N-v*T*U+l*D*U,g[12]=w*D*z-v*I*z-w*T*L+l*I*L+v*T*B-l*D*B,g[1]=I*L*H-D*B*H-I*k*N+O*B*N+D*k*U-O*L*U,g[5]=v*B*H-w*L*H+w*k*N-x*B*N-v*k*U+x*L*U,g[9]=w*D*H-v*I*H-w*O*N+x*I*N+v*O*U-x*D*U,g[13]=v*I*k-w*D*k+w*O*L-x*I*L-v*O*B+x*D*B,g[2]=T*B*H-I*z*H+I*k*V-O*B*V-T*k*U+O*z*U,g[6]=w*z*H-l*B*H-w*k*V+x*B*V+l*k*U-x*z*U,g[10]=l*I*H-w*T*H+w*O*V-x*I*V-l*O*U+x*T*U,g[14]=w*T*k-l*I*k-w*O*z+x*I*z+l*O*B-x*T*B,g[3]=D*z*H-T*L*H-D*k*V+O*L*V+T*k*N-O*z*N,g[7]=l*L*H-v*z*H+v*k*V-x*L*V-l*k*N+x*z*N,g[11]=v*T*H-l*D*H-v*O*V+x*D*V+l*O*N-x*T*N,g[15]=l*D*k-v*T*k+v*O*z-x*D*z-l*O*L+x*T*L;const G=x*g[0]+O*g[4]+k*g[8]+H*g[12];if(G===0){const $="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(u)throw new Error($);return console.warn($),this.identity(),this}return this.multiplyScalar(1/G),this}isReflected(){const a=this.elements,u=a[0],g=a[4],A=a[8],x=a[1],l=a[5],v=a[9],w=a[2],O=a[6],T=a[10];return u*l*T+x*O*A+w*g*v-w*l*A-x*g*T-u*O*v<0}scale(a){const u=this.elements,{x:g}=a,{y:A}=a,{z:x}=a;return u[0]*=g,u[4]*=A,u[8]*=x,u[1]*=g,u[5]*=A,u[9]*=x,u[2]*=g,u[6]*=A,u[10]*=x,u[3]*=g,u[7]*=A,u[11]*=x,this}getMaxScaleOnAxis(){const a=this.elements,u=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],g=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],A=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(u,Math.max(g,A)))}makeFrustum(a,u,g,A,x,l){const v=this.elements,w=2*x/(u-a),O=2*x/(A-g),T=(u+a)/(u-a),D=(A+g)/(A-g),I=-(l+x)/(l-x),k=-2*l*x/(l-x);return v[0]=w,v[4]=0,v[8]=T,v[12]=0,v[1]=0,v[5]=O,v[9]=D,v[13]=0,v[2]=0,v[6]=0,v[10]=I,v[14]=k,v[3]=0,v[7]=0,v[11]=-1,v[15]=0,this}makePerspective(a,u,g,A){const x=g*Math.tan((0,s.degToRad)(a*.5)),l=-x,v=l*u,w=x*u;return this.makeFrustum(v,w,l,x,g,A)}makeOrthographic(a,u,g,A,x,l){const v=this.elements,w=1/(u-a),O=1/(g-A),T=1/(l-x),D=(u+a)*w,I=(g+A)*O,k=(l+x)*T;return v[0]=2*w,v[4]=0,v[8]=0,v[12]=-D,v[1]=0,v[5]=2*O,v[9]=0,v[13]=-I,v[2]=0,v[6]=0,v[10]=-2*T,v[14]=-k,v[3]=0,v[7]=0,v[11]=0,v[15]=1,this}isEqual(a){const u=a.elements,g=this.elements;return g[0]===u[0]&&g[4]===u[4]&&g[8]===u[8]&&g[12]===u[12]&&g[1]===u[1]&&g[5]===u[5]&&g[9]===u[9]&&g[13]===u[13]&&g[2]===u[2]&&g[6]===u[6]&&g[10]===u[10]&&g[14]===u[14]&&g[3]===u[3]&&g[7]===u[7]&&g[11]===u[11]&&g[15]===u[15]}clone(){const a=this.elements;return new b(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}isIdentity(){const a=this.elements;return a[0]===1&&a[4]===0&&a[8]===0&&a[12]===0&&a[1]===0&&a[5]===1&&a[9]===0&&a[13]===0&&a[2]===0&&a[6]===0&&a[10]===1&&a[14]===0&&a[3]===0&&a[7]===0&&a[11]===0&&a[15]===1}isNearlyIdentity(a){return this.clone().snap(a).isIdentity()}getScale(a){const u=this.elements;return a=a||new C,c.set(u[0],u[1],u[2]),y.set(u[4],u[5],u[6]),_.set(u[8],u[9],u[10]),a.x=c.length(),a.y=y.length(),a.z=_.length(),a}lookAt(a,u,g){const A=this.elements;return _.subVectors(a,u).normalize(),_.length()===0&&(_.z=1),c.crossVectors(g,_).normalize(),c.length()===0&&(_.x+=1e-4,c.crossVectors(g,_).normalize()),y.crossVectors(_,c),A[0]=c.x,A[4]=y.x,A[8]=_.x,A[1]=c.y,A[5]=y.y,A[9]=_.y,A[2]=c.z,A[6]=y.z,A[10]=_.z,this}compose(a,u,g){const A=this.elements;return n.identity(),n.setRotationFromQuaternion(u),f.makeScale(g.x,g.y,g.z),this.multiplyMatrices(n,f),A[12]=a.x,A[13]=a.y,A[14]=a.z,this}}n=new b,f=new b;class C{constructor(a,u,g){this.x=a||0,this.y=u||0,this.z=g||0,this.atomid=void 0}set(a,u,g){return this.x=a,this.y=u,this.z=g,this}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this}addVectors(a,u){return this.x=a.x+u.x,this.y=a.y+u.y,this.z=a.z+u.z,this}multiplyVectors(a,u){return this.x=a.x*u.x,this.y=a.y*u.y,this.z=a.z*u.z,this}sub(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this}subVectors(a,u){return this.x=a.x-u.x,this.y=a.y-u.y,this.z=a.z-u.z,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}divideScalar(a){return a!==0?(this.x/=a,this.y/=a,this.z/=a):(this.x=0,this.y=0,this.z=0),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const u=this.x-a.x,g=this.y-a.y,A=this.z-a.z;return u*u+g*g+A*A}applyMatrix3(a){const{x:u}=this,{y:g}=this,{z:A}=this,x=a.elements;return this.x=x[0]*u+x[3]*g+x[6]*A,this.y=x[1]*u+x[4]*g+x[7]*A,this.z=x[2]*u+x[5]*g+x[8]*A,this}applyMatrix4(a){const{x:u}=this,{y:g}=this,{z:A}=this,x=a.elements;return this.x=x[0]*u+x[4]*g+x[8]*A+x[12],this.y=x[1]*u+x[5]*g+x[9]*A+x[13],this.z=x[2]*u+x[6]*g+x[10]*A+x[14],this}applyProjection(a){const{x:u}=this,{y:g}=this,{z:A}=this,x=a.elements,l=x[3]*u+x[7]*g+x[11]*A+x[15];return this.x=(x[0]*u+x[4]*g+x[8]*A+x[12])/l,this.y=(x[1]*u+x[5]*g+x[9]*A+x[13])/l,this.z=(x[2]*u+x[6]*g+x[10]*A+x[14])/l,this}applyQuaternion(a){const{x:u}=this,{y:g}=this,{z:A}=this,x=a.x,l=a.y,v=a.z,w=a.w,O={};O.x=2*(g*v-A*l),O.y=2*(A*x-u*v),O.z=2*(u*l-g*x);const T={};return T.x=O.y*v-O.z*l,T.y=O.z*x-O.x*v,T.z=O.x*l-O.y*x,this.x=u+w*O.x+T.x,this.y=g+w*O.y+T.y,this.z=A+w*O.z+T.z,this}negate(){return this.multiplyScalar(-1)}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(a){const{x:u}=this,{y:g}=this,{z:A}=this;return this.x=g*a.z-A*a.y,this.y=A*a.x-u*a.z,this.z=u*a.y-g*a.x,this}crossVectors(a,u){return this.x=a.y*u.z-a.z*u.y,this.y=a.z*u.x-a.x*u.z,this.z=a.x*u.y-a.y*u.x,this}equals(a){return this.x==a.x&&this.y==a.y&&this.z==a.z}getPositionFromMatrix(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this}setEulerFromRotationMatrix(a,u){const g=a.elements,A=g[0],x=g[4],l=g[8],v=g[5],w=g[9],O=g[6],T=g[10];return u===void 0||u==="XYZ"?(this.y=Math.asin((0,o.clamp)(l,-1,1)),Math.abs(l)<.99999?(this.x=Math.atan2(-w,T),this.z=Math.atan2(-x,A)):(this.x=Math.atan2(O,v),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${u}`),this}rotateAboutVector(a,u){a.normalize();const g=Math.cos(u),A=Math.sin(u),x=this.clone().multiplyScalar(g),l=a.clone().cross(this).multiplyScalar(A),v=a.clone().multiplyScalar(a.clone().dot(this)).multiplyScalar(1-g),w=x.add(l).add(v);return this.x=w.x,this.y=w.y,this.z=w.z,this}setFromMatrixPosition(a){const u=a.elements;return this.x=u[12],this.y=u[13],this.z=u[14],this}transformDirection(a){const{x:u}=this,{y:g}=this,{z:A}=this,x=a.elements;return this.x=x[0]*u+x[4]*g+x[8]*A,this.y=x[1]*u+x[5]*g+x[9]*A,this.z=x[2]*u+x[6]*g+x[10]*A,this.normalize()}clone(){return new C(this.x,this.y,this.z)}unproject(a){const u=n;return u.multiplyMatrices(a.matrixWorld,u.getInverse(a.projectionMatrix)),this.applyMatrix4(u)}}c=new C,y=new C,_=new C;class M{constructor(a=1,u=0,g=0,A=0,x=1,l=0,v=0,w=0,O=1){this.elements=new Float32Array(9),this.set(a,u,g,A,x,l,v,w,O)}set(a,u,g,A,x,l,v,w,O){const T=this.elements;return T[0]=a,T[3]=u,T[6]=g,T[1]=A,T[4]=x,T[7]=l,T[2]=v,T[5]=w,T[8]=O,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const u=a.elements;this.set(u[0],u[3],u[6],u[1],u[4],u[7],u[2],u[5],u[8])}multiplyScalar(a){const u=this.elements;return u[0]*=a,u[3]*=a,u[6]*=a,u[1]*=a,u[4]*=a,u[7]*=a,u[2]*=a,u[5]*=a,u[8]*=a,this}getInverse3(a){const u=a.elements,g=this.elements;g[0]=u[4]*u[8]-u[5]*u[7],g[3]=u[6]*u[5]-u[3]*u[8],g[6]=u[3]*u[7]-u[6]*u[4],g[1]=u[7]*u[2]-u[1]*u[8],g[4]=u[0]*u[8]-u[6]*u[2],g[7]=u[1]*u[6]-u[0]*u[7],g[2]=u[1]*u[5]-u[2]*u[4],g[5]=u[2]*u[3]-u[0]*u[5],g[8]=u[0]*u[4]-u[1]*u[3];const A=u[0]*g[0]+u[3]*g[1]+u[6]*g[2];return this.multiplyScalar(1/A),this}getInverse(a,u){const g=a.elements,A=this.elements;A[0]=g[10]*g[5]-g[6]*g[9],A[1]=-g[10]*g[1]+g[2]*g[9],A[2]=g[6]*g[1]-g[2]*g[5],A[3]=-g[10]*g[4]+g[6]*g[8],A[4]=g[10]*g[0]-g[2]*g[8],A[5]=-g[6]*g[0]+g[2]*g[4],A[6]=g[9]*g[4]-g[5]*g[8],A[7]=-g[9]*g[0]+g[1]*g[8],A[8]=g[5]*g[0]-g[1]*g[4];const x=g[0]*A[0]+g[1]*A[3]+g[2]*A[6];if(x===0){const l="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(u)throw new Error(l);return console.warn(l),this.identity(),this}return this.multiplyScalar(1/x),this}getDeterminant(){const a=this.elements;return a[0]*a[4]*a[8]+a[1]*a[5]*a[6]+a[2]*a[3]*a[7]-a[2]*a[4]*a[6]-a[1]*a[3]*a[8]-a[0]*a[5]*a[7]}transpose(){let a;const u=this.elements;return a=u[1],u[1]=u[3],u[3]=a,a=u[2],u[2]=u[6],u[6]=a,a=u[5],u[5]=u[7],u[7]=a,this}clone(){const a=this.elements;return new M(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}getMatrix4(){const a=this.elements;return new b(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0)}}class E{constructor(a,u){this.origin=a!==void 0?a:new C,this.direction=u!==void 0?u:new C}set(a,u){return this.origin.copy(a),this.direction.copy(u),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,u){return(u||new C).copy(this.direction).multiplyScalar(a).add(this.origin)}recast(a){const u=c;return this.origin.copy(this.at(a,u)),this}closestPointToPoint(a,u){const g=u||new C;g.subVectors(a,this.origin);const A=g.dot(this.direction);return g.copy(this.direction).multiplyScalar(A).add(this.origin)}distanceToPoint(a){const u=c,g=u.subVectors(a,this.origin).dot(this.direction);return u.copy(this.direction).multiplyScalar(g).add(this.origin),u.distanceTo(a)}isIntersectionCylinder(){}isIntersectionSphere(a){return this.distanceToPoint(a.center)<=a.radius}isIntersectionPlane(a){return a.normal.dot(this.direction)!==0||a.distanceToPoint(this.origin)===0}distanceToPlane(a){const u=a.normal.dot(this.direction);return u===0?a.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(a.normal)+a.constant)/u}intersectPlane(a,u){const g=this.distanceToPlane(a);if(g!==void 0)return this.at(g,u)}applyMatrix4(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this}clone(){return new E().copy(this)}}},"./src/WebGL/math/utils/clamp.ts":(e,t,r)=>{r.r(t),r.d(t,{clamp:()=>s});function s(o,n,f){return Math.min(Math.max(o,n),f)}},"./src/WebGL/math/utils/conversionMatrix3.ts":(e,t,r)=>{r.r(t),r.d(t,{conversionMatrix3:()=>o});var s=r("./src/WebGL/math/math.ts");function o(n,f,c,y,_,b){y=y*Math.PI/180,_=_*Math.PI/180,b=b*Math.PI/180;const C=g=>g*g,M=Math.cos(y),E=Math.cos(_),P=Math.cos(b),a=Math.sin(b);return new s.Matrix3(n,f*P,c*E,0,f*a,c*(M-E*P)/a,0,0,c*Math.sqrt(1-C(M)-C(E)-C(P)+2*M*E*P)/a)}},"./src/WebGL/math/utils/degToRad.ts":(e,t,r)=>{r.r(t),r.d(t,{degToRad:()=>o});const s=Math.PI/180;function o(n){return n*s}},"./src/WebGL/objects/Line.ts":(e,t,r)=>{r.r(t),r.d(t,{Line:()=>f,LineStyle:()=>n});var s=r("./src/WebGL/materials/index.ts"),o=r("./src/WebGL/core/index.ts"),n;(function(c){c[c.LineStrip=0]="LineStrip",c[c.LinePieces=1]="LinePieces"})(n||(n={}));class f extends o.Object3D{constructor(y,_=new s.LineBasicMaterial({color:Math.random()*16777215}),b=n.LineStrip){super(),this.geometry=y,this.material=_,this.type=b}clone(y=new f(this.geometry,this.material,this.type)){return super.clone.call(this,y),y}}},"./src/WebGL/objects/Mesh.ts":(e,t,r)=>{r.r(t),r.d(t,{Mesh:()=>o});var s=r("./src/WebGL/core/index.ts");class o extends s.Object3D{constructor(f,c){super(),this.geometry=f,this.material=c}clone(f){return f===void 0&&(f=new o(this.geometry,this.material)),super.clone.call(this,f),f}}},"./src/WebGL/objects/Sprite.ts":(e,t,r)=>{r.r(t),r.d(t,{Sprite:()=>n});var s=r("./src/WebGL/materials/index.ts"),o=r("./src/WebGL/core/index.ts");class n extends o.Object3D{constructor(c=new s.SpriteMaterial){super(),this.material=c,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(c=new n(this.material)){return o.Object3D.prototype.clone.call(this,c),c}}},"./src/WebGL/objects/index.ts":(e,t,r)=>{r.r(t),r.d(t,{Line:()=>s.Line,LineStyle:()=>s.LineStyle,Mesh:()=>o.Mesh,Sprite:()=>n.Sprite});var s=r("./src/WebGL/objects/Line.ts"),o=r("./src/WebGL/objects/Mesh.ts"),n=r("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts":(e,t,r)=>{r.r(t)},"./src/WebGL/shaders/index.ts":(e,t,r)=>{r.r(t),r.d(t,{ShaderLib:()=>s.ShaderLib,ShaderUtils:()=>o.ShaderUtils,basic:()=>s.basic,clone:()=>o.clone,instanced:()=>s.instanced,lambert:()=>s.lambert,lambertdouble:()=>s.lambertdouble,outline:()=>s.outline,screen:()=>s.screen,screenaa:()=>s.screenaa,sphereimposter:()=>s.sphereimposter,sphereimposteroutline:()=>s.sphereimposteroutline,sprite:()=>s.sprite,stickimposter:()=>s.stickimposter,stickimposteroutline:()=>s.stickimposteroutline,volumetric:()=>s.volumetric});var s=r("./src/WebGL/shaders/lib/index.ts"),o=r("./src/WebGL/shaders/utils/index.ts");r("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/index.ts":(e,t,r)=>{r.r(t),r.d(t,{basic:()=>f});var s=r("./src/WebGL/shaders/lib/basic/uniforms.ts"),o=r("./src/WebGL/shaders/lib/basic/basic.frag"),n=r("./src/WebGL/shaders/lib/basic/basic.vert");const f={vertexShader:n.default.replace("#define GLSLIFY 1",""),fragmentShader:o.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/index.ts":(e,t,r)=>{r.r(t),r.d(t,{ShaderLib:()=>u,basic:()=>s.basic,instanced:()=>o.instanced,lambert:()=>n.lambert,lambertdouble:()=>f.lambertdouble,outline:()=>c.outline,screen:()=>y.screen,screenaa:()=>_.screenaa,sphereimposter:()=>b.sphereimposter,sphereimposteroutline:()=>C.sphereimposteroutline,sprite:()=>M.sprite,stickimposter:()=>E.stickimposter,stickimposteroutline:()=>P.stickimposteroutline,volumetric:()=>a.volumetric});var s=r("./src/WebGL/shaders/lib/basic/index.ts"),o=r("./src/WebGL/shaders/lib/instanced/index.ts"),n=r("./src/WebGL/shaders/lib/lambert/index.ts"),f=r("./src/WebGL/shaders/lib/lambertdouble/index.ts"),c=r("./src/WebGL/shaders/lib/outline/index.ts"),y=r("./src/WebGL/shaders/lib/screen/index.ts"),_=r("./src/WebGL/shaders/lib/screenaa/index.ts"),b=r("./src/WebGL/shaders/lib/sphereimposter/index.ts"),C=r("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),M=r("./src/WebGL/shaders/lib/sprite/index.ts"),E=r("./src/WebGL/shaders/lib/stickimposter/index.ts"),P=r("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),a=r("./src/WebGL/shaders/lib/volumetric/index.ts");const u={basic:s.basic,instanced:o.instanced,lambert:n.lambert,lambertdouble:f.lambertdouble,outline:c.outline,screen:y.screen,screenaa:_.screenaa,sphereimposter:b.sphereimposter,sphereimposteroutline:C.sphereimposteroutline,sprite:M.sprite,stickimposter:E.stickimposter,stickimposteroutline:P.stickimposteroutline,volumetric:a.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts":(e,t,r)=>{r.r(t),r.d(t,{instanced:()=>f});var s=r("./src/WebGL/shaders/lib/instanced/uniforms.ts"),o=r("./src/WebGL/shaders/lib/instanced/instanced.frag"),n=r("./src/WebGL/shaders/lib/instanced/instanced.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/instanced/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts":(e,t,r)=>{r.r(t),r.d(t,{lambert:()=>f});var s=r("./src/WebGL/shaders/lib/lambert/uniforms.ts"),o=r("./src/WebGL/shaders/lib/lambert/lambert.frag"),n=r("./src/WebGL/shaders/lib/lambert/lambert.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/lambert/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts":(e,t,r)=>{r.r(t),r.d(t,{lambertdouble:()=>f});var s=r("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),o=r("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),n=r("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts":(e,t,r)=>{r.r(t),r.d(t,{outline:()=>f});var s=r("./src/WebGL/shaders/lib/outline/uniforms.ts"),o=r("./src/WebGL/shaders/lib/outline/outline.frag"),n=r("./src/WebGL/shaders/lib/outline/outline.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/outline/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new s.Color(0,0,0)},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},"./src/WebGL/shaders/lib/screen/index.ts":(e,t,r)=>{r.r(t),r.d(t,{screen:()=>f});var s=r("./src/WebGL/shaders/lib/screen/uniforms.ts"),o=r("./src/WebGL/shaders/lib/screen/screen.frag"),n=r("./src/WebGL/shaders/lib/screen/screen.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/screen/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/screenaa/index.ts":(e,t,r)=>{r.r(t),r.d(t,{screenaa:()=>f});var s=r("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),o=r("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),n=r("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/screenaa/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts":(e,t,r)=>{r.r(t),r.d(t,{sphereimposter:()=>f});var s=r("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),o=r("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),n=r("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const f={vertexShader:n.default.replace("#define GLSLIFY 1",""),fragmentShader:o.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":(e,t,r)=>{r.r(t),r.d(t,{sphereimposteroutline:()=>f});var s=r("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),o=r("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),n=r("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new s.Color(0,0,0)},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},"./src/WebGL/shaders/lib/sprite/index.ts":(e,t,r)=>{r.r(t),r.d(t,{sprite:()=>f});var s=r("./src/WebGL/shaders/lib/sprite/uniforms.ts"),o=r("./src/WebGL/shaders/lib/sprite/sprite.frag"),n=r("./src/WebGL/shaders/lib/sprite/sprite.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/sprite/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>s});const s={}},"./src/WebGL/shaders/lib/stickimposter/index.ts":(e,t,r)=>{r.r(t),r.d(t,{stickimposter:()=>y});var s=r("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),o=r("./src/WebGL/shaders/utils/stickimposterFragmentShader.partial.frag"),n=r("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),f=r("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const y={fragmentShader:[o.default,n.default].join(`
`).replace("#define GLSLIFY 1",""),vertexShader:f.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":(e,t,r)=>{r.r(t),r.d(t,{stickimposteroutline:()=>c});var s=r("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),o=r("./src/WebGL/shaders/utils/stickimposterFragmentShader.partial.frag"),n=r("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const c={fragmentShader:(o.default+"gl_FragColor = vec4(color,1.0);}").replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new s.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},"./src/WebGL/shaders/lib/volumetric/index.ts":(e,t,r)=>{r.r(t),r.d(t,{volumetric:()=>f});var s=r("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),o=r("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),n=r("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const f={fragmentShader:o.default.replace("#define GLSLIFY 1",""),vertexShader:n.default.replace("#define GLSLIFY 1",""),uniforms:s.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts":(e,t,r)=>{r.r(t),r.d(t,{uniforms:()=>o});var s=r("./src/colors.ts");const o={opacity:{type:"f",value:1},fogColor:{type:"c",value:new s.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/utils/clone.ts":(e,t,r)=>{r.r(t),r.d(t,{clone:()=>o});var s=r("./src/colors.ts");function o(n){let f={};for(const y in n){f[y]={},f[y].type=n[y].type;var c=n[y].value;c instanceof s.Color?f[y].value=c.clone():typeof c=="number"?f[y].value=c:c instanceof Array?f[y].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return f}},"./src/WebGL/shaders/utils/index.ts":(e,t,r)=>{r.r(t),r.d(t,{ShaderUtils:()=>n,clone:()=>s.clone});var s=r("./src/WebGL/shaders/utils/clone.ts"),o=r("./src/WebGL/shaders/utils/stickimposterFragmentShader.partial.frag");const n={clone:s.clone,stickimposterFragmentShader:o.default}},"./src/WebGL/shapes/Cylinder.ts":(e,t,r)=>{r.r(t),r.d(t,{Cylinder:()=>n});var s=r("./src/WebGL/math/index.ts");let o=new s.Vector3;class n{constructor(c=new s.Vector3,y=new s.Vector3,_=0){this.c1=c,this.c2=y,this.radius=_,this.direction=new s.Vector3().subVectors(this.c2,this.c1).normalize()}copy(c){return this.c1.copy(c.c1),this.c2.copy(c.c2),this.direction.copy(c.direction),this.radius=c.radius,this}lengthSq(){return o.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(c){return this.direction.add(this.c1).applyMatrix4(c),this.c1.applyMatrix4(c),this.c2.applyMatrix4(c),this.direction.sub(this.c1).normalize(),this.radius=this.radius*c.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts":(e,t,r)=>{r.r(t),r.d(t,{Sphere:()=>o});var s=r("./src/WebGL/math/index.ts");class o{constructor(f={x:0,y:0,z:0},c=0){this.center=new s.Vector3(f.x,f.y,f.z),this.radius=c}set(f,c){return this.center.copy(f),this.radius=c,this}copy(f){return this.center.copy(f.center),this.radius=f.radius,this}applyMatrix4(f){return this.center.applyMatrix4(f),this.radius=this.radius*f.getMaxScaleOnAxis(),this}translate(f){return this.center.add(f),this}equals(f){return f.center.equals(this.center)&&f.radius===this.radius}clone(){return new o().copy(this)}}},"./src/WebGL/shapes/Triangle.ts":(e,t,r)=>{r.r(t),r.d(t,{Triangle:()=>n});var s=r("./src/WebGL/math/index.ts");const o=new s.Vector3;class n{constructor(c=new s.Vector3,y=new s.Vector3,_=new s.Vector3){this.a=c,this.b=y,this.c=_}copy(c){return this.a.copy(c.a),this.b.copy(c.b),this.c.copy(c.c),this}applyMatrix4(c){return this.a.applyMatrix4(c),this.b.applyMatrix4(c),this.c.applyMatrix4(c),this}getNormal(){var c=this.a.clone();return c.sub(this.b),o.subVectors(this.c,this.b),c.cross(o),c.normalize(),c}}},"./src/WebGL/shapes/index.ts":(e,t,r)=>{r.r(t),r.d(t,{Cylinder:()=>o.Cylinder,Sphere:()=>s.Sphere,Triangle:()=>n.Triangle});var s=r("./src/WebGL/shapes/Sphere.ts"),o=r("./src/WebGL/shapes/Cylinder.ts"),n=r("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{autoinit:()=>autoinit,autoload:()=>autoload,processing_autoinit:()=>processing_autoinit,viewers:()=>viewers});var _GLViewer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/GLViewer.ts"),_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ProteinSurface4.ts"),_utilities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/utilities.ts"),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/colors.ts"),autoinit=!1,processing_autoinit=!1,viewers={};function autoload(viewer,callback){var i,dataname,type;if(document.querySelector(".viewer_3Dmoljs")!=null&&(autoinit=!0),autoinit){processing_autoinit=!0,viewer=viewer??null;var nviewers=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(viewerdiv=>{var datauri=[],datatypes=[],uri="";viewerdiv.style.position=="static"&&(viewerdiv.style.position="relative");var UI=null;if(type=null,viewerdiv.dataset.pdb)datauri.push("https://files.rcsb.org/view/"+viewerdiv.dataset.pdb+".pdb"),datatypes.push("pdb");else if(viewerdiv.dataset.cid)datatypes.push("sdf"),datauri.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+viewerdiv.dataset.cid+"/SDF?record_type=3d");else if(viewerdiv.dataset.href||viewerdiv.dataset.url){viewerdiv.dataset.href?uri=viewerdiv.dataset.href:uri=viewerdiv.dataset.url,datauri.push(uri),type=uri.substring(uri.lastIndexOf(".")+1),datatypes.push(type);var molName=uri.substring(uri.lastIndexOf("/")+1,uri.lastIndexOf("."));molName=="/"&&(molName=uri.substring(uri.lastIndexOf("/")+1)),viewerdiv.dataset[datatypes[datatypes.length-1]]=molName}var divdata=viewerdiv.dataset;for(i in divdata)i.substring(0,3)==="pdb"&&i!=="pdb"?(datauri.push("https://files.rcsb.org/view/"+divdata[i]+".pdb"),datatypes.push("pdb")):i.substring(0,4)==="href"&&i!=="href"?(uri=divdata[i],datauri.push(uri),datatypes.push(uri.substr(uri.lastIndexOf(".")+1))):i.substring(0,3)==="cid"&&i!=="cid"&&(datauri.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+divdata[i]+"/SDF?record_type=3d"),datatypes.push("sdf"));var options={};viewerdiv.dataset.options&&(options=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.options));var bgcolor=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(viewerdiv.dataset.backgroundcolor),bgalpha=viewerdiv.dataset.backgroundalpha;bgalpha=bgalpha==null?1:parseFloat(bgalpha);var style={line:{}};viewerdiv.dataset.style&&(style=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.style));var select={};viewerdiv.dataset.select&&(select=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.select));var selectstylelist=[],surfaces=[],labels=[],zoomto={},spin=null,d=viewerdiv.dataset,stylere=/style(.+)/,surfre=/surface(.*)/,reslabre=/labelres(.*)/,keys=[];for(dataname in d)Object.prototype.hasOwnProperty.call(d,dataname)&&keys.push(dataname);for(keys.sort(),i=0;i<keys.length;i++){dataname=keys[i];var m=stylere.exec(dataname),selname,newsel,styleobj;m&&(selname="select"+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),selectstylelist.push([newsel,styleobj])),m=surfre.exec(dataname),m&&(selname="select"+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),surfaces.push([newsel,styleobj])),m=reslabre.exec(dataname),m&&(selname="select"+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),labels.push([newsel,styleobj])),dataname=="zoomto"&&(zoomto=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname])),dataname=="spin"&&(spin=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]))}var applyStyles=function(e){for(e.setStyle(select,style),UI&&UI.createSelectionAndStyle(select,style),i=0;i<selectstylelist.length;i++){let t=selectstylelist[i][0]||{},r=selectstylelist[i][1]||{line:{}};e.setStyle(t,r),UI&&UI.createSelectionAndStyle(select,style)}for(i=0;i<surfaces.length;i++){let t=surfaces[i][0]||{},r=surfaces[i][1]||{};UI?e.addSurface(_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__.SurfaceType.VDW,r,t,t).then(o=>{UI.loadSurface("VDW",t,r,o)}):e.addSurface(_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__.SurfaceType.VDW,r,t,t)}for(i=0;i<labels.length;i++){let t=labels[i][0]||{},r=labels[i][1]||{};e.addResLabels(t,r)}e.render(),e.zoomTo(zoomto),spin&&e.spin(spin.axis,spin.speed)},glviewer=viewer;try{var config=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.config)||{};config.backgroundColor===void 0&&(config.backgroundColor=bgcolor),config.backgroundAlpha===void 0&&(config.backgroundAlpha=bgalpha),glviewer==null?glviewer=viewers[viewerdiv.id||nviewers++]=(0,_GLViewer__WEBPACK_IMPORTED_MODULE_0__.createViewer)(viewerdiv,config):(glviewer.setBackgroundColor(bgcolor,bgalpha),glviewer.setConfig(config),UI&&UI.initiateUI()),viewerdiv.dataset.ui&&$3Dmol.StateManager&&(UI=new $3Dmol.StateManager(glviewer))}catch(e){console.log(e),viewerdiv.textContent="WebGL appears to be disabled."}if(datauri.length!=0){i=0;var process=function(moldata){uri=datauri[i];var type=viewerdiv.dataset.type||viewerdiv.dataset.datatype||datatypes[i];if(glviewer.addModel(moldata,type,options),UI){var modelName=viewerdiv.dataset[datatypes[i]];UI.setModelTitle(modelName)}if(i+=1,i<datauri.length)(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.get)(datauri[i]).then(process);else{if(applyStyles(glviewer),viewerdiv.dataset.callback){var runres=eval(viewerdiv.dataset.callback);typeof runres=="function"&&runres(glviewer)}processing_autoinit=!1,callback&&callback(glviewer)}};(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.get)(datauri[0]).then(process)}else{if(viewerdiv.dataset.element){var moldataid="#"+viewerdiv.dataset.element,molelem=document.querySelector(moldataid),moldata=molelem?molelem.textContent:"";type=viewerdiv.dataset.type||viewerdiv.dataset.datatype,glviewer.addModel(moldata,type,options)}if(applyStyles(glviewer),viewerdiv.dataset.callback){var runres=eval(viewerdiv.dataset.callback);typeof runres=="function"&&runres(glviewer)}processing_autoinit=!1,callback&&callback(glviewer)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&autoload()}},"./src/colors.ts":(e,t,r)=>{r.r(t),r.d(t,{CC:()=>o,Color:()=>s,builtinColorSchemes:()=>C,chains:()=>b,elementColors:()=>y,htmlColors:()=>n,residues:()=>_,ssColors:()=>f});class s{constructor(E,P,a){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof E=="number"?(this.r=E||0,this.g=P||0,this.b=a||0,this):this.set(E||0)}set(E){return E instanceof s?E.clone():(typeof E=="number"?this.setHex(E):typeof E=="object"&&(this.r=(E==null?void 0:E.r)||0,this.g=(E==null?void 0:E.g)||0,this.b=(E==null?void 0:E.b)||0),this)}setHex(E){return E=Math.floor(E),this.r=(E>>16&255)/255,this.g=(E>>8&255)/255,this.b=(E&255)/255,this}getHex(){var E=Math.round(this.r*255),P=Math.round(this.g*255),a=Math.round(this.b*255);return E<<16|P<<8|a}clone(){return new s(this.r,this.g,this.b)}copy(E){return this.r=E.r,this.g=E.g,this.b=E.b,this}scaled(){var E={};return E.r=Math.round(this.r*255),E.g=Math.round(this.g*255),E.b=Math.round(this.b*255),E.a=1,E}}class o{static color(E){if(!E)return o.cache[0];if(E instanceof s)return E;if(typeof E=="number"&&typeof o.cache[E]<"u")return o.cache[E];if(E&&Array.isArray(E))return E.map(o.color);let P=o.getHex(E),a=new s(P);return o.cache[P]=a,a}static getHex(E){var P;if(Array.isArray(E))return E.map(o.getHex);if(typeof E=="string"){let a=E;if(!isNaN(parseInt(a)))return parseInt(a);if(a=a.trim(),a.length==4&&a[0]=="#"&&(a="#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]),a.length==7&&a[0]=="#")return parseInt(a.substring(1),16);let u=o.rgbRegEx.exec(a);if(u){u[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let g=0;for(let A=2;A<5;A++){g*=256;let x=u[A].endsWith("%")?255*parseFloat(u[A])/100:parseFloat(u[A]);g+=Math.round(x)}return g}return((P=window==null?void 0:window.$3Dmol)===null||P===void 0?void 0:P.htmlColors[E.toLowerCase()])||0}return E}}o.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,o.cache={0:new s(0)};const n={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},f={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},c={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},y={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:c,defaultColors:Object.assign({},c),greenCarbon:Object.assign(Object.assign({},c),{C:65280}),cyanCarbon:Object.assign(Object.assign({},c),{C:65535}),magentaCarbon:Object.assign(Object.assign({},c),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},c),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},c),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},c),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},c),{C:8388736}),blueCarbon:Object.assign(Object.assign({},c),{C:255})},_={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},b={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},C={ssPyMol:{prop:"ss",map:f.pyMol},ssJmol:{prop:"ss",map:f.Jmol},Jmol:{prop:"elem",map:y.Jmol},amino:{prop:"resn",map:_.amino},shapely:{prop:"resn",map:_.shapely},nucleic:{prop:"resn",map:_.nucleic},chain:{prop:"chain",map:b.atom},rasmol:{prop:"elem",map:y.rasmol},default:{prop:"elem",map:y.defaultColors},greenCarbon:{prop:"elem",map:y.greenCarbon},chainHetatm:{prop:"chain",map:b.hetatm},cyanCarbon:{prop:"elem",map:y.cyanCarbon},magentaCarbon:{prop:"elem",map:y.magentaCarbon},purpleCarbon:{prop:"elem",map:y.purpleCarbon},whiteCarbon:{prop:"elem",map:y.whiteCarbon},orangeCarbon:{prop:"elem",map:y.orangeCarbon},yellowCarbon:{prop:"elem",map:y.yellowCarbon},blueCarbon:{prop:"elem",map:y.blueCarbon}}},"./src/glcartoon.ts":(e,t,r)=>{r.r(t),r.d(t,{drawCartoon:()=>z,subdivide_spline:()=>b});var s=r("./src/WebGL/math/index.ts"),o=r("./src/WebGL/shapes/index.ts"),n=r("./src/WebGL/index.ts"),f=r("./src/Gradient.ts"),c=r("./src/colors.ts"),y=r("./src/GLDraw.ts"),_=r("./src/utilities.ts");function b(L,B){var H=[],V=L;V=[],V.push(L[0]);var N,U,G,$,W,j,se,he,ce;for(N=1,U=L.length-1;N<U;N++)if(W=L[N],j=L[N+1],W.smoothen){var ue=new s.Vector3((W.x+j.x)/2,(W.y+j.y)/2,(W.z+j.z)/2);ue.atom=W.atom,V.push(ue)}else V.push(W);for(V.push(L[L.length-1]),N=-1,G=V.length;N<=G-3;N++)if($=V[N===-1?0:N],W=V[N+1],j=V[N+2],se=V[N===G-3?G-1:N+3],he=new s.Vector3().subVectors(j,$).multiplyScalar(.5),ce=new s.Vector3().subVectors(se,W).multiplyScalar(.5),!j.skip)for(var Ee=0;Ee<B;Ee++){var pe=1/B*Ee,fe=W.x+pe*he.x+pe*pe*(-3*W.x+3*j.x-2*he.x-ce.x)+pe*pe*pe*(2*W.x-2*j.x+he.x+ce.x),Ue=W.y+pe*he.y+pe*pe*(-3*W.y+3*j.y-2*he.y-ce.y)+pe*pe*pe*(2*W.y-2*j.y+he.y+ce.y),Oe=W.z+pe*he.z+pe*pe*(-3*W.z+3*j.z-2*he.z-ce.z)+pe*pe*pe*(2*W.z-2*j.z+he.z+ce.z),ee=new s.Vector3(fe,Ue,Oe);Ee<B/2?ee.atom=W.atom:ee.atom=j.atom,H.push(ee)}return H.push(V[V.length-1]),H}const C=.5,M=1.3,E=.8,P=.4,a=.4;function u(L,B,H,V){for(var N,U,G,$,W=0,j=B.length;W<j;W++){$=Math.round(W*(V.length-1)/j),G=c.CC.color(V[$]);var se=L.updateGeoGroup(2),he=se.vertexArray,ce=se.colorArray,ue=se.faceArray;N=se.vertices,U=N*3,he[U]=B[W].x,he[U+1]=B[W].y,he[U+2]=B[W].z,he[U+3]=H[W].x,he[U+4]=H[W].y,he[U+5]=H[W].z;for(var Ee=0;Ee<6;++Ee)ce[U+3*Ee]=G.r,ce[U+1+3*Ee]=G.g,ce[U+2+3*Ee]=G.b;if(W>0){var pe=[N,N+1,N-1,N-2],fe=se.faceidx;ue[fe]=pe[0],ue[fe+1]=pe[1],ue[fe+2]=pe[3],ue[fe+3]=pe[1],ue[fe+4]=pe[2],ue[fe+5]=pe[3],se.faceidx+=6}se.vertices+=2}}function g(L,B,H,V,N,U,G){var $,W,j,se;if(j=B.length,j<2||B[0].length<2)return;for($=0;$<j;$++)B[$]=b(B[$],V);if(se=B[0].length,!N)return u(L,B[0],B[j-1],H);var he,ce,ue,Ee,pe,fe,Ue=[],Oe=[],ee=[];for(W=0;W<j;W++)Ue.push(.25+1.5*Math.sqrt((j-1)*W-Math.pow(W,2))/(j-1)),Oe.push(.5),ee.push(2*(Math.pow(W/j,2)-W/j)+.6);var J=[];for(W=0;W<j*2-1;W++)J[W]=[W,W+1,W+1-2*j,W-2*j];J[j*2-1]=[W,W+1-2*j,W+1-4*j,W-2*j];var ne,le,we,Pe,Be,Ce,be,ge,Ae,De;let Re=L.updateGeoGroup();for($=0;$<se;$++){let Z=L.groups,ie=!1;Re=L.updateGeoGroup(2*j),Z!=L.groups&&$>0&&($=$-1,ie=!0),Ce=Math.round($*(H.length-1)/se),Be=c.CC.color(H[Ce]),pe=ue,fe=Ee,ue=[],Ee=[],he=[],B[0][$].atom!==void 0&&(Pe=B[0][$].atom,G==="oval"?ce=Ue:G==="rectangle"?ce=Oe:G==="parabola"&&(ce=ee)),ce||(ce=Oe);var Ge,Ke;for(W=0;W<j;W++)$<se-1?Ge=B[W][$+1].clone().sub(B[W][$]):Ge=B[W][$-1].clone().sub(B[W][$]).negate(),W<j-1?Ke=B[W+1][$].clone().sub(B[W][$]):Ke=B[W-1][$].clone().sub(B[W][$]).negate(),he[W]=Ke.cross(Ge).normalize().multiplyScalar(N*ce[W]);for(W=0;W<j;W++)ue[W]=B[W][$].clone().add(he[W].clone().negate());for(W=0;W<j;W++)Ee[W]=B[W][$].clone().add(he[W]);for(be=Re.vertexArray,ge=Re.colorArray,Ae=Re.faceArray,ne=Re.vertices,le=ne*3,W=0;W<j;W++)be[le+3*W+0]=ue[W].x,be[le+3*W+1]=ue[W].y,be[le+3*W+2]=ue[W].z;for(W=0;W<j;W++)be[le+3*W+0+3*j]=Ee[j-1-W].x,be[le+3*W+1+3*j]=Ee[j-1-W].y,be[le+3*W+2+3*j]=Ee[j-1-W].z;for(W=0;W<2*j;++W)ge[le+3*W+0]=Be.r,ge[le+3*W+1]=Be.g,ge[le+3*W+2]=Be.b;if($>0&&!ie){for(W=0;W<j*2;W++)De=[ne+J[W][0],ne+J[W][1],ne+J[W][2],ne+J[W][3]],we=Re.faceidx,Ae[we]=De[0],Ae[we+1]=De[1],Ae[we+2]=De[3],Ae[we+3]=De[1],Ae[we+4]=De[2],Ae[we+5]=De[3],Re.faceidx+=6;if(Pe.clickable||Pe.hoverable){var Q=[];Q.push(new o.Triangle(pe[0],ue[0],ue[j-1])),Q.push(new o.Triangle(pe[0],ue[j-1],pe[j-1])),Q.push(new o.Triangle(pe[j-1],ue[j-1],Ee[j-1])),Q.push(new o.Triangle(pe[j-1],Ee[j-1],fe[j-1])),Q.push(new o.Triangle(Ee[0],fe[0],fe[j-1])),Q.push(new o.Triangle(Ee[j-1],Ee[0],fe[j-1])),Q.push(new o.Triangle(ue[0],pe[0],fe[0])),Q.push(new o.Triangle(Ee[0],ue[0],fe[0]));for(W in Q)Pe.intersectionShape.triangle.push(Q[W])}}Re.vertices+=2*j}for(be=Re.vertexArray,ge=Re.colorArray,Ae=Re.faceArray,ne=Re.vertices,le=ne*3,we=Re.faceidx,$=0;$<j-1;$++)De=[$,$+1,2*j-2-$,2*j-1-$],we=Re.faceidx,Ae[we]=De[0],Ae[we+1]=De[1],Ae[we+2]=De[3],Ae[we+3]=De[1],Ae[we+4]=De[2],Ae[we+5]=De[3],Re.faceidx+=6;for($=0;$<j-1;$++)De=[ne-1-$,ne-2-$,ne-2*j+$+1,ne-2*j+$],we=Re.faceidx,Ae[we]=De[0],Ae[we+1]=De[1],Ae[we+2]=De[3],Ae[we+3]=De[1],Ae[we+4]=De[2],Ae[we+5]=De[3],Re.faceidx+=6}function A(L,B,H,V,N,U){if(!(B.length<2)){var G,$;if(G=B[0],$=B[B.length-1],G=b(G,V),$=b($,V),!N)return u(L,G,$,H);var W=[],j,se,he,ce,ue,Ee=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],pe,fe,Ue,Oe,ee,J,ne,le,we,Pe,Be,Ce,be,ge,Ae,De,Re;for(le=0,we=G.length;le<we;le++){if(ee=Math.round(le*(H.length-1)/we),Oe=c.CC.color(H[ee]),W.push(se=G[le]),W.push(se),W.push(he=$[le]),W.push(he),le<we-1){var Ge=G[le+1].clone().sub(G[le]),Ke=$[le].clone().sub(G[le]);j=Ke.cross(Ge).normalize().multiplyScalar(N)}for(W.push(ce=G[le].clone().add(j)),W.push(ce),W.push(ue=$[le].clone().add(j)),W.push(ue),se.atom!==void 0&&(J=se.atom),ge=L.updateGeoGroup(8),Ae=ge.vertexArray,De=ge.colorArray,Re=ge.faceArray,pe=ge.vertices,fe=pe*3,Ae[fe]=se.x,Ae[fe+1]=se.y,Ae[fe+2]=se.z,Ae[fe+3]=se.x,Ae[fe+4]=se.y,Ae[fe+5]=se.z,Ae[fe+6]=he.x,Ae[fe+7]=he.y,Ae[fe+8]=he.z,Ae[fe+9]=he.x,Ae[fe+10]=he.y,Ae[fe+11]=he.z,Ae[fe+12]=ce.x,Ae[fe+13]=ce.y,Ae[fe+14]=ce.z,Ae[fe+15]=ce.x,Ae[fe+16]=ce.y,Ae[fe+17]=ce.z,Ae[fe+18]=ue.x,Ae[fe+19]=ue.y,Ae[fe+20]=ue.z,Ae[fe+21]=ue.x,Ae[fe+22]=ue.y,Ae[fe+23]=ue.z,Pe=0;Pe<8;++Pe)De[fe+3*Pe]=Oe.r,De[fe+1+3*Pe]=Oe.g,De[fe+2+3*Pe]=Oe.b;if(le>0){var Q=ne!==void 0&&J!==void 0&&ne.serial!==J.serial;for(Pe=0;Pe<4;Pe++){var Z=[pe+Ee[Pe][0],pe+Ee[Pe][1],pe+Ee[Pe][2],pe+Ee[Pe][3]];if(Ue=ge.faceidx,Re[Ue]=Z[0],Re[Ue+1]=Z[1],Re[Ue+2]=Z[3],Re[Ue+3]=Z[1],Re[Ue+4]=Z[2],Re[Ue+5]=Z[3],ge.faceidx+=6,J.clickable||ne.clickable||J.hoverable||ne.hoverable){var ie=W[Z[3]].clone(),ye=W[Z[0]].clone(),xe=W[Z[2]].clone(),Ne=W[Z[1]].clone();if(ie.atom=W[Z[3]].atom||null,xe.atom=W[Z[2]].atom||null,ye.atom=W[Z[0]].atom||null,Ne.atom=W[Z[1]].atom||null,Q){var Ve=ie.clone().add(ye).multiplyScalar(.5),X=xe.clone().add(Ne).multiplyScalar(.5),ve=ie.clone().add(Ne).multiplyScalar(.5);Pe%2===0?((ne.clickable||ne.hoverable)&&(Be=new o.Triangle(Ve,ve,ie),Ce=new o.Triangle(X,xe,ve),be=new o.Triangle(ve,xe,ie),ne.intersectionShape.triangle.push(Be),ne.intersectionShape.triangle.push(Ce),ne.intersectionShape.triangle.push(be)),(J.clickable||J.hoverable)&&(Be=new o.Triangle(ye,Ne,ve),Ce=new o.Triangle(Ne,X,ve),be=new o.Triangle(ye,ve,Ve),J.intersectionShape.triangle.push(Be),J.intersectionShape.triangle.push(Ce),J.intersectionShape.triangle.push(be))):((J.clickable||J.hoverable)&&(Be=new o.Triangle(Ve,ve,ie),Ce=new o.Triangle(X,xe,ve),be=new o.Triangle(ve,xe,ie),J.intersectionShape.triangle.push(Be),J.intersectionShape.triangle.push(Ce),J.intersectionShape.triangle.push(be)),(ne.clickable||ne.hoverable)&&(Be=new o.Triangle(ye,Ne,ve),Ce=new o.Triangle(Ne,X,ve),be=new o.Triangle(ye,ve,Ve),ne.intersectionShape.triangle.push(Be),ne.intersectionShape.triangle.push(Ce),ne.intersectionShape.triangle.push(be)))}else(J.clickable||J.hoverable)&&(Be=new o.Triangle(ye,Ne,ie),Ce=new o.Triangle(Ne,xe,ie),J.intersectionShape.triangle.push(Be),J.intersectionShape.triangle.push(Ce))}}}ge.vertices+=8,ne=J}var Me=W.length-8;for(ge=L.updateGeoGroup(8),Ae=ge.vertexArray,De=ge.colorArray,Re=ge.faceArray,pe=ge.vertices,fe=pe*3,Ue=ge.faceidx,le=0;le<4;le++){W.push(W[le*2]),W.push(W[Me+le*2]);var He=W[le*2],me=W[Me+le*2];Ae[fe+6*le]=He.x,Ae[fe+1+6*le]=He.y,Ae[fe+2+6*le]=He.z,Ae[fe+3+6*le]=me.x,Ae[fe+4+6*le]=me.y,Ae[fe+5+6*le]=me.z,De[fe+6*le]=Oe.r,De[fe+1+6*le]=Oe.g,De[fe+2+6*le]=Oe.b,De[fe+3+6*le]=Oe.r,De[fe+4+6*le]=Oe.g,De[fe+5+6*le]=Oe.b}Me+=8,Be=[pe,pe+2,pe+6,pe+4],Ce=[pe+1,pe+5,pe+7,pe+3],Re[Ue]=Be[0],Re[Ue+1]=Be[1],Re[Ue+2]=Be[3],Re[Ue+3]=Be[1],Re[Ue+4]=Be[2],Re[Ue+5]=Be[3],Re[Ue+6]=Ce[0],Re[Ue+7]=Ce[1],Re[Ue+8]=Ce[3],Re[Ue+9]=Ce[1],Re[Ue+10]=Ce[2],Re[Ue+11]=Ce[3],ge.faceidx+=12,ge.vertices+=8}}function x(L,B,H,V,N,U,G){(!G||G==="default")&&(G="rectangle"),G==="edged"?A(L,B,H,V,N):(G==="rectangle"||G==="oval"||G==="parabola")&&g(L,B,H,V,N,U,G)}function l(L){return L&&L.elem==="C"&&L.atom==="CA"}function v(L,B){if(L&&B&&L.chain===B.chain){if(!L.hetflag&&!B.hetflag&&L.reschain===B.reschain&&(L.resi===B.resi||L.resi===B.resi-1))return!0;if(L.resi<B.resi){var H=L.x-B.x,V=L.y-B.y,N=L.z-B.z,U=H*H+V*V+N*N;if(L.atom=="CA"&&B.atom=="CA"&&U<16)return!0;if((L.atom=="P"||B.atom=="P")&&U<64)return!0}}return!1}function w(L,B,H,V,N){if(!(B==null||B.vertices==0)){N&&(B.initTypedArrays(),B.setUpNormals());var U=new n.MeshDoubleLambertMaterial;U.vertexColors=n.Coloring.FaceColors,typeof H=="number"&&H>=0&&H<1&&(U.transparent=!0,U.opacity=H),U.outline=V;var G=new n.Mesh(B,U);L.add(G)}}function O(L,B,H,V,N,U,G,$,W){var j,se,he,ce,ue,Ee;if(!(!V||!N||!G)){var pe=N.sub(V);pe.normalize();var fe=$[W];for(se=W+1;se<$.length&&(fe=$[se],fe.atom!=G.atom);se++);if(fe=fe?new s.Vector3(fe.x,fe.y,fe.z):new s.Vector3(0,0,0),fe.sub(V),G.ss==="arrow start"){var Ue=fe.clone().multiplyScalar(.3).cross(N);V.add(Ue);var Oe=fe.clone().cross(pe).normalize();pe.rotateAboutVector(Oe,.43)}for(G.style.cartoon.ribbon?j=G.style.cartoon.thickness||P:G.style.cartoon.width?j=G.style.cartoon.width:G.ss==="c"?G.atom==="P"?j=E:j=C:G.ss==="arrow start"?(j=M,ue=!0):G.ss==="arrow end"||G.ss==="h"&&G.style.cartoon.tubes||G.ss==="tube start"?j=C:j=M,U!=null&&pe.dot(U)<0&&pe.negate(),pe.multiplyScalar(j),se=0;se<B;se++)he=-1+se*2/(B-1),ce=new s.Vector3(V.x+he*pe.x,V.y+he*pe.y,V.z+he*pe.z),ce.atom=G,H&&G.ss==="s"&&(ce.smoothen=!0),L[se].push(ce);if(ue)for(pe.multiplyScalar(2),se=0;se<B;se++)he=-1+se*2/(B-1),ce=new s.Vector3(V.x+he*pe.x,V.y+he*pe.y,V.z+he*pe.z),ce.atom=G,ce.smoothen=!1,ce.skip=!0,L[se].push(ce);return Ee=G.style.cartoon.style||"default",L.style?L.style!=Ee&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),L.style="default"):L.style=Ee,(G.ss==="arrow start"||G.ss==="arrow end")&&(G.ss="s"),ue}}const T={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},D={DA:!0,DG:!0,A:!0,G:!0},I={DT:!0,DC:!0,U:!0,C:!0,T:!0},k={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function z(L,B,H,V=10){let N=V,U=V;var G,$,W,j,se,he,ce,ue,Ee,pe,fe,Ue,Oe,ee,J,ne,le,we,Pe=new n.Geometry(!0),Be=new n.Geometry(!0),Ce=[],be=[],ge=1,Ae=!1,De={};for(var Re in f.Gradient.builtinGradients)f.Gradient.builtinGradients.hasOwnProperty(Re)&&(De[Re]=new f.Gradient.builtinGradients[Re](H[1],H[0]));var Ge=function(Y,We){return H&&We.color==="spectrum"?We.colorscheme in De?De[We.colorscheme].valueToHex(Y.resi):De.sinebow.valueToHex(Y.resi):(0,_.getColorFromStyle)(Y,We).getHex()};for(ue=0;ue<N;ue++)be[ue]=[];var Ke=!1,Q=!1,Z=[];for(ue in B){if(j=B[ue],j.elem==="C"&&j.atom==="CA"){var ie=v(W,j);ie&&j.ss==="s"?Ke=!0:Ke&&(W&&$&&W.style.cartoon.arrows&&$.style.cartoon.arrows&&(W.ss="arrow end",$.ss="arrow start"),Ke=!1),ie&&(W.ss==="h"||W.ss=="tube start")&&W.style.cartoon.tubes?!Q&&W.ss!="tube start"&&j.style.cartoon.tubes&&(j.ss="tube start",Q=!0):Q&&(W.ss==="tube start"?W.ss="tube end":$&&$.style.cartoon.tubes&&($.ss="tube end"),Q=!1),$=W,W=j}j&&j.atom in T&&Z.push(j)}Q&&W.style.cartoon.tubes&&(W.ss="tube end",Q=!1);var ye=function(Y){be[0].length>0&&x(Be,be,Ce,U,ce,ge,be.style);var We=[],Ze=null;if(Y){for(ue=0;ue<N;ue++)We[ue]=be[ue][be[ue].length-1];Ze=Ce[Ce.length-1]}for(be=[],ue=0;ue<N;ue++)be[ue]=[];if(Ce=[],Y){for(ue=0;ue<N;ue++)be[ue].push(We[ue]);Ce.push(Ze)}w(L,Be,ge,Ae,!0),w(L,Pe,ge,Ae,!1),Be=new n.Geometry(!0),Pe=new n.Geometry(!0)};W=void 0;for(var xe=0;xe<Z.length;xe++){j=Z[xe];var Ne=j.resn.trim(),Ve=Ne in k;if(ge=1,G=j.style.cartoon,W&&W.style.cartoon&&(ge=W.style.cartoon.opacity),W&&W.style.cartoon&&W.style.cartoon.outline&&(Ae=W.style.cartoon.outline),W&&W.style.cartoon&&(!j.style.cartoon||W.style.cartoon.opacity!=j.style.cartoon.opacity)&&ye(W.chain==j.chain),G.style==="trace"){if(!j.hetflag){if(j.elem==="C"&&j.atom==="CA"||Ve&&j.atom==="P"||j.atom==="BB"){if(he=Ge(j,G),(0,_.isNumeric)(G.thickness)?ce=G.thickness:ce=P,v(W,j))if(he==se){var X=c.CC.color(he);y.GLDraw.drawCylinder(Pe,W,j,ce,X,2,2)}else{var ve=new s.Vector3().addVectors(W,j).multiplyScalar(.5),Me=c.CC.color(se),He=c.CC.color(he);y.GLDraw.drawCylinder(Pe,W,ve,ce,Me,2,0),y.GLDraw.drawCylinder(Pe,ve,j,ce,He,0,2)}if((j.clickable===!0||j.hoverable)&&j.intersectionShape!==void 0){var me=new s.Vector3(j.x,j.y,j.z);j.intersectionShape.sphere.push(new o.Sphere(me,ce))}W=j,se=he}}}else{if(l(j)||Ve&&(j.atom==="P"||j.atom.indexOf("O5")==0)){if(we)if(j.ss==="tube end")we=!1,le=new s.Vector3(j.x,j.y,j.z),y.GLDraw.drawCylinder(Pe,ne,le,2,c.CC.color(se),1,1),j.ss="h";else if(W.chain!=j.chain||W.ss==="tube end")we=!1,W.ss="h",le=new s.Vector3(W.x,W.y,W.z),y.GLDraw.drawCylinder(Pe,ne,le,2,c.CC.color(se),1,1);else continue;if(W&&(!v(W,j)||W.ss==="tube start")){for(W.ss==="tube start"&&(we=!0,ne=new s.Vector3(W.x,W.y,W.z),W.ss="h"),J&&(Ue?ee=new s.Vector3().addVectors(W,Ue).multiplyScalar(.5):ee=new s.Vector3(W.x,W.y,W.z),y.GLDraw.drawCylinder(Pe,ee,J,a,c.CC.color(J.color),0,2),O(be,N,!0,Ue,Oe,fe,W,Z,xe),Ce.push(he),ee=null,J=null),be[0].length>0&&x(Be,be,Ce,U,ce,ge,be.style),be=[],ue=0;ue<N;ue++)be[ue]=[];Ce=[]}if(W===void 0||W.rescode!=j.rescode||W.resi!=j.resi){if(J){ee=new s.Vector3().addVectors(W,j).multiplyScalar(.5);var ze=ee.clone().sub(J).multiplyScalar(.02);ee.add(ze),y.GLDraw.drawCylinder(Pe,ee,J,a,c.CC.color(J.color),0,2),ee=null,J=null}he=Ge(j,G),Ce.push(he),(0,_.isNumeric)(G.thickness)?ce=G.thickness:ce=P,W=j,Ee=new s.Vector3(W.x,W.y,W.z),Ee.resi=W.resi,se=he}(j.clickable===!0||j.hoverable===!0)&&(j.intersectionShape===void 0||j.intersectionShape.triangle===void 0)&&(j.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else l(W)&&j.atom==="O"||Ve&&W.atom==="P"&&(j.atom==="OP2"||j.atom==="O2P")||Ve&&W.atom.indexOf("O5")==0&&j.atom.indexOf("C5")==0?(pe=new s.Vector3(j.x,j.y,j.z),pe.resi=j.resi,(j.atom==="OP2"||j.atom==="O2P")&&(Oe=new s.Vector3(j.x,j.y,j.z))):Ve&&j.atom.indexOf("O3")==0?Ue=new s.Vector3(j.x,j.y,j.z):(j.atom==="N1"&&Ne in D||j.atom==="N3"&&Ne in I)&&(J=new s.Vector3(j.x,j.y,j.z),J.color=(0,_.getColorFromStyle)(j,G).getHex());pe&&Ee&&pe.resi===Ee.resi&&(O(be,N,!0,Ee,pe,fe,W,Z,xe),fe=pe,Ee=null,pe=null,Ce.push(he))}}J&&(Ue?ee=new s.Vector3().addVectors(W,Ue).multiplyScalar(.5):ee=new s.Vector3(W.x,W.y,W.z),y.GLDraw.drawCylinder(Pe,ee,J,a,c.CC.color(J.color),0,2),O(be,N,!0,Ue,Oe,fe,W,Z,xe),Ce.push(he)),ye(!1)}},"./src/index.ts":(e,t,r)=>{r.r(t),r.d(t,{CAP:()=>a.CAP,CC:()=>o.CC,Color:()=>o.Color,CustomLinear:()=>s.CustomLinear,Cylinder:()=>_.Cylinder,GLDraw:()=>a.GLDraw,GLModel:()=>g.GLModel,GLShape:()=>P.GLShape,GLViewer:()=>A.GLViewer,GLVolumetricRender:()=>E.GLVolumetricRender,Gradient:()=>s.Gradient,GradientType:()=>s.GradientType,Label:()=>n.Label,LabelCount:()=>n.LabelCount,MarchingCube:()=>C.MarchingCube,MarchingCubeInitializer:()=>C.MarchingCubeInitializer,Matrix3:()=>y.Matrix3,Matrix4:()=>y.Matrix4,Parsers:()=>c.Parsers,PausableTimer:()=>b.PausableTimer,PointGrid:()=>C.PointGrid,ProteinSurface:()=>C.ProteinSurface,Quaternion:()=>y.Quaternion,ROYGB:()=>s.ROYGB,RWB:()=>s.RWB,Ray:()=>y.Ray,Sinebow:()=>s.Sinebow,Sphere:()=>_.Sphere,SurfaceType:()=>C.SurfaceType,Triangle:()=>_.Triangle,Vector2:()=>y.Vector2,Vector3:()=>y.Vector3,VolumeData:()=>M.VolumeData,adjustVolumeStyle:()=>b.adjustVolumeStyle,applyPartialCharges:()=>f.applyPartialCharges,autoinit:()=>x.autoinit,autoload:()=>x.autoload,base64ToArray:()=>b.base64ToArray,bondLength:()=>c.bondLength,builtinColorSchemes:()=>o.builtinColorSchemes,builtinGradients:()=>s.builtinGradients,chains:()=>o.chains,clamp:()=>y.clamp,conversionMatrix3:()=>y.conversionMatrix3,createStereoViewer:()=>A.createStereoViewer,createViewer:()=>A.createViewer,createViewerGrid:()=>A.createViewerGrid,deepCopy:()=>b.deepCopy,degToRad:()=>y.degToRad,download:()=>b.download,drawCartoon:()=>u.drawCartoon,elementColors:()=>o.elementColors,extend:()=>b.extend,get:()=>b.get,getAtomProperty:()=>b.getAtomProperty,getColorFromStyle:()=>b.getColorFromStyle,getElement:()=>b.getElement,getExtent:()=>b.getExtent,getGradient:()=>s.getGradient,getPropertyRange:()=>b.getPropertyRange,getbin:()=>b.getbin,htmlColors:()=>o.htmlColors,isEmptyObject:()=>b.isEmptyObject,isNumeric:()=>b.isNumeric,makeFunction:()=>b.makeFunction,mergeGeos:()=>b.mergeGeos,normalizeValue:()=>s.normalizeValue,partialCharges:()=>f.partialCharges,processing_autoinit:()=>x.processing_autoinit,residues:()=>o.residues,setBondLength:()=>c.setBondLength,setSyncSurface:()=>C.setSyncSurface,specStringToObject:()=>b.specStringToObject,splitMesh:()=>P.splitMesh,ssColors:()=>o.ssColors,subdivide_spline:()=>u.subdivide_spline,syncSurface:()=>C.syncSurface,viewers:()=>x.viewers});var s=r("./src/Gradient.ts"),o=r("./src/colors.ts"),n=r("./src/Label.ts"),f=r("./src/partialCharges.ts"),c=r("./src/parsers/index.ts"),y=r("./src/WebGL/math/index.ts"),_=r("./src/WebGL/shapes/index.ts"),b=r("./src/utilities.ts"),C=r("./src/ProteinSurface4.ts"),M=r("./src/VolumeData.ts"),E=r("./src/VolumetricRender.ts"),P=r("./src/GLShape.ts"),a=r("./src/GLDraw.ts"),u=r("./src/glcartoon.ts"),g=r("./src/GLModel.ts"),A=r("./src/GLViewer.ts"),x=r("./src/autoload.ts");r("./src/specs.ts"),window&&(window.$3Dmol=t)},"./src/parsers/CDJSON.ts":(e,t,r)=>{r.r(t),r.d(t,{CDJSON:()=>s});function s(o,n){var f=[[]];typeof o=="string"&&(o=JSON.parse(o));for(var c=o.m,y=c[0].a,_=c[0].b,b=c[0].s,C=n!==void 0&&n.parseStyle!==void 0?n.parseStyle:b!==void 0,M=f[f.length-1].length,E=0;E<y.length;E++){var P=y[E],a={};a.id=P.i,a.x=P.x,a.y=P.y,a.z=P.z||0,a.bonds=[],a.bondOrder=[];var u=P.l||"C";a.elem=u[0].toUpperCase()+u.substr(1).toLowerCase(),a.serial=f[f.length-1].length,C&&(a.style=b[P.s||0]),f[f.length-1].push(a)}for(let g=0;g<_.length;g++){let A=_[g],x=A.b+M,l=A.e+M,v=A.o||1,w=f[f.length-1][x],O=f[f.length-1][l];w.bonds.push(l),w.bondOrder.push(v),O.bonds.push(x),O.bondOrder.push(v)}return f}},"./src/parsers/CIF.ts":(e,t,r)=>{r.r(t),r.d(t,{CIF:()=>c});var s=r("./src/parsers/utils/assignBonds.ts"),o=r("./src/parsers/utils/computeSecondaryStructure.ts"),n=r("./src/parsers/utils/processSymmetries.ts"),f=r("./src/WebGL/index.ts");function c(y,_={}){var b=[],C=!_.doAssembly,M=b.modelData=[],E=_.assignBonds===void 0?!0:_.assignBonds,P=function(Z,ie,ye,xe){return new f.Vector3(ie,ye,xe).applyMatrix3(Z)};function a(Z,ie){for(var ye=[],xe=0,Ne=0;Ne<Z.length;){for(;Z.substr(Ne,ie.length)!==ie&&Ne<Z.length;){if(Z[Ne]==="'")for(Ne++;Ne<Z.length&&Z[Ne]!=="'";)Ne++;else if(Z[Ne]==='"')for(Ne++;Ne<Z.length&&Z[Ne]!=='"';)Ne++;Ne++}ye.push(Z.substr(xe,Ne-xe)),xe=Ne=Ne+ie.length}return ye}var u=y.split(/\r?\n|\r/),g=[],A=!1;for(let Z=0;Z<u.length;Z++){var x=u[Z].split("#")[0];if(A?x[0]===";"&&(A=!1):x[0]===";"&&(A=!0),A||x!==""){if(!A&&(x=x.trim(),x[0]==="_")){var l=x.split(/\s/)[0].indexOf(".");if(l>-1){let ie=x.split("");ie[l]="_",x=ie.join(""),x=x.substr(0,l)+"_"+x.substr(l+1)}}g.push(x)}}for(var v=0;v<g.length;){for(;!g[v].startsWith("data_")||g[v]==="data_global";)v++;v++;for(var w={};v<g.length&&!g[v].startsWith("data_");)if(g[v][0]===void 0)v++;else if(g[v][0]==="_"){var O=g[v].split(/\s/)[0].toLowerCase(),T=w[O]=w[O]||[],D=g[v].substr(g[v].indexOf(O)+O.length);if(D==="")if(v++,g[v][0]===";"){var I=g[v].substr(1);for(v++;g[v]!==";";)I=I+`
`+g[v],v++;T.push(I)}else T.push(g[v]);else T.push(D.trim());v++}else if(g[v].substr(0,5)==="loop_"){v++;for(var k=[];g[v]===""||g[v][0]==="_";){if(g[v]!==""){let Z=g[v].split(/\s/)[0].toLowerCase(),ie=w[Z]=w[Z]||[];k.push(ie)}v++}for(var z=0;v<g.length&&g[v][0]!=="_"&&!g[v].startsWith("loop_")&&!g[v].startsWith("data_");){let Z=a(g[v]," ");for(var L=0;L<Z.length;L++)Z[L]!==""&&(k[z].push(Z[L]),z=(z+1)%k.length);v++}}else v++;M.push({symmetries:[]}),b.push([]);var B=w._atom_site_id!==void 0?w._atom_site_id.length:w._atom_site_label.length,H;if(w._cell_length_a!==void 0){var V=parseFloat(w._cell_length_a),N=parseFloat(w._cell_length_b),U=parseFloat(w._cell_length_c),G=parseFloat(w._cell_angle_alpha)||90,$=parseFloat(w._cell_angle_beta)||90,W=parseFloat(w._cell_angle_gamma)||90;H=(0,f.conversionMatrix3)(V,N,U,G,$,W),M[M.length-1].cryst={a:V,b:N,c:U,alpha:G,beta:$,gamma:W}}for(var j=0;j<B;j++)if(!(w._atom_site_group_pdb!==void 0&&w._atom_site_group_pdb[j]==="TER")){var se={};if(w._atom_site_cartn_x!==void 0)se.x=parseFloat(w._atom_site_cartn_x[j]),se.y=parseFloat(w._atom_site_cartn_y[j]),se.z=parseFloat(w._atom_site_cartn_z[j]);else{var he=P(H,parseFloat(w._atom_site_fract_x[j]),parseFloat(w._atom_site_fract_y[j]),parseFloat(w._atom_site_fract_z[j]));se.x=he.x,se.y=he.y,se.z=he.z}se.chain=w._atom_site_auth_asym_id?w._atom_site_auth_asym_id[j]:void 0,se.resi=w._atom_site_auth_seq_id?parseInt(w._atom_site_auth_seq_id[j]):void 0,se.resn=w._atom_site_auth_comp_id?w._atom_site_auth_comp_id[j].trim():void 0,se.atom=w._atom_site_auth_atom_id?w._atom_site_auth_atom_id[j].replace(/"/gm,""):void 0,se.hetflag=!w._atom_site_group_pdb||w._atom_site_group_pdb[j]==="HETA"||w._atom_site_group_pdb[j]==="HETATM";var ce="X";w._atom_site_type_symbol?ce=w._atom_site_type_symbol[j].replace(/\(?\+?\d+.*/,""):w._atom_site_label&&(ce=w._atom_site_label[j].split("_")[0].replace(/\(?\d+.*/,"")),se.elem=ce[0].toUpperCase()+ce.substr(1,1).toLowerCase(),se.bonds=[],se.ss="c",se.serial=j,se.bondOrder=[],se.properties={},b[b.length-1].push(se)}if(w._pdbx_struct_oper_list_id!==void 0&&!C)for(let Z=0;Z<w._pdbx_struct_oper_list_id.length;Z++){var ue=parseFloat(w["_pdbx_struct_oper_list_matrix[1][1]"][Z]),Ee=parseFloat(w["_pdbx_struct_oper_list_matrix[1][2]"][Z]),pe=parseFloat(w["_pdbx_struct_oper_list_matrix[1][3]"][Z]),fe=parseFloat(w["_pdbx_struct_oper_list_vector[1]"][Z]),Ue=parseFloat(w["_pdbx_struct_oper_list_matrix[2][1]"][Z]),Oe=parseFloat(w["_pdbx_struct_oper_list_matrix[2][2]"][Z]),ee=parseFloat(w["_pdbx_struct_oper_list_matrix[2][3]"][Z]),J=parseFloat(w["_pdbx_struct_oper_list_vector[2]"][Z]),ne=parseFloat(w["_pdbx_struct_oper_list_matrix[3][1]"][Z]),le=parseFloat(w["_pdbx_struct_oper_list_matrix[3][2]"][Z]),we=parseFloat(w["_pdbx_struct_oper_list_matrix[3][3]"][Z]),Pe=parseFloat(w["_pdbx_struct_oper_list_vector[3]"][Z]),Be=new f.Matrix4(ue,Ee,pe,fe,Ue,Oe,ee,J,ne,le,we,Pe);M[M.length-1].symmetries.push(Be)}var Ce=function(Z){var ie=Z.match("-");Z=Z.replace(/[-xyz]/g,"");var ye=Z.split("/"),xe,Ne;return ye[1]===void 0?Ne=1:Ne=parseInt(ye[1]),ye[0]===""?xe=1:xe=parseInt(ye[0]),xe/Ne*(ie?-1:1)};if(w._symmetry_equiv_pos_as_xyz!==void 0&&!C)for(var be=0;be<w._symmetry_equiv_pos_as_xyz.length;be++){var ge=w._symmetry_equiv_pos_as_xyz[be].replace(/["' ]/g,""),Ae=ge.split(",").map(function(ie){return ie.replace(/-/g,"+-")});let Z=new f.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let ie=0;ie<3;ie++){var De=Ae[ie].split("+");for(let ye=0;ye<De.length;ye++){var Re=De[ye];if(Re!==""){var Ge=Ce(Re);Re.match("x")?Z.elements[ie+0]=Ge:Re.match("y")?Z.elements[ie+4]=Ge:Re.match("z")?Z.elements[ie+8]=Ge:Z.elements[ie+12]=Ge}}}var Ke=H.getMatrix4(),Q=new f.Matrix4().getInverse(Ke,!0);Z=new f.Matrix4().multiplyMatrices(Z,Q),Z=new f.Matrix4().multiplyMatrices(Ke,Z),M[M.length-1].symmetries.push(Z)}}for(let Z=0;Z<b.length;Z++)E&&(0,s.assignBonds)(b[Z]),(0,o.computeSecondaryStructure)(b[Z],_.hbondCutoff),(0,n.processSymmetries)(M[Z].symmetries,b[Z],_,M[Z].cryst),_.duplicateAssemblyAtoms&&!_.dontConnectDuplicatedAtoms&&E&&(0,s.assignBonds)(b[Z]);return b}},"./src/parsers/CUBE.ts":(e,t,r)=>{r.r(t),r.d(t,{CUBE:()=>f});var s=r("./src/WebGL/index.ts"),o=r("./src/parsers/utils/assignBonds.ts"),n=r("./src/parsers/utils/anumToSymbol.ts");function f(c,y){y=y||{};var _=[[]],b=c.split(/\r?\n/),C=y.assignBonds===void 0?!0:y.assignBonds;if(b.length<6)return _;var M=b[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),E=Math.abs(parseFloat(M[0]));let P={};var a=P.origin=new s.Vector3(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));M=b[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),M=b[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var u=M[0]>0?.529177:1;a.multiplyScalar(u);var g=Math.abs(M[0]),A=new s.Vector3(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])).multiplyScalar(u);M=b[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var x=Math.abs(M[0]),l=new s.Vector3(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])).multiplyScalar(u);M=b[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var v=Math.abs(M[0]),w=new s.Vector3(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])).multiplyScalar(u);if(P.size={x:g,y:x,z:v},P.unit=new s.Vector3(A.x,l.y,w.z),A.y!=0||A.z!=0||l.x!=0||l.z!=0||w.x!=0||w.y!=0){P.matrix4=new s.Matrix4(A.x,l.x,w.x,0,A.y,l.y,w.y,0,A.z,l.z,w.z,0,0,0,0,1);let L=new s.Matrix4().makeTranslation(a.x,a.y,a.z);P.matrix4=P.matrix4.multiplyMatrices(L,P.matrix4),P.matrix=P.matrix4.matrix3FromTopLeft(),P.origin=new s.Vector3(0,0,0),P.unit=new s.Vector3(1,1,1)}_.modelData=[{cryst:P}],b=b.splice(6,E);for(var O=_[_.length-1].length,T=O+b.length,D=O;D<T;++D){var I={};I.serial=D;var k=b[D-O],z=k.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");I.elem=n.anumToSymbol[z[0]],I.x=parseFloat(z[2])*u,I.y=parseFloat(z[3])*u,I.z=parseFloat(z[4])*u,I.hetflag=!0,I.bonds=[],I.bondOrder=[],I.properties={},_[_.length-1].push(I)}if(C)for(let L=0;L<_.length;L++)(0,o.assignBonds)(_[L]);return _}},"./src/parsers/GRO.ts":(e,t,r)=>{r.r(t),r.d(t,{GRO:()=>n});var s=r("./src/parsers/utils/assignPDBBonds.ts"),o=r("./src/parsers/utils/atomNameToElem.ts");function n(f){for(var c=[],y=f.split(/\r?\n|\r/);y.length>0&&!(y.length<3);){var _=parseInt(y[1]);if(isNaN(_)||_<=0||y.length<_+3)break;var b=[];c.push(b);for(var C=2,M=b.length,E=M+_,P=M;P<E;P++){var a=y[C++],u={};u.serial=P,u.atom=a.slice(10,15).trim(),u.elem=(0,o.atomNameToElem)(u.atom,!0),u.x=10*parseFloat(a.slice(20,28)),u.y=10*parseFloat(a.slice(28,36)),u.z=10*parseFloat(a.slice(36,44)),u.resi=parseInt(a.slice(0,5)),u.resn=a.slice(5,10).trim(),u.bonds=[],u.bondOrder=[],u.properties={},a.length>44&&(u.dx=10*parseFloat(a.slice(44,52)),u.dy=10*parseFloat(a.slice(52,60)),u.dz=10*parseFloat(a.slice(60,68))),b[P]=u}if(y.length<=C+3){var g=y[C++],A=g.trim().split(/\s+/);if(A.length==3){for(var x=0;x<3;x++)A[x]=parseFloat(A[x])*10;c.box=A}}y.splice(0,++C)}for(let l=0;l<c.length;l++)(0,s.assignPDBBonds)(c[l]);return c}},"./src/parsers/LAMMPSTRJ.ts":(e,t,r)=>{r.r(t),r.d(t,{LAMMPSTRJ:()=>o});var s=r("./src/parsers/utils/assignBonds.ts");function o(n,f){for(var c=[],y={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"},_=n.split(/\r?\n|\r/),b=0,C=0,M=0;M<_.length-9;){for(var E=M;E<_.length;E++)if(_[E].match(/ITEM: NUMBER OF ATOMS/)&&(C=parseInt(_[E+1])),_[E].match(/ITEM: ATOMS/)){b=E+1;break}var P=_[b-1].replace("ITEM: ATOMS ","").split(" ");c.push([]);for(let v=b;v<b+C;v++){for(var a={},u={},g=_[v].split(" "),A=0;A<g.length;A++){var x=y[P[A]];x!=null&&(x=="serial"?a[x]=parseInt(g[A]):x=="x"||x=="y"||x==="z"?a[x]=parseFloat(g[A]):x=="charge"||x=="radius"?u[x]=parseFloat(g[A]):a[x]=g[A]),a.properties=u,a.bonds=[],a.bondOrder=[]}c[c.length-1][v-b]=a}M=b+C-1}if(f.assignBonds)for(var l=0;l<c.length;l++)(0,s.assignBonds)(c[l]);return c}},"./src/parsers/MMTF.ts":(e,t,r)=>{r.r(t),r.d(t,{MMTFparser:()=>C});var s=r("./src/utilities.ts"),o=r("./src/WebGL/index.ts"),n=r("./src/parsers/utils/computeSecondaryStructure.ts"),f=r("./src/parsers/utils/processSymmetries.ts"),c=r("./src/vendor/mmtf.js"),y=function(M){return String.fromCharCode.apply(null,M).replace(/\0/g,"")},_=function(M){return M==0||M==2||M==4?"h":M==3?"s":"c"};let b=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function C(M,E){var P=!E.keepH,a=E.altLoc?E.altLoc:"A",u=!!E.noSecondaryStructure,g=!E.noComputeSecondaryStructure,A=!E.doAssembly,x=E.assemblyIndex?E.assemblyIndex:0;typeof M=="string"?M=(0,s.base64ToArray)(M):M=new Uint8Array(M);var l=c.decode(M),v=[[]],w=v.modelData=[],O=0,T=0,D=0,I=l.secStructList,k=l.insCodeList,z=l.sequenceIndexList,L=l.bFactorList,B=l.altLocList,H=l.occupancyList,V=l.bondAtomList,N=l.bondOrderList,U=l.numModels;if(U==0)return v;E.multimodel||(U=1);var G,$,W,j,se,he,ce=[];if(!A&&l.bioAssemblyList&&l.bioAssemblyList.length>0){var ue=l.bioAssemblyList[x].transformList;for(G=0,he=ue.length;G<he;G++){var Ee=new o.Matrix4(ue[G].matrix);Ee.transpose(),ce.push(Ee)}}var pe=null;if(l.unitCell){var fe=l.unitCell;pe={a:fe[0],b:fe[1],c:fe[2],alpha:fe[3],beta:fe[4],gamma:fe[5]}}let Ue=[];l.entityList.forEach(de=>{de.chainIndexList.forEach(Le=>{Ue[Le]=de.type=="polymer"})});var Oe=0;for(se=0;se<U;se++){var ee=l.chainsPerModel[se],J=v[v.length-1],ne=[];for(w.push({symmetries:ce,cryst:pe}),G=0;G<ee;++G){var le=l.groupsPerChain[O],we=y(l.chainIdList.subarray(O*4,O*4+4));l.chainNameList&&(we=y(l.chainNameList.subarray(O*4,O*4+4)));var Pe=T,Be="";for($=0;$<le;++$){var Ce=l.groupList[l.groupTypeList[T]],be=Ce.atomNameList.length,ge=0,Ae=!1,De=!1;if(I){ge=I[T];var Re=_(ge);(T==0||Re!=Be)&&(Ae=!0),Be=Re;var Ge=T+1;(Ge>=I.length||_(I[Ge]!=Re))&&(De=!0)}l.insCodeList&&String.fromCharCode(k[T]),z&&z[T];var Ke=l.groupIdList[T],Q=Ce.groupName;let de=Ce.chemCompType;var Z=D;let Le=b.has(de)||!Ue[O];for(W=0;W<be;++W){var ie=Ce.elementList[W];if(P&&ie=="H"){D+=1;continue}var ye="";L&&(ye=L[D]);var xe="";B&&B[D]&&(xe=String.fromCharCode(B[D]));var Ne="";if(H&&(Ne=H[D]),xe!=""&&xe!=a&&a!="*"){D+=1;continue}var Ve=l.atomIdList[D],X=Ce.atomNameList[W],ve=0;Ce.atomChargeList&&(ve=Ce.atomChargeList[W]);var Me=l.xCoordList[D],He=l.yCoordList[D],me=l.zCoordList[D];ne[D]=J.length,J.push({resn:Q,x:Me,y:He,z:me,elem:ie,hetflag:Le,chain:we,resi:Ke,icode:xe,rescode:Ke+(xe!=" "?"^"+xe:""),serial:Ve,altLoc:xe,index:D,atom:X,bonds:[],ss:_(ge),ssbegin:Ae,ssend:De,bondOrder:[],properties:{charge:ve,occupancy:Ne},b:ye}),D+=1}var ze=Ce.bondAtomList;for(W=0,j=Ce.bondOrderList.length;W<j;++W){var Y=Z+ze[W*2],We=Z+ze[W*2+1],Ze=Ce.bondOrderList[W],F=ne[Y],Te=ne[We],Ie=J[F],q=J[Te];Ie&&q&&(Ie.bonds.push(Te),Ie.bondOrder.push(Ze),q.bonds.push(F),q.bondOrder.push(Ze))}T+=1}for(T=Pe,$=0;$<le;++$)T+=1;O+=1}if(V)for(let de=Oe,Le=V.length;de<Le;de+=2){let Xe=V[de],Ye=V[de+1],je=N?N[de/2]:1;if(Xe>=D){Oe=de;break}let nt=ne[Xe],Mt=ne[Ye],st=J[nt],it=J[Mt];st&&it&&(st.bonds.push(Mt),st.bondOrder.push(je),it.bonds.push(nt),it.bondOrder.push(je))}E.multimodel&&(E.onemol||v.push([]))}if(!A)for(let de=0;de<v.length;de++)(0,f.processSymmetries)(w[de].symmetries,v[de],E,w[de].cryst);return g&&!u&&(0,n.computeSecondaryStructure)(v,E.hbondCutoff),v}},"./src/parsers/MOL2.ts":(e,t,r)=>{r.r(t),r.d(t,{MOL2:()=>o});let s={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function o(n,f){var c=[[]],y=!1;typeof f.keepH<"u"&&(y=!f.keepH);var _=n.search(/@<TRIPOS>MOLECULE/),b=n.search(/@<TRIPOS>ATOM/);if(_==-1||b==-1)return c;for(var C=n.substr(_,n.length).split(/\r?\n|\r/);C.length>0;){var M=[],E=C[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),P=parseInt(E[0]),a=0;E.length>1&&(a=parseInt(E[1]));var u=4,g;for(g=3;g<C.length;g++)if(C[g]=="@<TRIPOS>ATOM"){u=g+1;break}var A=c[c.length-1].length,x=A+P,l;for(g=A;g<x;g++){l=C[u++],E=l.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var v={},w=E[5];if(s[w]!==void 0?w=s[w]:(w=w.split(".")[0],w=w[0].toUpperCase()+w.substr(1).toLowerCase()),v.atom=E[1],v.elem=w,!(v.elem=="H"&&y)){var O=c[c.length-1].length,T=parseInt(E[0]);v.serial=T,v.x=parseFloat(E[2]),v.y=parseFloat(E[3]),v.z=parseFloat(E[4]),v.atom=E[5];var D=parseFloat(E[8]);v.index=O,v.bonds=[],v.bondOrder=[],v.properties={charge:D,partialCharge:D},M[T]=O,c[c.length-1].push(v)}}for(var I=!1;u<C.length;)if(C[u++]=="@<TRIPOS>BOND"){I=!0;break}if(I&&a)for(g=0;g<a;g++){l=C[u++],E=l.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var k=parseInt(E[1]),z=c[c.length-1][M[k]],L=parseInt(E[2]),B=c[c.length-1][M[L]],H=parseInt(E[3]);isNaN(H)&&(H=1),z!==void 0&&B!==void 0&&(z.bonds.push(M[L]),z.bondOrder.push(H),B.bonds.push(M[k]),B.bondOrder.push(H))}if(f.multimodel){f.onemol||c.push([]),C.splice(0,u),n=C.join(`
`);continue}else break}return c}},"./src/parsers/PDB.ts":(e,t,r)=>{r.r(t),r.d(t,{PDB:()=>o});var s=r("./src/parsers/utils/getSinglePDB.ts");function o(n,f){f=f||{};var c=[],y={};c.modelData=[];for(var _=n.split(/\r?\n|\r/);_.length>0;){var b=(0,s.getSinglePDB)(_,f,y),C=b[0],M=b[1];if(_=b[2],C.length!=0){if(f.multimodel&&f.onemol&&c.length>0)for(var E=c[0].length,P=0;P<C.length;P++){var a=C[P];a.index=P;for(var u=0;u<a.bonds.length;u++)a.bonds[u]+=E;c[0].push(a)}else c.modelData.push(M),c.push(C);if(!f.multimodel)break}}return c}},"./src/parsers/PQR.ts":(e,t,r)=>{r.r(t),r.d(t,{PQR:()=>n});var s=r("./src/parsers/utils/assignPDBBonds.ts"),o=r("./src/parsers/utils/computeSecondaryStructure.ts");function n(f,c){var y=[[]],_=!c.noSecondaryStructure;y.modelData=[{symmetries:[]}];var b=[],C=f.split(/\r?\n|\r/),M;for(let I=0;I<C.length;I++){M=C[I].replace(/^\s*/,"");var E=M.substr(0,6);if(E.indexOf("END")==0)if(c.multimodel){c.onemol||y.push([]);continue}else break;else if(E=="ATOM  "||E=="HETATM"){var P;let k=parseInt(M.substr(6,5)),z=M.substr(12,4).replace(/ /g,""),L=M.substr(17,3).trim(),B=M.substr(21,1),H=parseInt(M.substr(22,4));var a=M.substr(30).trim().split(/\s+/),u=parseFloat(a[0]),g=parseFloat(a[1]),A=parseFloat(a[2]),x=parseFloat(a[3]),l=parseFloat(a[4]),v=z[0];z.length>1&&z[1].toUpperCase()!=z[1]&&(v=z.substr(0,2)),M[0]=="H"?P=!0:P=!1,b[k]=y[y.length-1].length,y[y.length-1].push({resn:L,x:u,y:g,z:A,elem:v,hetflag:P,chain:B,resi:H,serial:k,atom:z,bonds:[],ss:"c",bondOrder:[],properties:{charge:x,partialCharge:x,radius:l},pdbline:M})}else if(E=="CONECT"){var w=parseInt(M.substr(6,5)),O=y[y.length-1][b[w]];for(let k=0;k<4;k++){var T=parseInt(M.substr([11,16,21,26][k],5)),D=y[y.length-1][b[T]];O!==void 0&&D!==void 0&&(O.bonds.push(b[T]),O.bondOrder.push(1))}}}for(let I=0;I<y.length;I++)(0,s.assignPDBBonds)(y[I]),_&&(0,o.computeSecondaryStructure)(y[I],c.hbondCutoff);return y}},"./src/parsers/PRMTOP.ts":(e,t,r)=>{r.r(t),r.d(t,{PRMTOP:()=>s});function s(o){var n=[],f,c=0,y=o.split(/\r?\n|\r/);if(y.length>0&&y[0].includes("VERSION")){var _=y.filter(function(u){return u.includes("POINTERS")||u.includes("ATOM_NAME")||u.includes("CHARGE")||u.includes("RADII")||u.includes("BONDS_INC_HYDROGEN")||u.includes("BONDS_WITHOUT_HYDROGEN")}),b=P("POINTERS");if(b==-1)return[];var C=a(b),M=parseInt(y[b+1].slice(0,C[1]));if(isNaN(M)||M<=0)return[];if(b=P("ATOM_NAME"),b==-1)return[];C=a(b);var E=C[0];for(let u=0;u<M/C[0];u++){u==parseInt(M/C[0])&&(E=M%C[0]);for(let g=0;g<E;g++){let A={},x={charge:"",radii:""};A.serial=c,A.x=0,A.y=0,A.z=0,A.atom=y[b+1].slice(C[1]*g,C[1]*(g+1)),A.elem=y[b+1].slice(C[1]*g,C[1]*g+1),A.properties=x,A.bonds=[],A.bondOrder=[],n.push(A),c++}b++}if(b=P("CHARGE"),b!=-1){C=a(b),c=0,E=C[0];for(let u=0;u<M/C[0];u++){u==parseInt(M/C[0])&&(E=M%C[0]);for(let g=0;g<E;g++)n[c].properties.charge=parseFloat(y[b+1].slice(C[1]*g,C[1]*(g+1))),c++;b++}}if(b=P("RADII"),b!=-1){C=a(b),c=0,E=C[0];for(let u=0;u<M/C[0];u++){u==parseInt(M/C[0])&&(E=M%C[0]);for(let g=0;g<E;g++)n[c].properties.radii=parseFloat(y[b+1].slice(C[1]*g,C[1]*(g+1))),c++;b++}}if(b=P("BONDS_WITHOUT_HYDROGEN"),b!=-1)for(C=a(b),c=0,E=C[0],b=b+1;!y[b].match(/^%FLAG/);){y[b+1].match(/^%FLAG/)&&(E=M%C[0]);for(let u=0;u<E;u++)c%3==0?f=parseInt(y[b].slice(C[1]*u,C[1]*(u+1))/3):c%3==1&&n[f].bonds.push(parseInt(y[b].slice(C[1]*u,C[1]*(u+1))/3)),c++;b++}if(b=P("BONDS_INC_HYDROGEN"),b!=-1)for(C=a(b),c=0,E=C[0],b=b+1;!y[b].match(/^%FLAG/);){y[b+1].match(/^%FLAG/)&&(E=M%C[0]);for(let u=0;u<E;u++)c%3==0?f=parseInt(y[b].slice(C[1]*u,C[1]*(u+1))/3):c%3==1&&n[f].bonds.push(parseInt(y[b].slice(C[1]*u,C[1]*(u+1))/3)),c++;b++}}else return[];function P(u){var g=y.indexOf(_.filter(function(A){return A.includes(u)})[0]);if(Number.isInteger(g)&&g>0){for(;!y[g].includes("FORMAT");)g++;return g}else return-1}function a(u){var g=y[u].match(/\((\d*)\S*/),A=y[u].match(/[a-zA-Z](\d*)\)\s*/);return A==null&&(A=y[u].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[g[1],A[1]]}return[n]}},"./src/parsers/SDF.ts":(e,t,r)=>{r.r(t),r.d(t,{SDF:()=>n});var s=function(f,c){var y=[[]],_=!1;for(typeof c.keepH<"u"&&(_=!c.keepH);f.length>0&&!(f.length<4);){var b=parseInt(f[3].substr(0,3));if(isNaN(b)||b<=0)break;var C=parseInt(f[3].substr(3,3)),M=4;if(f.length<4+b+C)break;var E=[],P=y[y.length-1].length,a=P+b,u,g;for(u=P;u<a;u++,M++){g=f[M];var A={},x=g.substr(31,3).replace(/ /g,"");A.atom=A.elem=x[0].toUpperCase()+x.substr(1).toLowerCase(),(A.elem!=="H"||!_)&&(A.serial=u,E[u]=y[y.length-1].length,A.x=parseFloat(g.substr(0,10)),A.y=parseFloat(g.substr(10,10)),A.z=parseFloat(g.substr(20,10)),A.hetflag=!0,A.bonds=[],A.bondOrder=[],A.properties={},A.index=y[y.length-1].length,y[y.length-1].push(A))}for(u=0;u<C;u++,M++){g=f[M];var l=E[parseInt(g.substr(0,3))-1+P],v=E[parseInt(g.substr(3,3))-1+P],w=parseFloat(g.substr(6));typeof l<"u"&&typeof v<"u"&&(y[y.length-1][l].bonds.push(v),y[y.length-1][l].bondOrder.push(w),y[y.length-1][v].bonds.push(l),y[y.length-1][v].bondOrder.push(w))}if(c.multimodel){for(c.onemol||y.push([]);f[M]!=="$$$$";)M++;f.splice(0,++M)}else break}return y},o=function(f,c){var y=[[]],_=!1;for(typeof c.keepH<"u"&&(_=!c.keepH);f.length>0&&!(f.length<8||!f[4].startsWith("M  V30 BEGIN CTAB")||!f[5].startsWith("M  V30 COUNTS")||f[5].length<14);){var b=f[5].substr(13).match(/\S+/g);if(b.length<2)break;var C=parseInt(b[0]);if(isNaN(C)||C<=0)break;var M=parseInt(b[1]),E=7;if(f.length<8+C+M)break;var P=[],a=y[y.length-1].length,u=a+C,g,A;for(g=a;g<u;g++,E++){A=f[E];var x=A.substr(6).match(/\S+/g);if(x.length>4){var l={},v=x[1].replace(/ /g,"");l.atom=l.elem=v[0].toUpperCase()+v.substr(1).toLowerCase(),(l.elem!=="H"||!_)&&(l.serial=g,P[g]=y[y.length-1].length,l.x=parseFloat(x[2]),l.y=parseFloat(x[3]),l.z=parseFloat(x[4]),l.hetflag=!0,l.bonds=[],l.bondOrder=[],l.properties={},l.index=y[y.length-1].length,y[y.length-1].push(l))}}if(f[E]==="M  V30 END ATOM")E++;else break;if(M!==0&&f[E]==="M  V30 BEGIN BOND")E++;else break;for(g=0;g<M;g++,E++){A=f[E];var w=A.substr(6).match(/\S+/g);if(w.length>3){var O=P[parseInt(w[2])-1+a],T=P[parseInt(w[3])-1+a],D=parseFloat(w[1]);typeof O<"u"&&typeof T<"u"&&(y[y.length-1][O].bonds.push(T),y[y.length-1][O].bondOrder.push(D),y[y.length-1][T].bonds.push(O),y[y.length-1][T].bondOrder.push(D))}}if(c.multimodel){for(c.onemol||y.push([]);f[E]!=="$$$$";)E++;f.splice(0,++E)}else break}return y};function n(f,c){var y="V2000",_=f.split(/\r?\n|\r/);return _.length>3&&_[3].length>38&&(y=_[3].substr(34,5)),y==="V2000"?s(_,c):y==="V3000"?o(_,c):[[]]}},"./src/parsers/VASP.ts":(e,t,r)=>{r.r(t),r.d(t,{VASP:()=>o});var s=r("./src/WebGL/index.ts");function o(n){var f=[[]],c={},y=n.replace(/^\s+/,"").split(/\r?\n/);if(y.length<3)return f;if(y[1].match(/\d+/))c.length=parseFloat(y[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),f;if(c.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),f;c.xVec=new Float32Array(y[2].replace(/^\s+/,"").split(/\s+/)),c.yVec=new Float32Array(y[3].replace(/^\s+/,"").split(/\s+/)),c.zVec=new Float32Array(y[4].replace(/^\s+/,"").split(/\s+/));var _=new s.Matrix3(c.xVec[0],c.xVec[1],c.xVec[2],c.yVec[0],c.yVec[1],c.yVec[2],c.zVec[0],c.zVec[1],c.zVec[2]);_.multiplyScalar(c.length),f.modelData=[{symmetries:[],cryst:{matrix:_}}];var b=y[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/),C=new Int16Array(y[6].replace(/^\s+/,"").split(/\s+/)),M=y[7].replace(/\s+/,"");if(M.match(/C/))M="cartesian";else if(M.match(/D/))M="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),f;if(b.length!=C.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(b),console.log(C),f;y.splice(0,8);for(var E=0,P=0,a=b.length;P<a;P++){for(var u=b[P],g=0,A=C[P];g<A;g++){var x=new Float32Array(y[E+g].replace(/^\s+/,"").split(/\s+/)),l={};l.elem=u,M=="cartesian"?(l.x=c.length*x[0],l.y=c.length*x[1],l.z=c.length*x[2]):(l.x=c.length*(x[0]*c.xVec[0]+x[1]*c.yVec[0]+x[2]*c.zVec[0]),l.y=c.length*(x[0]*c.xVec[1]+x[1]*c.yVec[1]+x[2]*c.zVec[1]),l.z=c.length*(x[0]*c.xVec[2]+x[1]*c.yVec[2]+x[2]*c.zVec[2])),l.bonds=[],f[0].push(l)}E+=C[P]}return f}},"./src/parsers/XYZ.ts":(e,t,r)=>{r.r(t),r.d(t,{XYZ:()=>n});var s=r("./src/WebGL/index.ts"),o=r("./src/parsers/utils/assignBonds.ts");function n(f,c){c=c||{};for(var y=[[]],_=c.assignBonds===void 0?!0:c.assignBonds,b=f.split(/\r?\n|\r/);b.length>0&&!(b.length<3);){var C=parseInt(b[0]);if(isNaN(C)||C<=0||b.length<C+2)break;var M=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,E=M.exec(b[1]);if(E!=null&&E.length>1){var P=new Float32Array(E[1].split(/\s+/)),a=new s.Matrix3(P[0],P[3],P[6],P[1],P[4],P[7],P[2],P[5],P[8]);y.modelData=[{cryst:{matrix:a}}]}for(var u=2,g=y[y.length-1].length,A=g+C,x=g;x<A;x++){var l=b[u++],v=l.replace(/^\s+/,"").replace(/\s+/g," ").split(" "),w={};w.serial=x;var O=v[0];w.atom=w.elem=O[0].toUpperCase()+O.substr(1,1).toLowerCase(),w.x=parseFloat(v[1]),w.y=parseFloat(v[2]),w.z=parseFloat(v[3]),w.hetflag=!0,w.bonds=[],w.bondOrder=[],w.properties={},y[y.length-1][x]=w,v.length>=7&&(w.dx=parseFloat(v[4]),w.dy=parseFloat(v[5]),w.dz=parseFloat(v[6]))}if(c.multimodel)y.push([]),b.splice(0,u);else break}if(_)for(let D=0;D<y.length;D++)(0,o.assignBonds)(y[D]);if(c.onemol){var T=y;y=[],y.push(T[0]);for(let D=1;D<T.length;D++){let I=y[0].length;for(let k=0;k<T[D].length;k++){let z=T[D][k];for(let L=0;L<z.bonds.length;L++)z.bonds[L]=z.bonds[L]+I;z.index=y[0].length,z.serial=y[0].length,y[0].push(z)}}}return y}},"./src/parsers/index.ts":(e,t,r)=>{r.r(t),r.d(t,{Parsers:()=>g,bondLength:()=>u.bondLength,setBondLength:()=>u.setBondLength});var s=r("./src/parsers/VASP.ts"),o=r("./src/parsers/CUBE.ts"),n=r("./src/parsers/XYZ.ts"),f=r("./src/parsers/SDF.ts"),c=r("./src/parsers/CDJSON.ts"),y=r("./src/parsers/CIF.ts"),_=r("./src/parsers/MOL2.ts"),b=r("./src/parsers/PDB.ts"),C=r("./src/parsers/PQR.ts"),M=r("./src/parsers/MMTF.ts"),E=r("./src/parsers/PRMTOP.ts"),P=r("./src/parsers/GRO.ts"),a=r("./src/parsers/LAMMPSTRJ.ts"),u=r("./src/parsers/utils/bondLength.ts");const g={vasp:s.VASP,VASP:s.VASP,cube:o.CUBE,CUBE:o.CUBE,xyz:n.XYZ,XYZ:n.XYZ,sdf:f.SDF,SDF:f.SDF,json:c.CDJSON,cdjson:c.CDJSON,CDJSON:c.CDJSON,mcif:y.CIF,cif:y.CIF,CIF:y.CIF,mol2:_.MOL2,MOL2:_.MOL2,pdb:b.PDB,PDB:b.PDB,pdbqt:b.PDB,PDBQT:b.PDB,pqr:C.PQR,PQR:C.PQR,mmtf:M.MMTFparser,MMTF:M.MMTFparser,prmtop:E.PRMTOP,PRMTOP:E.PRMTOP,gro:P.GRO,GRO:P.GRO,lammpstrj:a.LAMMPSTRJ,LAMMPSTRJ:a.LAMMPSTRJ}},"./src/parsers/utils/anumToSymbol.ts":(e,t,r)=>{r.r(t),r.d(t,{anumToSymbol:()=>s});const s={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts":(e,t,r)=>{r.r(t),r.d(t,{areConnected:()=>o});var s=r("./src/parsers/utils/bondLength.ts");function o(n,f){var c=(0,s.bondLength)(n.elem)+(0,s.bondLength)(f.elem);c+=.25,c*=c;var y=n.x-f.x;if(y*=y,y>c)return!1;var _=n.y-f.y;if(_*=_,_>c)return!1;var b=n.z-f.z;if(b*=b,b>c)return!1;var C=y+_+b;return isNaN(C)||C<.5||C>c?!1:!(n.altLoc!=f.altLoc&&n.altLoc!=" "&&f.altLoc!=" ")}},"./src/parsers/utils/assignBackboneHBonds.ts":(e,t,r)=>{r.r(t),r.d(t,{assignBackboneHBonds:()=>s});function s(o,n){let f=n||3.2,c=f*f,y=[];for(let u=0,g=o.length;u<g;u++){o[u].index=u;var _=o[u];!_.hetflag&&(_.atom==="N"||_.atom==="O")&&(y.push(_),_.hbondOther=null,_.hbondDistanceSq=Number.POSITIVE_INFINITY)}y.sort(function(u,g){return u.z-g.z});for(let u=0,g=y.length;u<g;u++){var b=y[u];for(let A=u+1;A<g;A++){var C=y[A],M=C.z-b.z;if(M>f)break;if(C.atom!=b.atom){var E=Math.abs(C.y-b.y);if(!(E>f)){var P=Math.abs(C.x-b.x);if(!(P>f)){var a=P*P+E*E+M*M;a>c||C.chain==b.chain&&Math.abs(C.resi-b.resi)<4||(a<b.hbondDistanceSq&&(b.hbondOther=C,b.hbondDistanceSq=a),a<C.hbondDistanceSq&&(C.hbondOther=b,C.hbondDistanceSq=a))}}}}}}},"./src/parsers/utils/assignBonds.ts":(e,t,r)=>{r.r(t),r.d(t,{assignBonds:()=>o});var s=r("./src/parsers/utils/areConnected.ts");function o(n){for(var f=0,c=n.length;f<c;f++)n[f].index||(n[f].index=f);for(var y={},_=4.95,b=0;b<n.length;b++){var C=n[b],M=Math.floor(C.x/_),E=Math.floor(C.y/_),P=Math.floor(C.z/_);y[M]||(y[M]={}),y[M][E]||(y[M][E]={}),y[M][E][P]||(y[M][E][P]=[]),y[M][E][P].push(C)}var a=function(g,A){for(var x=0;x<g.length;x++)for(var l=g[x],v=0;v<A.length;v++){var w=A[v];if((0,s.areConnected)(l,w)){var O=l.bonds.indexOf(w.index),T=w.bonds.indexOf(l.index);O==-1&&T==-1?(l.bonds.push(w.index),l.bondOrder.push(1),w.bonds.push(l.index),w.bondOrder.push(1)):O==-1?(l.bonds.push(w.index),l.bondOrder.push(w.bondOrder[T])):T==-1&&(w.bonds.push(l.index),w.bondOrder.push(l.bondOrder[O]))}}},u=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(let g in y){let A=parseInt(g);for(let x in y[A]){let l=parseInt(x);for(let v in y[A][l]){let w=parseInt(v),O=y[A][l][w];for(let T=0;T<O.length;T++){let D=O[T];for(let I=T+1;I<O.length;I++){let k=O[I];(0,s.areConnected)(D,k)&&D.bonds.indexOf(k.index)==-1&&(D.bonds.push(k.index),D.bondOrder.push(1),k.bonds.push(D.index),k.bondOrder.push(1))}}for(let T=0;T<u.length;T++){let D=u[T];if(!y[A+D.x]||!y[A+D.x][l+D.y]||!y[A+D.x][l+D.y][w+D.z])continue;let I=y[A+D.x][l+D.y][w+D.z];a(O,I)}}}}}},"./src/parsers/utils/assignPDBBonds.ts":(e,t,r)=>{r.r(t),r.d(t,{assignPDBBonds:()=>f});var s=r("./src/parsers/utils/areConnected.ts"),o=r("./src/parsers/utils/assignBonds.ts"),n=r("./src/parsers/utils/standardResidues.ts");function f(c){var y=[],_=[],b,C;for(b=0,C=c.length;b<C;b++){var M=c[b];M.index=b,M.hetflag||!n.standardResidues.has(M.resn)?_.push(M):y.push(M)}(0,o.assignBonds)(_),y.sort(function(x,l){return x.chain!=l.chain?x.chain<l.chain?-1:1:x.resi-l.resi});var E=-1,P=-1,a;for(b=0,C=y.length;b<C;b++){var u=y[b];u.resi!==E&&(E=u.resi,a||P++,a=!1),u.reschain=P;for(var g=b+1;g<y.length;g++){var A=y[g];if(A.chain!=u.chain||A.resi-u.resi>1)break;(0,s.areConnected)(u,A)&&(u.bonds.indexOf(A.index)===-1&&(u.bonds.push(A.index),u.bondOrder.push(1),A.bonds.push(u.index),A.bondOrder.push(1)),u.resi!==A.resi&&(a=!0))}}}},"./src/parsers/utils/atomNameToElem.ts":(e,t,r)=>{r.r(t),r.d(t,{atomNameToElem:()=>o});var s=r("./src/parsers/utils/bondLength.ts");function o(n,f){var c=n.replace(/ /g,"");return c.length>0&&c[0]=="H"&&c!="Hg"&&c!="He"&&c!="Hf"&&c!="Hs"&&c!="Ho"&&(c="H"),c.length>1&&(c=c[0].toUpperCase()+c.substr(1).toLowerCase(),typeof s.bondTable[c]>"u"?c=c[0]:f&&(c=="Ca"||c=="Cd")&&(c="C")),c}},"./src/parsers/utils/bondLength.ts":(e,t,r)=>{r.r(t),r.d(t,{bondLength:()=>o,bondTable:()=>s,setBondLength:()=>n});let s={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function o(f){return s[f]||1.6}function n(f,c){c<0&&(c=0),s[f]=c}},"./src/parsers/utils/computeSecondaryStructure.ts":(e,t,r)=>{r.r(t),r.d(t,{computeSecondaryStructure:()=>o});var s=r("./src/parsers/utils/assignBackboneHBonds.ts");function o(n,f){(0,s.assignBackboneHBonds)(n,f);var c={},y,_,b,C,M,E;for(y=0,_=n.length;y<_;y++)if(M=n[y],typeof c[M.chain]>"u"&&(c[M.chain]=[]),isFinite(M.hbondDistanceSq)){var P=M.hbondOther;typeof c[P.chain]>"u"&&(c[P.chain]=[]),Math.abs(P.resi-M.resi)===4&&(c[M.chain][M.resi]="h")}for(b in c)for(C=1;C<c[b].length-1;C++){var a=c[b][C-1],u=c[b][C+1];E=c[b][C],a=="h"&&a==u&&E!=a&&(c[b][C]=a)}for(y=0,_=n.length;y<_;y++)M=n[y],isFinite(M.hbondDistanceSq)&&c[M.chain][M.resi]!="h"&&M.ss!="h"&&(c[M.chain][M.resi]="maybesheet");for(let g=0,A=n.length;g<A;g++)if(M=n[g],isFinite(M.hbondDistanceSq)&&c[M.chain][M.resi]=="maybesheet"){let x=M.hbondOther,l=c[x.chain][x.resi];(l=="maybesheet"||l=="s")&&(c[M.chain][M.resi]="s",c[x.chain][x.resi]="s")}for(let g in c){for(let A=1;A<c[g].length-1;A++){let x=c[g][A-1],l=c[g][A+1];E=c[g][A],x=="s"&&x==l&&E!=x&&(c[g][A]=x)}for(let A=0;A<c[g].length;A++){let x=c[g][A];(x=="h"||x=="s")&&c[g][A-1]!=x&&c[g][A+1]!=x&&delete c[g][A]}}for(y=0,_=n.length;y<_;y++)M=n[y],E=c[M.chain][M.resi],delete M.hbondOther,delete M.hbondDistanceSq,!(typeof E>"u"||E=="maybesheet")&&(M.ss=E,c[M.chain][M.resi-1]!=E&&(M.ssbegin=!0),c[M.chain][M.resi+1]!=E&&(M.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts":(e,t,r)=>{r.r(t),r.d(t,{getSinglePDB:()=>C});var s=r("./src/WebGL/index.ts"),o=r("./src/parsers/utils/atomNameToElem.ts"),n=r("./src/parsers/utils/bondLength.ts"),f=r("./src/parsers/utils/computeSecondaryStructure.ts"),c=r("./src/parsers/utils/isEmpty.ts"),y=r("./src/parsers/utils/processSymmetries.ts"),_=r("./src/parsers/utils/assignPDBBonds.ts"),b=r("./src/parsers/utils/validateBonds.ts");function C(M,E,P){var a=[],u=E.assignBonds===void 0?!0:E.assignBonds,g=!E.keepH,A=!!E.noSecondaryStructure,x=!E.noComputeSecondaryStructure,l=!E.doAssembly,v=E.altLoc?E.altLoc:"A",w={symmetries:[]},O,T=[],D=[],I,k={};for(let Ge=0;Ge<M.length;Ge++){I=M[Ge].replace(/^\s*/,"");var z=I.substr(0,6),L,B,H;if(z.indexOf("END")==0){if(T=M.slice(Ge+1),z=="END")for(var V in P)P.hasOwnProperty(V)&&delete P[V];break}else if(z=="ATOM  "||z=="HETATM"){var N,U,G,$,W,j,se,he,ce,ue,Ee,pe;if(Ee=I.substr(16,1),Ee!=" "&&Ee!=v&&v!="*"||(ue=parseInt(I.substr(6,5)),O=I.substr(12,4).replace(/ /g,""),N=I.substr(17,3).replace(/ /g,""),U=I.substr(21,1),G=parseInt(I.substr(22,4)),$=I.substr(26,1),W=parseFloat(I.substr(30,8)),j=parseFloat(I.substr(38,8)),se=parseFloat(I.substr(46,8)),pe=parseFloat(I.substr(60,8)),ce=I.substr(76,2).replace(/ /g,""),ce===""||typeof n.bondTable[ce]>"u"?ce=(0,o.atomNameToElem)(I.substr(12,2),I[0]=="A"):ce=ce[0].toUpperCase()+ce.substr(1).toLowerCase(),ce=="H"&&g))continue;z[0]=="H"?he=!0:he=!1,D[ue]=a.length,a.push({resn:N,x:W,y:j,z:se,elem:ce,hetflag:he,altLoc:Ee,chain:U,resi:G,icode:$,rescode:G+($!=" "?"^"+$:""),serial:ue,atom:O,bonds:[],ss:"c",bondOrder:[],properties:{},b:pe,pdbline:I})}else if(z=="SHEET "){L=I.substr(21,1),B=parseInt(I.substr(22,4)),I.substr(32,1),H=parseInt(I.substr(33,4)),L in P||(P[L]={}),P[L][B]="s1";for(var fe=B+1;fe<H;fe++)P[L][fe]="s";P[L][H]="s2"}else if(z=="CONECT"){var Ue=parseInt(I.substr(6,5)),Oe=D[Ue],ee=a[Oe],J=[11,16,21,26];for(let Ke=0;Ke<4;Ke++){var ne=parseInt(I.substr(J[Ke],5)),le=D[ne];let Q=Oe+":"+le;var we=a[le];if(ee!==void 0&&we!==void 0)if(!k[Q])k[Q]=1,(ee.bonds.length==0||ee.bonds[ee.bonds.length-1]!=le)&&(ee.bonds.push(le),ee.bondOrder.push(1));else{k[Q]+=1;for(let Z=0;Z<ee.bonds.length;Z++)if(ee.bonds[Z]==le){var Pe=k[Q];Pe>=4?ee.bondOrder[Z]=1:ee.bondOrder[Z]=Pe}}}}else if(z=="HELIX "){L=I.substr(19,1),B=parseInt(I.substr(21,4)),I.substr(31,1),H=parseInt(I.substr(33,4)),L in P||(P[L]={}),P[L][B]="h1";for(let Ke=B+1;Ke<H;Ke++)P[L][Ke]="h";P[L][H]="h2"}else if(!l&&z=="REMARK"&&I.substr(13,5)=="BIOMT"){var Be,Ce=new s.Matrix4;for(Be=1;Be<=3;Be++)if(I=M[Ge].replace(/^\s*/,""),parseInt(I.substr(18,1))==Be)Ce.elements[Be-1]=parseFloat(I.substr(23,10)),Ce.elements[Be-1+4]=parseFloat(I.substr(33,10)),Ce.elements[Be-1+8]=parseFloat(I.substr(43,10)),Ce.elements[Be-1+12]=parseFloat(I.substr(53)),Ge++;else for(;I.substr(13,5)=="BIOMT";)Ge++,I=M[Ge].replace(/^\s*/,"");Ce.elements[3]=0,Ce.elements[7]=0,Ce.elements[11]=0,Ce.elements[15]=1,w.symmetries.push(Ce),Ge--}else if(z=="CRYST1"){let Ke,Q,Z,ie,ye,xe;Ke=parseFloat(I.substr(7,8)),Q=parseFloat(I.substr(16,8)),Z=parseFloat(I.substr(25,8)),ie=parseFloat(I.substr(34,6)),ye=parseFloat(I.substr(41,6)),xe=parseFloat(I.substr(48,6)),w.cryst={a:Ke,b:Q,c:Z,alpha:ie,beta:ye,gamma:xe}}else if(z=="ANISOU"){let Ke=parseInt(I.substr(6,5));var be=D[Ke],ge=a[be];if(ge){var Ae=I.substr(30).trim().split(/\s+/),De={u11:parseInt(Ae[0]),u22:parseInt(Ae[1]),u33:parseInt(Ae[2]),u12:parseInt(Ae[3]),u13:parseInt(Ae[4]),u23:parseInt(Ae[5])};ge.uMat=De}}}if((0,b.validateBonds)(a,D),u&&(0,_.assignPDBBonds)(a),l||(0,y.processSymmetries)(w.symmetries,a,E,w.cryst),x&&!A&&(0,f.computeSecondaryStructure)(a,E.hbondCutoff),!(0,c.isEmpty)(P)){for(let Ge=0;Ge<a.length;Ge++)if(O=a[Ge],O!==void 0&&O.chain in P&&O.resi in P[O.chain]){var Re=P[O.chain][O.resi];O.ss=Re[0],Re.length>1&&(Re[1]=="1"?O.ssbegin=!0:Re[1]=="2"&&(O.ssend=!0))}}return[a,w,T]}},"./src/parsers/utils/isEmpty.ts":(e,t,r)=>{r.r(t),r.d(t,{isEmpty:()=>s});function s(o){var n;for(n in o)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts":(e,t,r)=>{r.r(t),r.d(t,{processSymmetries:()=>o});var s=r("./src/WebGL/index.ts");function o(n,f,c,y){var _=!c.duplicateAssemblyAtoms,b=f.length,C=b,M,E,P;let a=-1;if(c.normalizeAssembly&&y){let v=(0,s.conversionMatrix3)(y.a,y.b,y.c,y.alpha,y.beta,y.gamma),w=new s.Matrix3;for(w.getInverse3(v),M=0;M<n.length;M++){let O=new s.Vector3(0,0,0);for(P=0;P<b;P++){let k=new s.Vector3(f[P].x,f[P].y,f[P].z);k.applyMatrix4(n[M]),k.applyMatrix3(w),O.add(k)}O.divideScalar(b);const T=[O.x,O.y,O.z];let D=[0,0,0];for(let k=0;k<3;k++){for(;T[k]<-.001;)T[k]+=1,D[k]+=1;for(;T[k]>1.001;)T[k]-=1,D[k]-=1}const I=new s.Vector3(D[0],D[1],D[2]);I.applyMatrix3(v),n[M].isNearlyIdentity()&&I.lengthSq()>.001&&(a=M),n[M].translate(I)}}if(_){if(n.length>1)for(M=0;M<f.length;M++){var x=[];for(E=0;E<n.length;E++)if(!n[E].isNearlyIdentity()){var l=new s.Vector3;l.set(f[M].x,f[M].y,f[M].z),l.applyMatrix4(n[E]),x.push(l)}f[M].symmetries=x}}else{for(P=0;P<b;P++)f[P].sym=-1;for(M=0;M<n.length;M++)if(!n[M].isNearlyIdentity()&&a!=M){let v=new s.Vector3;for(P=0;P<b;P++){var u=[];for(E=0;E<f[P].bonds.length;E++)u.push(f[P].bonds[E]+C);v.set(f[P].x,f[P].y,f[P].z),v.applyMatrix4(n[M]);var g={};for(var A in f[P])g[A]=f[P][A];g.x=v.x,g.y=v.y,g.z=v.z,g.bonds=u,g.sym=M,g.index=f.length,f.push(g)}C=f.length}else for(P=0;P<b;P++)f[P].sym=M;if(a>=0){let v=new s.Vector3;for(P=0;P<b;P++)v.set(f[P].x,f[P].y,f[P].z),v.applyMatrix4(n[a]),f[P].x=v.x,f[P].y=v.y,f[P].z=v.z}n.length=0}}},"./src/parsers/utils/standardResidues.ts":(e,t,r)=>{r.r(t),r.d(t,{standardResidues:()=>s});const s=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts":(e,t,r)=>{r.r(t),r.d(t,{validateBonds:()=>s});function s(o,n){for(var f=0,c=o.length;f<c;f++)for(var y=o[f],_=0;_<y.bonds.length;_++){var b=y.bonds[_],C=o[b],M=n[y.serial];if(C&&M){var E=C.bonds.indexOf(M);E<0&&(C.bonds.push(M),C.bondOrder.push(y.bondOrder[_]))}}}},"./src/partialCharges.ts":(e,t,r)=>{r.r(t),r.d(t,{applyPartialCharges:()=>o,partialCharges:()=>s});const s={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function o(n,f){if((!f||typeof n.partialCharge>"u")&&n.resn&&n.atom){var c=n.resn+":"+n.atom;n.properties.partialCharge=s[c]}}},"./src/specs.ts":(e,t,r)=>{r.r(t)},"./src/utilities.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts");function extend(e,t){for(var r in t)t.hasOwnProperty(r)&&t[r]!==void 0&&(e[r]=t[r]);return e}function deepCopy(e){let t,r,s;if(e==null)return{};if(typeof e!="object"||e===null)return e;t=Array.isArray(e)?[]:{};for(s in e)r=e[s],t[s]=deepCopy(r);return t}function isNumeric(e){var t=typeof e;return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))}function isEmptyObject(e){var t;for(t in e)return!1;return!0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?null:callback}function adjustVolumeStyle(e){e&&(e.volformat&&!(e.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(e.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(e.voldata,e.volformat)),e.volscheme&&(e.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(e.volscheme)))}function getExtent(e,t){var r,s,o,n,f,c,y,_,b,C,M=!t;if(r=s=o=9999,n=f=c=-9999,y=_=b=C=0,e.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var E=0;E<e.length;E++){var P=e[E];if(!(typeof P>"u"||!isFinite(P.x)||!isFinite(P.y)||!isFinite(P.z))&&(C++,y+=P.x,_+=P.y,b+=P.z,r=r<P.x?r:P.x,s=s<P.y?s:P.y,o=o<P.z?o:P.z,n=n>P.x?n:P.x,f=f>P.y?f:P.y,c=c>P.z?c:P.z,P.symmetries&&M))for(var a=0;a<P.symmetries.length;a++)C++,y+=P.symmetries[a].x,_+=P.symmetries[a].y,b+=P.symmetries[a].z,r=r<P.symmetries[a].x?r:P.symmetries[a].x,s=s<P.symmetries[a].y?s:P.symmetries[a].y,o=o<P.symmetries[a].z?o:P.symmetries[a].z,n=n>P.symmetries[a].x?n:P.symmetries[a].x,f=f>P.symmetries[a].y?f:P.symmetries[a].y,c=c>P.symmetries[a].z?c:P.symmetries[a].z}return[[r,s,o],[n,f,c],[y/C,_/C,b/C]]}function getPropertyRange(e,t){for(var r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=0,n=e.length;o<n;o++){var f=e[o],c=getAtomProperty(f,t);c!=null&&(c<r&&(r=c),c>s&&(s=c))}return!isFinite(r)&&!isFinite(s)?r=s=0:isFinite(r)?isFinite(s)||(s=r):r=s,[r,s]}class PausableTimer{constructor(t,r,s){this.total_time_run=0,this.fn=t,this.arg=s,this.countdown=r,this.start_time=new Date().getTime(),this.ident=setTimeout(t,r,s)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(e){for(var t=window.atob(e),r=t.length,s=new Uint8Array(r),o=0;o<r;o++)s[o]=t.charCodeAt(o);return s}function getAtomProperty(e,t){var r=null;return e.properties&&typeof e.properties[t]<"u"?r=e.properties[t]:typeof e[t]<"u"&&(r=e[t]),r}function mergeGeos(e,t){var r=t.geometry;r!==void 0&&e.geometryGroups.push(r.geometryGroups[0])}function specStringToObject(e){if(typeof e=="object")return e;if(typeof e>"u"||e==null)return e;try{return JSON.parse(e)}catch{}e=e.replace(/%7E/,"~");var t=function(M){return isNumeric(M)?Math.floor(parseFloat(M))==parseInt(M)||M.indexOf(".")>=0?parseFloat(M):parseInt(M):M==="true"?!0:M==="false"?!1:M},r={};if(e==="all")return r;for(var s=e.split(";"),o=0;o<s.length;o++){var n=s[o].split(":"),f=n[0],c={},y=n[1];if(y)if(y=y.replace(/~/g,"="),y.indexOf("=")!==-1)for(var _=y.split(","),b=0;b<_.length;b++){var C=_[b].split("=",2);c[C[0]]=t(C[1])}else y.indexOf(",")!==-1?c=y.split(","):c=t(y);r[f]=c}return r}function checkStatus(e){if(!e.ok)throw new Error(`HTTP ${e.status} - ${e.statusText}`);return e}function get(e,t){var r=fetch(e).then(checkStatus).then(s=>s.text());return t?r.then(t):r}function getbin(e,t,r,s){var o;return r=="POST"?o=fetch(e,{method:"POST",body:s}).then(n=>checkStatus(n)).then(n=>n.arrayBuffer()):o=fetch(e).then(n=>checkStatus(n)).then(n=>n.arrayBuffer()),t?o.then(t):o}function download(e,t,r,s){var o="",n="",f="",c="",y=null,_=t.addModel();if(e.indexOf(":")<0&&(e.length==4?e="pdb:"+e:isNaN(e)?e="url:"+e:e="cid:"+e),e.substr(0,5)==="mmtf:")n=r&&r.pdbUri?r.pdbUri:"https://mmtf.rcsb.org/v1.0/full/",e=e.substr(5).toUpperCase(),c=n+e,r&&typeof r.noComputeSecondaryStructure>"u"&&(r.noComputeSecondaryStructure=!0),y=new Promise(function(C){getbin(c).then(function(M){_.addMolData(M,"mmtf",r),t.zoomTo(),t.render(),C(_)},function(){console.log("fetch of "+c+" failed.")})});else{if(e.substr(0,4)==="pdb:"){if(o="mmtf",r&&r.format&&(o=r.format),r&&typeof r.noComputeSecondaryStructure>"u"&&(r.noComputeSecondaryStructure=!0),e=e.substr(4).toUpperCase(),!e.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}o=="mmtf"?(f=r&&r.mmtfUri?r.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",c=f+e.toUpperCase()):(n=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",c=n+e+"."+o)}else if(e.substr(0,4)=="cid:"){if(o="sdf",e=e.substr(4),!e.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}c="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else e.substr(0,4)=="url:"&&(c=e.substr(4),o=c);var b=function(C){_.addMolData(C,o,r),t.zoomTo(),t.render()};y=new Promise(function(C){o=="mmtf"?getbin(c).then(function(M){b(M),C(_)}).catch(function(){n=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",c=n+e+".pdb",o="pdb",console.log("falling back to pdb format"),get(c).then(function(M){b(M),C(_)}).catch(function(M){b(""),C(_),console.log("fetch of "+c+" failed: "+M.statusText)})}):get(c).then(function(M){b(M),C(_)}).catch(function(M){b(""),C(_),console.log("fetch of "+c+" failed: "+M.statusText)})})}return s?(y.then(function(C){s(C)}),_):y}function getColorFromStyle(e,t){let r=t.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]<"u")r=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r];else if(typeof r=="string"&&r.endsWith("Carbon")){let f=r.substring(0,r.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[f]<"u"){let c=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);c.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[f],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]={prop:"elem",map:c},r=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]}}let s=e.color;if(typeof t.color<"u"&&t.color!="spectrum"&&(s=t.color),typeof r<"u"){let f,c;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[r]<"u")r=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[r],typeof r[e[r.prop]]<"u"&&(s=r.map[e[r.prop]]);else if(typeof r[e[r.prop]]<"u")s=r.map[e[r.prop]];else if(typeof r.prop<"u"&&typeof r.gradient<"u"){f=r.prop;var o=r.gradient;typeof _Gradient__WEBPACK_IMPORTED_MODULE_0__.builtinGradients[o]<"u"&&(o=new _Gradient__WEBPACK_IMPORTED_MODULE_0__.builtinGradients[o](r.min,r.max,r.mid?r.mid:r.colors));let y=o.range()||[-1,1];c=getAtomProperty(e,f),c!=null&&(s=o.valueToHex(c,y))}else typeof r.prop<"u"&&typeof r.map<"u"?(f=r.prop,c=getAtomProperty(e,f),typeof r.map[c]<"u"&&(s=r.map[c])):typeof t.colorscheme[e.elem]<"u"?s=t.colorscheme[e.elem]:console.log("Could not interpret colorscheme "+r)}else typeof t.colorfunc<"u"&&(s=t.colorfunc(e));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(s)}function getElement(e){let t=e;return typeof e=="string"?t=document.querySelector("#"+e):typeof e=="object"&&e.get&&(t=e.get(0)),t}},"./node_modules/upng-js/UPNG.js":(e,t,r)=>{(function(){var s={},o;e.exports=s,o=r("./node_modules/upng-js/node_modules/pako/index.js"),function(n,f){n.toRGBA8=function(c){var y=c.width,_=c.height;if(c.tabs.acTL==null)return[n.toRGBA8.decodeImage(c.data,y,_,c).buffer];var b=[];c.frames[0].data==null&&(c.frames[0].data=c.data);for(var C,M=new Uint8Array(y*_*4),E=0;E<c.frames.length;E++){var P=c.frames[E],a=P.rect.x,u=P.rect.y,g=P.rect.width,A=P.rect.height,x=n.toRGBA8.decodeImage(P.data,g,A,c);if(E==0?C=x:P.blend==0?n._copyTile(x,g,A,C,y,_,a,u,0):P.blend==1&&n._copyTile(x,g,A,C,y,_,a,u,1),b.push(C.buffer),C=C.slice(0),P.dispose!=0){if(P.dispose==1)n._copyTile(M,g,A,C,y,_,a,u,0);else if(P.dispose==2){for(var l=E-1;c.frames[l].dispose==2;)l--;C=new Uint8Array(b[l]).slice(0)}}}return b},n.toRGBA8.decodeImage=function(c,y,_,b){var C=y*_,M=n.decode._getBPP(b),E=Math.ceil(y*M/8),P=new Uint8Array(C*4),a=new Uint32Array(P.buffer),u=b.ctype,g=b.depth,A=n._bin.readUshort;if(u==6){var x=C<<2;if(g==8)for(var l=0;l<x;l++)P[l]=c[l];if(g==16)for(var l=0;l<x;l++)P[l]=c[l<<1]}else if(u==2){var v=b.tabs.tRNS,w=-1,O=-1,T=-1;if(v&&(w=v[0],O=v[1],T=v[2]),g==8)for(var l=0;l<C;l++){var D=l<<2,I=l*3;P[D]=c[I],P[D+1]=c[I+1],P[D+2]=c[I+2],P[D+3]=255,w!=-1&&c[I]==w&&c[I+1]==O&&c[I+2]==T&&(P[D+3]=0)}if(g==16)for(var l=0;l<C;l++){var D=l<<2,I=l*6;P[D]=c[I],P[D+1]=c[I+2],P[D+2]=c[I+4],P[D+3]=255,w!=-1&&A(c,I)==w&&A(c,I+2)==O&&A(c,I+4)==T&&(P[D+3]=0)}}else if(u==3){var k=b.tabs.PLTE,z=b.tabs.tRNS,L=z?z.length:0;if(g==1)for(var B=0;B<_;B++)for(var H=B*E,V=B*y,l=0;l<y;l++){var D=V+l<<2,N=c[H+(l>>3)]>>7-((l&7)<<0)&1,U=3*N;P[D]=k[U],P[D+1]=k[U+1],P[D+2]=k[U+2],P[D+3]=N<L?z[N]:255}if(g==2)for(var B=0;B<_;B++)for(var H=B*E,V=B*y,l=0;l<y;l++){var D=V+l<<2,N=c[H+(l>>2)]>>6-((l&3)<<1)&3,U=3*N;P[D]=k[U],P[D+1]=k[U+1],P[D+2]=k[U+2],P[D+3]=N<L?z[N]:255}if(g==4)for(var B=0;B<_;B++)for(var H=B*E,V=B*y,l=0;l<y;l++){var D=V+l<<2,N=c[H+(l>>1)]>>4-((l&1)<<2)&15,U=3*N;P[D]=k[U],P[D+1]=k[U+1],P[D+2]=k[U+2],P[D+3]=N<L?z[N]:255}if(g==8)for(var l=0;l<C;l++){var D=l<<2,N=c[l],U=3*N;P[D]=k[U],P[D+1]=k[U+1],P[D+2]=k[U+2],P[D+3]=N<L?z[N]:255}}else if(u==4){if(g==8)for(var l=0;l<C;l++){var D=l<<2,G=l<<1,$=c[G];P[D]=$,P[D+1]=$,P[D+2]=$,P[D+3]=c[G+1]}if(g==16)for(var l=0;l<C;l++){var D=l<<2,G=l<<2,$=c[G];P[D]=$,P[D+1]=$,P[D+2]=$,P[D+3]=c[G+2]}}else if(u==0){var w=b.tabs.tRNS?b.tabs.tRNS:-1;if(g==1)for(var l=0;l<C;l++){var $=255*(c[l>>3]>>7-(l&7)&1),W=$==w*255?0:255;a[l]=W<<24|$<<16|$<<8|$}if(g==2)for(var l=0;l<C;l++){var $=85*(c[l>>2]>>6-((l&3)<<1)&3),W=$==w*85?0:255;a[l]=W<<24|$<<16|$<<8|$}if(g==4)for(var l=0;l<C;l++){var $=17*(c[l>>1]>>4-((l&1)<<2)&15),W=$==w*17?0:255;a[l]=W<<24|$<<16|$<<8|$}if(g==8)for(var l=0;l<C;l++){var $=c[l],W=$==w?0:255;a[l]=W<<24|$<<16|$<<8|$}if(g==16)for(var l=0;l<C;l++){var $=c[l<<1],W=A(c,l<<1)==w?0:255;a[l]=W<<24|$<<16|$<<8|$}}return P},n.decode=function(c){for(var y=new Uint8Array(c),_=8,b=n._bin,C=b.readUshort,M=b.readUint,E={tabs:{},frames:[]},P=new Uint8Array(y.length),a=0,u,g=0,A=[137,80,78,71,13,10,26,10],x=0;x<8;x++)if(y[x]!=A[x])throw"The input is not a PNG file!";for(;_<y.length;){var l=b.readUint(y,_);_+=4;var v=b.readASCII(y,_,4);if(_+=4,v=="IHDR")n.decode._IHDR(y,_,E);else if(v=="IDAT"){for(var x=0;x<l;x++)P[a+x]=y[_+x];a+=l}else if(v=="acTL")E.tabs[v]={num_frames:M(y,_),num_plays:M(y,_+4)},u=new Uint8Array(y.length);else if(v=="fcTL"){if(g!=0){var w=E.frames[E.frames.length-1];w.data=n.decode._decompress(E,u.slice(0,g),w.rect.width,w.rect.height),g=0}var O={x:M(y,_+12),y:M(y,_+16),width:M(y,_+4),height:M(y,_+8)},T=C(y,_+22);T=C(y,_+20)/(T==0?100:T);var D={rect:O,delay:Math.round(T*1e3),dispose:y[_+24],blend:y[_+25]};E.frames.push(D)}else if(v=="fdAT"){for(var x=0;x<l-4;x++)u[g+x]=y[_+x+4];g+=l-4}else if(v=="pHYs")E.tabs[v]=[b.readUint(y,_),b.readUint(y,_+4),y[_+8]];else if(v=="cHRM"){E.tabs[v]=[];for(var x=0;x<8;x++)E.tabs[v].push(b.readUint(y,_+x*4))}else if(v=="tEXt"){E.tabs[v]==null&&(E.tabs[v]={});var I=b.nextZero(y,_),k=b.readASCII(y,_,I-_),z=b.readASCII(y,I+1,_+l-I-1);E.tabs[v][k]=z}else if(v=="iTXt"){E.tabs[v]==null&&(E.tabs[v]={});var I=0,L=_;I=b.nextZero(y,L);var k=b.readASCII(y,L,I-L);L=I+1,y[L],y[L+1],L+=2,I=b.nextZero(y,L),b.readASCII(y,L,I-L),L=I+1,I=b.nextZero(y,L),b.readUTF8(y,L,I-L),L=I+1;var z=b.readUTF8(y,L,l-(L-_));E.tabs[v][k]=z}else if(v=="PLTE")E.tabs[v]=b.readBytes(y,_,l);else if(v=="hIST"){var B=E.tabs.PLTE.length/3;E.tabs[v]=[];for(var x=0;x<B;x++)E.tabs[v].push(C(y,_+x*2))}else if(v=="tRNS")E.ctype==3?E.tabs[v]=b.readBytes(y,_,l):E.ctype==0?E.tabs[v]=C(y,_):E.ctype==2&&(E.tabs[v]=[C(y,_),C(y,_+2),C(y,_+4)]);else if(v=="gAMA")E.tabs[v]=b.readUint(y,_)/1e5;else if(v=="sRGB")E.tabs[v]=y[_];else if(v=="bKGD")E.ctype==0||E.ctype==4?E.tabs[v]=[C(y,_)]:E.ctype==2||E.ctype==6?E.tabs[v]=[C(y,_),C(y,_+2),C(y,_+4)]:E.ctype==3&&(E.tabs[v]=y[_]);else if(v=="IEND"){if(g!=0){var w=E.frames[E.frames.length-1];w.data=n.decode._decompress(E,u.slice(0,g),w.rect.width,w.rect.height),g=0}E.data=n.decode._decompress(E,P,E.width,E.height);break}_+=l,b.readUint(y,_),_+=4}return delete E.compress,delete E.interlace,delete E.filter,E},n.decode._decompress=function(c,y,_,b){return c.compress==0&&(y=n.decode._inflate(y)),c.interlace==0?y=n.decode._filterZero(y,c,0,_,b):c.interlace==1&&(y=n.decode._readInterlace(y,c)),y},n.decode._inflate=function(c){return f.inflate(c)},n.decode._readInterlace=function(c,y){for(var _=y.width,b=y.height,C=n.decode._getBPP(y),M=C>>3,E=Math.ceil(_*C/8),P=new Uint8Array(b*E),a=0,u=[0,0,4,0,2,0,1],g=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],x=[8,8,4,4,2,2,1],l=0;l<7;){for(var v=A[l],w=x[l],O=0,T=0,D=u[l];D<b;)D+=v,T++;for(var I=g[l];I<_;)I+=w,O++;var k=Math.ceil(O*C/8);n.decode._filterZero(c,y,a,O,T);for(var z=0,L=u[l];L<b;){for(var B=g[l],H=a+z*k<<3;B<_;){if(C==1){var V=c[H>>3];V=V>>7-(H&7)&1,P[L*E+(B>>3)]|=V<<7-((B&3)<<0)}if(C==2){var V=c[H>>3];V=V>>6-(H&7)&3,P[L*E+(B>>2)]|=V<<6-((B&3)<<1)}if(C==4){var V=c[H>>3];V=V>>4-(H&7)&15,P[L*E+(B>>1)]|=V<<4-((B&1)<<2)}if(C>=8)for(var N=L*E+B*M,U=0;U<M;U++)P[N+U]=c[(H>>3)+U];H+=C,B+=w}z++,L+=v}O*T!=0&&(a+=T*(1+k)),l=l+1}return P},n.decode._getBPP=function(c){var y=[1,null,3,1,2,null,4][c.ctype];return y*c.depth},n.decode._filterZero=function(c,y,_,b,C){var M=n.decode._getBPP(y),E=Math.ceil(b*M/8),P=n.decode._paeth;M=Math.ceil(M/8);for(var a=0;a<C;a++){var u=_+a*E,g=u+a+1,A=c[g-1];if(A==0)for(var x=0;x<E;x++)c[u+x]=c[g+x];else if(A==1){for(var x=0;x<M;x++)c[u+x]=c[g+x];for(var x=M;x<E;x++)c[u+x]=c[g+x]+c[u+x-M]&255}else if(a==0){for(var x=0;x<M;x++)c[u+x]=c[g+x];if(A==2)for(var x=M;x<E;x++)c[u+x]=c[g+x]&255;if(A==3)for(var x=M;x<E;x++)c[u+x]=c[g+x]+(c[u+x-M]>>1)&255;if(A==4)for(var x=M;x<E;x++)c[u+x]=c[g+x]+P(c[u+x-M],0,0)&255}else{if(A==2)for(var x=0;x<E;x++)c[u+x]=c[g+x]+c[u+x-E]&255;if(A==3){for(var x=0;x<M;x++)c[u+x]=c[g+x]+(c[u+x-E]>>1)&255;for(var x=M;x<E;x++)c[u+x]=c[g+x]+(c[u+x-E]+c[u+x-M]>>1)&255}if(A==4){for(var x=0;x<M;x++)c[u+x]=c[g+x]+P(0,c[u+x-E],0)&255;for(var x=M;x<E;x++)c[u+x]=c[g+x]+P(c[u+x-M],c[u+x-E],c[u+x-M-E])&255}}}return c},n.decode._paeth=function(c,y,_){var b=c+y-_,C=Math.abs(b-c),M=Math.abs(b-y),E=Math.abs(b-_);return C<=M&&C<=E?c:M<=E?y:_},n.decode._IHDR=function(c,y,_){var b=n._bin;_.width=b.readUint(c,y),y+=4,_.height=b.readUint(c,y),y+=4,_.depth=c[y],y++,_.ctype=c[y],y++,_.compress=c[y],y++,_.filter=c[y],y++,_.interlace=c[y],y++},n._bin={nextZero:function(c,y){for(;c[y]!=0;)y++;return y},readUshort:function(c,y){return c[y]<<8|c[y+1]},writeUshort:function(c,y,_){c[y]=_>>8&255,c[y+1]=_&255},readUint:function(c,y){return c[y]*16777216+(c[y+1]<<16|c[y+2]<<8|c[y+3])},writeUint:function(c,y,_){c[y]=_>>24&255,c[y+1]=_>>16&255,c[y+2]=_>>8&255,c[y+3]=_&255},readASCII:function(c,y,_){for(var b="",C=0;C<_;C++)b+=String.fromCharCode(c[y+C]);return b},writeASCII:function(c,y,_){for(var b=0;b<_.length;b++)c[y+b]=_.charCodeAt(b)},readBytes:function(c,y,_){for(var b=[],C=0;C<_;C++)b.push(c[y+C]);return b},pad:function(c){return c.length<2?"0"+c:c},readUTF8:function(c,y,_){for(var b="",C,M=0;M<_;M++)b+="%"+n._bin.pad(c[y+M].toString(16));try{C=decodeURIComponent(b)}catch{return n._bin.readASCII(c,y,_)}return C}},n._copyTile=function(c,y,_,b,C,M,E,P,a){for(var u=Math.min(y,C),g=Math.min(_,M),A=0,x=0,l=0;l<g;l++)for(var v=0;v<u;v++)if(E>=0&&P>=0?(A=l*y+v<<2,x=(P+l)*C+E+v<<2):(A=(-P+l)*y-E+v<<2,x=l*C+v<<2),a==0)b[x]=c[A],b[x+1]=c[A+1],b[x+2]=c[A+2],b[x+3]=c[A+3];else if(a==1){var w=c[A+3]*.00392156862745098,O=c[A]*w,T=c[A+1]*w,D=c[A+2]*w,I=b[x+3]*(1/255),k=b[x]*I,z=b[x+1]*I,L=b[x+2]*I,B=1-w,H=w+I*B,V=H==0?0:1/H;b[x+3]=255*H,b[x+0]=(O+k*B)*V,b[x+1]=(T+z*B)*V,b[x+2]=(D+L*B)*V}else if(a==2){var w=c[A+3],O=c[A],T=c[A+1],D=c[A+2],I=b[x+3],k=b[x],z=b[x+1],L=b[x+2];w==I&&O==k&&T==z&&D==L?(b[x]=0,b[x+1]=0,b[x+2]=0,b[x+3]=0):(b[x]=O,b[x+1]=T,b[x+2]=D,b[x+3]=w)}else if(a==3){var w=c[A+3],O=c[A],T=c[A+1],D=c[A+2],I=b[x+3],k=b[x],z=b[x+1],L=b[x+2];if(w==I&&O==k&&T==z&&D==L)continue;if(w<220&&I>20)return!1}return!0},n.encode=function(c,y,_,b,C,M){b==null&&(b=0),M==null&&(M=!1);for(var E=new Uint8Array(c[0].byteLength*c.length+100),P=[137,80,78,71,13,10,26,10],a=0;a<8;a++)E[a]=P[a];var u=8,g=n._bin,A=n.crc.crc,x=g.writeUint,l=g.writeUshort,v=g.writeASCII,w=n.encode.compressPNG(c,y,_,b,M);x(E,u,13),u+=4,v(E,u,"IHDR"),u+=4,x(E,u,y),u+=4,x(E,u,_),u+=4,E[u]=w.depth,u++,E[u]=w.ctype,u++,E[u]=0,u++,E[u]=0,u++,E[u]=0,u++,x(E,u,A(E,u-17,17)),u+=4,x(E,u,1),u+=4,v(E,u,"sRGB"),u+=4,E[u]=1,u++,x(E,u,A(E,u-5,5)),u+=4;var O=c.length>1;if(O&&(x(E,u,8),u+=4,v(E,u,"acTL"),u+=4,x(E,u,c.length),u+=4,x(E,u,0),u+=4,x(E,u,A(E,u-12,12)),u+=4),w.ctype==3){var T=w.plte.length;x(E,u,T*3),u+=4,v(E,u,"PLTE"),u+=4;for(var a=0;a<T;a++){var D=a*3,I=w.plte[a],k=I&255,z=I>>8&255,L=I>>16&255;E[u+D+0]=k,E[u+D+1]=z,E[u+D+2]=L}if(u+=T*3,x(E,u,A(E,u-T*3-4,T*3+4)),u+=4,w.gotAlpha){x(E,u,T),u+=4,v(E,u,"tRNS"),u+=4;for(var a=0;a<T;a++)E[u+a]=w.plte[a]>>24&255;u+=T,x(E,u,A(E,u-T-4,T+4)),u+=4}}for(var B=0,H=0;H<w.frames.length;H++){var V=w.frames[H];O&&(x(E,u,26),u+=4,v(E,u,"fcTL"),u+=4,x(E,u,B++),u+=4,x(E,u,V.rect.width),u+=4,x(E,u,V.rect.height),u+=4,x(E,u,V.rect.x),u+=4,x(E,u,V.rect.y),u+=4,l(E,u,C[H]),u+=2,l(E,u,1e3),u+=2,E[u]=V.dispose,u++,E[u]=V.blend,u++,x(E,u,A(E,u-30,30)),u+=4);var N=V.cimg,T=N.length;x(E,u,T+(H==0?0:4)),u+=4;var U=u;v(E,u,H==0?"IDAT":"fdAT"),u+=4,H!=0&&(x(E,u,B++),u+=4);for(var a=0;a<T;a++)E[u+a]=N[a];u+=T,x(E,u,A(E,U,u-U)),u+=4}return x(E,u,0),u+=4,v(E,u,"IEND"),u+=4,x(E,u,A(E,u-4,4)),u+=4,E.buffer.slice(0,u)},n.encode.compressPNG=function(c,y,_,b,C){for(var M=n.encode.compress(c,y,_,b,!1,C),E=0;E<c.length;E++){var P=M.frames[E];P.rect.width;var a=P.rect.height,u=P.bpl,g=P.bpp,A=new Uint8Array(a*u+a);P.cimg=n.encode._filterZero(P.img,a,g,u,A)}return M},n.encode.compress=function(c,y,_,b,C,M){M==null&&(M=!1);for(var E=6,P=8,a=4,u=255,g=0;g<c.length;g++)for(var A=new Uint8Array(c[g]),x=A.length,l=0;l<x;l+=4)u&=A[l+3];var v=u!=255,w={},O=[];if(c.length!=0&&(w[0]=0,O.push(0),b!=0&&b--),b!=0){var T=n.quantize(c,b,C);c=T.bufs;for(var l=0;l<T.plte.length;l++){var D=T.plte[l].est.rgba;w[D]==null&&(w[D]=O.length,O.push(D))}}else for(var g=0;g<c.length;g++)for(var I=new Uint32Array(c[g]),x=I.length,l=0;l<x;l++){var D=I[l];if((l<y||D!=I[l-1]&&D!=I[l-y])&&w[D]==null&&(w[D]=O.length,O.push(D),O.length>=300))break}var k=v?C:!1,z=O.length;z<=256&&M==!1&&(z<=2?P=1:z<=4?P=2:z<=16?P=4:P=8,C&&(P=8),v=!0);for(var L=[],g=0;g<c.length;g++){var B=new Uint8Array(c[g]),H=new Uint32Array(B.buffer),V=0,N=0,U=y,G=_,$=0;if(g!=0&&!k){for(var W=C||g==1||L[L.length-2].dispose==2?1:2,j=0,se=1e9,he=0;he<W;he++){for(var J=new Uint8Array(c[g-1-he]),ce=new Uint32Array(c[g-1-he]),ue=y,Ee=_,pe=-1,fe=-1,Ue=0;Ue<_;Ue++)for(var Oe=0;Oe<y;Oe++){var l=Ue*y+Oe;H[l]!=ce[l]&&(Oe<ue&&(ue=Oe),Oe>pe&&(pe=Oe),Ue<Ee&&(Ee=Ue),Ue>fe&&(fe=Ue))}var ee=pe==-1?1:(pe-ue+1)*(fe-Ee+1);ee<se&&(se=ee,j=he,pe==-1?(V=N=0,U=G=1):(V=ue,N=Ee,U=pe-ue+1,G=fe-Ee+1))}var J=new Uint8Array(c[g-1-j]);j==1&&(L[L.length-1].dispose=2);var ne=new Uint8Array(U*G*4);new Uint32Array(ne.buffer),n._copyTile(J,y,_,ne,U,G,-V,-N,0),n._copyTile(B,y,_,ne,U,G,-V,-N,3)?(n._copyTile(B,y,_,ne,U,G,-V,-N,2),$=1):(n._copyTile(B,y,_,ne,U,G,-V,-N,0),$=0),B=ne,H=new Uint32Array(B.buffer)}var le=4*U;if(z<=256&&M==!1){le=Math.ceil(P*U/8);for(var ne=new Uint8Array(le*G),Ue=0;Ue<G;Ue++){var l=Ue*le,we=Ue*U;if(P==8)for(var Oe=0;Oe<U;Oe++)ne[l+Oe]=w[H[we+Oe]];else if(P==4)for(var Oe=0;Oe<U;Oe++)ne[l+(Oe>>1)]|=w[H[we+Oe]]<<4-(Oe&1)*4;else if(P==2)for(var Oe=0;Oe<U;Oe++)ne[l+(Oe>>2)]|=w[H[we+Oe]]<<6-(Oe&3)*2;else if(P==1)for(var Oe=0;Oe<U;Oe++)ne[l+(Oe>>3)]|=w[H[we+Oe]]<<7-(Oe&7)*1}B=ne,E=3,a=1}else if(v==!1&&c.length==1){for(var ne=new Uint8Array(U*G*3),Pe=U*G,l=0;l<Pe;l++){var Be=l*3,Ce=l*4;ne[Be]=B[Ce],ne[Be+1]=B[Ce+1],ne[Be+2]=B[Ce+2]}B=ne,E=2,a=3,le=3*U}L.push({rect:{x:V,y:N,width:U,height:G},img:B,bpl:le,bpp:a,blend:$,dispose:k?1:0})}return{ctype:E,depth:P,plte:O,gotAlpha:v,frames:L}},n.encode._filterZero=function(c,y,_,b,C){for(var M=[],E=0;E<5;E++)if(!(y*b>5e5&&(E==2||E==3||E==4))){for(var P=0;P<y;P++)n.encode._filterLine(C,c,P,b,_,E);if(M.push(f.deflate(C)),_==1)break}for(var a,u=1e9,g=0;g<M.length;g++)M[g].length<u&&(a=g,u=M[g].length);return M[a]},n.encode._filterLine=function(c,y,_,b,C,M){var E=_*b,P=E+_,a=n.decode._paeth;if(c[P]=M,P++,M==0)for(var u=0;u<b;u++)c[P+u]=y[E+u];else if(M==1){for(var u=0;u<C;u++)c[P+u]=y[E+u];for(var u=C;u<b;u++)c[P+u]=y[E+u]-y[E+u-C]+256&255}else if(_==0){for(var u=0;u<C;u++)c[P+u]=y[E+u];if(M==2)for(var u=C;u<b;u++)c[P+u]=y[E+u];if(M==3)for(var u=C;u<b;u++)c[P+u]=y[E+u]-(y[E+u-C]>>1)+256&255;if(M==4)for(var u=C;u<b;u++)c[P+u]=y[E+u]-a(y[E+u-C],0,0)+256&255}else{if(M==2)for(var u=0;u<b;u++)c[P+u]=y[E+u]+256-y[E+u-b]&255;if(M==3){for(var u=0;u<C;u++)c[P+u]=y[E+u]+256-(y[E+u-b]>>1)&255;for(var u=C;u<b;u++)c[P+u]=y[E+u]+256-(y[E+u-b]+y[E+u-C]>>1)&255}if(M==4){for(var u=0;u<C;u++)c[P+u]=y[E+u]+256-a(0,y[E+u-b],0)&255;for(var u=C;u<b;u++)c[P+u]=y[E+u]+256-a(y[E+u-C],y[E+u-b],y[E+u-C-b])&255}}},n.crc={table:function(){for(var c=new Uint32Array(256),y=0;y<256;y++){for(var _=y,b=0;b<8;b++)_&1?_=3988292384^_>>>1:_=_>>>1;c[y]=_}return c}(),update:function(c,y,_,b){for(var C=0;C<b;C++)c=n.crc.table[(c^y[_+C])&255]^c>>>8;return c},crc:function(c,y,_){return n.crc.update(4294967295,c,y,_)^4294967295}},n.quantize=function(c,y,_){for(var b=[],C=0,M=0;M<c.length;M++)b.push(n.encode.alphaMul(new Uint8Array(c[M]),_)),C+=c[M].byteLength;for(var E=new Uint8Array(C),P=new Uint32Array(E.buffer),a=0,M=0;M<b.length;M++){for(var u=b[M],g=u.length,A=0;A<g;A++)E[a+A]=u[A];a+=g}var x={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};x.bst=n.quantize.stats(E,x.i0,x.i1),x.est=n.quantize.estats(x.bst);for(var l=[x];l.length<y;){for(var v=0,w=0,M=0;M<l.length;M++)l[M].est.L>v&&(v=l[M].est.L,w=M);if(v<.001)break;var O=l[w],T=n.quantize.splitPixels(E,P,O.i0,O.i1,O.est.e,O.est.eMq255),D={i0:O.i0,i1:T,bst:null,est:null,tdst:0,left:null,right:null};D.bst=n.quantize.stats(E,D.i0,D.i1),D.est=n.quantize.estats(D.bst);var I={i0:T,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};I.bst={R:[],m:[],N:O.bst.N-D.bst.N};for(var M=0;M<16;M++)I.bst.R[M]=O.bst.R[M]-D.bst.R[M];for(var M=0;M<4;M++)I.bst.m[M]=O.bst.m[M]-D.bst.m[M];I.est=n.quantize.estats(I.bst),O.left=D,O.right=I,l[w]=D,l.push(I)}l.sort(function(W,j){return j.bst.N-W.bst.N});for(var k=0;k<b.length;k++){for(var z=n.quantize.planeDst,L=new Uint8Array(b[k].buffer),B=new Uint32Array(b[k].buffer),H=L.length,M=0;M<H;M+=4){for(var V=L[M]*.00392156862745098,N=L[M+1]*(1/255),U=L[M+2]*(1/255),G=L[M+3]*(1/255),$=x;$.left;)$=z($.est,V,N,U,G)<=0?$.left:$.right;B[M>>2]=$.est.rgba}b[k]=B.buffer}return{bufs:b,plte:l}},n.quantize.getNearest=function(c,y,_,b,C){if(c.left==null)return c.tdst=n.quantize.dist(c.est.q,y,_,b,C),c;var M=n.quantize.planeDst(c.est,y,_,b,C),E=c.left,P=c.right;M>0&&(E=c.right,P=c.left);var a=n.quantize.getNearest(E,y,_,b,C);if(a.tdst<=M*M)return a;var u=n.quantize.getNearest(P,y,_,b,C);return u.tdst<a.tdst?u:a},n.quantize.planeDst=function(c,y,_,b,C){var M=c.e;return M[0]*y+M[1]*_+M[2]*b+M[3]*C-c.eMq},n.quantize.dist=function(c,y,_,b,C){var M=y-c[0],E=_-c[1],P=b-c[2],a=C-c[3];return M*M+E*E+P*P+a*a},n.quantize.splitPixels=function(c,y,_,b,C,M){var E=n.quantize.vecDot;for(b-=4;_<b;){for(;E(c,_,C)<=M;)_+=4;for(;E(c,b,C)>M;)b-=4;if(_>=b)break;var P=y[_>>2];y[_>>2]=y[b>>2],y[b>>2]=P,_+=4,b-=4}for(;E(c,_,C)>M;)_-=4;return _+4},n.quantize.vecDot=function(c,y,_){return c[y]*_[0]+c[y+1]*_[1]+c[y+2]*_[2]+c[y+3]*_[3]},n.quantize.stats=function(c,y,_){for(var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=[0,0,0,0],M=_-y>>2,E=y;E<_;E+=4){var P=c[E]*.00392156862745098,a=c[E+1]*(1/255),u=c[E+2]*(1/255),g=c[E+3]*(1/255);C[0]+=P,C[1]+=a,C[2]+=u,C[3]+=g,b[0]+=P*P,b[1]+=P*a,b[2]+=P*u,b[3]+=P*g,b[5]+=a*a,b[6]+=a*u,b[7]+=a*g,b[10]+=u*u,b[11]+=u*g,b[15]+=g*g}return b[4]=b[1],b[8]=b[2],b[12]=b[3],b[9]=b[6],b[13]=b[7],b[14]=b[11],{R:b,m:C,N:M}},n.quantize.estats=function(c){var y=c.R,_=c.m,b=c.N,C=_[0],M=_[1],E=_[2],P=_[3],a=b==0?0:1/b,u=[y[0]-C*C*a,y[1]-C*M*a,y[2]-C*E*a,y[3]-C*P*a,y[4]-M*C*a,y[5]-M*M*a,y[6]-M*E*a,y[7]-M*P*a,y[8]-E*C*a,y[9]-E*M*a,y[10]-E*E*a,y[11]-E*P*a,y[12]-P*C*a,y[13]-P*M*a,y[14]-P*E*a,y[15]-P*P*a],g=u,A=n.M4,x=[.5,.5,.5,.5],l=0,v=0;if(b!=0)for(var w=0;w<10&&(x=A.multVec(g,x),v=Math.sqrt(A.dot(x,x)),x=A.sml(1/v,x),!(Math.abs(v-l)<1e-9));w++)l=v;var O=[C*a,M*a,E*a,P*a],T=A.dot(A.sml(255,O),x),D=O[3]<.001?0:1/O[3];return{Cov:u,q:O,e:x,L:l,eMq255:T,eMq:A.dot(x,O),rgba:(Math.round(255*O[3])<<24|Math.round(255*O[2]*D)<<16|Math.round(255*O[1]*D)<<8|Math.round(255*O[0]*D)<<0)>>>0}},n.M4={multVec:function(c,y){return[c[0]*y[0]+c[1]*y[1]+c[2]*y[2]+c[3]*y[3],c[4]*y[0]+c[5]*y[1]+c[6]*y[2]+c[7]*y[3],c[8]*y[0]+c[9]*y[1]+c[10]*y[2]+c[11]*y[3],c[12]*y[0]+c[13]*y[1]+c[14]*y[2]+c[15]*y[3]]},dot:function(c,y){return c[0]*y[0]+c[1]*y[1]+c[2]*y[2]+c[3]*y[3]},sml:function(c,y){return[c*y[0],c*y[1],c*y[2],c*y[3]]}},n.encode.alphaMul=function(c,y){for(var _=new Uint8Array(c.length),b=c.length>>2,C=0;C<b;C++){var M=C<<2,E=c[M+3];y&&(E=E<128?0:255);var P=E*(1/255);_[M+0]=c[M+0]*P,_[M+1]=c[M+1]*P,_[M+2]=c[M+2]*P,_[M+3]=E}return _}}(s,o)})()},"./node_modules/upng-js/node_modules/pako/index.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,o=r("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),n=r("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),f=r("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),c={};s(c,o,n,f),e.exports=c},"./node_modules/upng-js/node_modules/pako/lib/deflate.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),o=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),n=r("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),f=r("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),c=r("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),y=Object.prototype.toString,_=0,b=4,C=0,M=1,E=2,P=-1,a=0,u=8;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({level:P,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},v||{});var w=this.options;w.raw&&w.windowBits>0?w.windowBits=-w.windowBits:w.gzip&&w.windowBits>0&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(O!==C)throw new Error(f[O]);if(w.header&&s.deflateSetHeader(this.strm,w.header),w.dictionary){var T;if(typeof w.dictionary=="string"?T=n.string2buf(w.dictionary):y.call(w.dictionary)==="[object ArrayBuffer]"?T=new Uint8Array(w.dictionary):T=w.dictionary,O=s.deflateSetDictionary(this.strm,T),O!==C)throw new Error(f[O]);this._dict_set=!0}}g.prototype.push=function(v,w){var O=this.strm,T=this.options.chunkSize,D,I;if(this.ended)return!1;I=w===~~w?w:w===!0?b:_,typeof v=="string"?O.input=n.string2buf(v):y.call(v)==="[object ArrayBuffer]"?O.input=new Uint8Array(v):O.input=v,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(T),O.next_out=0,O.avail_out=T),D=s.deflate(O,I),D!==M&&D!==C)return this.onEnd(D),this.ended=!0,!1;(O.avail_out===0||O.avail_in===0&&(I===b||I===E))&&(this.options.to==="string"?this.onData(n.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((O.avail_in>0||O.avail_out===0)&&D!==M);return I===b?(D=s.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===C):(I===E&&(this.onEnd(C),O.avail_out=0),!0)},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===C&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg};function A(v,w){var O=new g(w);if(O.push(v,!0),O.err)throw O.msg||f[O.err];return O.result}function x(v,w){return w=w||{},w.raw=!0,A(v,w)}function l(v,w){return w=w||{},w.gzip=!0,A(v,w)}t.Deflate=g,t.deflate=A,t.deflateRaw=x,t.gzip=l},"./node_modules/upng-js/node_modules/pako/lib/inflate.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),o=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),n=r("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),f=r("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),c=r("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),y=r("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),_=r("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),b=Object.prototype.toString;function C(P){if(!(this instanceof C))return new C(P);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},P||{});var a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(P&&P.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15||(a.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var u=s.inflateInit2(this.strm,a.windowBits);if(u!==f.Z_OK)throw new Error(c[u]);if(this.header=new _,s.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=n.string2buf(a.dictionary):b.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(u=s.inflateSetDictionary(this.strm,a.dictionary),u!==f.Z_OK)))throw new Error(c[u])}C.prototype.push=function(P,a){var u=this.strm,g=this.options.chunkSize,A=this.options.dictionary,x,l,v,w,O,T=!1;if(this.ended)return!1;l=a===~~a?a:a===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof P=="string"?u.input=n.binstring2buf(P):b.call(P)==="[object ArrayBuffer]"?u.input=new Uint8Array(P):u.input=P,u.next_in=0,u.avail_in=u.input.length;do{if(u.avail_out===0&&(u.output=new o.Buf8(g),u.next_out=0,u.avail_out=g),x=s.inflate(u,f.Z_NO_FLUSH),x===f.Z_NEED_DICT&&A&&(x=s.inflateSetDictionary(this.strm,A)),x===f.Z_BUF_ERROR&&T===!0&&(x=f.Z_OK,T=!1),x!==f.Z_STREAM_END&&x!==f.Z_OK)return this.onEnd(x),this.ended=!0,!1;u.next_out&&(u.avail_out===0||x===f.Z_STREAM_END||u.avail_in===0&&(l===f.Z_FINISH||l===f.Z_SYNC_FLUSH))&&(this.options.to==="string"?(v=n.utf8border(u.output,u.next_out),w=u.next_out-v,O=n.buf2string(u.output,v),u.next_out=w,u.avail_out=g-w,w&&o.arraySet(u.output,u.output,v,w,0),this.onData(O)):this.onData(o.shrinkBuf(u.output,u.next_out))),u.avail_in===0&&u.avail_out===0&&(T=!0)}while((u.avail_in>0||u.avail_out===0)&&x!==f.Z_STREAM_END);return x===f.Z_STREAM_END&&(l=f.Z_FINISH),l===f.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===f.Z_OK):(l===f.Z_SYNC_FLUSH&&(this.onEnd(f.Z_OK),u.avail_out=0),!0)},C.prototype.onData=function(P){this.chunks.push(P)},C.prototype.onEnd=function(P){P===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=P,this.msg=this.strm.msg};function M(P,a){var u=new C(a);if(u.push(P,!0),u.err)throw u.msg||c[u.err];return u.result}function E(P,a){return a=a||{},a.raw=!0,M(P,a)}t.Inflate=C,t.inflate=M,t.inflateRaw=E,t.ungzip=M},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":(e,t)=>{var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function s(f,c){return Object.prototype.hasOwnProperty.call(f,c)}t.assign=function(f){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var y=c.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var _ in y)s(y,_)&&(f[_]=y[_])}}return f},t.shrinkBuf=function(f,c){return f.length===c?f:f.subarray?f.subarray(0,c):(f.length=c,f)};var o={arraySet:function(f,c,y,_,b){if(c.subarray&&f.subarray){f.set(c.subarray(y,y+_),b);return}for(var C=0;C<_;C++)f[b+C]=c[y+C]},flattenChunks:function(f){var c,y,_,b,C,M;for(_=0,c=0,y=f.length;c<y;c++)_+=f[c].length;for(M=new Uint8Array(_),b=0,c=0,y=f.length;c<y;c++)C=f[c],M.set(C,b),b+=C.length;return M}},n={arraySet:function(f,c,y,_,b){for(var C=0;C<_;C++)f[b+C]=c[y+C]},flattenChunks:function(f){return[].concat.apply([],f)}};t.setTyped=function(f){f?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,n))},t.setTyped(r)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var f=new s.Buf8(256),c=0;c<256;c++)f[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;f[254]=f[254]=1,t.string2buf=function(_){var b,C,M,E,P,a=_.length,u=0;for(E=0;E<a;E++)C=_.charCodeAt(E),(C&64512)===55296&&E+1<a&&(M=_.charCodeAt(E+1),(M&64512)===56320&&(C=65536+(C-55296<<10)+(M-56320),E++)),u+=C<128?1:C<2048?2:C<65536?3:4;for(b=new s.Buf8(u),P=0,E=0;P<u;E++)C=_.charCodeAt(E),(C&64512)===55296&&E+1<a&&(M=_.charCodeAt(E+1),(M&64512)===56320&&(C=65536+(C-55296<<10)+(M-56320),E++)),C<128?b[P++]=C:C<2048?(b[P++]=192|C>>>6,b[P++]=128|C&63):C<65536?(b[P++]=224|C>>>12,b[P++]=128|C>>>6&63,b[P++]=128|C&63):(b[P++]=240|C>>>18,b[P++]=128|C>>>12&63,b[P++]=128|C>>>6&63,b[P++]=128|C&63);return b};function y(_,b){if(b<65534&&(_.subarray&&n||!_.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(_,b));for(var C="",M=0;M<b;M++)C+=String.fromCharCode(_[M]);return C}t.buf2binstring=function(_){return y(_,_.length)},t.binstring2buf=function(_){for(var b=new s.Buf8(_.length),C=0,M=b.length;C<M;C++)b[C]=_.charCodeAt(C);return b},t.buf2string=function(_,b){var C,M,E,P,a=b||_.length,u=new Array(a*2);for(M=0,C=0;C<a;){if(E=_[C++],E<128){u[M++]=E;continue}if(P=f[E],P>4){u[M++]=65533,C+=P-1;continue}for(E&=P===2?31:P===3?15:7;P>1&&C<a;)E=E<<6|_[C++]&63,P--;if(P>1){u[M++]=65533;continue}E<65536?u[M++]=E:(E-=65536,u[M++]=55296|E>>10&1023,u[M++]=56320|E&1023)}return y(u,M)},t.utf8border=function(_,b){var C;for(b=b||_.length,b>_.length&&(b=_.length),C=b-1;C>=0&&(_[C]&192)===128;)C--;return C<0||C===0?b:C+f[_[C]]>b?C:b}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":e=>{function t(r,s,o,n){for(var f=r&65535|0,c=r>>>16&65535|0,y=0;o!==0;){y=o>2e3?2e3:o,o-=y;do f=f+s[n++]|0,c=c+f|0;while(--y);f%=65521,c%=65521}return f|c<<16|0}e.exports=t},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":e=>{e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":e=>{function t(){for(var o,n=[],f=0;f<256;f++){o=f;for(var c=0;c<8;c++)o=o&1?3988292384^o>>>1:o>>>1;n[f]=o}return n}var r=t();function s(o,n,f,c){var y=r,_=c+f;o^=-1;for(var b=c;b<_;b++)o=o>>>8^y[(o^n[b])&255];return o^-1}e.exports=s},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=r("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),n=r("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),f=r("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),c=r("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),y=0,_=1,b=3,C=4,M=5,E=0,P=1,a=-2,u=-3,g=-5,A=-1,x=1,l=2,v=3,w=4,O=0,T=2,D=8,I=9,k=15,z=8,L=29,B=256,H=B+1+L,V=30,N=19,U=2*H+1,G=15,$=3,W=258,j=W+$+1,se=32,he=42,ce=69,ue=73,Ee=91,pe=103,fe=113,Ue=666,Oe=1,ee=2,J=3,ne=4,le=3;function we(F,Te){return F.msg=c[Te],Te}function Pe(F){return(F<<1)-(F>4?9:0)}function Be(F){for(var Te=F.length;--Te>=0;)F[Te]=0}function Ce(F){var Te=F.state,Ie=Te.pending;Ie>F.avail_out&&(Ie=F.avail_out),Ie!==0&&(s.arraySet(F.output,Te.pending_buf,Te.pending_out,Ie,F.next_out),F.next_out+=Ie,Te.pending_out+=Ie,F.total_out+=Ie,F.avail_out-=Ie,Te.pending-=Ie,Te.pending===0&&(Te.pending_out=0))}function be(F,Te){o._tr_flush_block(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,Te),F.block_start=F.strstart,Ce(F.strm)}function ge(F,Te){F.pending_buf[F.pending++]=Te}function Ae(F,Te){F.pending_buf[F.pending++]=Te>>>8&255,F.pending_buf[F.pending++]=Te&255}function De(F,Te,Ie,q){var de=F.avail_in;return de>q&&(de=q),de===0?0:(F.avail_in-=de,s.arraySet(Te,F.input,F.next_in,de,Ie),F.state.wrap===1?F.adler=n(F.adler,Te,de,Ie):F.state.wrap===2&&(F.adler=f(F.adler,Te,de,Ie)),F.next_in+=de,F.total_in+=de,de)}function Re(F,Te){var Ie=F.max_chain_length,q=F.strstart,de,Le,Xe=F.prev_length,Ye=F.nice_match,je=F.strstart>F.w_size-j?F.strstart-(F.w_size-j):0,nt=F.window,Mt=F.w_mask,st=F.prev,it=F.strstart+W,ot=nt[q+Xe-1],Et=nt[q+Xe];F.prev_length>=F.good_match&&(Ie>>=2),Ye>F.lookahead&&(Ye=F.lookahead);do if(de=Te,!(nt[de+Xe]!==Et||nt[de+Xe-1]!==ot||nt[de]!==nt[q]||nt[++de]!==nt[q+1])){q+=2,de++;do;while(nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&nt[++q]===nt[++de]&&q<it);if(Le=W-(it-q),q=it-W,Le>Xe){if(F.match_start=Te,Xe=Le,Le>=Ye)break;ot=nt[q+Xe-1],Et=nt[q+Xe]}}while((Te=st[Te&Mt])>je&&--Ie!==0);return Xe<=F.lookahead?Xe:F.lookahead}function Ge(F){var Te=F.w_size,Ie,q,de,Le,Xe;do{if(Le=F.window_size-F.lookahead-F.strstart,F.strstart>=Te+(Te-j)){s.arraySet(F.window,F.window,Te,Te,0),F.match_start-=Te,F.strstart-=Te,F.block_start-=Te,q=F.hash_size,Ie=q;do de=F.head[--Ie],F.head[Ie]=de>=Te?de-Te:0;while(--q);q=Te,Ie=q;do de=F.prev[--Ie],F.prev[Ie]=de>=Te?de-Te:0;while(--q);Le+=Te}if(F.strm.avail_in===0)break;if(q=De(F.strm,F.window,F.strstart+F.lookahead,Le),F.lookahead+=q,F.lookahead+F.insert>=$)for(Xe=F.strstart-F.insert,F.ins_h=F.window[Xe],F.ins_h=(F.ins_h<<F.hash_shift^F.window[Xe+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[Xe+$-1])&F.hash_mask,F.prev[Xe&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Xe,Xe++,F.insert--,!(F.lookahead+F.insert<$)););}while(F.lookahead<j&&F.strm.avail_in!==0)}function Ke(F,Te){var Ie=65535;for(Ie>F.pending_buf_size-5&&(Ie=F.pending_buf_size-5);;){if(F.lookahead<=1){if(Ge(F),F.lookahead===0&&Te===y)return Oe;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var q=F.block_start+Ie;if((F.strstart===0||F.strstart>=q)&&(F.lookahead=F.strstart-q,F.strstart=q,be(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-j&&(be(F,!1),F.strm.avail_out===0))return Oe}return F.insert=0,Te===C?(be(F,!0),F.strm.avail_out===0?J:ne):(F.strstart>F.block_start&&(be(F,!1),F.strm.avail_out===0),Oe)}function Q(F,Te){for(var Ie,q;;){if(F.lookahead<j){if(Ge(F),F.lookahead<j&&Te===y)return Oe;if(F.lookahead===0)break}if(Ie=0,F.lookahead>=$&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+$-1])&F.hash_mask,Ie=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),Ie!==0&&F.strstart-Ie<=F.w_size-j&&(F.match_length=Re(F,Ie)),F.match_length>=$)if(q=o._tr_tally(F,F.strstart-F.match_start,F.match_length-$),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=$){F.match_length--;do F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+$-1])&F.hash_mask,Ie=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else q=o._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(q&&(be(F,!1),F.strm.avail_out===0))return Oe}return F.insert=F.strstart<$-1?F.strstart:$-1,Te===C?(be(F,!0),F.strm.avail_out===0?J:ne):F.last_lit&&(be(F,!1),F.strm.avail_out===0)?Oe:ee}function Z(F,Te){for(var Ie,q,de;;){if(F.lookahead<j){if(Ge(F),F.lookahead<j&&Te===y)return Oe;if(F.lookahead===0)break}if(Ie=0,F.lookahead>=$&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+$-1])&F.hash_mask,Ie=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=$-1,Ie!==0&&F.prev_length<F.max_lazy_match&&F.strstart-Ie<=F.w_size-j&&(F.match_length=Re(F,Ie),F.match_length<=5&&(F.strategy===x||F.match_length===$&&F.strstart-F.match_start>4096)&&(F.match_length=$-1)),F.prev_length>=$&&F.match_length<=F.prev_length){de=F.strstart+F.lookahead-$,q=o._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-$),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=de&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+$-1])&F.hash_mask,Ie=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=$-1,F.strstart++,q&&(be(F,!1),F.strm.avail_out===0))return Oe}else if(F.match_available){if(q=o._tr_tally(F,0,F.window[F.strstart-1]),q&&be(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return Oe}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(q=o._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<$-1?F.strstart:$-1,Te===C?(be(F,!0),F.strm.avail_out===0?J:ne):F.last_lit&&(be(F,!1),F.strm.avail_out===0)?Oe:ee}function ie(F,Te){for(var Ie,q,de,Le,Xe=F.window;;){if(F.lookahead<=W){if(Ge(F),F.lookahead<=W&&Te===y)return Oe;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=$&&F.strstart>0&&(de=F.strstart-1,q=Xe[de],q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de])){Le=F.strstart+W;do;while(q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de]&&q===Xe[++de]&&de<Le);F.match_length=W-(Le-de),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=$?(Ie=o._tr_tally(F,1,F.match_length-$),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(Ie=o._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),Ie&&(be(F,!1),F.strm.avail_out===0))return Oe}return F.insert=0,Te===C?(be(F,!0),F.strm.avail_out===0?J:ne):F.last_lit&&(be(F,!1),F.strm.avail_out===0)?Oe:ee}function ye(F,Te){for(var Ie;;){if(F.lookahead===0&&(Ge(F),F.lookahead===0)){if(Te===y)return Oe;break}if(F.match_length=0,Ie=o._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,Ie&&(be(F,!1),F.strm.avail_out===0))return Oe}return F.insert=0,Te===C?(be(F,!0),F.strm.avail_out===0?J:ne):F.last_lit&&(be(F,!1),F.strm.avail_out===0)?Oe:ee}function xe(F,Te,Ie,q,de){this.good_length=F,this.max_lazy=Te,this.nice_length=Ie,this.max_chain=q,this.func=de}var Ne;Ne=[new xe(0,0,0,0,Ke),new xe(4,4,8,4,Q),new xe(4,5,16,8,Q),new xe(4,6,32,32,Q),new xe(4,4,16,16,Z),new xe(8,16,32,32,Z),new xe(8,16,128,128,Z),new xe(8,32,128,256,Z),new xe(32,128,258,1024,Z),new xe(32,258,258,4096,Z)];function Ve(F){F.window_size=2*F.w_size,Be(F.head),F.max_lazy_match=Ne[F.level].max_lazy,F.good_match=Ne[F.level].good_length,F.nice_match=Ne[F.level].nice_length,F.max_chain_length=Ne[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=$-1,F.match_available=0,F.ins_h=0}function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(U*2),this.dyn_dtree=new s.Buf16((2*V+1)*2),this.bl_tree=new s.Buf16((2*N+1)*2),Be(this.dyn_ltree),Be(this.dyn_dtree),Be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(G+1),this.heap=new s.Buf16(2*H+1),Be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*H+1),Be(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(F){var Te;return!F||!F.state?we(F,a):(F.total_in=F.total_out=0,F.data_type=T,Te=F.state,Te.pending=0,Te.pending_out=0,Te.wrap<0&&(Te.wrap=-Te.wrap),Te.status=Te.wrap?he:fe,F.adler=Te.wrap===2?0:1,Te.last_flush=y,o._tr_init(Te),E)}function Me(F){var Te=ve(F);return Te===E&&Ve(F.state),Te}function He(F,Te){return!F||!F.state||F.state.wrap!==2?a:(F.state.gzhead=Te,E)}function me(F,Te,Ie,q,de,Le){if(!F)return a;var Xe=1;if(Te===A&&(Te=6),q<0?(Xe=0,q=-q):q>15&&(Xe=2,q-=16),de<1||de>I||Ie!==D||q<8||q>15||Te<0||Te>9||Le<0||Le>w)return we(F,a);q===8&&(q=9);var Ye=new X;return F.state=Ye,Ye.strm=F,Ye.wrap=Xe,Ye.gzhead=null,Ye.w_bits=q,Ye.w_size=1<<Ye.w_bits,Ye.w_mask=Ye.w_size-1,Ye.hash_bits=de+7,Ye.hash_size=1<<Ye.hash_bits,Ye.hash_mask=Ye.hash_size-1,Ye.hash_shift=~~((Ye.hash_bits+$-1)/$),Ye.window=new s.Buf8(Ye.w_size*2),Ye.head=new s.Buf16(Ye.hash_size),Ye.prev=new s.Buf16(Ye.w_size),Ye.lit_bufsize=1<<de+6,Ye.pending_buf_size=Ye.lit_bufsize*4,Ye.pending_buf=new s.Buf8(Ye.pending_buf_size),Ye.d_buf=1*Ye.lit_bufsize,Ye.l_buf=3*Ye.lit_bufsize,Ye.level=Te,Ye.strategy=Le,Ye.method=Ie,Me(F)}function ze(F,Te){return me(F,Te,D,k,z,O)}function Y(F,Te){var Ie,q,de,Le;if(!F||!F.state||Te>M||Te<0)return F?we(F,a):a;if(q=F.state,!F.output||!F.input&&F.avail_in!==0||q.status===Ue&&Te!==C)return we(F,F.avail_out===0?g:a);if(q.strm=F,Ie=q.last_flush,q.last_flush=Te,q.status===he)if(q.wrap===2)F.adler=0,ge(q,31),ge(q,139),ge(q,8),q.gzhead?(ge(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),ge(q,q.gzhead.time&255),ge(q,q.gzhead.time>>8&255),ge(q,q.gzhead.time>>16&255),ge(q,q.gzhead.time>>24&255),ge(q,q.level===9?2:q.strategy>=l||q.level<2?4:0),ge(q,q.gzhead.os&255),q.gzhead.extra&&q.gzhead.extra.length&&(ge(q,q.gzhead.extra.length&255),ge(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(F.adler=f(F.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=ce):(ge(q,0),ge(q,0),ge(q,0),ge(q,0),ge(q,0),ge(q,q.level===9?2:q.strategy>=l||q.level<2?4:0),ge(q,le),q.status=fe);else{var Xe=D+(q.w_bits-8<<4)<<8,Ye=-1;q.strategy>=l||q.level<2?Ye=0:q.level<6?Ye=1:q.level===6?Ye=2:Ye=3,Xe|=Ye<<6,q.strstart!==0&&(Xe|=se),Xe+=31-Xe%31,q.status=fe,Ae(q,Xe),q.strstart!==0&&(Ae(q,F.adler>>>16),Ae(q,F.adler&65535)),F.adler=1}if(q.status===ce)if(q.gzhead.extra){for(de=q.pending;q.gzindex<(q.gzhead.extra.length&65535)&&!(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>de&&(F.adler=f(F.adler,q.pending_buf,q.pending-de,de)),Ce(F),de=q.pending,q.pending===q.pending_buf_size));)ge(q,q.gzhead.extra[q.gzindex]&255),q.gzindex++;q.gzhead.hcrc&&q.pending>de&&(F.adler=f(F.adler,q.pending_buf,q.pending-de,de)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=ue)}else q.status=ue;if(q.status===ue)if(q.gzhead.name){de=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>de&&(F.adler=f(F.adler,q.pending_buf,q.pending-de,de)),Ce(F),de=q.pending,q.pending===q.pending_buf_size)){Le=1;break}q.gzindex<q.gzhead.name.length?Le=q.gzhead.name.charCodeAt(q.gzindex++)&255:Le=0,ge(q,Le)}while(Le!==0);q.gzhead.hcrc&&q.pending>de&&(F.adler=f(F.adler,q.pending_buf,q.pending-de,de)),Le===0&&(q.gzindex=0,q.status=Ee)}else q.status=Ee;if(q.status===Ee)if(q.gzhead.comment){de=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>de&&(F.adler=f(F.adler,q.pending_buf,q.pending-de,de)),Ce(F),de=q.pending,q.pending===q.pending_buf_size)){Le=1;break}q.gzindex<q.gzhead.comment.length?Le=q.gzhead.comment.charCodeAt(q.gzindex++)&255:Le=0,ge(q,Le)}while(Le!==0);q.gzhead.hcrc&&q.pending>de&&(F.adler=f(F.adler,q.pending_buf,q.pending-de,de)),Le===0&&(q.status=pe)}else q.status=pe;if(q.status===pe&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&Ce(F),q.pending+2<=q.pending_buf_size&&(ge(q,F.adler&255),ge(q,F.adler>>8&255),F.adler=0,q.status=fe)):q.status=fe),q.pending!==0){if(Ce(F),F.avail_out===0)return q.last_flush=-1,E}else if(F.avail_in===0&&Pe(Te)<=Pe(Ie)&&Te!==C)return we(F,g);if(q.status===Ue&&F.avail_in!==0)return we(F,g);if(F.avail_in!==0||q.lookahead!==0||Te!==y&&q.status!==Ue){var je=q.strategy===l?ye(q,Te):q.strategy===v?ie(q,Te):Ne[q.level].func(q,Te);if((je===J||je===ne)&&(q.status=Ue),je===Oe||je===J)return F.avail_out===0&&(q.last_flush=-1),E;if(je===ee&&(Te===_?o._tr_align(q):Te!==M&&(o._tr_stored_block(q,0,0,!1),Te===b&&(Be(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),Ce(F),F.avail_out===0))return q.last_flush=-1,E}return Te!==C?E:q.wrap<=0?P:(q.wrap===2?(ge(q,F.adler&255),ge(q,F.adler>>8&255),ge(q,F.adler>>16&255),ge(q,F.adler>>24&255),ge(q,F.total_in&255),ge(q,F.total_in>>8&255),ge(q,F.total_in>>16&255),ge(q,F.total_in>>24&255)):(Ae(q,F.adler>>>16),Ae(q,F.adler&65535)),Ce(F),q.wrap>0&&(q.wrap=-q.wrap),q.pending!==0?E:P)}function We(F){var Te;return!F||!F.state?a:(Te=F.state.status,Te!==he&&Te!==ce&&Te!==ue&&Te!==Ee&&Te!==pe&&Te!==fe&&Te!==Ue?we(F,a):(F.state=null,Te===fe?we(F,u):E))}function Ze(F,Te){var Ie=Te.length,q,de,Le,Xe,Ye,je,nt,Mt;if(!F||!F.state||(q=F.state,Xe=q.wrap,Xe===2||Xe===1&&q.status!==he||q.lookahead))return a;for(Xe===1&&(F.adler=n(F.adler,Te,Ie,0)),q.wrap=0,Ie>=q.w_size&&(Xe===0&&(Be(q.head),q.strstart=0,q.block_start=0,q.insert=0),Mt=new s.Buf8(q.w_size),s.arraySet(Mt,Te,Ie-q.w_size,q.w_size,0),Te=Mt,Ie=q.w_size),Ye=F.avail_in,je=F.next_in,nt=F.input,F.avail_in=Ie,F.next_in=0,F.input=Te,Ge(q);q.lookahead>=$;){de=q.strstart,Le=q.lookahead-($-1);do q.ins_h=(q.ins_h<<q.hash_shift^q.window[de+$-1])&q.hash_mask,q.prev[de&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=de,de++;while(--Le);q.strstart=de,q.lookahead=$-1,Ge(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=$-1,q.match_available=0,F.next_in=je,F.input=nt,F.avail_in=Ye,q.wrap=Xe,E}t.deflateInit=ze,t.deflateInit2=me,t.deflateReset=Me,t.deflateResetKeep=ve,t.deflateSetHeader=He,t.deflate=Y,t.deflateEnd=We,t.deflateSetDictionary=Ze,t.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":e=>{function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=t},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":e=>{var t=30,r=12;e.exports=function(o,n){var f,c,y,_,b,C,M,E,P,a,u,g,A,x,l,v,w,O,T,D,I,k,z,L,B;f=o.state,c=o.next_in,L=o.input,y=c+(o.avail_in-5),_=o.next_out,B=o.output,b=_-(n-o.avail_out),C=_+(o.avail_out-257),M=f.dmax,E=f.wsize,P=f.whave,a=f.wnext,u=f.window,g=f.hold,A=f.bits,x=f.lencode,l=f.distcode,v=(1<<f.lenbits)-1,w=(1<<f.distbits)-1;e:do{A<15&&(g+=L[c++]<<A,A+=8,g+=L[c++]<<A,A+=8),O=x[g&v];t:for(;;){if(T=O>>>24,g>>>=T,A-=T,T=O>>>16&255,T===0)B[_++]=O&65535;else if(T&16){D=O&65535,T&=15,T&&(A<T&&(g+=L[c++]<<A,A+=8),D+=g&(1<<T)-1,g>>>=T,A-=T),A<15&&(g+=L[c++]<<A,A+=8,g+=L[c++]<<A,A+=8),O=l[g&w];i:for(;;){if(T=O>>>24,g>>>=T,A-=T,T=O>>>16&255,T&16){if(I=O&65535,T&=15,A<T&&(g+=L[c++]<<A,A+=8,A<T&&(g+=L[c++]<<A,A+=8)),I+=g&(1<<T)-1,I>M){o.msg="invalid distance too far back",f.mode=t;break e}if(g>>>=T,A-=T,T=_-b,I>T){if(T=I-T,T>P&&f.sane){o.msg="invalid distance too far back",f.mode=t;break e}if(k=0,z=u,a===0){if(k+=E-T,T<D){D-=T;do B[_++]=u[k++];while(--T);k=_-I,z=B}}else if(a<T){if(k+=E+a-T,T-=a,T<D){D-=T;do B[_++]=u[k++];while(--T);if(k=0,a<D){T=a,D-=T;do B[_++]=u[k++];while(--T);k=_-I,z=B}}}else if(k+=a-T,T<D){D-=T;do B[_++]=u[k++];while(--T);k=_-I,z=B}for(;D>2;)B[_++]=z[k++],B[_++]=z[k++],B[_++]=z[k++],D-=3;D&&(B[_++]=z[k++],D>1&&(B[_++]=z[k++]))}else{k=_-I;do B[_++]=B[k++],B[_++]=B[k++],B[_++]=B[k++],D-=3;while(D>2);D&&(B[_++]=B[k++],D>1&&(B[_++]=B[k++]))}}else if(T&64){o.msg="invalid distance code",f.mode=t;break e}else{O=l[(O&65535)+(g&(1<<T)-1)];continue i}break}}else if(T&64)if(T&32){f.mode=r;break e}else{o.msg="invalid literal/length code",f.mode=t;break e}else{O=x[(O&65535)+(g&(1<<T)-1)];continue t}break}}while(c<y&&_<C);D=A>>3,c-=D,A-=D<<3,g&=(1<<A)-1,o.next_in=c,o.next_out=_,o.avail_in=c<y?5+(y-c):5-(c-y),o.avail_out=_<C?257+(C-_):257-(_-C),f.hold=g,f.bits=A}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=r("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),n=r("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),f=r("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),c=r("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),y=0,_=1,b=2,C=4,M=5,E=6,P=0,a=1,u=2,g=-2,A=-3,x=-4,l=-5,v=8,w=1,O=2,T=3,D=4,I=5,k=6,z=7,L=8,B=9,H=10,V=11,N=12,U=13,G=14,$=15,W=16,j=17,se=18,he=19,ce=20,ue=21,Ee=22,pe=23,fe=24,Ue=25,Oe=26,ee=27,J=28,ne=29,le=30,we=31,Pe=32,Be=852,Ce=592,be=15,ge=be;function Ae(me){return(me>>>24&255)+(me>>>8&65280)+((me&65280)<<8)+((me&255)<<24)}function De(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Re(me){var ze;return!me||!me.state?g:(ze=me.state,me.total_in=me.total_out=ze.total=0,me.msg="",ze.wrap&&(me.adler=ze.wrap&1),ze.mode=w,ze.last=0,ze.havedict=0,ze.dmax=32768,ze.head=null,ze.hold=0,ze.bits=0,ze.lencode=ze.lendyn=new s.Buf32(Be),ze.distcode=ze.distdyn=new s.Buf32(Ce),ze.sane=1,ze.back=-1,P)}function Ge(me){var ze;return!me||!me.state?g:(ze=me.state,ze.wsize=0,ze.whave=0,ze.wnext=0,Re(me))}function Ke(me,ze){var Y,We;return!me||!me.state||(We=me.state,ze<0?(Y=0,ze=-ze):(Y=(ze>>4)+1,ze<48&&(ze&=15)),ze&&(ze<8||ze>15))?g:(We.window!==null&&We.wbits!==ze&&(We.window=null),We.wrap=Y,We.wbits=ze,Ge(me))}function Q(me,ze){var Y,We;return me?(We=new De,me.state=We,We.window=null,Y=Ke(me,ze),Y!==P&&(me.state=null),Y):g}function Z(me){return Q(me,ge)}var ie=!0,ye,xe;function Ne(me){if(ie){var ze;for(ye=new s.Buf32(512),xe=new s.Buf32(32),ze=0;ze<144;)me.lens[ze++]=8;for(;ze<256;)me.lens[ze++]=9;for(;ze<280;)me.lens[ze++]=7;for(;ze<288;)me.lens[ze++]=8;for(c(_,me.lens,0,288,ye,0,me.work,{bits:9}),ze=0;ze<32;)me.lens[ze++]=5;c(b,me.lens,0,32,xe,0,me.work,{bits:5}),ie=!1}me.lencode=ye,me.lenbits=9,me.distcode=xe,me.distbits=5}function Ve(me,ze,Y,We){var Ze,F=me.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new s.Buf8(F.wsize)),We>=F.wsize?(s.arraySet(F.window,ze,Y-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(Ze=F.wsize-F.wnext,Ze>We&&(Ze=We),s.arraySet(F.window,ze,Y-We,Ze,F.wnext),We-=Ze,We?(s.arraySet(F.window,ze,Y-We,We,0),F.wnext=We,F.whave=F.wsize):(F.wnext+=Ze,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=Ze))),0}function X(me,ze){var Y,We,Ze,F,Te,Ie,q,de,Le,Xe,Ye,je,nt,Mt,st=0,it,ot,Et,vt,kt,It,_t,xt,yt=new s.Buf8(4),Ot,At,Wt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!me||!me.state||!me.output||!me.input&&me.avail_in!==0)return g;Y=me.state,Y.mode===N&&(Y.mode=U),Te=me.next_out,Ze=me.output,q=me.avail_out,F=me.next_in,We=me.input,Ie=me.avail_in,de=Y.hold,Le=Y.bits,Xe=Ie,Ye=q,xt=P;e:for(;;)switch(Y.mode){case w:if(Y.wrap===0){Y.mode=U;break}for(;Le<16;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(Y.wrap&2&&de===35615){Y.check=0,yt[0]=de&255,yt[1]=de>>>8&255,Y.check=n(Y.check,yt,2,0),de=0,Le=0,Y.mode=O;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(Y.wrap&1)||(((de&255)<<8)+(de>>8))%31){me.msg="incorrect header check",Y.mode=le;break}if((de&15)!==v){me.msg="unknown compression method",Y.mode=le;break}if(de>>>=4,Le-=4,_t=(de&15)+8,Y.wbits===0)Y.wbits=_t;else if(_t>Y.wbits){me.msg="invalid window size",Y.mode=le;break}Y.dmax=1<<_t,me.adler=Y.check=1,Y.mode=de&512?H:N,de=0,Le=0;break;case O:for(;Le<16;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(Y.flags=de,(Y.flags&255)!==v){me.msg="unknown compression method",Y.mode=le;break}if(Y.flags&57344){me.msg="unknown header flags set",Y.mode=le;break}Y.head&&(Y.head.text=de>>8&1),Y.flags&512&&(yt[0]=de&255,yt[1]=de>>>8&255,Y.check=n(Y.check,yt,2,0)),de=0,Le=0,Y.mode=T;case T:for(;Le<32;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}Y.head&&(Y.head.time=de),Y.flags&512&&(yt[0]=de&255,yt[1]=de>>>8&255,yt[2]=de>>>16&255,yt[3]=de>>>24&255,Y.check=n(Y.check,yt,4,0)),de=0,Le=0,Y.mode=D;case D:for(;Le<16;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}Y.head&&(Y.head.xflags=de&255,Y.head.os=de>>8),Y.flags&512&&(yt[0]=de&255,yt[1]=de>>>8&255,Y.check=n(Y.check,yt,2,0)),de=0,Le=0,Y.mode=I;case I:if(Y.flags&1024){for(;Le<16;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}Y.length=de,Y.head&&(Y.head.extra_len=de),Y.flags&512&&(yt[0]=de&255,yt[1]=de>>>8&255,Y.check=n(Y.check,yt,2,0)),de=0,Le=0}else Y.head&&(Y.head.extra=null);Y.mode=k;case k:if(Y.flags&1024&&(je=Y.length,je>Ie&&(je=Ie),je&&(Y.head&&(_t=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Array(Y.head.extra_len)),s.arraySet(Y.head.extra,We,F,je,_t)),Y.flags&512&&(Y.check=n(Y.check,We,je,F)),Ie-=je,F+=je,Y.length-=je),Y.length))break e;Y.length=0,Y.mode=z;case z:if(Y.flags&2048){if(Ie===0)break e;je=0;do _t=We[F+je++],Y.head&&_t&&Y.length<65536&&(Y.head.name+=String.fromCharCode(_t));while(_t&&je<Ie);if(Y.flags&512&&(Y.check=n(Y.check,We,je,F)),Ie-=je,F+=je,_t)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=L;case L:if(Y.flags&4096){if(Ie===0)break e;je=0;do _t=We[F+je++],Y.head&&_t&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(_t));while(_t&&je<Ie);if(Y.flags&512&&(Y.check=n(Y.check,We,je,F)),Ie-=je,F+=je,_t)break e}else Y.head&&(Y.head.comment=null);Y.mode=B;case B:if(Y.flags&512){for(;Le<16;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(de!==(Y.check&65535)){me.msg="header crc mismatch",Y.mode=le;break}de=0,Le=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),me.adler=Y.check=0,Y.mode=N;break;case H:for(;Le<32;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}me.adler=Y.check=Ae(de),de=0,Le=0,Y.mode=V;case V:if(Y.havedict===0)return me.next_out=Te,me.avail_out=q,me.next_in=F,me.avail_in=Ie,Y.hold=de,Y.bits=Le,u;me.adler=Y.check=1,Y.mode=N;case N:if(ze===M||ze===E)break e;case U:if(Y.last){de>>>=Le&7,Le-=Le&7,Y.mode=ee;break}for(;Le<3;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}switch(Y.last=de&1,de>>>=1,Le-=1,de&3){case 0:Y.mode=G;break;case 1:if(Ne(Y),Y.mode=ce,ze===E){de>>>=2,Le-=2;break e}break;case 2:Y.mode=j;break;case 3:me.msg="invalid block type",Y.mode=le}de>>>=2,Le-=2;break;case G:for(de>>>=Le&7,Le-=Le&7;Le<32;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if((de&65535)!==(de>>>16^65535)){me.msg="invalid stored block lengths",Y.mode=le;break}if(Y.length=de&65535,de=0,Le=0,Y.mode=$,ze===E)break e;case $:Y.mode=W;case W:if(je=Y.length,je){if(je>Ie&&(je=Ie),je>q&&(je=q),je===0)break e;s.arraySet(Ze,We,F,je,Te),Ie-=je,F+=je,q-=je,Te+=je,Y.length-=je;break}Y.mode=N;break;case j:for(;Le<14;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(Y.nlen=(de&31)+257,de>>>=5,Le-=5,Y.ndist=(de&31)+1,de>>>=5,Le-=5,Y.ncode=(de&15)+4,de>>>=4,Le-=4,Y.nlen>286||Y.ndist>30){me.msg="too many length or distance symbols",Y.mode=le;break}Y.have=0,Y.mode=se;case se:for(;Y.have<Y.ncode;){for(;Le<3;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}Y.lens[Wt[Y.have++]]=de&7,de>>>=3,Le-=3}for(;Y.have<19;)Y.lens[Wt[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,Ot={bits:Y.lenbits},xt=c(y,Y.lens,0,19,Y.lencode,0,Y.work,Ot),Y.lenbits=Ot.bits,xt){me.msg="invalid code lengths set",Y.mode=le;break}Y.have=0,Y.mode=he;case he:for(;Y.have<Y.nlen+Y.ndist;){for(;st=Y.lencode[de&(1<<Y.lenbits)-1],it=st>>>24,ot=st>>>16&255,Et=st&65535,!(it<=Le);){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(Et<16)de>>>=it,Le-=it,Y.lens[Y.have++]=Et;else{if(Et===16){for(At=it+2;Le<At;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(de>>>=it,Le-=it,Y.have===0){me.msg="invalid bit length repeat",Y.mode=le;break}_t=Y.lens[Y.have-1],je=3+(de&3),de>>>=2,Le-=2}else if(Et===17){for(At=it+3;Le<At;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}de>>>=it,Le-=it,_t=0,je=3+(de&7),de>>>=3,Le-=3}else{for(At=it+7;Le<At;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}de>>>=it,Le-=it,_t=0,je=11+(de&127),de>>>=7,Le-=7}if(Y.have+je>Y.nlen+Y.ndist){me.msg="invalid bit length repeat",Y.mode=le;break}for(;je--;)Y.lens[Y.have++]=_t}}if(Y.mode===le)break;if(Y.lens[256]===0){me.msg="invalid code -- missing end-of-block",Y.mode=le;break}if(Y.lenbits=9,Ot={bits:Y.lenbits},xt=c(_,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,Ot),Y.lenbits=Ot.bits,xt){me.msg="invalid literal/lengths set",Y.mode=le;break}if(Y.distbits=6,Y.distcode=Y.distdyn,Ot={bits:Y.distbits},xt=c(b,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,Ot),Y.distbits=Ot.bits,xt){me.msg="invalid distances set",Y.mode=le;break}if(Y.mode=ce,ze===E)break e;case ce:Y.mode=ue;case ue:if(Ie>=6&&q>=258){me.next_out=Te,me.avail_out=q,me.next_in=F,me.avail_in=Ie,Y.hold=de,Y.bits=Le,f(me,Ye),Te=me.next_out,Ze=me.output,q=me.avail_out,F=me.next_in,We=me.input,Ie=me.avail_in,de=Y.hold,Le=Y.bits,Y.mode===N&&(Y.back=-1);break}for(Y.back=0;st=Y.lencode[de&(1<<Y.lenbits)-1],it=st>>>24,ot=st>>>16&255,Et=st&65535,!(it<=Le);){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(ot&&!(ot&240)){for(vt=it,kt=ot,It=Et;st=Y.lencode[It+((de&(1<<vt+kt)-1)>>vt)],it=st>>>24,ot=st>>>16&255,Et=st&65535,!(vt+it<=Le);){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}de>>>=vt,Le-=vt,Y.back+=vt}if(de>>>=it,Le-=it,Y.back+=it,Y.length=Et,ot===0){Y.mode=Oe;break}if(ot&32){Y.back=-1,Y.mode=N;break}if(ot&64){me.msg="invalid literal/length code",Y.mode=le;break}Y.extra=ot&15,Y.mode=Ee;case Ee:if(Y.extra){for(At=Y.extra;Le<At;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}Y.length+=de&(1<<Y.extra)-1,de>>>=Y.extra,Le-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=pe;case pe:for(;st=Y.distcode[de&(1<<Y.distbits)-1],it=st>>>24,ot=st>>>16&255,Et=st&65535,!(it<=Le);){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(!(ot&240)){for(vt=it,kt=ot,It=Et;st=Y.distcode[It+((de&(1<<vt+kt)-1)>>vt)],it=st>>>24,ot=st>>>16&255,Et=st&65535,!(vt+it<=Le);){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}de>>>=vt,Le-=vt,Y.back+=vt}if(de>>>=it,Le-=it,Y.back+=it,ot&64){me.msg="invalid distance code",Y.mode=le;break}Y.offset=Et,Y.extra=ot&15,Y.mode=fe;case fe:if(Y.extra){for(At=Y.extra;Le<At;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}Y.offset+=de&(1<<Y.extra)-1,de>>>=Y.extra,Le-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){me.msg="invalid distance too far back",Y.mode=le;break}Y.mode=Ue;case Ue:if(q===0)break e;if(je=Ye-q,Y.offset>je){if(je=Y.offset-je,je>Y.whave&&Y.sane){me.msg="invalid distance too far back",Y.mode=le;break}je>Y.wnext?(je-=Y.wnext,nt=Y.wsize-je):nt=Y.wnext-je,je>Y.length&&(je=Y.length),Mt=Y.window}else Mt=Ze,nt=Te-Y.offset,je=Y.length;je>q&&(je=q),q-=je,Y.length-=je;do Ze[Te++]=Mt[nt++];while(--je);Y.length===0&&(Y.mode=ue);break;case Oe:if(q===0)break e;Ze[Te++]=Y.length,q--,Y.mode=ue;break;case ee:if(Y.wrap){for(;Le<32;){if(Ie===0)break e;Ie--,de|=We[F++]<<Le,Le+=8}if(Ye-=q,me.total_out+=Ye,Y.total+=Ye,Ye&&(me.adler=Y.check=Y.flags?n(Y.check,Ze,Ye,Te-Ye):o(Y.check,Ze,Ye,Te-Ye)),Ye=q,(Y.flags?de:Ae(de))!==Y.check){me.msg="incorrect data check",Y.mode=le;break}de=0,Le=0}Y.mode=J;case J:if(Y.wrap&&Y.flags){for(;Le<32;){if(Ie===0)break e;Ie--,de+=We[F++]<<Le,Le+=8}if(de!==(Y.total&4294967295)){me.msg="incorrect length check",Y.mode=le;break}de=0,Le=0}Y.mode=ne;case ne:xt=a;break e;case le:xt=A;break e;case we:return x;case Pe:default:return g}return me.next_out=Te,me.avail_out=q,me.next_in=F,me.avail_in=Ie,Y.hold=de,Y.bits=Le,(Y.wsize||Ye!==me.avail_out&&Y.mode<le&&(Y.mode<ee||ze!==C))&&Ve(me,me.output,me.next_out,Ye-me.avail_out),Xe-=me.avail_in,Ye-=me.avail_out,me.total_in+=Xe,me.total_out+=Ye,Y.total+=Ye,Y.wrap&&Ye&&(me.adler=Y.check=Y.flags?n(Y.check,Ze,Ye,me.next_out-Ye):o(Y.check,Ze,Ye,me.next_out-Ye)),me.data_type=Y.bits+(Y.last?64:0)+(Y.mode===N?128:0)+(Y.mode===ce||Y.mode===$?256:0),(Xe===0&&Ye===0||ze===C)&&xt===P&&(xt=l),xt}function ve(me){if(!me||!me.state)return g;var ze=me.state;return ze.window&&(ze.window=null),me.state=null,P}function Me(me,ze){var Y;return!me||!me.state||(Y=me.state,!(Y.wrap&2))?g:(Y.head=ze,ze.done=!1,P)}function He(me,ze){var Y=ze.length,We,Ze,F;return!me||!me.state||(We=me.state,We.wrap!==0&&We.mode!==V)?g:We.mode===V&&(Ze=1,Ze=o(Ze,ze,Y,0),Ze!==We.check)?A:(F=Ve(me,ze,Y,Y),F?(We.mode=we,x):(We.havedict=1,P))}t.inflateReset=Ge,t.inflateReset2=Ke,t.inflateResetKeep=Re,t.inflateInit=Z,t.inflateInit2=Q,t.inflate=X,t.inflateEnd=ve,t.inflateGetHeader=Me,t.inflateSetDictionary=He,t.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=15,n=852,f=592,c=0,y=1,_=2,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],M=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(a,u,g,A,x,l,v,w){var O=w.bits,T=0,D=0,I=0,k=0,z=0,L=0,B=0,H=0,V=0,N=0,U,G,$,W,j,se=null,he=0,ce,ue=new s.Buf16(o+1),Ee=new s.Buf16(o+1),pe=null,fe=0,Ue,Oe,ee;for(T=0;T<=o;T++)ue[T]=0;for(D=0;D<A;D++)ue[u[g+D]]++;for(z=O,k=o;k>=1&&ue[k]===0;k--);if(z>k&&(z=k),k===0)return x[l++]=20971520,x[l++]=20971520,w.bits=1,0;for(I=1;I<k&&ue[I]===0;I++);for(z<I&&(z=I),H=1,T=1;T<=o;T++)if(H<<=1,H-=ue[T],H<0)return-1;if(H>0&&(a===c||k!==1))return-1;for(Ee[1]=0,T=1;T<o;T++)Ee[T+1]=Ee[T]+ue[T];for(D=0;D<A;D++)u[g+D]!==0&&(v[Ee[u[g+D]]++]=D);if(a===c?(se=pe=v,ce=19):a===y?(se=b,he-=257,pe=C,fe-=257,ce=256):(se=M,pe=E,ce=-1),N=0,D=0,T=I,j=l,L=z,B=0,$=-1,V=1<<z,W=V-1,a===y&&V>n||a===_&&V>f)return 1;for(;;){Ue=T-B,v[D]<ce?(Oe=0,ee=v[D]):v[D]>ce?(Oe=pe[fe+v[D]],ee=se[he+v[D]]):(Oe=96,ee=0),U=1<<T-B,G=1<<L,I=G;do G-=U,x[j+(N>>B)+G]=Ue<<24|Oe<<16|ee|0;while(G!==0);for(U=1<<T-1;N&U;)U>>=1;if(U!==0?(N&=U-1,N+=U):N=0,D++,--ue[T]===0){if(T===k)break;T=u[g+v[D]]}if(T>z&&(N&W)!==$){for(B===0&&(B=z),j+=I,L=T-B,H=1<<L;L+B<k&&(H-=ue[L+B],!(H<=0));)L++,H<<=1;if(V+=1<<L,a===y&&V>n||a===_&&V>f)return 1;$=N&W,x[$]=z<<24|L<<16|j-l|0}}return N!==0&&(x[j+N]=T-B<<24|4194304|0),w.bits=z,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":e=>{e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":(e,t,r)=>{var s=r("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=4,n=0,f=1,c=2;function y(X){for(var ve=X.length;--ve>=0;)X[ve]=0}var _=0,b=1,C=2,M=3,E=258,P=29,a=256,u=a+1+P,g=30,A=19,x=2*u+1,l=15,v=16,w=7,O=256,T=16,D=17,I=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=512,V=new Array((u+2)*2);y(V);var N=new Array(g*2);y(N);var U=new Array(H);y(U);var G=new Array(E-M+1);y(G);var $=new Array(P);y($);var W=new Array(g);y(W);function j(X,ve,Me,He,me){this.static_tree=X,this.extra_bits=ve,this.extra_base=Me,this.elems=He,this.max_length=me,this.has_stree=X&&X.length}var se,he,ce;function ue(X,ve){this.dyn_tree=X,this.max_code=0,this.stat_desc=ve}function Ee(X){return X<256?U[X]:U[256+(X>>>7)]}function pe(X,ve){X.pending_buf[X.pending++]=ve&255,X.pending_buf[X.pending++]=ve>>>8&255}function fe(X,ve,Me){X.bi_valid>v-Me?(X.bi_buf|=ve<<X.bi_valid&65535,pe(X,X.bi_buf),X.bi_buf=ve>>v-X.bi_valid,X.bi_valid+=Me-v):(X.bi_buf|=ve<<X.bi_valid&65535,X.bi_valid+=Me)}function Ue(X,ve,Me){fe(X,Me[ve*2],Me[ve*2+1])}function Oe(X,ve){var Me=0;do Me|=X&1,X>>>=1,Me<<=1;while(--ve>0);return Me>>>1}function ee(X){X.bi_valid===16?(pe(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):X.bi_valid>=8&&(X.pending_buf[X.pending++]=X.bi_buf&255,X.bi_buf>>=8,X.bi_valid-=8)}function J(X,ve){var Me=ve.dyn_tree,He=ve.max_code,me=ve.stat_desc.static_tree,ze=ve.stat_desc.has_stree,Y=ve.stat_desc.extra_bits,We=ve.stat_desc.extra_base,Ze=ve.stat_desc.max_length,F,Te,Ie,q,de,Le,Xe=0;for(q=0;q<=l;q++)X.bl_count[q]=0;for(Me[X.heap[X.heap_max]*2+1]=0,F=X.heap_max+1;F<x;F++)Te=X.heap[F],q=Me[Me[Te*2+1]*2+1]+1,q>Ze&&(q=Ze,Xe++),Me[Te*2+1]=q,!(Te>He)&&(X.bl_count[q]++,de=0,Te>=We&&(de=Y[Te-We]),Le=Me[Te*2],X.opt_len+=Le*(q+de),ze&&(X.static_len+=Le*(me[Te*2+1]+de)));if(Xe!==0){do{for(q=Ze-1;X.bl_count[q]===0;)q--;X.bl_count[q]--,X.bl_count[q+1]+=2,X.bl_count[Ze]--,Xe-=2}while(Xe>0);for(q=Ze;q!==0;q--)for(Te=X.bl_count[q];Te!==0;)Ie=X.heap[--F],!(Ie>He)&&(Me[Ie*2+1]!==q&&(X.opt_len+=(q-Me[Ie*2+1])*Me[Ie*2],Me[Ie*2+1]=q),Te--)}}function ne(X,ve,Me){var He=new Array(l+1),me=0,ze,Y;for(ze=1;ze<=l;ze++)He[ze]=me=me+Me[ze-1]<<1;for(Y=0;Y<=ve;Y++){var We=X[Y*2+1];We!==0&&(X[Y*2]=Oe(He[We]++,We))}}function le(){var X,ve,Me,He,me,ze=new Array(l+1);for(Me=0,He=0;He<P-1;He++)for($[He]=Me,X=0;X<1<<k[He];X++)G[Me++]=He;for(G[Me-1]=He,me=0,He=0;He<16;He++)for(W[He]=me,X=0;X<1<<z[He];X++)U[me++]=He;for(me>>=7;He<g;He++)for(W[He]=me<<7,X=0;X<1<<z[He]-7;X++)U[256+me++]=He;for(ve=0;ve<=l;ve++)ze[ve]=0;for(X=0;X<=143;)V[X*2+1]=8,X++,ze[8]++;for(;X<=255;)V[X*2+1]=9,X++,ze[9]++;for(;X<=279;)V[X*2+1]=7,X++,ze[7]++;for(;X<=287;)V[X*2+1]=8,X++,ze[8]++;for(ne(V,u+1,ze),X=0;X<g;X++)N[X*2+1]=5,N[X*2]=Oe(X,5);se=new j(V,k,a+1,u,l),he=new j(N,z,0,g,l),ce=new j(new Array(0),L,0,A,w)}function we(X){var ve;for(ve=0;ve<u;ve++)X.dyn_ltree[ve*2]=0;for(ve=0;ve<g;ve++)X.dyn_dtree[ve*2]=0;for(ve=0;ve<A;ve++)X.bl_tree[ve*2]=0;X.dyn_ltree[O*2]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function Pe(X){X.bi_valid>8?pe(X,X.bi_buf):X.bi_valid>0&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function Be(X,ve,Me,He){Pe(X),He&&(pe(X,Me),pe(X,~Me)),s.arraySet(X.pending_buf,X.window,ve,Me,X.pending),X.pending+=Me}function Ce(X,ve,Me,He){var me=ve*2,ze=Me*2;return X[me]<X[ze]||X[me]===X[ze]&&He[ve]<=He[Me]}function be(X,ve,Me){for(var He=X.heap[Me],me=Me<<1;me<=X.heap_len&&(me<X.heap_len&&Ce(ve,X.heap[me+1],X.heap[me],X.depth)&&me++,!Ce(ve,He,X.heap[me],X.depth));)X.heap[Me]=X.heap[me],Me=me,me<<=1;X.heap[Me]=He}function ge(X,ve,Me){var He,me,ze=0,Y,We;if(X.last_lit!==0)do He=X.pending_buf[X.d_buf+ze*2]<<8|X.pending_buf[X.d_buf+ze*2+1],me=X.pending_buf[X.l_buf+ze],ze++,He===0?Ue(X,me,ve):(Y=G[me],Ue(X,Y+a+1,ve),We=k[Y],We!==0&&(me-=$[Y],fe(X,me,We)),He--,Y=Ee(He),Ue(X,Y,Me),We=z[Y],We!==0&&(He-=W[Y],fe(X,He,We)));while(ze<X.last_lit);Ue(X,O,ve)}function Ae(X,ve){var Me=ve.dyn_tree,He=ve.stat_desc.static_tree,me=ve.stat_desc.has_stree,ze=ve.stat_desc.elems,Y,We,Ze=-1,F;for(X.heap_len=0,X.heap_max=x,Y=0;Y<ze;Y++)Me[Y*2]!==0?(X.heap[++X.heap_len]=Ze=Y,X.depth[Y]=0):Me[Y*2+1]=0;for(;X.heap_len<2;)F=X.heap[++X.heap_len]=Ze<2?++Ze:0,Me[F*2]=1,X.depth[F]=0,X.opt_len--,me&&(X.static_len-=He[F*2+1]);for(ve.max_code=Ze,Y=X.heap_len>>1;Y>=1;Y--)be(X,Me,Y);F=ze;do Y=X.heap[1],X.heap[1]=X.heap[X.heap_len--],be(X,Me,1),We=X.heap[1],X.heap[--X.heap_max]=Y,X.heap[--X.heap_max]=We,Me[F*2]=Me[Y*2]+Me[We*2],X.depth[F]=(X.depth[Y]>=X.depth[We]?X.depth[Y]:X.depth[We])+1,Me[Y*2+1]=Me[We*2+1]=F,X.heap[1]=F++,be(X,Me,1);while(X.heap_len>=2);X.heap[--X.heap_max]=X.heap[1],J(X,ve),ne(Me,Ze,X.bl_count)}function De(X,ve,Me){var He,me=-1,ze,Y=ve[0*2+1],We=0,Ze=7,F=4;for(Y===0&&(Ze=138,F=3),ve[(Me+1)*2+1]=65535,He=0;He<=Me;He++)ze=Y,Y=ve[(He+1)*2+1],!(++We<Ze&&ze===Y)&&(We<F?X.bl_tree[ze*2]+=We:ze!==0?(ze!==me&&X.bl_tree[ze*2]++,X.bl_tree[T*2]++):We<=10?X.bl_tree[D*2]++:X.bl_tree[I*2]++,We=0,me=ze,Y===0?(Ze=138,F=3):ze===Y?(Ze=6,F=3):(Ze=7,F=4))}function Re(X,ve,Me){var He,me=-1,ze,Y=ve[0*2+1],We=0,Ze=7,F=4;for(Y===0&&(Ze=138,F=3),He=0;He<=Me;He++)if(ze=Y,Y=ve[(He+1)*2+1],!(++We<Ze&&ze===Y)){if(We<F)do Ue(X,ze,X.bl_tree);while(--We!==0);else ze!==0?(ze!==me&&(Ue(X,ze,X.bl_tree),We--),Ue(X,T,X.bl_tree),fe(X,We-3,2)):We<=10?(Ue(X,D,X.bl_tree),fe(X,We-3,3)):(Ue(X,I,X.bl_tree),fe(X,We-11,7));We=0,me=ze,Y===0?(Ze=138,F=3):ze===Y?(Ze=6,F=3):(Ze=7,F=4)}}function Ge(X){var ve;for(De(X,X.dyn_ltree,X.l_desc.max_code),De(X,X.dyn_dtree,X.d_desc.max_code),Ae(X,X.bl_desc),ve=A-1;ve>=3&&X.bl_tree[B[ve]*2+1]===0;ve--);return X.opt_len+=3*(ve+1)+5+5+4,ve}function Ke(X,ve,Me,He){var me;for(fe(X,ve-257,5),fe(X,Me-1,5),fe(X,He-4,4),me=0;me<He;me++)fe(X,X.bl_tree[B[me]*2+1],3);Re(X,X.dyn_ltree,ve-1),Re(X,X.dyn_dtree,Me-1)}function Q(X){var ve=4093624447,Me;for(Me=0;Me<=31;Me++,ve>>>=1)if(ve&1&&X.dyn_ltree[Me*2]!==0)return n;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return f;for(Me=32;Me<a;Me++)if(X.dyn_ltree[Me*2]!==0)return f;return n}var Z=!1;function ie(X){Z||(le(),Z=!0),X.l_desc=new ue(X.dyn_ltree,se),X.d_desc=new ue(X.dyn_dtree,he),X.bl_desc=new ue(X.bl_tree,ce),X.bi_buf=0,X.bi_valid=0,we(X)}function ye(X,ve,Me,He){fe(X,(_<<1)+(He?1:0),3),Be(X,ve,Me,!0)}function xe(X){fe(X,b<<1,3),Ue(X,O,V),ee(X)}function Ne(X,ve,Me,He){var me,ze,Y=0;X.level>0?(X.strm.data_type===c&&(X.strm.data_type=Q(X)),Ae(X,X.l_desc),Ae(X,X.d_desc),Y=Ge(X),me=X.opt_len+3+7>>>3,ze=X.static_len+3+7>>>3,ze<=me&&(me=ze)):me=ze=Me+5,Me+4<=me&&ve!==-1?ye(X,ve,Me,He):X.strategy===o||ze===me?(fe(X,(b<<1)+(He?1:0),3),ge(X,V,N)):(fe(X,(C<<1)+(He?1:0),3),Ke(X,X.l_desc.max_code+1,X.d_desc.max_code+1,Y+1),ge(X,X.dyn_ltree,X.dyn_dtree)),we(X),He&&Pe(X)}function Ve(X,ve,Me){return X.pending_buf[X.d_buf+X.last_lit*2]=ve>>>8&255,X.pending_buf[X.d_buf+X.last_lit*2+1]=ve&255,X.pending_buf[X.l_buf+X.last_lit]=Me&255,X.last_lit++,ve===0?X.dyn_ltree[Me*2]++:(X.matches++,ve--,X.dyn_ltree[(G[Me]+a+1)*2]++,X.dyn_dtree[Ee(ve)*2]++),X.last_lit===X.lit_bufsize-1}t._tr_init=ie,t._tr_stored_block=ye,t._tr_flush_block=Ne,t._tr_tally=Ve,t._tr_align=xe},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":e=>{function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=t},"./src/SurfaceWorker.js":()=>{$3Dmol.workerString=(function(){self.onmessage=function(e){var t=e.data,r=t.type;if(r<0)self.atomData=t.atoms,self.volume=t.volume,self.ps=new ProteinSurface;else{var s=self.ps;s.initparm(t.expandedExtent,r!=1,self.volume),s.fillvoxels(self.atomData,t.extendedAtoms),s.buildboundary(),(r===4||r===2)&&(s.fastdistancemap(),s.boundingatom(!1),s.fillvoxelswaals(self.atomData,t.extendedAtoms)),s.marchingcube(r);var o=s.getFacesAndVertices(t.atomsToShow);self.postMessage(o)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;
var MarchingCube = new MarchingCubeInitializer();`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.workerString=$3Dmol.workerString.replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*WEBPACK_IMPORTED_MODULE_[0-9]__\./g,""),$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/exporter.js":e=>{typeof e.exports=="object"&&(e.exports=window.$3Dmol)},"./src/vendor/mmtf.js":function(e,t){(function(r,s){s(t)})(this,function(r){function s(Q,Z,ie){for(var ye=(Q.byteLength,0),xe=ie.length;xe>ye;ye++){var Ne=ie.charCodeAt(ye);if(128>Ne)Q.setUint8(Z++,Ne>>>0&127|0);else if(2048>Ne)Q.setUint8(Z++,Ne>>>6&31|192),Q.setUint8(Z++,Ne>>>0&63|128);else if(65536>Ne)Q.setUint8(Z++,Ne>>>12&15|224),Q.setUint8(Z++,Ne>>>6&63|128),Q.setUint8(Z++,Ne>>>0&63|128);else{if(!(1114112>Ne))throw new Error("bad codepoint "+Ne);Q.setUint8(Z++,Ne>>>18&7|240),Q.setUint8(Z++,Ne>>>12&63|128),Q.setUint8(Z++,Ne>>>6&63|128),Q.setUint8(Z++,Ne>>>0&63|128)}}}function o(Q){for(var Z=0,ie=0,ye=Q.length;ye>ie;ie++){var xe=Q.charCodeAt(ie);if(128>xe)Z+=1;else if(2048>xe)Z+=2;else if(65536>xe)Z+=3;else{if(!(1114112>xe))throw new Error("bad codepoint "+xe);Z+=4}}return Z}function n(Q,Z,ie){var ye=typeof Q;if(ye==="string"){var xe=o(Q);if(32>xe)return Z.setUint8(ie,160|xe),s(Z,ie+1,Q),1+xe;if(256>xe)return Z.setUint8(ie,217),Z.setUint8(ie+1,xe),s(Z,ie+2,Q),2+xe;if(65536>xe)return Z.setUint8(ie,218),Z.setUint16(ie+1,xe),s(Z,ie+3,Q),3+xe;if(4294967296>xe)return Z.setUint8(ie,219),Z.setUint32(ie+1,xe),s(Z,ie+5,Q),5+xe}if(Q instanceof Uint8Array){var xe=Q.byteLength,Ne=new Uint8Array(Z.buffer);if(256>xe)return Z.setUint8(ie,196),Z.setUint8(ie+1,xe),Ne.set(Q,ie+2),2+xe;if(65536>xe)return Z.setUint8(ie,197),Z.setUint16(ie+1,xe),Ne.set(Q,ie+3),3+xe;if(4294967296>xe)return Z.setUint8(ie,198),Z.setUint32(ie+1,xe),Ne.set(Q,ie+5),5+xe}if(ye==="number"){if(!isFinite(Q))throw new Error("Number not finite: "+Q);if(Math.floor(Q)!==Q)return Z.setUint8(ie,203),Z.setFloat64(ie+1,Q),9;if(Q>=0){if(128>Q)return Z.setUint8(ie,Q),1;if(256>Q)return Z.setUint8(ie,204),Z.setUint8(ie+1,Q),2;if(65536>Q)return Z.setUint8(ie,205),Z.setUint16(ie+1,Q),3;if(4294967296>Q)return Z.setUint8(ie,206),Z.setUint32(ie+1,Q),5;throw new Error("Number too big 0x"+Q.toString(16))}if(Q>=-32)return Z.setInt8(ie,Q),1;if(Q>=-128)return Z.setUint8(ie,208),Z.setInt8(ie+1,Q),2;if(Q>=-32768)return Z.setUint8(ie,209),Z.setInt16(ie+1,Q),3;if(Q>=-2147483648)return Z.setUint8(ie,210),Z.setInt32(ie+1,Q),5;throw new Error("Number too small -0x"+(-Q).toString(16).substr(1))}if(Q===null)return Z.setUint8(ie,192),1;if(ye==="boolean")return Z.setUint8(ie,Q?195:194),1;if(ye==="object"){var xe,ve=0,Ve=Array.isArray(Q);if(Ve)xe=Q.length;else{var X=Object.keys(Q);xe=X.length}var ve;if(16>xe?(Z.setUint8(ie,xe|(Ve?144:128)),ve=1):65536>xe?(Z.setUint8(ie,Ve?220:222),Z.setUint16(ie+1,xe),ve=3):4294967296>xe&&(Z.setUint8(ie,Ve?221:223),Z.setUint32(ie+1,xe),ve=5),Ve)for(var Me=0;xe>Me;Me++)ve+=n(Q[Me],Z,ie+ve);else for(var Me=0;xe>Me;Me++){var He=X[Me];ve+=n(He,Z,ie+ve),ve+=n(Q[He],Z,ie+ve)}return ve}throw new Error("Unknown type "+ye)}function f(Q){var Z=typeof Q;if(Z==="string"){var ie=o(Q);if(32>ie)return 1+ie;if(256>ie)return 2+ie;if(65536>ie)return 3+ie;if(4294967296>ie)return 5+ie}if(Q instanceof Uint8Array){var ie=Q.byteLength;if(256>ie)return 2+ie;if(65536>ie)return 3+ie;if(4294967296>ie)return 5+ie}if(Z==="number"){if(Math.floor(Q)!==Q)return 9;if(Q>=0){if(128>Q)return 1;if(256>Q)return 2;if(65536>Q)return 3;if(4294967296>Q)return 5;throw new Error("Number too big 0x"+Q.toString(16))}if(Q>=-32)return 1;if(Q>=-128)return 2;if(Q>=-32768)return 3;if(Q>=-2147483648)return 5;throw new Error("Number too small -0x"+Q.toString(16).substr(1))}if(Z==="boolean"||Q===null)return 1;if(Z==="object"){var ie,ye=0;if(Array.isArray(Q)){ie=Q.length;for(var xe=0;ie>xe;xe++)ye+=f(Q[xe])}else{var Ne=Object.keys(Q);ie=Ne.length;for(var xe=0;ie>xe;xe++){var Ve=Ne[xe];ye+=f(Ve)+f(Q[Ve])}}if(16>ie)return 1+ye;if(65536>ie)return 3+ye;if(4294967296>ie)return 5+ye;throw new Error("Array or object too long 0x"+ie.toString(16))}throw new Error("Unknown type "+Z)}function c(Q){var Z=new ArrayBuffer(f(Q)),ie=new DataView(Z);return n(Q,ie,0),new Uint8Array(Z)}function y(Q,Z,ie){return Z?new Q(Z.buffer,Z.byteOffset,Z.byteLength/(ie||1)):void 0}function _(Q){return y(DataView,Q)}function b(Q){return y(Uint8Array,Q)}function C(Q){return y(Int8Array,Q)}function M(Q){return y(Int32Array,Q,4)}function E(Q){return y(Float32Array,Q,4)}function P(Q,Z){var ie=Q.length/2;Z||(Z=new Int16Array(ie));for(var ye=0,xe=0;ie>ye;++ye,xe+=2)Z[ye]=Q[xe]<<8^Q[xe+1]<<0;return Z}function a(Q,Z){var ie=Q.length;Z||(Z=new Uint8Array(2*ie));for(var ye=_(Z),xe=0;ie>xe;++xe)ye.setInt16(2*xe,Q[xe]);return b(Z)}function u(Q,Z){var ie=Q.length/4;Z||(Z=new Int32Array(ie));for(var ye=0,xe=0;ie>ye;++ye,xe+=4)Z[ye]=Q[xe]<<24^Q[xe+1]<<16^Q[xe+2]<<8^Q[xe+3]<<0;return Z}function g(Q,Z){var ie=Q.length;Z||(Z=new Uint8Array(4*ie));for(var ye=_(Z),xe=0;ie>xe;++xe)ye.setInt32(4*xe,Q[xe]);return b(Z)}function A(Q,Z){var ie=Q.length;Z||(Z=new Float32Array(ie/4));for(var ye=_(Z),xe=_(Q),Ne=0,Ve=0,X=ie/4;X>Ne;++Ne,Ve+=4)ye.setFloat32(Ve,xe.getFloat32(Ve),!0);return Z}function x(Q,Z,ie){var ye=Q.length,xe=1/Z;ie||(ie=new Float32Array(ye));for(var Ne=0;ye>Ne;++Ne)ie[Ne]=Q[Ne]*xe;return ie}function l(Q,Z,ie){var ye=Q.length;ie||(ie=new Int32Array(ye));for(var xe=0;ye>xe;++xe)ie[xe]=Math.round(Q[xe]*Z);return ie}function v(Q,Z){var ie,ye;if(!Z){var xe=0;for(ie=0,ye=Q.length;ye>ie;ie+=2)xe+=Q[ie+1];Z=new Q.constructor(xe)}var Ne=0;for(ie=0,ye=Q.length;ye>ie;ie+=2)for(var Ve=Q[ie],X=Q[ie+1],ve=0;X>ve;++ve)Z[Ne]=Ve,++Ne;return Z}function w(Q){if(Q.length===0)return new Int32Array;var Z,ie,ye=2;for(Z=1,ie=Q.length;ie>Z;++Z)Q[Z-1]!==Q[Z]&&(ye+=2);var xe=new Int32Array(ye),Ne=0,Ve=1;for(Z=1,ie=Q.length;ie>Z;++Z)Q[Z-1]!==Q[Z]?(xe[Ne]=Q[Z-1],xe[Ne+1]=Ve,Ve=1,Ne+=2):++Ve;return xe[Ne]=Q[Q.length-1],xe[Ne+1]=Ve,xe}function O(Q,Z){var ie=Q.length;Z||(Z=new Q.constructor(ie)),ie&&(Z[0]=Q[0]);for(var ye=1;ie>ye;++ye)Z[ye]=Q[ye]+Z[ye-1];return Z}function T(Q,Z){var ie=Q.length;Z||(Z=new Q.constructor(ie)),Z[0]=Q[0];for(var ye=1;ie>ye;++ye)Z[ye]=Q[ye]-Q[ye-1];return Z}function D(Q,Z){var ie,ye,xe=Q instanceof Int8Array?127:32767,Ne=-xe-1,Ve=Q.length;if(!Z){var X=0;for(ie=0;Ve>ie;++ie)Q[ie]<xe&&Q[ie]>Ne&&++X;Z=new Int32Array(X)}for(ie=0,ye=0;Ve>ie;){for(var ve=0;Q[ie]===xe||Q[ie]===Ne;)ve+=Q[ie],++ie;ve+=Q[ie],++ie,Z[ye]=ve,++ye}return Z}function I(Q,Z){var ie,ye=Z?127:32767,xe=-ye-1,Ne=Q.length,Ve=0;for(ie=0;Ne>ie;++ie){var X=Q[ie];X===0?++Ve:X>0?(Ve+=Math.ceil(X/ye),X%ye===0&&(Ve+=1)):(Ve+=Math.ceil(X/xe),X%xe===0&&(Ve+=1))}var ve=Z?new Int8Array(Ve):new Int16Array(Ve),Me=0;for(ie=0;Ne>ie;++ie){var X=Q[ie];if(X>=0)for(;X>=ye;)ve[Me]=ye,++Me,X-=ye;else for(;xe>=X;)ve[Me]=xe,++Me,X-=xe;ve[Me]=X,++Me}return ve}function k(Q,Z){return O(v(Q),Z)}function z(Q){return w(T(Q))}function L(Q,Z,ie){return x(v(Q,M(ie)),Z,ie)}function B(Q,Z){return w(l(Q,Z))}function H(Q,Z,ie){return x(O(Q,M(ie)),Z,ie)}function V(Q,Z,ie){return T(l(Q,Z),ie)}function N(Q,Z,ie){return x(D(Q,M(ie)),Z,ie)}function U(Q,Z,ie){var ye=D(Q,M(ie));return H(ye,Z,E(ye))}function G(Q,Z,ie){return I(V(Q,Z),ie)}function $(Ne){var Z=_(Ne),ie=Z.getInt32(0),ye=Z.getInt32(4),xe=Ne.subarray(8,12),Ne=Ne.subarray(12);return[ie,Ne,ye,xe]}function W(Q,Z,ie,ye){var xe=new ArrayBuffer(12+ye.byteLength),Ne=new Uint8Array(xe),Ve=new DataView(xe);return Ve.setInt32(0,Q),Ve.setInt32(4,Z),ie&&Ne.set(ie,8),Ne.set(ye,12),Ne}function j(Q){var Z=Q.length,ie=b(Q);return W(2,Z,void 0,ie)}function se(Q){var Z=Q.length,ie=g(Q);return W(4,Z,void 0,ie)}function he(Q,Z){var ie=Q.length/Z,ye=g([Z]),xe=b(Q);return W(5,ie,ye,xe)}function ce(Q){var Z=Q.length,ie=g(w(Q));return W(6,Z,void 0,ie)}function ue(Q){var Z=Q.length,ie=g(z(Q));return W(8,Z,void 0,ie)}function Ee(Q,Z){var ie=Q.length,ye=g([Z]),xe=g(B(Q,Z));return W(9,ie,ye,xe)}function pe(Q,Z){var ie=Q.length,ye=g([Z]),xe=a(G(Q,Z));return W(10,ie,ye,xe)}function fe(Q){var Z={};return be.forEach(function(ie){Q[ie]!==void 0&&(Z[ie]=Q[ie])}),Q.bondAtomList&&(Z.bondAtomList=se(Q.bondAtomList)),Q.bondOrderList&&(Z.bondOrderList=j(Q.bondOrderList)),Z.xCoordList=pe(Q.xCoordList,1e3),Z.yCoordList=pe(Q.yCoordList,1e3),Z.zCoordList=pe(Q.zCoordList,1e3),Q.bFactorList&&(Z.bFactorList=pe(Q.bFactorList,100)),Q.atomIdList&&(Z.atomIdList=ue(Q.atomIdList)),Q.altLocList&&(Z.altLocList=ce(Q.altLocList)),Q.occupancyList&&(Z.occupancyList=Ee(Q.occupancyList,100)),Z.groupIdList=ue(Q.groupIdList),Z.groupTypeList=se(Q.groupTypeList),Q.secStructList&&(Z.secStructList=j(Q.secStructList)),Q.insCodeList&&(Z.insCodeList=ce(Q.insCodeList)),Q.sequenceIndexList&&(Z.sequenceIndexList=ue(Q.sequenceIndexList)),Z.chainIdList=he(Q.chainIdList,4),Q.chainNameList&&(Z.chainNameList=he(Q.chainNameList,4)),Z}function Ue(Q){function Z(ve){for(var Me={},He=0;ve>He;He++){var me=Ne();Me[me]=Ne()}return Me}function ie(ve){var Me=Q.subarray(Ve,Ve+ve);return Ve+=ve,Me}function ye(ve){var Me=Q.subarray(Ve,Ve+ve);Ve+=ve;var He=65535;if(ve>He){for(var me=[],ze=0;ze<Me.length;ze+=He)me.push(String.fromCharCode.apply(null,Me.subarray(ze,ze+He)));return me.join("")}return String.fromCharCode.apply(null,Me)}function xe(ve){for(var Me=new Array(ve),He=0;ve>He;He++)Me[He]=Ne();return Me}function Ne(){var ve,Me,He=Q[Ve];if(!(128&He))return Ve++,He;if((240&He)===128)return Me=15&He,Ve++,Z(Me);if((240&He)===144)return Me=15&He,Ve++,xe(Me);if((224&He)===160)return Me=31&He,Ve++,ye(Me);if((224&He)===224)return ve=X.getInt8(Ve),Ve++,ve;switch(He){case 192:return Ve++,null;case 194:return Ve++,!1;case 195:return Ve++,!0;case 196:return Me=X.getUint8(Ve+1),Ve+=2,ie(Me);case 197:return Me=X.getUint16(Ve+1),Ve+=3,ie(Me);case 198:return Me=X.getUint32(Ve+1),Ve+=5,ie(Me);case 202:return ve=X.getFloat32(Ve+1),Ve+=5,ve;case 203:return ve=X.getFloat64(Ve+1),Ve+=9,ve;case 204:return ve=Q[Ve+1],Ve+=2,ve;case 205:return ve=X.getUint16(Ve+1),Ve+=3,ve;case 206:return ve=X.getUint32(Ve+1),Ve+=5,ve;case 208:return ve=X.getInt8(Ve+1),Ve+=2,ve;case 209:return ve=X.getInt16(Ve+1),Ve+=3,ve;case 210:return ve=X.getInt32(Ve+1),Ve+=5,ve;case 217:return Me=X.getUint8(Ve+1),Ve+=2,ye(Me);case 218:return Me=X.getUint16(Ve+1),Ve+=3,ye(Me);case 219:return Me=X.getUint32(Ve+1),Ve+=5,ye(Me);case 220:return Me=X.getUint16(Ve+1),Ve+=3,xe(Me);case 221:return Me=X.getUint32(Ve+1),Ve+=5,xe(Me);case 222:return Me=X.getUint16(Ve+1),Ve+=3,Z(Me);case 223:return Me=X.getUint32(Ve+1),Ve+=5,Z(Me)}throw new Error("Unknown type 0x"+He.toString(16))}var Ve=0,X=new DataView(Q.buffer);return Ne()}function Oe(Q,Z,ie,ye){switch(Q){case 1:return A(Z);case 2:return C(Z);case 3:return P(Z);case 4:return u(Z);case 5:return b(Z);case 6:return v(u(Z),new Uint8Array(ie));case 7:return v(u(Z));case 8:return k(u(Z));case 9:return L(u(Z),u(ye)[0]);case 10:return U(P(Z),u(ye)[0]);case 11:return x(P(Z),u(ye)[0]);case 12:return N(P(Z),u(ye)[0]);case 13:return N(C(Z),u(ye)[0]);case 14:return D(P(Z));case 15:return D(C(Z))}}function ee(Q,Z){Z=Z||{};var ie=Z.ignoreFields,ye={};return Ae.forEach(function(xe){var Ne=ie?ie.indexOf(xe)!==-1:!1,Ve=Q[xe];Ne||Ve===void 0||(Ve instanceof Uint8Array?ye[xe]=Oe.apply(null,$(Ve)):ye[xe]=Ve)}),ye}function J(Q){return String.fromCharCode.apply(null,Q).replace(/\0/g,"")}function ne(Q,Z,ie){ie=ie||{};var ye,xe,Ne,Ve,X,ve,Me=ie.firstModelOnly,He=Z.onModel,me=Z.onChain,ze=Z.onGroup,Y=Z.onAtom,We=Z.onBond,Ze=0,F=0,Te=0,Ie=0,q=0,de=-1,Le=Q.chainNameList,Xe=Q.secStructList,Ye=Q.insCodeList,je=Q.sequenceIndexList,nt=Q.atomIdList,Mt=Q.bFactorList,st=Q.altLocList,it=Q.occupancyList,ot=Q.bondAtomList,Et=Q.bondOrderList;for(ye=0,xe=Q.chainsPerModel.length;xe>ye&&!(Me&&Ze>0);++ye){var vt=Q.chainsPerModel[Ze];for(He&&He({chainCount:vt,modelIndex:Ze}),Ne=0;vt>Ne;++Ne){var kt=Q.groupsPerChain[F];if(me){var It=J(Q.chainIdList.subarray(4*F,4*F+4)),_t=null;Le&&(_t=J(Le.subarray(4*F,4*F+4))),me({groupCount:kt,chainIndex:F,modelIndex:Ze,chainId:It,chainName:_t})}for(Ve=0;kt>Ve;++Ve){var xt=Q.groupList[Q.groupTypeList[Te]],yt=xt.atomNameList.length;if(ze){var Ot=null;Xe&&(Ot=Xe[Te]);var At=null;Q.insCodeList&&(At=String.fromCharCode(Ye[Te]));var Wt=null;je&&(Wt=je[Te]),ze({atomCount:yt,groupIndex:Te,chainIndex:F,modelIndex:Ze,groupId:Q.groupIdList[Te],groupType:Q.groupTypeList[Te],groupName:xt.groupName,singleLetterCode:xt.singleLetterCode,chemCompType:xt.chemCompType,secStruct:Ot,insCode:At,sequenceIndex:Wt})}for(X=0;yt>X;++X){if(Y){var mi=null;nt&&(mi=nt[Ie]);var Ht=null;Mt&&(Ht=Mt[Ie]);var gi=null;st&&(gi=String.fromCharCode(st[Ie]));var vi=null;it&&(vi=it[Ie]),Y({atomIndex:Ie,groupIndex:Te,chainIndex:F,modelIndex:Ze,atomId:mi,element:xt.elementList[X],atomName:xt.atomNameList[X],formalCharge:xt.formalChargeList[X],xCoord:Q.xCoordList[Ie],yCoord:Q.yCoordList[Ie],zCoord:Q.zCoordList[Ie],bFactor:Ht,altLoc:gi,occupancy:vi})}Ie+=1}if(We){var yi=xt.bondAtomList;for(X=0,ve=xt.bondOrderList.length;ve>X;++X)We({atomIndex1:Ie-yt+yi[2*X],atomIndex2:Ie-yt+yi[2*X+1],bondOrder:xt.bondOrderList[X]})}Te+=1}F+=1}if(q=de+1,de=Ie-1,We&&ot)for(X=0,ve=ot.length;ve>X;X+=2){var ri=ot[X],bi=ot[X+1];(ri>=q&&de>=ri||bi>=q&&de>=bi)&&We({atomIndex1:ri,atomIndex2:bi,bondOrder:Et?Et[X/2]:null})}Ze+=1}}function le(Q){return c(fe(Q))}function we(Q,Z){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));var ie;return ie=Q instanceof Uint8Array?Ue(Q):Q,ee(ie,Z)}function Pe(Q,Z,ie,ye){function xe(){try{var Ve=we(Ne.response);ie(Ve)}catch(X){ye(X)}}var Ne=new XMLHttpRequest;Ne.addEventListener("load",xe,!0),Ne.addEventListener("error",ye,!0),Ne.responseType="arraybuffer",Ne.open("GET",Z+Q.toUpperCase()),Ne.send()}function Be(Q,Z,ie){Pe(Q,Ge,Z,ie)}function Ce(Q,Z,ie){Pe(Q,Ke,Z,ie)}var be=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],ge=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Ae=be.concat(ge),De="v1.0.1",Re="//mmtf.rcsb.org/v1.0/",Ge=Re+"full/",Ke=Re+"reduced/";r.encode=le,r.decode=we,r.traverse=ne,r.fetch=Be,r.fetchReduced=Ce,r.version=De,r.fetchUrl=Ge,r.fetchReducedUrl=Ke,r.encodeMsgpack=c,r.encodeMmtf=fe,r.decodeMsgpack=Ue,r.decodeMmtf=ee})},"./node_modules/pako/dist/pako.esm.mjs":(e,t,r)=>{r.r(t),r.d(t,{Deflate:()=>Kr,Inflate:()=>Yr,constants:()=>qr,default:()=>Ys,deflate:()=>$r,deflateRaw:()=>jr,gzip:()=>Zr,inflate:()=>Xr,inflateRaw:()=>Jr,ungzip:()=>Qr});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const s=4,o=0,n=1,f=2;function c(S){let K=S.length;for(;--K>=0;)S[K]=0}const y=0,_=1,b=2,C=3,M=258,E=29,P=256,a=P+1+E,u=30,g=19,A=2*a+1,x=15,l=16,v=7,w=256,O=16,T=17,D=18,I=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),k=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),z=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),B=512,H=new Array((a+2)*2);c(H);const V=new Array(u*2);c(V);const N=new Array(B);c(N);const U=new Array(M-C+1);c(U);const G=new Array(E);c(G);const $=new Array(u);c($);function W(S,K,R,te,ae){this.static_tree=S,this.extra_bits=K,this.extra_base=R,this.elems=te,this.max_length=ae,this.has_stree=S&&S.length}let j,se,he;function ce(S,K){this.dyn_tree=S,this.max_code=0,this.stat_desc=K}const ue=S=>S<256?N[S]:N[256+(S>>>7)],Ee=(S,K)=>{S.pending_buf[S.pending++]=K&255,S.pending_buf[S.pending++]=K>>>8&255},pe=(S,K,R)=>{S.bi_valid>l-R?(S.bi_buf|=K<<S.bi_valid&65535,Ee(S,S.bi_buf),S.bi_buf=K>>l-S.bi_valid,S.bi_valid+=R-l):(S.bi_buf|=K<<S.bi_valid&65535,S.bi_valid+=R)},fe=(S,K,R)=>{pe(S,R[K*2],R[K*2+1])},Ue=(S,K)=>{let R=0;do R|=S&1,S>>>=1,R<<=1;while(--K>0);return R>>>1},Oe=S=>{S.bi_valid===16?(Ee(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):S.bi_valid>=8&&(S.pending_buf[S.pending++]=S.bi_buf&255,S.bi_buf>>=8,S.bi_valid-=8)},ee=(S,K)=>{const R=K.dyn_tree,te=K.max_code,ae=K.stat_desc.static_tree,oe=K.stat_desc.has_stree,ke=K.stat_desc.extra_bits,Se=K.stat_desc.extra_base,qe=K.stat_desc.max_length;let _e,Fe,ft,Qe,$e,et,Ct=0;for(Qe=0;Qe<=x;Qe++)S.bl_count[Qe]=0;for(R[S.heap[S.heap_max]*2+1]=0,_e=S.heap_max+1;_e<A;_e++)Fe=S.heap[_e],Qe=R[R[Fe*2+1]*2+1]+1,Qe>qe&&(Qe=qe,Ct++),R[Fe*2+1]=Qe,!(Fe>te)&&(S.bl_count[Qe]++,$e=0,Fe>=Se&&($e=ke[Fe-Se]),et=R[Fe*2],S.opt_len+=et*(Qe+$e),oe&&(S.static_len+=et*(ae[Fe*2+1]+$e)));if(Ct!==0){do{for(Qe=qe-1;S.bl_count[Qe]===0;)Qe--;S.bl_count[Qe]--,S.bl_count[Qe+1]+=2,S.bl_count[qe]--,Ct-=2}while(Ct>0);for(Qe=qe;Qe!==0;Qe--)for(Fe=S.bl_count[Qe];Fe!==0;)ft=S.heap[--_e],!(ft>te)&&(R[ft*2+1]!==Qe&&(S.opt_len+=(Qe-R[ft*2+1])*R[ft*2],R[ft*2+1]=Qe),Fe--)}},J=(S,K,R)=>{const te=new Array(x+1);let ae=0,oe,ke;for(oe=1;oe<=x;oe++)ae=ae+R[oe-1]<<1,te[oe]=ae;for(ke=0;ke<=K;ke++){let Se=S[ke*2+1];Se!==0&&(S[ke*2]=Ue(te[Se]++,Se))}},ne=()=>{let S,K,R,te,ae;const oe=new Array(x+1);for(R=0,te=0;te<E-1;te++)for(G[te]=R,S=0;S<1<<I[te];S++)U[R++]=te;for(U[R-1]=te,ae=0,te=0;te<16;te++)for($[te]=ae,S=0;S<1<<k[te];S++)N[ae++]=te;for(ae>>=7;te<u;te++)for($[te]=ae<<7,S=0;S<1<<k[te]-7;S++)N[256+ae++]=te;for(K=0;K<=x;K++)oe[K]=0;for(S=0;S<=143;)H[S*2+1]=8,S++,oe[8]++;for(;S<=255;)H[S*2+1]=9,S++,oe[9]++;for(;S<=279;)H[S*2+1]=7,S++,oe[7]++;for(;S<=287;)H[S*2+1]=8,S++,oe[8]++;for(J(H,a+1,oe),S=0;S<u;S++)V[S*2+1]=5,V[S*2]=Ue(S,5);j=new W(H,I,P+1,a,x),se=new W(V,k,0,u,x),he=new W(new Array(0),z,0,g,v)},le=S=>{let K;for(K=0;K<a;K++)S.dyn_ltree[K*2]=0;for(K=0;K<u;K++)S.dyn_dtree[K*2]=0;for(K=0;K<g;K++)S.bl_tree[K*2]=0;S.dyn_ltree[w*2]=1,S.opt_len=S.static_len=0,S.sym_next=S.matches=0},we=S=>{S.bi_valid>8?Ee(S,S.bi_buf):S.bi_valid>0&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0},Pe=(S,K,R,te)=>{const ae=K*2,oe=R*2;return S[ae]<S[oe]||S[ae]===S[oe]&&te[K]<=te[R]},Be=(S,K,R)=>{const te=S.heap[R];let ae=R<<1;for(;ae<=S.heap_len&&(ae<S.heap_len&&Pe(K,S.heap[ae+1],S.heap[ae],S.depth)&&ae++,!Pe(K,te,S.heap[ae],S.depth));)S.heap[R]=S.heap[ae],R=ae,ae<<=1;S.heap[R]=te},Ce=(S,K,R)=>{let te,ae,oe=0,ke,Se;if(S.sym_next!==0)do te=S.pending_buf[S.sym_buf+oe++]&255,te+=(S.pending_buf[S.sym_buf+oe++]&255)<<8,ae=S.pending_buf[S.sym_buf+oe++],te===0?fe(S,ae,K):(ke=U[ae],fe(S,ke+P+1,K),Se=I[ke],Se!==0&&(ae-=G[ke],pe(S,ae,Se)),te--,ke=ue(te),fe(S,ke,R),Se=k[ke],Se!==0&&(te-=$[ke],pe(S,te,Se)));while(oe<S.sym_next);fe(S,w,K)},be=(S,K)=>{const R=K.dyn_tree,te=K.stat_desc.static_tree,ae=K.stat_desc.has_stree,oe=K.stat_desc.elems;let ke,Se,qe=-1,_e;for(S.heap_len=0,S.heap_max=A,ke=0;ke<oe;ke++)R[ke*2]!==0?(S.heap[++S.heap_len]=qe=ke,S.depth[ke]=0):R[ke*2+1]=0;for(;S.heap_len<2;)_e=S.heap[++S.heap_len]=qe<2?++qe:0,R[_e*2]=1,S.depth[_e]=0,S.opt_len--,ae&&(S.static_len-=te[_e*2+1]);for(K.max_code=qe,ke=S.heap_len>>1;ke>=1;ke--)Be(S,R,ke);_e=oe;do ke=S.heap[1],S.heap[1]=S.heap[S.heap_len--],Be(S,R,1),Se=S.heap[1],S.heap[--S.heap_max]=ke,S.heap[--S.heap_max]=Se,R[_e*2]=R[ke*2]+R[Se*2],S.depth[_e]=(S.depth[ke]>=S.depth[Se]?S.depth[ke]:S.depth[Se])+1,R[ke*2+1]=R[Se*2+1]=_e,S.heap[1]=_e++,Be(S,R,1);while(S.heap_len>=2);S.heap[--S.heap_max]=S.heap[1],ee(S,K),J(R,qe,S.bl_count)},ge=(S,K,R)=>{let te,ae=-1,oe,ke=K[0*2+1],Se=0,qe=7,_e=4;for(ke===0&&(qe=138,_e=3),K[(R+1)*2+1]=65535,te=0;te<=R;te++)oe=ke,ke=K[(te+1)*2+1],!(++Se<qe&&oe===ke)&&(Se<_e?S.bl_tree[oe*2]+=Se:oe!==0?(oe!==ae&&S.bl_tree[oe*2]++,S.bl_tree[O*2]++):Se<=10?S.bl_tree[T*2]++:S.bl_tree[D*2]++,Se=0,ae=oe,ke===0?(qe=138,_e=3):oe===ke?(qe=6,_e=3):(qe=7,_e=4))},Ae=(S,K,R)=>{let te,ae=-1,oe,ke=K[0*2+1],Se=0,qe=7,_e=4;for(ke===0&&(qe=138,_e=3),te=0;te<=R;te++)if(oe=ke,ke=K[(te+1)*2+1],!(++Se<qe&&oe===ke)){if(Se<_e)do fe(S,oe,S.bl_tree);while(--Se!==0);else oe!==0?(oe!==ae&&(fe(S,oe,S.bl_tree),Se--),fe(S,O,S.bl_tree),pe(S,Se-3,2)):Se<=10?(fe(S,T,S.bl_tree),pe(S,Se-3,3)):(fe(S,D,S.bl_tree),pe(S,Se-11,7));Se=0,ae=oe,ke===0?(qe=138,_e=3):oe===ke?(qe=6,_e=3):(qe=7,_e=4)}},De=S=>{let K;for(ge(S,S.dyn_ltree,S.l_desc.max_code),ge(S,S.dyn_dtree,S.d_desc.max_code),be(S,S.bl_desc),K=g-1;K>=3&&S.bl_tree[L[K]*2+1]===0;K--);return S.opt_len+=3*(K+1)+5+5+4,K},Re=(S,K,R,te)=>{let ae;for(pe(S,K-257,5),pe(S,R-1,5),pe(S,te-4,4),ae=0;ae<te;ae++)pe(S,S.bl_tree[L[ae]*2+1],3);Ae(S,S.dyn_ltree,K-1),Ae(S,S.dyn_dtree,R-1)},Ge=S=>{let K=4093624447,R;for(R=0;R<=31;R++,K>>>=1)if(K&1&&S.dyn_ltree[R*2]!==0)return o;if(S.dyn_ltree[9*2]!==0||S.dyn_ltree[10*2]!==0||S.dyn_ltree[13*2]!==0)return n;for(R=32;R<P;R++)if(S.dyn_ltree[R*2]!==0)return n;return o};let Ke=!1;const Q=S=>{Ke||(ne(),Ke=!0),S.l_desc=new ce(S.dyn_ltree,j),S.d_desc=new ce(S.dyn_dtree,se),S.bl_desc=new ce(S.bl_tree,he),S.bi_buf=0,S.bi_valid=0,le(S)},Z=(S,K,R,te)=>{pe(S,(y<<1)+(te?1:0),3),we(S),Ee(S,R),Ee(S,~R),R&&S.pending_buf.set(S.window.subarray(K,K+R),S.pending),S.pending+=R},ie=S=>{pe(S,_<<1,3),fe(S,w,H),Oe(S)},ye=(S,K,R,te)=>{let ae,oe,ke=0;S.level>0?(S.strm.data_type===f&&(S.strm.data_type=Ge(S)),be(S,S.l_desc),be(S,S.d_desc),ke=De(S),ae=S.opt_len+3+7>>>3,oe=S.static_len+3+7>>>3,oe<=ae&&(ae=oe)):ae=oe=R+5,R+4<=ae&&K!==-1?Z(S,K,R,te):S.strategy===s||oe===ae?(pe(S,(_<<1)+(te?1:0),3),Ce(S,H,V)):(pe(S,(b<<1)+(te?1:0),3),Re(S,S.l_desc.max_code+1,S.d_desc.max_code+1,ke+1),Ce(S,S.dyn_ltree,S.dyn_dtree)),le(S),te&&we(S)},xe=(S,K,R)=>(S.pending_buf[S.sym_buf+S.sym_next++]=K,S.pending_buf[S.sym_buf+S.sym_next++]=K>>8,S.pending_buf[S.sym_buf+S.sym_next++]=R,K===0?S.dyn_ltree[R*2]++:(S.matches++,K--,S.dyn_ltree[(U[R]+P+1)*2]++,S.dyn_dtree[ue(K)*2]++),S.sym_next===S.sym_end);var Ne=Q,Ve=Z,X=ye,ve=xe,Me=ie,He={_tr_init:Ne,_tr_stored_block:Ve,_tr_flush_block:X,_tr_tally:ve,_tr_align:Me},ze=(S,K,R,te)=>{let ae=S&65535|0,oe=S>>>16&65535|0,ke=0;for(;R!==0;){ke=R>2e3?2e3:R,R-=ke;do ae=ae+K[te++]|0,oe=oe+ae|0;while(--ke);ae%=65521,oe%=65521}return ae|oe<<16|0};const Y=()=>{let S,K=[];for(var R=0;R<256;R++){S=R;for(var te=0;te<8;te++)S=S&1?3988292384^S>>>1:S>>>1;K[R]=S}return K},We=new Uint32Array(Y());var F=(S,K,R,te)=>{const ae=We,oe=te+R;S^=-1;for(let ke=te;ke<oe;ke++)S=S>>>8^ae[(S^K[ke])&255];return S^-1},Te={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ie={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:q,_tr_stored_block:de,_tr_flush_block:Le,_tr_tally:Xe,_tr_align:Ye}=He,{Z_NO_FLUSH:je,Z_PARTIAL_FLUSH:nt,Z_FULL_FLUSH:Mt,Z_FINISH:st,Z_BLOCK:it,Z_OK:ot,Z_STREAM_END:Et,Z_STREAM_ERROR:vt,Z_DATA_ERROR:kt,Z_BUF_ERROR:It,Z_DEFAULT_COMPRESSION:_t,Z_FILTERED:xt,Z_HUFFMAN_ONLY:yt,Z_RLE:Ot,Z_FIXED:At,Z_DEFAULT_STRATEGY:Wt,Z_UNKNOWN:mi,Z_DEFLATED:Ht}=Ie,gi=9,vi=15,yi=8,ri=29,Pi=256+1+ri,tn=30,rn=19,nn=2*Pi+1,sn=15,ct=3,Nt=258,Lt=Nt+ct+1,on=32,Xt=42,Di=57,Ri=69,Ii=73,Li=91,Bi=103,Gt=113,ni=666,Tt=1,Jt=2,Kt=3,Qt=4,an=3,$t=(S,K)=>(S.msg=Te[K],K),Zi=S=>S*2-(S>4?9:0),Vt=S=>{let K=S.length;for(;--K>=0;)S[K]=0},ln=S=>{let K,R,te,ae=S.w_size;K=S.hash_size,te=K;do R=S.head[--te],S.head[te]=R>=ae?R-ae:0;while(--K);K=ae,te=K;do R=S.prev[--te],S.prev[te]=R>=ae?R-ae:0;while(--K)};let Ut=(S,K,R)=>(K<<S.hash_shift^R)&S.hash_mask;const Pt=S=>{const K=S.state;let R=K.pending;R>S.avail_out&&(R=S.avail_out),R!==0&&(S.output.set(K.pending_buf.subarray(K.pending_out,K.pending_out+R),S.next_out),S.next_out+=R,K.pending_out+=R,S.total_out+=R,S.avail_out-=R,K.pending-=R,K.pending===0&&(K.pending_out=0))},Dt=(S,K)=>{Le(S,S.block_start>=0?S.block_start:-1,S.strstart-S.block_start,K),S.block_start=S.strstart,Pt(S.strm)},pt=(S,K)=>{S.pending_buf[S.pending++]=K},si=(S,K)=>{S.pending_buf[S.pending++]=K>>>8&255,S.pending_buf[S.pending++]=K&255},ki=(S,K,R,te)=>{let ae=S.avail_in;return ae>te&&(ae=te),ae===0?0:(S.avail_in-=ae,K.set(S.input.subarray(S.next_in,S.next_in+ae),R),S.state.wrap===1?S.adler=ze(S.adler,K,ae,R):S.state.wrap===2&&(S.adler=F(S.adler,K,ae,R)),S.next_in+=ae,S.total_in+=ae,ae)},Yi=(S,K)=>{let R=S.max_chain_length,te=S.strstart,ae,oe,ke=S.prev_length,Se=S.nice_match;const qe=S.strstart>S.w_size-Lt?S.strstart-(S.w_size-Lt):0,_e=S.window,Fe=S.w_mask,ft=S.prev,Qe=S.strstart+Nt;let $e=_e[te+ke-1],et=_e[te+ke];S.prev_length>=S.good_match&&(R>>=2),Se>S.lookahead&&(Se=S.lookahead);do if(ae=K,!(_e[ae+ke]!==et||_e[ae+ke-1]!==$e||_e[ae]!==_e[te]||_e[++ae]!==_e[te+1])){te+=2,ae++;do;while(_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&_e[++te]===_e[++ae]&&te<Qe);if(oe=Nt-(Qe-te),te=Qe-Nt,oe>ke){if(S.match_start=K,ke=oe,oe>=Se)break;$e=_e[te+ke-1],et=_e[te+ke]}}while((K=ft[K&Fe])>qe&&--R!==0);return ke<=S.lookahead?ke:S.lookahead},qt=S=>{const K=S.w_size;let R,te,ae;do{if(te=S.window_size-S.lookahead-S.strstart,S.strstart>=K+(K-Lt)&&(S.window.set(S.window.subarray(K,K+K-te),0),S.match_start-=K,S.strstart-=K,S.block_start-=K,S.insert>S.strstart&&(S.insert=S.strstart),ln(S),te+=K),S.strm.avail_in===0)break;if(R=ki(S.strm,S.window,S.strstart+S.lookahead,te),S.lookahead+=R,S.lookahead+S.insert>=ct)for(ae=S.strstart-S.insert,S.ins_h=S.window[ae],S.ins_h=Ut(S,S.ins_h,S.window[ae+1]);S.insert&&(S.ins_h=Ut(S,S.ins_h,S.window[ae+ct-1]),S.prev[ae&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=ae,ae++,S.insert--,!(S.lookahead+S.insert<ct)););}while(S.lookahead<Lt&&S.strm.avail_in!==0)},Xi=(S,K)=>{let R=S.pending_buf_size-5>S.w_size?S.w_size:S.pending_buf_size-5,te,ae,oe,ke=0,Se=S.strm.avail_in;do{if(te=65535,oe=S.bi_valid+42>>3,S.strm.avail_out<oe||(oe=S.strm.avail_out-oe,ae=S.strstart-S.block_start,te>ae+S.strm.avail_in&&(te=ae+S.strm.avail_in),te>oe&&(te=oe),te<R&&(te===0&&K!==st||K===je||te!==ae+S.strm.avail_in)))break;ke=K===st&&te===ae+S.strm.avail_in?1:0,de(S,0,0,ke),S.pending_buf[S.pending-4]=te,S.pending_buf[S.pending-3]=te>>8,S.pending_buf[S.pending-2]=~te,S.pending_buf[S.pending-1]=~te>>8,Pt(S.strm),ae&&(ae>te&&(ae=te),S.strm.output.set(S.window.subarray(S.block_start,S.block_start+ae),S.strm.next_out),S.strm.next_out+=ae,S.strm.avail_out-=ae,S.strm.total_out+=ae,S.block_start+=ae,te-=ae),te&&(ki(S.strm,S.strm.output,S.strm.next_out,te),S.strm.next_out+=te,S.strm.avail_out-=te,S.strm.total_out+=te)}while(ke===0);return Se-=S.strm.avail_in,Se&&(Se>=S.w_size?(S.matches=2,S.window.set(S.strm.input.subarray(S.strm.next_in-S.w_size,S.strm.next_in),0),S.strstart=S.w_size,S.insert=S.strstart):(S.window_size-S.strstart<=Se&&(S.strstart-=S.w_size,S.window.set(S.window.subarray(S.w_size,S.w_size+S.strstart),0),S.matches<2&&S.matches++,S.insert>S.strstart&&(S.insert=S.strstart)),S.window.set(S.strm.input.subarray(S.strm.next_in-Se,S.strm.next_in),S.strstart),S.strstart+=Se,S.insert+=Se>S.w_size-S.insert?S.w_size-S.insert:Se),S.block_start=S.strstart),S.high_water<S.strstart&&(S.high_water=S.strstart),ke?Qt:K!==je&&K!==st&&S.strm.avail_in===0&&S.strstart===S.block_start?Jt:(oe=S.window_size-S.strstart,S.strm.avail_in>oe&&S.block_start>=S.w_size&&(S.block_start-=S.w_size,S.strstart-=S.w_size,S.window.set(S.window.subarray(S.w_size,S.w_size+S.strstart),0),S.matches<2&&S.matches++,oe+=S.w_size,S.insert>S.strstart&&(S.insert=S.strstart)),oe>S.strm.avail_in&&(oe=S.strm.avail_in),oe&&(ki(S.strm,S.window,S.strstart,oe),S.strstart+=oe,S.insert+=oe>S.w_size-S.insert?S.w_size-S.insert:oe),S.high_water<S.strstart&&(S.high_water=S.strstart),oe=S.bi_valid+42>>3,oe=S.pending_buf_size-oe>65535?65535:S.pending_buf_size-oe,R=oe>S.w_size?S.w_size:oe,ae=S.strstart-S.block_start,(ae>=R||(ae||K===st)&&K!==je&&S.strm.avail_in===0&&ae<=oe)&&(te=ae>oe?oe:ae,ke=K===st&&S.strm.avail_in===0&&te===ae?1:0,de(S,S.block_start,te,ke),S.block_start+=te,Pt(S.strm)),ke?Kt:Tt)},Fi=(S,K)=>{let R,te;for(;;){if(S.lookahead<Lt){if(qt(S),S.lookahead<Lt&&K===je)return Tt;if(S.lookahead===0)break}if(R=0,S.lookahead>=ct&&(S.ins_h=Ut(S,S.ins_h,S.window[S.strstart+ct-1]),R=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),R!==0&&S.strstart-R<=S.w_size-Lt&&(S.match_length=Yi(S,R)),S.match_length>=ct)if(te=Xe(S,S.strstart-S.match_start,S.match_length-ct),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=ct){S.match_length--;do S.strstart++,S.ins_h=Ut(S,S.ins_h,S.window[S.strstart+ct-1]),R=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart;while(--S.match_length!==0);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=Ut(S,S.ins_h,S.window[S.strstart+1]);else te=Xe(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(te&&(Dt(S,!1),S.strm.avail_out===0))return Tt}return S.insert=S.strstart<ct-1?S.strstart:ct-1,K===st?(Dt(S,!0),S.strm.avail_out===0?Kt:Qt):S.sym_next&&(Dt(S,!1),S.strm.avail_out===0)?Tt:Jt},ei=(S,K)=>{let R,te,ae;for(;;){if(S.lookahead<Lt){if(qt(S),S.lookahead<Lt&&K===je)return Tt;if(S.lookahead===0)break}if(R=0,S.lookahead>=ct&&(S.ins_h=Ut(S,S.ins_h,S.window[S.strstart+ct-1]),R=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=ct-1,R!==0&&S.prev_length<S.max_lazy_match&&S.strstart-R<=S.w_size-Lt&&(S.match_length=Yi(S,R),S.match_length<=5&&(S.strategy===xt||S.match_length===ct&&S.strstart-S.match_start>4096)&&(S.match_length=ct-1)),S.prev_length>=ct&&S.match_length<=S.prev_length){ae=S.strstart+S.lookahead-ct,te=Xe(S,S.strstart-1-S.prev_match,S.prev_length-ct),S.lookahead-=S.prev_length-1,S.prev_length-=2;do++S.strstart<=ae&&(S.ins_h=Ut(S,S.ins_h,S.window[S.strstart+ct-1]),R=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart);while(--S.prev_length!==0);if(S.match_available=0,S.match_length=ct-1,S.strstart++,te&&(Dt(S,!1),S.strm.avail_out===0))return Tt}else if(S.match_available){if(te=Xe(S,0,S.window[S.strstart-1]),te&&Dt(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return Tt}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(te=Xe(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<ct-1?S.strstart:ct-1,K===st?(Dt(S,!0),S.strm.avail_out===0?Kt:Qt):S.sym_next&&(Dt(S,!1),S.strm.avail_out===0)?Tt:Jt},cn=(S,K)=>{let R,te,ae,oe;const ke=S.window;for(;;){if(S.lookahead<=Nt){if(qt(S),S.lookahead<=Nt&&K===je)return Tt;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=ct&&S.strstart>0&&(ae=S.strstart-1,te=ke[ae],te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae])){oe=S.strstart+Nt;do;while(te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae]&&te===ke[++ae]&&ae<oe);S.match_length=Nt-(oe-ae),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=ct?(R=Xe(S,1,S.match_length-ct),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(R=Xe(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),R&&(Dt(S,!1),S.strm.avail_out===0))return Tt}return S.insert=0,K===st?(Dt(S,!0),S.strm.avail_out===0?Kt:Qt):S.sym_next&&(Dt(S,!1),S.strm.avail_out===0)?Tt:Jt},dn=(S,K)=>{let R;for(;;){if(S.lookahead===0&&(qt(S),S.lookahead===0)){if(K===je)return Tt;break}if(S.match_length=0,R=Xe(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,R&&(Dt(S,!1),S.strm.avail_out===0))return Tt}return S.insert=0,K===st?(Dt(S,!0),S.strm.avail_out===0?Kt:Qt):S.sym_next&&(Dt(S,!1),S.strm.avail_out===0)?Tt:Jt};function Bt(S,K,R,te,ae){this.good_length=S,this.max_lazy=K,this.nice_length=R,this.max_chain=te,this.func=ae}const oi=[new Bt(0,0,0,0,Xi),new Bt(4,4,8,4,Fi),new Bt(4,5,16,8,Fi),new Bt(4,6,32,32,Fi),new Bt(4,4,16,16,ei),new Bt(8,16,32,32,ei),new Bt(8,16,128,128,ei),new Bt(8,32,128,256,ei),new Bt(32,128,258,1024,ei),new Bt(32,258,258,4096,ei)],un=S=>{S.window_size=2*S.w_size,Vt(S.head),S.max_lazy_match=oi[S.level].max_lazy,S.good_match=oi[S.level].good_length,S.nice_match=oi[S.level].nice_length,S.max_chain_length=oi[S.level].max_chain,S.strstart=0,S.block_start=0,S.lookahead=0,S.insert=0,S.match_length=S.prev_length=ct-1,S.match_available=0,S.ins_h=0};function hn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ht,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(nn*2),this.dyn_dtree=new Uint16Array((2*tn+1)*2),this.bl_tree=new Uint16Array((2*rn+1)*2),Vt(this.dyn_ltree),Vt(this.dyn_dtree),Vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(sn+1),this.heap=new Uint16Array(2*Pi+1),Vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Pi+1),Vt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ai=S=>{if(!S)return 1;const K=S.state;return!K||K.strm!==S||K.status!==Xt&&K.status!==Di&&K.status!==Ri&&K.status!==Ii&&K.status!==Li&&K.status!==Bi&&K.status!==Gt&&K.status!==ni?1:0},Ji=S=>{if(ai(S))return $t(S,vt);S.total_in=S.total_out=0,S.data_type=mi;const K=S.state;return K.pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap===2?Di:K.wrap?Xt:Gt,S.adler=K.wrap===2?0:1,K.last_flush=-2,q(K),ot},Qi=S=>{const K=Ji(S);return K===ot&&un(S.state),K},fn=(S,K)=>ai(S)||S.state.wrap!==2?vt:(S.state.gzhead=K,ot),qi=(S,K,R,te,ae,oe)=>{if(!S)return vt;let ke=1;if(K===_t&&(K=6),te<0?(ke=0,te=-te):te>15&&(ke=2,te-=16),ae<1||ae>gi||R!==Ht||te<8||te>15||K<0||K>9||oe<0||oe>At||te===8&&ke!==1)return $t(S,vt);te===8&&(te=9);const Se=new hn;return S.state=Se,Se.strm=S,Se.status=Xt,Se.wrap=ke,Se.gzhead=null,Se.w_bits=te,Se.w_size=1<<Se.w_bits,Se.w_mask=Se.w_size-1,Se.hash_bits=ae+7,Se.hash_size=1<<Se.hash_bits,Se.hash_mask=Se.hash_size-1,Se.hash_shift=~~((Se.hash_bits+ct-1)/ct),Se.window=new Uint8Array(Se.w_size*2),Se.head=new Uint16Array(Se.hash_size),Se.prev=new Uint16Array(Se.w_size),Se.lit_bufsize=1<<ae+6,Se.pending_buf_size=Se.lit_bufsize*4,Se.pending_buf=new Uint8Array(Se.pending_buf_size),Se.sym_buf=Se.lit_bufsize,Se.sym_end=(Se.lit_bufsize-1)*3,Se.level=K,Se.strategy=oe,Se.method=R,Qi(S)},pn=(S,K)=>qi(S,K,Ht,vi,yi,Wt),mn=(S,K)=>{if(ai(S)||K>it||K<0)return S?$t(S,vt):vt;const R=S.state;if(!S.output||S.avail_in!==0&&!S.input||R.status===ni&&K!==st)return $t(S,S.avail_out===0?It:vt);const te=R.last_flush;if(R.last_flush=K,R.pending!==0){if(Pt(S),S.avail_out===0)return R.last_flush=-1,ot}else if(S.avail_in===0&&Zi(K)<=Zi(te)&&K!==st)return $t(S,It);if(R.status===ni&&S.avail_in!==0)return $t(S,It);if(R.status===Xt&&R.wrap===0&&(R.status=Gt),R.status===Xt){let ae=Ht+(R.w_bits-8<<4)<<8,oe=-1;if(R.strategy>=yt||R.level<2?oe=0:R.level<6?oe=1:R.level===6?oe=2:oe=3,ae|=oe<<6,R.strstart!==0&&(ae|=on),ae+=31-ae%31,si(R,ae),R.strstart!==0&&(si(R,S.adler>>>16),si(R,S.adler&65535)),S.adler=1,R.status=Gt,Pt(S),R.pending!==0)return R.last_flush=-1,ot}if(R.status===Di){if(S.adler=0,pt(R,31),pt(R,139),pt(R,8),R.gzhead)pt(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),pt(R,R.gzhead.time&255),pt(R,R.gzhead.time>>8&255),pt(R,R.gzhead.time>>16&255),pt(R,R.gzhead.time>>24&255),pt(R,R.level===9?2:R.strategy>=yt||R.level<2?4:0),pt(R,R.gzhead.os&255),R.gzhead.extra&&R.gzhead.extra.length&&(pt(R,R.gzhead.extra.length&255),pt(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(S.adler=F(S.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=Ri;else if(pt(R,0),pt(R,0),pt(R,0),pt(R,0),pt(R,0),pt(R,R.level===9?2:R.strategy>=yt||R.level<2?4:0),pt(R,an),R.status=Gt,Pt(S),R.pending!==0)return R.last_flush=-1,ot}if(R.status===Ri){if(R.gzhead.extra){let ae=R.pending,oe=(R.gzhead.extra.length&65535)-R.gzindex;for(;R.pending+oe>R.pending_buf_size;){let Se=R.pending_buf_size-R.pending;if(R.pending_buf.set(R.gzhead.extra.subarray(R.gzindex,R.gzindex+Se),R.pending),R.pending=R.pending_buf_size,R.gzhead.hcrc&&R.pending>ae&&(S.adler=F(S.adler,R.pending_buf,R.pending-ae,ae)),R.gzindex+=Se,Pt(S),R.pending!==0)return R.last_flush=-1,ot;ae=0,oe-=Se}let ke=new Uint8Array(R.gzhead.extra);R.pending_buf.set(ke.subarray(R.gzindex,R.gzindex+oe),R.pending),R.pending+=oe,R.gzhead.hcrc&&R.pending>ae&&(S.adler=F(S.adler,R.pending_buf,R.pending-ae,ae)),R.gzindex=0}R.status=Ii}if(R.status===Ii){if(R.gzhead.name){let ae=R.pending,oe;do{if(R.pending===R.pending_buf_size){if(R.gzhead.hcrc&&R.pending>ae&&(S.adler=F(S.adler,R.pending_buf,R.pending-ae,ae)),Pt(S),R.pending!==0)return R.last_flush=-1,ot;ae=0}R.gzindex<R.gzhead.name.length?oe=R.gzhead.name.charCodeAt(R.gzindex++)&255:oe=0,pt(R,oe)}while(oe!==0);R.gzhead.hcrc&&R.pending>ae&&(S.adler=F(S.adler,R.pending_buf,R.pending-ae,ae)),R.gzindex=0}R.status=Li}if(R.status===Li){if(R.gzhead.comment){let ae=R.pending,oe;do{if(R.pending===R.pending_buf_size){if(R.gzhead.hcrc&&R.pending>ae&&(S.adler=F(S.adler,R.pending_buf,R.pending-ae,ae)),Pt(S),R.pending!==0)return R.last_flush=-1,ot;ae=0}R.gzindex<R.gzhead.comment.length?oe=R.gzhead.comment.charCodeAt(R.gzindex++)&255:oe=0,pt(R,oe)}while(oe!==0);R.gzhead.hcrc&&R.pending>ae&&(S.adler=F(S.adler,R.pending_buf,R.pending-ae,ae))}R.status=Bi}if(R.status===Bi){if(R.gzhead.hcrc){if(R.pending+2>R.pending_buf_size&&(Pt(S),R.pending!==0))return R.last_flush=-1,ot;pt(R,S.adler&255),pt(R,S.adler>>8&255),S.adler=0}if(R.status=Gt,Pt(S),R.pending!==0)return R.last_flush=-1,ot}if(S.avail_in!==0||R.lookahead!==0||K!==je&&R.status!==ni){let ae=R.level===0?Xi(R,K):R.strategy===yt?dn(R,K):R.strategy===Ot?cn(R,K):oi[R.level].func(R,K);if((ae===Kt||ae===Qt)&&(R.status=ni),ae===Tt||ae===Kt)return S.avail_out===0&&(R.last_flush=-1),ot;if(ae===Jt&&(K===nt?Ye(R):K!==it&&(de(R,0,0,!1),K===Mt&&(Vt(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),Pt(S),S.avail_out===0))return R.last_flush=-1,ot}return K!==st?ot:R.wrap<=0?Et:(R.wrap===2?(pt(R,S.adler&255),pt(R,S.adler>>8&255),pt(R,S.adler>>16&255),pt(R,S.adler>>24&255),pt(R,S.total_in&255),pt(R,S.total_in>>8&255),pt(R,S.total_in>>16&255),pt(R,S.total_in>>24&255)):(si(R,S.adler>>>16),si(R,S.adler&65535)),Pt(S),R.wrap>0&&(R.wrap=-R.wrap),R.pending!==0?ot:Et)},gn=S=>{if(ai(S))return vt;const K=S.state.status;return S.state=null,K===Gt?$t(S,kt):ot},vn=(S,K)=>{let R=K.length;if(ai(S))return vt;const te=S.state,ae=te.wrap;if(ae===2||ae===1&&te.status!==Xt||te.lookahead)return vt;if(ae===1&&(S.adler=ze(S.adler,K,R,0)),te.wrap=0,R>=te.w_size){ae===0&&(Vt(te.head),te.strstart=0,te.block_start=0,te.insert=0);let qe=new Uint8Array(te.w_size);qe.set(K.subarray(R-te.w_size,R),0),K=qe,R=te.w_size}const oe=S.avail_in,ke=S.next_in,Se=S.input;for(S.avail_in=R,S.next_in=0,S.input=K,qt(te);te.lookahead>=ct;){let qe=te.strstart,_e=te.lookahead-(ct-1);do te.ins_h=Ut(te,te.ins_h,te.window[qe+ct-1]),te.prev[qe&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=qe,qe++;while(--_e);te.strstart=qe,te.lookahead=ct-1,qt(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=ct-1,te.match_available=0,S.next_in=ke,S.input=Se,S.avail_in=oe,te.wrap=ae,ot};var yn=pn,bn=qi,_n=Qi,xn=Ji,wn=fn,Cn=mn,En=gn,Sn=vn,Mn="pako deflate (from Nodeca project)",li={deflateInit:yn,deflateInit2:bn,deflateReset:_n,deflateResetKeep:xn,deflateSetHeader:wn,deflate:Cn,deflateEnd:En,deflateSetDictionary:Sn,deflateInfo:Mn};const An=(S,K)=>Object.prototype.hasOwnProperty.call(S,K);var Tn=function(S){const K=Array.prototype.slice.call(arguments,1);for(;K.length;){const R=K.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(const te in R)An(R,te)&&(S[te]=R[te])}}return S},On=S=>{let K=0;for(let te=0,ae=S.length;te<ae;te++)K+=S[te].length;const R=new Uint8Array(K);for(let te=0,ae=0,oe=S.length;te<oe;te++){let ke=S[te];R.set(ke,ae),ae+=ke.length}return R},_i={assign:Tn,flattenChunks:On};let er=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{er=!1}const ci=new Uint8Array(256);for(let S=0;S<256;S++)ci[S]=S>=252?6:S>=248?5:S>=240?4:S>=224?3:S>=192?2:1;ci[254]=ci[254]=1;var Pn=S=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(S);let K,R,te,ae,oe,ke=S.length,Se=0;for(ae=0;ae<ke;ae++)R=S.charCodeAt(ae),(R&64512)===55296&&ae+1<ke&&(te=S.charCodeAt(ae+1),(te&64512)===56320&&(R=65536+(R-55296<<10)+(te-56320),ae++)),Se+=R<128?1:R<2048?2:R<65536?3:4;for(K=new Uint8Array(Se),oe=0,ae=0;oe<Se;ae++)R=S.charCodeAt(ae),(R&64512)===55296&&ae+1<ke&&(te=S.charCodeAt(ae+1),(te&64512)===56320&&(R=65536+(R-55296<<10)+(te-56320),ae++)),R<128?K[oe++]=R:R<2048?(K[oe++]=192|R>>>6,K[oe++]=128|R&63):R<65536?(K[oe++]=224|R>>>12,K[oe++]=128|R>>>6&63,K[oe++]=128|R&63):(K[oe++]=240|R>>>18,K[oe++]=128|R>>>12&63,K[oe++]=128|R>>>6&63,K[oe++]=128|R&63);return K};const Dn=(S,K)=>{if(K<65534&&S.subarray&&er)return String.fromCharCode.apply(null,S.length===K?S:S.subarray(0,K));let R="";for(let te=0;te<K;te++)R+=String.fromCharCode(S[te]);return R};var Rn=(S,K)=>{const R=K||S.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(S.subarray(0,K));let te,ae;const oe=new Array(R*2);for(ae=0,te=0;te<R;){let ke=S[te++];if(ke<128){oe[ae++]=ke;continue}let Se=ci[ke];if(Se>4){oe[ae++]=65533,te+=Se-1;continue}for(ke&=Se===2?31:Se===3?15:7;Se>1&&te<R;)ke=ke<<6|S[te++]&63,Se--;if(Se>1){oe[ae++]=65533;continue}ke<65536?oe[ae++]=ke:(ke-=65536,oe[ae++]=55296|ke>>10&1023,oe[ae++]=56320|ke&1023)}return Dn(oe,ae)},In=(S,K)=>{K=K||S.length,K>S.length&&(K=S.length);let R=K-1;for(;R>=0&&(S[R]&192)===128;)R--;return R<0||R===0?K:R+ci[S[R]]>K?R:K},di={string2buf:Pn,buf2string:Rn,utf8border:In};function Ln(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tr=Ln;const ir=Object.prototype.toString,{Z_NO_FLUSH:Bn,Z_SYNC_FLUSH:kn,Z_FULL_FLUSH:Fn,Z_FINISH:zn,Z_OK:xi,Z_STREAM_END:Nn,Z_DEFAULT_COMPRESSION:Vn,Z_DEFAULT_STRATEGY:Un,Z_DEFLATED:Wn}=Ie;function ui(S){this.options=_i.assign({level:Vn,method:Wn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Un},S||{});let K=this.options;K.raw&&K.windowBits>0?K.windowBits=-K.windowBits:K.gzip&&K.windowBits>0&&K.windowBits<16&&(K.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tr,this.strm.avail_out=0;let R=li.deflateInit2(this.strm,K.level,K.method,K.windowBits,K.memLevel,K.strategy);if(R!==xi)throw new Error(Te[R]);if(K.header&&li.deflateSetHeader(this.strm,K.header),K.dictionary){let te;if(typeof K.dictionary=="string"?te=di.string2buf(K.dictionary):ir.call(K.dictionary)==="[object ArrayBuffer]"?te=new Uint8Array(K.dictionary):te=K.dictionary,R=li.deflateSetDictionary(this.strm,te),R!==xi)throw new Error(Te[R]);this._dict_set=!0}}ui.prototype.push=function(S,K){const R=this.strm,te=this.options.chunkSize;let ae,oe;if(this.ended)return!1;for(K===~~K?oe=K:oe=K===!0?zn:Bn,typeof S=="string"?R.input=di.string2buf(S):ir.call(S)==="[object ArrayBuffer]"?R.input=new Uint8Array(S):R.input=S,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(te),R.next_out=0,R.avail_out=te),(oe===kn||oe===Fn)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(ae=li.deflate(R,oe),ae===Nn)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),ae=li.deflateEnd(this.strm),this.onEnd(ae),this.ended=!0,ae===xi;if(R.avail_out===0){this.onData(R.output);continue}if(oe>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},ui.prototype.onData=function(S){this.chunks.push(S)},ui.prototype.onEnd=function(S){S===xi&&(this.result=_i.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function zi(S,K){const R=new ui(K);if(R.push(S,!0),R.err)throw R.msg||Te[R.err];return R.result}function Hn(S,K){return K=K||{},K.raw=!0,zi(S,K)}function Gn(S,K){return K=K||{},K.gzip=!0,zi(S,K)}var Kn=ui,$n=zi,jn=Hn,Zn=Gn,Yn=Ie,Xn={Deflate:Kn,deflate:$n,deflateRaw:jn,gzip:Zn,constants:Yn};const wi=16209,Jn=16191;var Qn=function(K,R){let te,ae,oe,ke,Se,qe,_e,Fe,ft,Qe,$e,et,Ct,ut,at,gt,lt,Je,mt,St,tt,bt,ht,rt;const dt=K.state;te=K.next_in,ht=K.input,ae=te+(K.avail_in-5),oe=K.next_out,rt=K.output,ke=oe-(R-K.avail_out),Se=oe+(K.avail_out-257),qe=dt.dmax,_e=dt.wsize,Fe=dt.whave,ft=dt.wnext,Qe=dt.window,$e=dt.hold,et=dt.bits,Ct=dt.lencode,ut=dt.distcode,at=(1<<dt.lenbits)-1,gt=(1<<dt.distbits)-1;e:do{et<15&&($e+=ht[te++]<<et,et+=8,$e+=ht[te++]<<et,et+=8),lt=Ct[$e&at];t:for(;;){if(Je=lt>>>24,$e>>>=Je,et-=Je,Je=lt>>>16&255,Je===0)rt[oe++]=lt&65535;else if(Je&16){mt=lt&65535,Je&=15,Je&&(et<Je&&($e+=ht[te++]<<et,et+=8),mt+=$e&(1<<Je)-1,$e>>>=Je,et-=Je),et<15&&($e+=ht[te++]<<et,et+=8,$e+=ht[te++]<<et,et+=8),lt=ut[$e&gt];i:for(;;){if(Je=lt>>>24,$e>>>=Je,et-=Je,Je=lt>>>16&255,Je&16){if(St=lt&65535,Je&=15,et<Je&&($e+=ht[te++]<<et,et+=8,et<Je&&($e+=ht[te++]<<et,et+=8)),St+=$e&(1<<Je)-1,St>qe){K.msg="invalid distance too far back",dt.mode=wi;break e}if($e>>>=Je,et-=Je,Je=oe-ke,St>Je){if(Je=St-Je,Je>Fe&&dt.sane){K.msg="invalid distance too far back",dt.mode=wi;break e}if(tt=0,bt=Qe,ft===0){if(tt+=_e-Je,Je<mt){mt-=Je;do rt[oe++]=Qe[tt++];while(--Je);tt=oe-St,bt=rt}}else if(ft<Je){if(tt+=_e+ft-Je,Je-=ft,Je<mt){mt-=Je;do rt[oe++]=Qe[tt++];while(--Je);if(tt=0,ft<mt){Je=ft,mt-=Je;do rt[oe++]=Qe[tt++];while(--Je);tt=oe-St,bt=rt}}}else if(tt+=ft-Je,Je<mt){mt-=Je;do rt[oe++]=Qe[tt++];while(--Je);tt=oe-St,bt=rt}for(;mt>2;)rt[oe++]=bt[tt++],rt[oe++]=bt[tt++],rt[oe++]=bt[tt++],mt-=3;mt&&(rt[oe++]=bt[tt++],mt>1&&(rt[oe++]=bt[tt++]))}else{tt=oe-St;do rt[oe++]=rt[tt++],rt[oe++]=rt[tt++],rt[oe++]=rt[tt++],mt-=3;while(mt>2);mt&&(rt[oe++]=rt[tt++],mt>1&&(rt[oe++]=rt[tt++]))}}else if(Je&64){K.msg="invalid distance code",dt.mode=wi;break e}else{lt=ut[(lt&65535)+($e&(1<<Je)-1)];continue i}break}}else if(Je&64)if(Je&32){dt.mode=Jn;break e}else{K.msg="invalid literal/length code",dt.mode=wi;break e}else{lt=Ct[(lt&65535)+($e&(1<<Je)-1)];continue t}break}}while(te<ae&&oe<Se);mt=et>>3,te-=mt,et-=mt<<3,$e&=(1<<et)-1,K.next_in=te,K.next_out=oe,K.avail_in=te<ae?5+(ae-te):5-(te-ae),K.avail_out=oe<Se?257+(Se-oe):257-(oe-Se),dt.hold=$e,dt.bits=et};const ti=15,rr=852,nr=592,sr=0,Ni=1,or=2,qn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),es=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ts=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),is=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var hi=(S,K,R,te,ae,oe,ke,Se)=>{const qe=Se.bits;let _e=0,Fe=0,ft=0,Qe=0,$e=0,et=0,Ct=0,ut=0,at=0,gt=0,lt,Je,mt,St,tt,bt=null,ht;const rt=new Uint16Array(ti+1),dt=new Uint16Array(ti+1);let Yt=null,en,Ti,Oi;for(_e=0;_e<=ti;_e++)rt[_e]=0;for(Fe=0;Fe<te;Fe++)rt[K[R+Fe]]++;for($e=qe,Qe=ti;Qe>=1&&rt[Qe]===0;Qe--);if($e>Qe&&($e=Qe),Qe===0)return ae[oe++]=1<<24|64<<16|0,ae[oe++]=1<<24|64<<16|0,Se.bits=1,0;for(ft=1;ft<Qe&&rt[ft]===0;ft++);for($e<ft&&($e=ft),ut=1,_e=1;_e<=ti;_e++)if(ut<<=1,ut-=rt[_e],ut<0)return-1;if(ut>0&&(S===sr||Qe!==1))return-1;for(dt[1]=0,_e=1;_e<ti;_e++)dt[_e+1]=dt[_e]+rt[_e];for(Fe=0;Fe<te;Fe++)K[R+Fe]!==0&&(ke[dt[K[R+Fe]]++]=Fe);if(S===sr?(bt=Yt=ke,ht=20):S===Ni?(bt=qn,Yt=es,ht=257):(bt=ts,Yt=is,ht=0),gt=0,Fe=0,_e=ft,tt=oe,et=$e,Ct=0,mt=-1,at=1<<$e,St=at-1,S===Ni&&at>rr||S===or&&at>nr)return 1;for(;;){en=_e-Ct,ke[Fe]+1<ht?(Ti=0,Oi=ke[Fe]):ke[Fe]>=ht?(Ti=Yt[ke[Fe]-ht],Oi=bt[ke[Fe]-ht]):(Ti=32+64,Oi=0),lt=1<<_e-Ct,Je=1<<et,ft=Je;do Je-=lt,ae[tt+(gt>>Ct)+Je]=en<<24|Ti<<16|Oi|0;while(Je!==0);for(lt=1<<_e-1;gt&lt;)lt>>=1;if(lt!==0?(gt&=lt-1,gt+=lt):gt=0,Fe++,--rt[_e]===0){if(_e===Qe)break;_e=K[R+ke[Fe]]}if(_e>$e&&(gt&St)!==mt){for(Ct===0&&(Ct=$e),tt+=ft,et=_e-Ct,ut=1<<et;et+Ct<Qe&&(ut-=rt[et+Ct],!(ut<=0));)et++,ut<<=1;if(at+=1<<et,S===Ni&&at>rr||S===or&&at>nr)return 1;mt=gt&St,ae[mt]=$e<<24|et<<16|tt-oe|0}}return gt!==0&&(ae[tt+gt]=_e-Ct<<24|64<<16|0),Se.bits=$e,0};const rs=0,ar=1,lr=2,{Z_FINISH:cr,Z_BLOCK:ns,Z_TREES:Ci,Z_OK:jt,Z_STREAM_END:ss,Z_NEED_DICT:os,Z_STREAM_ERROR:Rt,Z_DATA_ERROR:dr,Z_MEM_ERROR:ur,Z_BUF_ERROR:as,Z_DEFLATED:hr}=Ie,Ei=16180,fr=16181,pr=16182,mr=16183,gr=16184,vr=16185,yr=16186,br=16187,_r=16188,xr=16189,Si=16190,Ft=16191,Vi=16192,wr=16193,Ui=16194,Cr=16195,Er=16196,Sr=16197,Mr=16198,Mi=16199,Ai=16200,Ar=16201,Tr=16202,Or=16203,Pr=16204,Dr=16205,Wi=16206,Rr=16207,Ir=16208,wt=16209,Lr=16210,Br=16211,ls=852,cs=592,ds=15,kr=S=>(S>>>24&255)+(S>>>8&65280)+((S&65280)<<8)+((S&255)<<24);function us(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Zt=S=>{if(!S)return 1;const K=S.state;return!K||K.strm!==S||K.mode<Ei||K.mode>Br?1:0},Fr=S=>{if(Zt(S))return Rt;const K=S.state;return S.total_in=S.total_out=K.total=0,S.msg="",K.wrap&&(S.adler=K.wrap&1),K.mode=Ei,K.last=0,K.havedict=0,K.flags=-1,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new Int32Array(ls),K.distcode=K.distdyn=new Int32Array(cs),K.sane=1,K.back=-1,jt},zr=S=>{if(Zt(S))return Rt;const K=S.state;return K.wsize=0,K.whave=0,K.wnext=0,Fr(S)},Nr=(S,K)=>{let R;if(Zt(S))return Rt;const te=S.state;return K<0?(R=0,K=-K):(R=(K>>4)+5,K<48&&(K&=15)),K&&(K<8||K>15)?Rt:(te.window!==null&&te.wbits!==K&&(te.window=null),te.wrap=R,te.wbits=K,zr(S))},Vr=(S,K)=>{if(!S)return Rt;const R=new us;S.state=R,R.strm=S,R.window=null,R.mode=Ei;const te=Nr(S,K);return te!==jt&&(S.state=null),te},hs=S=>Vr(S,ds);let Ur=!0,Hi,Gi;const fs=S=>{if(Ur){Hi=new Int32Array(512),Gi=new Int32Array(32);let K=0;for(;K<144;)S.lens[K++]=8;for(;K<256;)S.lens[K++]=9;for(;K<280;)S.lens[K++]=7;for(;K<288;)S.lens[K++]=8;for(hi(ar,S.lens,0,288,Hi,0,S.work,{bits:9}),K=0;K<32;)S.lens[K++]=5;hi(lr,S.lens,0,32,Gi,0,S.work,{bits:5}),Ur=!1}S.lencode=Hi,S.lenbits=9,S.distcode=Gi,S.distbits=5},Wr=(S,K,R,te)=>{let ae;const oe=S.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new Uint8Array(oe.wsize)),te>=oe.wsize?(oe.window.set(K.subarray(R-oe.wsize,R),0),oe.wnext=0,oe.whave=oe.wsize):(ae=oe.wsize-oe.wnext,ae>te&&(ae=te),oe.window.set(K.subarray(R-te,R-te+ae),oe.wnext),te-=ae,te?(oe.window.set(K.subarray(R-te,R),0),oe.wnext=te,oe.whave=oe.wsize):(oe.wnext+=ae,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=ae))),0},ps=(S,K)=>{let R,te,ae,oe,ke,Se,qe,_e,Fe,ft,Qe,$e,et,Ct,ut=0,at,gt,lt,Je,mt,St,tt,bt;const ht=new Uint8Array(4);let rt,dt;const Yt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Zt(S)||!S.output||!S.input&&S.avail_in!==0)return Rt;R=S.state,R.mode===Ft&&(R.mode=Vi),ke=S.next_out,ae=S.output,qe=S.avail_out,oe=S.next_in,te=S.input,Se=S.avail_in,_e=R.hold,Fe=R.bits,ft=Se,Qe=qe,bt=jt;e:for(;;)switch(R.mode){case Ei:if(R.wrap===0){R.mode=Vi;break}for(;Fe<16;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(R.wrap&2&&_e===35615){R.wbits===0&&(R.wbits=15),R.check=0,ht[0]=_e&255,ht[1]=_e>>>8&255,R.check=F(R.check,ht,2,0),_e=0,Fe=0,R.mode=fr;break}if(R.head&&(R.head.done=!1),!(R.wrap&1)||(((_e&255)<<8)+(_e>>8))%31){S.msg="incorrect header check",R.mode=wt;break}if((_e&15)!==hr){S.msg="unknown compression method",R.mode=wt;break}if(_e>>>=4,Fe-=4,tt=(_e&15)+8,R.wbits===0&&(R.wbits=tt),tt>15||tt>R.wbits){S.msg="invalid window size",R.mode=wt;break}R.dmax=1<<R.wbits,R.flags=0,S.adler=R.check=1,R.mode=_e&512?xr:Ft,_e=0,Fe=0;break;case fr:for(;Fe<16;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(R.flags=_e,(R.flags&255)!==hr){S.msg="unknown compression method",R.mode=wt;break}if(R.flags&57344){S.msg="unknown header flags set",R.mode=wt;break}R.head&&(R.head.text=_e>>8&1),R.flags&512&&R.wrap&4&&(ht[0]=_e&255,ht[1]=_e>>>8&255,R.check=F(R.check,ht,2,0)),_e=0,Fe=0,R.mode=pr;case pr:for(;Fe<32;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}R.head&&(R.head.time=_e),R.flags&512&&R.wrap&4&&(ht[0]=_e&255,ht[1]=_e>>>8&255,ht[2]=_e>>>16&255,ht[3]=_e>>>24&255,R.check=F(R.check,ht,4,0)),_e=0,Fe=0,R.mode=mr;case mr:for(;Fe<16;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}R.head&&(R.head.xflags=_e&255,R.head.os=_e>>8),R.flags&512&&R.wrap&4&&(ht[0]=_e&255,ht[1]=_e>>>8&255,R.check=F(R.check,ht,2,0)),_e=0,Fe=0,R.mode=gr;case gr:if(R.flags&1024){for(;Fe<16;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}R.length=_e,R.head&&(R.head.extra_len=_e),R.flags&512&&R.wrap&4&&(ht[0]=_e&255,ht[1]=_e>>>8&255,R.check=F(R.check,ht,2,0)),_e=0,Fe=0}else R.head&&(R.head.extra=null);R.mode=vr;case vr:if(R.flags&1024&&($e=R.length,$e>Se&&($e=Se),$e&&(R.head&&(tt=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Uint8Array(R.head.extra_len)),R.head.extra.set(te.subarray(oe,oe+$e),tt)),R.flags&512&&R.wrap&4&&(R.check=F(R.check,te,$e,oe)),Se-=$e,oe+=$e,R.length-=$e),R.length))break e;R.length=0,R.mode=yr;case yr:if(R.flags&2048){if(Se===0)break e;$e=0;do tt=te[oe+$e++],R.head&&tt&&R.length<65536&&(R.head.name+=String.fromCharCode(tt));while(tt&&$e<Se);if(R.flags&512&&R.wrap&4&&(R.check=F(R.check,te,$e,oe)),Se-=$e,oe+=$e,tt)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=br;case br:if(R.flags&4096){if(Se===0)break e;$e=0;do tt=te[oe+$e++],R.head&&tt&&R.length<65536&&(R.head.comment+=String.fromCharCode(tt));while(tt&&$e<Se);if(R.flags&512&&R.wrap&4&&(R.check=F(R.check,te,$e,oe)),Se-=$e,oe+=$e,tt)break e}else R.head&&(R.head.comment=null);R.mode=_r;case _r:if(R.flags&512){for(;Fe<16;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(R.wrap&4&&_e!==(R.check&65535)){S.msg="header crc mismatch",R.mode=wt;break}_e=0,Fe=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),S.adler=R.check=0,R.mode=Ft;break;case xr:for(;Fe<32;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}S.adler=R.check=kr(_e),_e=0,Fe=0,R.mode=Si;case Si:if(R.havedict===0)return S.next_out=ke,S.avail_out=qe,S.next_in=oe,S.avail_in=Se,R.hold=_e,R.bits=Fe,os;S.adler=R.check=1,R.mode=Ft;case Ft:if(K===ns||K===Ci)break e;case Vi:if(R.last){_e>>>=Fe&7,Fe-=Fe&7,R.mode=Wi;break}for(;Fe<3;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}switch(R.last=_e&1,_e>>>=1,Fe-=1,_e&3){case 0:R.mode=wr;break;case 1:if(fs(R),R.mode=Mi,K===Ci){_e>>>=2,Fe-=2;break e}break;case 2:R.mode=Er;break;case 3:S.msg="invalid block type",R.mode=wt}_e>>>=2,Fe-=2;break;case wr:for(_e>>>=Fe&7,Fe-=Fe&7;Fe<32;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if((_e&65535)!==(_e>>>16^65535)){S.msg="invalid stored block lengths",R.mode=wt;break}if(R.length=_e&65535,_e=0,Fe=0,R.mode=Ui,K===Ci)break e;case Ui:R.mode=Cr;case Cr:if($e=R.length,$e){if($e>Se&&($e=Se),$e>qe&&($e=qe),$e===0)break e;ae.set(te.subarray(oe,oe+$e),ke),Se-=$e,oe+=$e,qe-=$e,ke+=$e,R.length-=$e;break}R.mode=Ft;break;case Er:for(;Fe<14;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(R.nlen=(_e&31)+257,_e>>>=5,Fe-=5,R.ndist=(_e&31)+1,_e>>>=5,Fe-=5,R.ncode=(_e&15)+4,_e>>>=4,Fe-=4,R.nlen>286||R.ndist>30){S.msg="too many length or distance symbols",R.mode=wt;break}R.have=0,R.mode=Sr;case Sr:for(;R.have<R.ncode;){for(;Fe<3;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}R.lens[Yt[R.have++]]=_e&7,_e>>>=3,Fe-=3}for(;R.have<19;)R.lens[Yt[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,rt={bits:R.lenbits},bt=hi(rs,R.lens,0,19,R.lencode,0,R.work,rt),R.lenbits=rt.bits,bt){S.msg="invalid code lengths set",R.mode=wt;break}R.have=0,R.mode=Mr;case Mr:for(;R.have<R.nlen+R.ndist;){for(;ut=R.lencode[_e&(1<<R.lenbits)-1],at=ut>>>24,gt=ut>>>16&255,lt=ut&65535,!(at<=Fe);){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(lt<16)_e>>>=at,Fe-=at,R.lens[R.have++]=lt;else{if(lt===16){for(dt=at+2;Fe<dt;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(_e>>>=at,Fe-=at,R.have===0){S.msg="invalid bit length repeat",R.mode=wt;break}tt=R.lens[R.have-1],$e=3+(_e&3),_e>>>=2,Fe-=2}else if(lt===17){for(dt=at+3;Fe<dt;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}_e>>>=at,Fe-=at,tt=0,$e=3+(_e&7),_e>>>=3,Fe-=3}else{for(dt=at+7;Fe<dt;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}_e>>>=at,Fe-=at,tt=0,$e=11+(_e&127),_e>>>=7,Fe-=7}if(R.have+$e>R.nlen+R.ndist){S.msg="invalid bit length repeat",R.mode=wt;break}for(;$e--;)R.lens[R.have++]=tt}}if(R.mode===wt)break;if(R.lens[256]===0){S.msg="invalid code -- missing end-of-block",R.mode=wt;break}if(R.lenbits=9,rt={bits:R.lenbits},bt=hi(ar,R.lens,0,R.nlen,R.lencode,0,R.work,rt),R.lenbits=rt.bits,bt){S.msg="invalid literal/lengths set",R.mode=wt;break}if(R.distbits=6,R.distcode=R.distdyn,rt={bits:R.distbits},bt=hi(lr,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,rt),R.distbits=rt.bits,bt){S.msg="invalid distances set",R.mode=wt;break}if(R.mode=Mi,K===Ci)break e;case Mi:R.mode=Ai;case Ai:if(Se>=6&&qe>=258){S.next_out=ke,S.avail_out=qe,S.next_in=oe,S.avail_in=Se,R.hold=_e,R.bits=Fe,Qn(S,Qe),ke=S.next_out,ae=S.output,qe=S.avail_out,oe=S.next_in,te=S.input,Se=S.avail_in,_e=R.hold,Fe=R.bits,R.mode===Ft&&(R.back=-1);break}for(R.back=0;ut=R.lencode[_e&(1<<R.lenbits)-1],at=ut>>>24,gt=ut>>>16&255,lt=ut&65535,!(at<=Fe);){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(gt&&!(gt&240)){for(Je=at,mt=gt,St=lt;ut=R.lencode[St+((_e&(1<<Je+mt)-1)>>Je)],at=ut>>>24,gt=ut>>>16&255,lt=ut&65535,!(Je+at<=Fe);){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}_e>>>=Je,Fe-=Je,R.back+=Je}if(_e>>>=at,Fe-=at,R.back+=at,R.length=lt,gt===0){R.mode=Dr;break}if(gt&32){R.back=-1,R.mode=Ft;break}if(gt&64){S.msg="invalid literal/length code",R.mode=wt;break}R.extra=gt&15,R.mode=Ar;case Ar:if(R.extra){for(dt=R.extra;Fe<dt;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}R.length+=_e&(1<<R.extra)-1,_e>>>=R.extra,Fe-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=Tr;case Tr:for(;ut=R.distcode[_e&(1<<R.distbits)-1],at=ut>>>24,gt=ut>>>16&255,lt=ut&65535,!(at<=Fe);){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(!(gt&240)){for(Je=at,mt=gt,St=lt;ut=R.distcode[St+((_e&(1<<Je+mt)-1)>>Je)],at=ut>>>24,gt=ut>>>16&255,lt=ut&65535,!(Je+at<=Fe);){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}_e>>>=Je,Fe-=Je,R.back+=Je}if(_e>>>=at,Fe-=at,R.back+=at,gt&64){S.msg="invalid distance code",R.mode=wt;break}R.offset=lt,R.extra=gt&15,R.mode=Or;case Or:if(R.extra){for(dt=R.extra;Fe<dt;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}R.offset+=_e&(1<<R.extra)-1,_e>>>=R.extra,Fe-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){S.msg="invalid distance too far back",R.mode=wt;break}R.mode=Pr;case Pr:if(qe===0)break e;if($e=Qe-qe,R.offset>$e){if($e=R.offset-$e,$e>R.whave&&R.sane){S.msg="invalid distance too far back",R.mode=wt;break}$e>R.wnext?($e-=R.wnext,et=R.wsize-$e):et=R.wnext-$e,$e>R.length&&($e=R.length),Ct=R.window}else Ct=ae,et=ke-R.offset,$e=R.length;$e>qe&&($e=qe),qe-=$e,R.length-=$e;do ae[ke++]=Ct[et++];while(--$e);R.length===0&&(R.mode=Ai);break;case Dr:if(qe===0)break e;ae[ke++]=R.length,qe--,R.mode=Ai;break;case Wi:if(R.wrap){for(;Fe<32;){if(Se===0)break e;Se--,_e|=te[oe++]<<Fe,Fe+=8}if(Qe-=qe,S.total_out+=Qe,R.total+=Qe,R.wrap&4&&Qe&&(S.adler=R.check=R.flags?F(R.check,ae,Qe,ke-Qe):ze(R.check,ae,Qe,ke-Qe)),Qe=qe,R.wrap&4&&(R.flags?_e:kr(_e))!==R.check){S.msg="incorrect data check",R.mode=wt;break}_e=0,Fe=0}R.mode=Rr;case Rr:if(R.wrap&&R.flags){for(;Fe<32;){if(Se===0)break e;Se--,_e+=te[oe++]<<Fe,Fe+=8}if(R.wrap&4&&_e!==(R.total&4294967295)){S.msg="incorrect length check",R.mode=wt;break}_e=0,Fe=0}R.mode=Ir;case Ir:bt=ss;break e;case wt:bt=dr;break e;case Lr:return ur;case Br:default:return Rt}return S.next_out=ke,S.avail_out=qe,S.next_in=oe,S.avail_in=Se,R.hold=_e,R.bits=Fe,(R.wsize||Qe!==S.avail_out&&R.mode<wt&&(R.mode<Wi||K!==cr))&&Wr(S,S.output,S.next_out,Qe-S.avail_out),ft-=S.avail_in,Qe-=S.avail_out,S.total_in+=ft,S.total_out+=Qe,R.total+=Qe,R.wrap&4&&Qe&&(S.adler=R.check=R.flags?F(R.check,ae,Qe,S.next_out-Qe):ze(R.check,ae,Qe,S.next_out-Qe)),S.data_type=R.bits+(R.last?64:0)+(R.mode===Ft?128:0)+(R.mode===Mi||R.mode===Ui?256:0),(ft===0&&Qe===0||K===cr)&&bt===jt&&(bt=as),bt},ms=S=>{if(Zt(S))return Rt;let K=S.state;return K.window&&(K.window=null),S.state=null,jt},gs=(S,K)=>{if(Zt(S))return Rt;const R=S.state;return R.wrap&2?(R.head=K,K.done=!1,jt):Rt},vs=(S,K)=>{const R=K.length;let te,ae,oe;return Zt(S)||(te=S.state,te.wrap!==0&&te.mode!==Si)?Rt:te.mode===Si&&(ae=1,ae=ze(ae,K,R,0),ae!==te.check)?dr:(oe=Wr(S,K,R,R),oe?(te.mode=Lr,ur):(te.havedict=1,jt))};var ys=zr,bs=Nr,_s=Fr,xs=hs,ws=Vr,Cs=ps,Es=ms,Ss=gs,Ms=vs,As="pako inflate (from Nodeca project)",zt={inflateReset:ys,inflateReset2:bs,inflateResetKeep:_s,inflateInit:xs,inflateInit2:ws,inflate:Cs,inflateEnd:Es,inflateGetHeader:Ss,inflateSetDictionary:Ms,inflateInfo:As};function Ts(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Os=Ts;const Hr=Object.prototype.toString,{Z_NO_FLUSH:Ps,Z_FINISH:Ds,Z_OK:fi,Z_STREAM_END:Ki,Z_NEED_DICT:$i,Z_STREAM_ERROR:Rs,Z_DATA_ERROR:Gr,Z_MEM_ERROR:Is}=Ie;function pi(S){this.options=_i.assign({chunkSize:65536,windowBits:15,to:""},S||{});const K=this.options;K.raw&&K.windowBits>=0&&K.windowBits<16&&(K.windowBits=-K.windowBits,K.windowBits===0&&(K.windowBits=-15)),K.windowBits>=0&&K.windowBits<16&&!(S&&S.windowBits)&&(K.windowBits+=32),K.windowBits>15&&K.windowBits<48&&(K.windowBits&15||(K.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tr,this.strm.avail_out=0;let R=zt.inflateInit2(this.strm,K.windowBits);if(R!==fi)throw new Error(Te[R]);if(this.header=new Os,zt.inflateGetHeader(this.strm,this.header),K.dictionary&&(typeof K.dictionary=="string"?K.dictionary=di.string2buf(K.dictionary):Hr.call(K.dictionary)==="[object ArrayBuffer]"&&(K.dictionary=new Uint8Array(K.dictionary)),K.raw&&(R=zt.inflateSetDictionary(this.strm,K.dictionary),R!==fi)))throw new Error(Te[R])}pi.prototype.push=function(S,K){const R=this.strm,te=this.options.chunkSize,ae=this.options.dictionary;let oe,ke,Se;if(this.ended)return!1;for(K===~~K?ke=K:ke=K===!0?Ds:Ps,Hr.call(S)==="[object ArrayBuffer]"?R.input=new Uint8Array(S):R.input=S,R.next_in=0,R.avail_in=R.input.length;;){for(R.avail_out===0&&(R.output=new Uint8Array(te),R.next_out=0,R.avail_out=te),oe=zt.inflate(R,ke),oe===$i&&ae&&(oe=zt.inflateSetDictionary(R,ae),oe===fi?oe=zt.inflate(R,ke):oe===Gr&&(oe=$i));R.avail_in>0&&oe===Ki&&R.state.wrap>0&&S[R.next_in]!==0;)zt.inflateReset(R),oe=zt.inflate(R,ke);switch(oe){case Rs:case Gr:case $i:case Is:return this.onEnd(oe),this.ended=!0,!1}if(Se=R.avail_out,R.next_out&&(R.avail_out===0||oe===Ki))if(this.options.to==="string"){let qe=di.utf8border(R.output,R.next_out),_e=R.next_out-qe,Fe=di.buf2string(R.output,qe);R.next_out=_e,R.avail_out=te-_e,_e&&R.output.set(R.output.subarray(qe,qe+_e),0),this.onData(Fe)}else this.onData(R.output.length===R.next_out?R.output:R.output.subarray(0,R.next_out));if(!(oe===fi&&Se===0)){if(oe===Ki)return oe=zt.inflateEnd(this.strm),this.onEnd(oe),this.ended=!0,!0;if(R.avail_in===0)break}}return!0},pi.prototype.onData=function(S){this.chunks.push(S)},pi.prototype.onEnd=function(S){S===fi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_i.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function ji(S,K){const R=new pi(K);if(R.push(S),R.err)throw R.msg||Te[R.err];return R.result}function Ls(S,K){return K=K||{},K.raw=!0,ji(S,K)}var Bs=pi,ks=ji,Fs=Ls,zs=ji,Ns=Ie,Vs={Inflate:Bs,inflate:ks,inflateRaw:Fs,ungzip:zs,constants:Ns};const{Deflate:Us,deflate:Ws,deflateRaw:Hs,gzip:Gs}=Xn,{Inflate:Ks,inflate:$s,inflateRaw:js,ungzip:Zs}=Vs;var Kr=Us,$r=Ws,jr=Hs,Zr=Gs,Yr=Ks,Xr=$s,Jr=js,Qr=Zs,qr=Ie,Ys={Deflate:Kr,deflate:$r,deflateRaw:jr,gzip:Zr,Inflate:Yr,inflate:Xr,inflateRaw:Jr,ungzip:Qr,constants:qr}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol$1);var _3DmolExports=_3Dmol$1.exports;const _3Dmol=getDefaultExportFromCjs(_3DmolExports),Chem=_mergeNamespaces({__proto__:null,default:_3Dmol},[_3DmolExports]),MolViewer_vue_vue_type_style_index_0_scoped_87913ab5_lang="",_sfc_main$6={name:"MolViewer",props:{moleculeData:{type:Array,required:!0}},data(){return{viewer:null,test:Chem,selectedSphere:null,selectedElement:null}},mounted(){this.initializeViewer(),this.loadStructure()},methods:{initializeViewer(){this.viewer=_3DmolExports.createViewer(this.$refs.viewerContainer,{}),this.viewer.setBackgroundColor(16777215)},loadStructure(){this.viewer.clear();for(const e of this.moleculeData){const t=this.handleAtomSelection.bind(this);this.viewer.addSphere({center:{x:e.pos[0],y:e.pos[1],z:e.pos[2]},opacity:e.surface?.65:1,clickable:!0,callback:function(r){t(e,r)},color:_3DmolExports.elementColors.Jmol[e.species],info:e})}this.viewer.zoomTo(),this.viewer.render()},handleAtomSelection(e,t){this.selectedSphere&&(this.selectedSphere.opacity=this.selectedElement.surface?.65:1,this.selectedSphere.color=new _3DmolExports.Color(_3DmolExports.elementColors.Jmol[this.selectedElement.species])),this.selectedSphere=t,this.selectedElement=e,t.color=new _3DmolExports.Color(255,255,0),t.opacity=1,this.viewer.render(),this.$emit("atomSelected",e)}},watch:{moleculeData(){this.loadStructure()}}},_hoisted_1$u={ref:"viewerContainer",class:"flex h-full w-full",style:{position:"relative"}};function _sfc_render$4(e,t,r,s,o,n){return openBlock(),createElementBlock("div",_hoisted_1$u,null,512)}const MolViewer=_export_sfc(_sfc_main$6,[["render",_sfc_render$4],["__scopeId","data-v-87913ab5"]]);var script$x={name:"ArrowDownIcon",extends:script$G};const _hoisted_1$t=createBaseVNode("g",{"clip-path":"url(#clip0_326_12468)"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z",fill:"currentColor"})],-1),_hoisted_2$i=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_326_12468"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$c=[_hoisted_1$t,_hoisted_2$i];function render$x(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$c,16)}script$x.render=render$x;var script$w={name:"ArrowUpIcon",extends:script$G};const _hoisted_1$s=createBaseVNode("g",{"clip-path":"url(#clip0_326_12509)"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z",fill:"currentColor"})],-1),_hoisted_2$h=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_326_12509"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$b=[_hoisted_1$s,_hoisted_2$h];function render$w(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$b,16)}script$w.render=render$w;var script$v={name:"AngleDoubleLeftIcon",extends:script$G};const _hoisted_1$r=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z",fill:"currentColor"},null,-1),_hoisted_2$g=[_hoisted_1$r];function render$v(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$g,16)}script$v.render=render$v;var script$u={name:"Button",extends:script$H,props:{label:{type:String,default:null},icon:{type:String,default:null},iconPos:{type:String,default:"left"},iconClass:{type:String,default:null},badge:{type:String,default:null},badgeClass:{type:String,default:null},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},link:{type:Boolean,default:!1},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},plain:{type:Boolean,default:!1}},computed:{buttonClass(){return["p-button p-component",{"p-button-icon-only":this.hasIcon&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-disabled":this.$attrs.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.hasIcon&&this.label,"p-button-link":this.link,[`p-button-${this.severity}`]:this.severity,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-text":this.text,"p-button-outlined":this.outlined,"p-button-sm":this.size==="small","p-button-lg":this.size==="large","p-button-plain":this.plain}]},iconStyleClass(){return["p-button-icon",this.iconClass,{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label}]},loadingIconStyleClass(){return["p-button-loading-icon pi-spin",this.iconStyleClass]},badgeStyleClass(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&String(this.badge).length===1}]},disabled(){return this.$attrs.disabled||this.loading},defaultAriaLabel(){return this.label?this.label+(this.badge?" "+this.badge:""):this.$attrs["aria-label"]},hasIcon(){return this.icon||this.$slots.icon}},components:{SpinnerIcon:script$D},directives:{ripple:Ripple}};const _hoisted_1$q=["aria-label","disabled"];function render$u(e,t,r,s,o,n){const f=resolveComponent("SpinnerIcon"),c=resolveDirective("ripple");return withDirectives((openBlock(),createElementBlock("button",mergeProps({class:n.buttonClass,type:"button","aria-label":n.defaultAriaLabel,disabled:n.disabled},e.ptm("root")),[renderSlot(e.$slots,"default",{},()=>[r.loading?renderSlot(e.$slots,"loadingicon",{key:0,class:normalizeClass(n.loadingIconStyleClass)},()=>[r.loadingIcon?(openBlock(),createElementBlock("span",mergeProps({key:0,class:[n.loadingIconStyleClass,r.loadingIcon]},e.ptm("loadingIcon")),null,16)):(openBlock(),createBlock(f,mergeProps({key:1,class:n.loadingIconStyleClass,spin:""},e.ptm("loadingIcon")),null,16,["class"]))]):renderSlot(e.$slots,"icon",{key:1,class:normalizeClass(n.iconStyleClass)},()=>[r.icon?(openBlock(),createElementBlock("span",mergeProps({key:0,class:[n.iconStyleClass,r.icon]},e.ptm("icon")),null,16)):createCommentVNode("",!0)]),createBaseVNode("span",mergeProps({class:"p-button-label"},e.ptm("label")),toDisplayString(r.label||" "),17),r.badge?(openBlock(),createElementBlock("span",mergeProps({key:2,class:n.badgeStyleClass},e.ptm("badge")),toDisplayString(r.badge),17)):createCommentVNode("",!0)])],16,_hoisted_1$q)),[[c]])}script$u.render=render$u;var script$t={name:"AngleDownIcon",extends:script$G};const _hoisted_1$p=createBaseVNode("path",{d:"M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z",fill:"currentColor"},null,-1),_hoisted_2$f=[_hoisted_1$p];function render$t(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$f,16)}script$t.render=render$t;var script$s={name:"AngleUpIcon",extends:script$G};const _hoisted_1$o=createBaseVNode("path",{d:"M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z",fill:"currentColor"},null,-1),_hoisted_2$e=[_hoisted_1$o];function render$s(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$e,16)}script$s.render=render$s;var script$r={name:"InputText",extends:script$H,emits:["update:modelValue"],props:{modelValue:null},methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}};const _hoisted_1$n=["value"];function render$r(e,t,r,s,o,n){return openBlock(),createElementBlock("input",mergeProps({class:["p-inputtext p-component",{"p-filled":n.filled}],value:r.modelValue,onInput:t[0]||(t[0]=(...f)=>n.onInput&&n.onInput(...f))},e.ptm("root")),null,16,_hoisted_1$n)}script$r.render=render$r;var script$q={name:"InputNumber",extends:script$H,emits:["update:modelValue","input","focus","blur"],props:{modelValue:{type:Number,default:null},format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:void 0},decrementButtonIcon:{type:String,default:void 0},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},highlightOnFocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},incrementButtonProps:{type:null,default:null},decrementButtonProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data(){return{d_modelValue:this.modelValue,focused:!1}},watch:{modelValue(e){this.d_modelValue=e},locale(e,t){this.updateConstructParser(e,t)},localeMatcher(e,t){this.updateConstructParser(e,t)},mode(e,t){this.updateConstructParser(e,t)},currency(e,t){this.updateConstructParser(e,t)},currencyDisplay(e,t){this.updateConstructParser(e,t)},useGrouping(e,t){this.updateConstructParser(e,t)},minFractionDigits(e,t){this.updateConstructParser(e,t)},maxFractionDigits(e,t){this.updateConstructParser(e,t)},suffix(e,t){this.updateConstructParser(e,t)},prefix(e,t){this.updateConstructParser(e,t)}},created(){this.constructParser()},methods:{getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}},constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),t=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>t.get(r)},updateConstructParser(e,t){e!==t&&this.constructParser()},escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")},getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")},getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")},getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")},getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")},getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")},formatValue(e){if(e!=null){if(e==="-")return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r=r+this.suffix),r}return e.toString()}return""},parseValue(e){let t=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(t){if(t==="-")return t;let r=+t;return isNaN(r)?null:r}return null},repeat(e,t,r){if(this.readonly)return;let s=t||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)},spin(e,t){if(this.$refs.input){let r=this.step*t,s=this.parseValue(this.$refs.input.$el.value)||0,o=this.validateValue(s+r);this.updateInput(o,null,"spin"),this.updateModel(e,o),this.handleOnInput(e,s,o)}},onUpButtonMouseDown(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,1),e.preventDefault())},onUpButtonMouseUp(){this.disabled||this.clearTimer()},onUpButtonMouseLeave(){this.disabled||this.clearTimer()},onUpButtonKeyUp(){this.disabled||this.clearTimer()},onUpButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,1)},onDownButtonMouseDown(e){this.disabled||(this.$refs.input.$el.focus(),this.repeat(e,null,-1),e.preventDefault())},onDownButtonMouseUp(){this.disabled||this.clearTimer()},onDownButtonMouseLeave(){this.disabled||this.clearTimer()},onDownButtonKeyUp(){this.disabled||this.clearTimer()},onDownButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,-1)},onUserInput(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey){this.isSpecialChar=!0;return}let t=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,o=null;switch(e.altKey&&e.preventDefault(),e.code){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":this.isNumeralChar(s.charAt(t-1))||e.preventDefault();break;case"ArrowRight":this.isNumeralChar(s.charAt(t))||e.preventDefault();break;case"Tab":case"Enter":o=this.validateValue(this.parseValue(s)),this.$refs.input.$el.value=this.formatValue(o),this.$refs.input.$el.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case"Backspace":{if(e.preventDefault(),t===r){const n=s.charAt(t-1),{decimalCharIndex:f,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(n)){const y=this.getDecimalLength(s);if(this._group.test(n))this._group.lastIndex=0,o=s.slice(0,t-2)+s.slice(t-1);else if(this._decimal.test(n))this._decimal.lastIndex=0,y?this.$refs.input.$el.setSelectionRange(t-1,t-1):o=s.slice(0,t-1)+s.slice(t);else if(f>0&&t>f){const _=this.isDecimalMode()&&(this.minFractionDigits||0)<y?"":"0";o=s.slice(0,t-1)+_+s.slice(t)}else c===1?(o=s.slice(0,t-1)+"0"+s.slice(t),o=this.parseValue(o)>0?o:""):o=s.slice(0,t-1)+s.slice(t)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(s,t,r),this.updateValue(e,o,null,"delete-range");break}case"Delete":if(e.preventDefault(),t===r){const n=s.charAt(t),{decimalCharIndex:f,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(n)){const y=this.getDecimalLength(s);if(this._group.test(n))this._group.lastIndex=0,o=s.slice(0,t)+s.slice(t+2);else if(this._decimal.test(n))this._decimal.lastIndex=0,y?this.$refs.input.$el.setSelectionRange(t+1,t+1):o=s.slice(0,t)+s.slice(t+1);else if(f>0&&t>f){const _=this.isDecimalMode()&&(this.minFractionDigits||0)<y?"":"0";o=s.slice(0,t)+_+s.slice(t+1)}else c===1?(o=s.slice(0,t)+"0"+s.slice(t+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,t)+s.slice(t+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(s,t,r),this.updateValue(e,o,null,"delete-range");break;case"Home":this.min&&(this.updateModel(e,this.min),e.preventDefault());break;case"End":this.max&&(this.updateModel(e,this.max),e.preventDefault());break}},onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let t=e.which||e.keyCode,r=String.fromCharCode(t);const s=this.isDecimalSign(r),o=this.isMinusSign(r);(48<=t&&t<=57||o||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:o})},onPaste(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("Text");if(t){let r=this.parseValue(t);r!=null&&this.insert(e,r.toString())}},allowMinusSign(){return this.min===null||this.min<0},isMinusSign(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode(){return this.mode==="decimal"},getDecimalCharIndexes(e){let t=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:t,decimalCharIndexWithoutPrefix:s}},getCharIndexes(e){const t=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:t,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}},insert(e,t,r={isDecimalSign:!1,isMinusSign:!1}){const s=t.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&s!==-1)return;const o=this.$refs.input.$el.selectionStart,n=this.$refs.input.$el.selectionEnd;let f=this.$refs.input.$el.value.trim();const{decimalCharIndex:c,minusCharIndex:y,suffixCharIndex:_,currencyCharIndex:b}=this.getCharIndexes(f);let C;if(r.isMinusSign)o===0&&(C=f,(y===-1||n!==0)&&(C=this.insertText(f,t,0,n)),this.updateValue(e,C,t,"insert"));else if(r.isDecimalSign)c>0&&o===c?this.updateValue(e,f,t,"insert"):c>o&&c<n?(C=this.insertText(f,t,o,n),this.updateValue(e,C,t,"insert")):c===-1&&this.maxFractionDigits&&(C=this.insertText(f,t,o,n),this.updateValue(e,C,t,"insert"));else{const M=this.numberFormat.resolvedOptions().maximumFractionDigits,E=o!==n?"range-insert":"insert";if(c>0&&o>c){if(o+t.length-(c+1)<=M){const P=b>=o?b-1:_>=o?_:f.length;C=f.slice(0,o)+t+f.slice(o+t.length,P)+f.slice(P),this.updateValue(e,C,t,E)}}else C=this.insertText(f,t,o,n),this.updateValue(e,C,t,E)}},insertText(e,t,r,s){if((t==="."?t:t.split(".")).length===2){const n=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,n>0?e.slice(0,r)+this.formatValue(t)+e.slice(s):e||this.formatValue(t)}else return s-r===e.length?this.formatValue(t):r===0?t+e.slice(s):s===e.length?e.slice(0,r)+t:e.slice(0,r)+t+e.slice(s)},deleteRange(e,t,r){let s;return r-t===e.length?s="":t===0?s=e.slice(r):r===e.length?s=e.slice(0,t):s=e.slice(0,t)+e.slice(r),s},initCursor(){let e=this.$refs.input.$el.selectionStart,t=this.$refs.input.$el.value,r=t.length,s=null,o=(this.prefixChar||"").length;t=t.replace(this._prefix,""),e=e-o;let n=t.charAt(e);if(this.isNumeralChar(n))return e+o;let f=e-1;for(;f>=0;)if(n=t.charAt(f),this.isNumeralChar(n)){s=f+o;break}else f--;if(s!==null)this.$refs.input.$el.setSelectionRange(s+1,s+1);else{for(f=e;f<r;)if(n=t.charAt(f),this.isNumeralChar(n)){s=f+o;break}else f++;s!==null&&this.$refs.input.$el.setSelectionRange(s,s)}return s||0},onInputClick(){const e=this.$refs.input.$el.value;!this.readonly&&e!==DomHandler.getSelection()&&this.initCursor()},isNumeralChar(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1},resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue(e,t,r,s){let o=this.$refs.input.$el.value,n=null;t!=null&&(n=this.parseValue(t),n=!n&&!this.allowEmpty?0:n,this.updateInput(n,r,s,t),this.handleOnInput(e,o,n))},handleOnInput(e,t,r){this.isValueChanged(t,r)&&this.$emit("input",{originalEvent:e,value:r,formattedValue:t})},isValueChanged(e,t){if(t===null&&e!==null)return!0;if(t!=null){let r=typeof e=="string"?this.parseValue(e):e;return t!==r}return!1},validateValue(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e},updateInput(e,t,r,s){t=t||"";let o=this.$refs.input.$el.value,n=this.formatValue(e),f=o.length;if(n!==s&&(n=this.concatValues(n,s)),f===0){this.$refs.input.$el.value=n,this.$refs.input.$el.setSelectionRange(0,0);const y=this.initCursor()+t.length;this.$refs.input.$el.setSelectionRange(y,y)}else{let c=this.$refs.input.$el.selectionStart,y=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=n;let _=n.length;if(r==="range-insert"){const b=this.parseValue((o||"").slice(0,c)),M=(b!==null?b.toString():"").split("").join(`(${this.groupChar})?`),E=new RegExp(M,"g");E.test(n);const P=t.split("").join(`(${this.groupChar})?`),a=new RegExp(P,"g");a.test(n.slice(E.lastIndex)),y=E.lastIndex+a.lastIndex,this.$refs.input.$el.setSelectionRange(y,y)}else if(_===f)r==="insert"||r==="delete-back-single"?this.$refs.input.$el.setSelectionRange(y+1,y+1):r==="delete-single"?this.$refs.input.$el.setSelectionRange(y-1,y-1):(r==="delete-range"||r==="spin")&&this.$refs.input.$el.setSelectionRange(y,y);else if(r==="delete-back-single"){let b=o.charAt(y-1),C=o.charAt(y),M=f-_,E=this._group.test(C);E&&M===1?y+=1:!E&&this.isNumeralChar(b)&&(y+=-1*M+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(y,y)}else if(o==="-"&&r==="insert"){this.$refs.input.$el.setSelectionRange(0,0);const C=this.initCursor()+t.length+1;this.$refs.input.$el.setSelectionRange(C,C)}else y=y+(_-f),this.$refs.input.$el.setSelectionRange(y,y)}this.$refs.input.$el.setAttribute("aria-valuenow",e)},concatValues(e,t){if(e&&t){let r=t.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?e.replace(this.suffixChar,"").split(this._decimal)[0]+t.replace(this.suffixChar,"").slice(r)+this.suffixChar:r!==-1?e.split(this._decimal)[0]+t.slice(r):e}return e},getDecimalLength(e){if(e){const t=e.split(this._decimal);if(t.length===2)return t[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel(e,t){this.d_modelValue=t,this.$emit("update:modelValue",t)},onInputFocus(e){this.focused=!0,!this.disabled&&!this.readonly&&this.$refs.input.$el.value!==DomHandler.getSelection()&&this.highlightOnFocus&&e.target.select(),this.$emit("focus",e)},onInputBlur(e){this.focused=!1;let t=e.target,r=this.validateValue(this.parseValue(t.value));this.$emit("blur",{originalEvent:e,value:t.value}),t.value=this.formatValue(r),t.setAttribute("aria-valuenow",r),this.updateModel(e,r)},clearTimer(){this.timer&&clearInterval(this.timer)},maxBoundry(){return this.d_modelValue>=this.max},minBoundry(){return this.d_modelValue<=this.min}},computed:{containerClass(){return["p-inputnumber p-component p-inputwrapper",{"p-inputwrapper-filled":this.filled,"p-inputwrapper-focus":this.focused,"p-inputnumber-buttons-stacked":this.showButtons&&this.buttonLayout==="stacked","p-inputnumber-buttons-horizontal":this.showButtons&&this.buttonLayout==="horizontal","p-inputnumber-buttons-vertical":this.showButtons&&this.buttonLayout==="vertical"}]},upButtonClass(){return["p-inputnumber-button p-inputnumber-button-up",this.incrementButtonClass,{"p-disabled":this.showButtons&&this.max!==null&&this.maxBoundry()}]},downButtonClass(){return["p-inputnumber-button p-inputnumber-button-down",this.decrementButtonClass,{"p-disabled":this.showButtons&&this.min!==null&&this.minBoundry()}]},filled(){return this.modelValue!=null&&this.modelValue.toString().length>0},upButtonListeners(){return{mousedown:e=>this.onUpButtonMouseDown(e),mouseup:e=>this.onUpButtonMouseUp(e),mouseleave:e=>this.onUpButtonMouseLeave(e),keydown:e=>this.onUpButtonKeyDown(e),keyup:e=>this.onUpButtonKeyUp(e)}},downButtonListeners(){return{mousedown:e=>this.onDownButtonMouseDown(e),mouseup:e=>this.onDownButtonMouseUp(e),mouseleave:e=>this.onDownButtonMouseLeave(e),keydown:e=>this.onDownButtonKeyDown(e),keyup:e=>this.onDownButtonKeyUp(e)}},formattedValue(){const e=!this.modelValue&&!this.allowEmpty?0:this.modelValue;return this.formatValue(e)},getFormatter(){return this.numberFormat}},components:{INInputText:script$r,INButton:script$u,AngleUpIcon:script$s,AngleDownIcon:script$t}};function render$q(e,t,r,s,o,n){const f=resolveComponent("INInputText"),c=resolveComponent("INButton");return openBlock(),createElementBlock("span",mergeProps({class:n.containerClass},e.ptm("root")),[createVNode(f,mergeProps({ref:"input",id:r.inputId,class:["p-inputnumber-input",r.inputClass],role:"spinbutton",style:r.inputStyle,value:n.formattedValue,"aria-valuemin":r.min,"aria-valuemax":r.max,"aria-valuenow":r.modelValue,disabled:r.disabled,readonly:r.readonly,placeholder:r.placeholder,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,onInput:n.onUserInput,onKeydown:n.onInputKeyDown,onKeypress:n.onInputKeyPress,onPaste:n.onPaste,onClick:n.onInputClick,onFocus:n.onInputFocus,onBlur:n.onInputBlur},{...r.inputProps,...e.ptm("input")}),null,16,["id","class","style","value","aria-valuemin","aria-valuemax","aria-valuenow","disabled","readonly","placeholder","aria-labelledby","aria-label","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur"]),r.showButtons&&r.buttonLayout==="stacked"?(openBlock(),createElementBlock("span",mergeProps({key:0,class:"p-inputnumber-button-group"},e.ptm("buttonGroup")),[createVNode(c,mergeProps({class:n.upButtonClass},toHandlers(n.upButtonListeners),{disabled:r.disabled,tabindex:-1,"aria-hidden":"true"},{...r.incrementButtonProps,...e.ptm("incrementButton")}),{icon:withCtx(()=>[renderSlot(e.$slots,"incrementbuttonicon",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.incrementButtonIcon?"span":"AngleUpIcon"),mergeProps({class:r.incrementButtonIcon},e.ptm("incrementButton").icon),null,16,["class"]))])]),_:3},16,["class","disabled"]),createVNode(c,mergeProps({class:n.downButtonClass},toHandlers(n.downButtonListeners),{disabled:r.disabled,tabindex:-1,"aria-hidden":"true"},{...r.decrementButtonProps,...e.ptm("decrementButton")}),{icon:withCtx(()=>[renderSlot(e.$slots,"decrementbuttonicon",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.decrementButtonIcon?"span":"AngleDownIcon"),mergeProps({class:r.decrementButtonIcon},e.ptm("decrementButton").icon),null,16,["class"]))])]),_:3},16,["class","disabled"])],16)):createCommentVNode("",!0),r.showButtons&&r.buttonLayout!=="stacked"?(openBlock(),createBlock(c,mergeProps({key:1,class:n.upButtonClass},toHandlers(n.upButtonListeners),{disabled:r.disabled,tabindex:-1,"aria-hidden":"true"},{...r.incrementButtonProps,...e.ptm("incrementButton")}),{icon:withCtx(()=>[renderSlot(e.$slots,"incrementbuttonicon",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.incrementButtonIcon?"span":"AngleUpIcon"),mergeProps({class:r.incrementButtonIcon},e.ptm("incrementButton").icon),null,16,["class"]))])]),_:3},16,["class","disabled"])):createCommentVNode("",!0),r.showButtons&&r.buttonLayout!=="stacked"?(openBlock(),createBlock(c,mergeProps({key:2,class:n.downButtonClass},toHandlers(n.downButtonListeners),{disabled:r.disabled,tabindex:-1,"aria-hidden":"true"},{...r.decrementButtonProps,...e.ptm("decrementButton")}),{icon:withCtx(()=>[renderSlot(e.$slots,"decrementbuttonicon",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(r.decrementButtonIcon?"span":"AngleDownIcon"),mergeProps({class:r.decrementButtonIcon},e.ptm("decrementButton").icon),null,16,["class"]))])]),_:3},16,["class","disabled"])):createCommentVNode("",!0)],16)}function styleInject$2(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$2=`
.p-inputnumber {
    display: inline-flex;
}
.p-inputnumber-button {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
}
.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,
.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label {
    display: none;
}
.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    padding: 0;
}
.p-inputnumber-buttons-stacked .p-inputnumber-input {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    border-bottom-left-radius: 0;
    padding: 0;
}
.p-inputnumber-buttons-stacked .p-inputnumber-button-group {
    display: flex;
    flex-direction: column;
}
.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button {
    flex: 1 1 auto;
}
.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up {
    order: 3;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
.p-inputnumber-buttons-horizontal .p-inputnumber-input {
    order: 2;
    border-radius: 0;
}
.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down {
    order: 1;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.p-inputnumber-buttons-vertical {
    flex-direction: column;
}
.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up {
    order: 1;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    width: 100%;
}
.p-inputnumber-buttons-vertical .p-inputnumber-input {
    order: 2;
    border-radius: 0;
    text-align: center;
}
.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down {
    order: 3;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    width: 100%;
}
.p-inputnumber-input {
    flex: 1 1 auto;
}
.p-fluid .p-inputnumber {
    width: 100%;
}
.p-fluid .p-inputnumber .p-inputnumber-input {
    width: 1%;
}
.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input {
    width: 100%;
}
`;styleInject$2(css_248z$2);script$q.render=render$q;var script$p={name:"AngleDoubleRightIcon",extends:script$G};const _hoisted_1$m=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z",fill:"currentColor"},null,-1),_hoisted_2$d=[_hoisted_1$m];function render$p(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$d,16)}script$p.render=render$p;var script$o={name:"AngleRightIcon",extends:script$G};const _hoisted_1$l=createBaseVNode("path",{d:"M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z",fill:"currentColor"},null,-1),_hoisted_2$c=[_hoisted_1$l];function render$o(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$c,16)}script$o.render=render$o;var script$n={name:"AngleLeftIcon",extends:script$G};const _hoisted_1$k=createBaseVNode("path",{d:"M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z",fill:"currentColor"},null,-1),_hoisted_2$b=[_hoisted_1$k];function render$n(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$b,16)}script$n.render=render$n;var script$9$1={name:"CurrentPageReport",extends:script$H,props:{pageCount:{type:Number,default:0},currentPage:{type:Number,default:0},page:{type:Number,default:0},first:{type:Number,default:0},rows:{type:Number,default:0},totalRecords:{type:Number,default:0},template:{type:String,default:"({currentPage} of {totalPages})"}},computed:{text(){return this.template.replace("{currentPage}",this.currentPage).replace("{totalPages}",this.pageCount).replace("{first}",this.pageCount>0?this.first+1:0).replace("{last}",Math.min(this.first+this.rows,this.totalRecords)).replace("{rows}",this.rows).replace("{totalRecords}",this.totalRecords)}}};function render$9$1(e,t,r,s,o,n){return openBlock(),createElementBlock("span",mergeProps({class:"p-paginator-current"},e.ptm("current")),toDisplayString(n.text),17)}script$9$1.render=render$9$1;var script$8$1={name:"FirstPageLink",extends:script$H,props:{template:{type:Function,default:null}},methods:{getPTOptions(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},computed:{containerClass(){return["p-paginator-first p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},components:{AngleDoubleLeftIcon:script$v},directives:{ripple:Ripple}};function render$8$1(e,t,r,s,o,n){const f=resolveDirective("ripple");return withDirectives((openBlock(),createElementBlock("button",mergeProps({class:n.containerClass,type:"button"},n.getPTOptions("firstPageButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.template||"AngleDoubleLeftIcon"),mergeProps({class:"p-paginator-icon"},n.getPTOptions("firstPageIcon")),null,16))],16)),[[f]])}script$8$1.render=render$8$1;var script$7$1={name:"JumpToPageDropdown",extends:script$H,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},methods:{onChange(e){this.$emit("page-change",e)}},computed:{pageOptions(){let e=[];for(let t=0;t<this.pageCount;t++)e.push({label:String(t+1),value:t});return e}},components:{JTPDropdown:script$z}};function render$7$1(e,t,r,s,o,n){const f=resolveComponent("JTPDropdown");return openBlock(),createBlock(f,{modelValue:r.page,options:n.pageOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":t[0]||(t[0]=c=>n.onChange(c)),class:"p-paginator-page-options",disabled:r.disabled,pt:e.ptm("JTPDropdown")},null,8,["modelValue","options","disabled","pt"])}script$7$1.render=render$7$1;var script$6$1={name:"JumpToPageInput",extends:script$H,inheritAttrs:!1,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},data(){return{d_page:this.page}},watch:{page(e){this.d_page=e}},methods:{onChange(e){e!==this.page&&(this.d_page=e,this.$emit("page-change",e-1))}},computed:{inputArialabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.jumpToPageInputLabel:void 0}},components:{JTPInput:script$q}};function render$6$1(e,t,r,s,o,n){const f=resolveComponent("JTPInput");return openBlock(),createBlock(f,{ref:"jtpInput",modelValue:o.d_page,class:"p-paginator-page-input","aria-label":n.inputArialabel,disabled:r.disabled,"onUpdate:modelValue":n.onChange,pt:e.ptm("JTPInput")},null,8,["modelValue","aria-label","disabled","onUpdate:modelValue","pt"])}script$6$1.render=render$6$1;var script$5$1={name:"LastPageLink",extends:script$H,props:{template:{type:Function,default:null}},methods:{getPTOptions(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},computed:{containerClass(){return["p-paginator-last p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},components:{AngleDoubleRightIcon:script$p},directives:{ripple:Ripple}};function render$5$1(e,t,r,s,o,n){const f=resolveDirective("ripple");return withDirectives((openBlock(),createElementBlock("button",mergeProps({class:n.containerClass,type:"button"},n.getPTOptions("lastPageButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.template||"AngleDoubleRightIcon"),mergeProps({class:"p-paginator-icon"},n.getPTOptions("lastPageIcon")),null,16))],16)),[[f]])}script$5$1.render=render$5$1;var script$4$1={name:"NextPageLink",extends:script$H,props:{template:{type:Function,default:null}},methods:{getPTOptions(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},computed:{containerClass(){return["p-paginator-next p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},components:{AngleRightIcon:script$o},directives:{ripple:Ripple}};function render$4$1(e,t,r,s,o,n){const f=resolveDirective("ripple");return withDirectives((openBlock(),createElementBlock("button",mergeProps({class:n.containerClass,type:"button"},n.getPTOptions("nextPageButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.template||"AngleRightIcon"),mergeProps({class:"p-paginator-icon"},n.getPTOptions("nextPageIcon")),null,16))],16)),[[f]])}script$4$1.render=render$4$1;var script$3$1={name:"PageLinks",extends:script$H,inheritAttrs:!1,emits:["click"],props:{value:Array,page:Number},methods:{getPTOptions(e,t){return this.ptm(t,{context:{active:e===this.page}})},onPageLinkClick(e,t){this.$emit("click",{originalEvent:e,value:t})},ariaPageLabel(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.pageLabel.replace(/{page}/g,e):void 0}},directives:{ripple:Ripple}};const _hoisted_1$j=["aria-label","aria-current","onClick"];function render$3$1(e,t,r,s,o,n){const f=resolveDirective("ripple");return openBlock(),createElementBlock("span",mergeProps({class:"p-paginator-pages"},e.ptm("pages")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,c=>withDirectives((openBlock(),createElementBlock("button",mergeProps({key:c,class:["p-paginator-page p-paginator-element p-link",{"p-highlight":c-1===r.page}],type:"button","aria-label":n.ariaPageLabel(c),"aria-current":c-1===r.page?"page":void 0,onClick:y=>n.onPageLinkClick(y,c)},n.getPTOptions(c-1,"pageButton")),[createTextVNode(toDisplayString(c),1)],16,_hoisted_1$j)),[[f]])),128))],16)}script$3$1.render=render$3$1;var script$2$1={name:"PrevPageLink",extends:script$H,props:{template:{type:Function,default:null}},methods:{getPTOptions(e){return this.ptm(e,{context:{disabled:this.$attrs.disabled}})}},computed:{containerClass(){return["p-paginator-prev p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},components:{AngleLeftIcon:script$n},directives:{ripple:Ripple}};function render$2$1(e,t,r,s,o,n){const f=resolveDirective("ripple");return withDirectives((openBlock(),createElementBlock("button",mergeProps({class:n.containerClass,type:"button"},n.getPTOptions("prevPageButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.template||"AngleLeftIcon"),mergeProps({class:"p-paginator-icon"},n.getPTOptions("prevPageIcon")),null,16))],16)),[[f]])}script$2$1.render=render$2$1;var script$1$2={name:"RowsPerPageDropdown",extends:script$H,emits:["rows-change"],props:{options:Array,rows:Number,disabled:Boolean},methods:{onChange(e){this.$emit("rows-change",e)}},computed:{rowsOptions(){let e=[];if(this.options)for(let t=0;t<this.options.length;t++)e.push({label:String(this.options[t]),value:this.options[t]});return e}},components:{RPPDropdown:script$z}};function render$1$1(e,t,r,s,o,n){const f=resolveComponent("RPPDropdown");return openBlock(),createBlock(f,{modelValue:r.rows,options:n.rowsOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":t[0]||(t[0]=c=>n.onChange(c)),class:"p-paginator-rpp-options",disabled:r.disabled,pt:e.ptm("RPPDropdown")},null,8,["modelValue","options","disabled","pt"])}script$1$2.render=render$1$1;var script$m={name:"Paginator",extends:script$H,emits:["update:first","update:rows","page"],props:{totalRecords:{type:Number,default:0},rows:{type:Number,default:0},first:{type:Number,default:0},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},template:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},currentPageReportTemplate:{type:null,default:"({currentPage} of {totalPages})"},alwaysShow:{type:Boolean,default:!0}},data(){return{d_first:this.first,d_rows:this.rows}},watch:{first(e){this.d_first=e},rows(e){this.d_rows=e},totalRecords(e){this.page>0&&e&&this.d_first>=e&&this.changePage(this.pageCount-1)}},mounted(){this.setPaginatorAttribute(),this.createStyle()},methods:{changePage(e){const t=this.pageCount;if(e>=0&&e<t){this.d_first=this.d_rows*e;const r={page:e,first:this.d_first,rows:this.d_rows,pageCount:t};this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",r)}},changePageToFirst(e){this.isFirstPage||this.changePage(0),e.preventDefault()},changePageToPrev(e){this.changePage(this.page-1),e.preventDefault()},changePageLink(e){this.changePage(e.value-1),e.originalEvent.preventDefault()},changePageToNext(e){this.changePage(this.page+1),e.preventDefault()},changePageToLast(e){this.isLastPage||this.changePage(this.pageCount-1),e.preventDefault()},onRowChange(e){this.d_rows=e,this.changePage(this.page)},createStyle(){if(this.hasBreakpoints()){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";const t=Object.keys(this.template),r={};t.sort((s,o)=>parseInt(s)-parseInt(o)).forEach(s=>{r[s]=this.template[s]});for(const[s,[o]]of Object.entries(Object.entries(r))){const n=Object.entries(r)[s-1]?`and (min-width:${Object.keys(r)[s-1]})`:"";o==="default"?e+=`
                            @media screen ${n} {
                                .paginator[${this.attributeSelector}],
                                .p-paginator-default{
                                    display: flex !important;
                                }
                            }
                        `:e+=`
                        .paginator[${this.attributeSelector}], .p-paginator-${o} {
                                display: none !important;
                            }
                        @media screen ${n} and (max-width: ${o}) {
                            .paginator[${this.attributeSelector}], .p-paginator-${o} {
                                display: flex !important;
                            }
                            .paginator[${this.attributeSelector}],
                            .p-paginator-default{
                                display: none !important;
                            }
                        }
                    `}this.styleElement.innerHTML=e}},hasBreakpoints(){return typeof this.template=="object"},getPaginatorClasses(e){return[{"p-paginator-default":!this.hasBreakpoints(),[`p-paginator-${e}`]:this.hasBreakpoints()}]},setPaginatorAttribute(){this.$refs.paginator&&this.$refs.paginator.length>=0&&[...this.$refs.paginator].forEach(e=>{e.setAttribute(this.attributeSelector,"")})},getAriaLabel(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria[e]:void 0}},computed:{templateItems(){let e={};if(this.hasBreakpoints()){e=this.template,e.default||(e.default="FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown");for(const t in e)e[t]=this.template[t].split(" ").map(r=>r.trim());return e}return e.default=this.template.split(" ").map(t=>t.trim()),e},page(){return Math.floor(this.d_first/this.d_rows)},pageCount(){return Math.ceil(this.totalRecords/this.d_rows)},isFirstPage(){return this.page===0},isLastPage(){return this.page===this.pageCount-1},calculatePageLinkBoundaries(){const e=this.pageCount,t=Math.min(this.pageLinkSize,e);let r=Math.max(0,Math.ceil(this.page-t/2)),s=Math.min(e-1,r+t-1);const o=this.pageLinkSize-(s-r+1);return r=Math.max(0,r-o),[r,s]},pageLinks(){let e=[],t=this.calculatePageLinkBoundaries,r=t[0],s=t[1];for(var o=r;o<=s;o++)e.push(o+1);return e},currentState(){return{page:this.page,first:this.d_first,rows:this.d_rows}},empty(){return this.pageCount===0},currentPage(){return this.pageCount>0?this.page+1:0},attributeSelector(){return UniqueComponentId()}},components:{CurrentPageReport:script$9$1,FirstPageLink:script$8$1,LastPageLink:script$5$1,NextPageLink:script$4$1,PageLinks:script$3$1,PrevPageLink:script$2$1,RowsPerPageDropdown:script$1$2,JumpToPageDropdown:script$7$1,JumpToPageInput:script$6$1}};function render$m(e,t,r,s,o,n){const f=resolveComponent("FirstPageLink"),c=resolveComponent("PrevPageLink"),y=resolveComponent("NextPageLink"),_=resolveComponent("LastPageLink"),b=resolveComponent("PageLinks"),C=resolveComponent("CurrentPageReport"),M=resolveComponent("RowsPerPageDropdown"),E=resolveComponent("JumpToPageDropdown"),P=resolveComponent("JumpToPageInput");return r.alwaysShow||n.pageLinks&&n.pageLinks.length>1?(openBlock(),createElementBlock("nav",normalizeProps(mergeProps({key:0},e.ptm("root"))),[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.templateItems,(a,u)=>(openBlock(),createElementBlock("div",mergeProps({key:u,ref_for:!0,ref:"paginator",class:["p-paginator p-component",n.getPaginatorClasses(u)]},e.ptm("paginator")),[e.$slots.start?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"p-paginator-left-content"},e.ptm("left")),[renderSlot(e.$slots,"start",{state:n.currentState})],16)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(a,g=>(openBlock(),createElementBlock(Fragment,{key:g},[g==="FirstPageLink"?(openBlock(),createBlock(f,{key:0,"aria-label":n.getAriaLabel("firstPageLabel"),template:e.$slots.firstpagelinkicon,onClick:t[0]||(t[0]=A=>n.changePageToFirst(A)),disabled:n.isFirstPage||n.empty,pt:e.pt},null,8,["aria-label","template","disabled","pt"])):g==="PrevPageLink"?(openBlock(),createBlock(c,{key:1,"aria-label":n.getAriaLabel("prevPageLabel"),template:e.$slots.prevpagelinkicon,onClick:t[1]||(t[1]=A=>n.changePageToPrev(A)),disabled:n.isFirstPage||n.empty,pt:e.pt},null,8,["aria-label","template","disabled","pt"])):g==="NextPageLink"?(openBlock(),createBlock(y,{key:2,"aria-label":n.getAriaLabel("nextPageLabel"),template:e.$slots.nextpagelinkicon,onClick:t[2]||(t[2]=A=>n.changePageToNext(A)),disabled:n.isLastPage||n.empty,pt:e.pt},null,8,["aria-label","template","disabled","pt"])):g==="LastPageLink"?(openBlock(),createBlock(_,{key:3,"aria-label":n.getAriaLabel("lastPageLabel"),template:e.$slots.lastpagelinkicon,onClick:t[3]||(t[3]=A=>n.changePageToLast(A)),disabled:n.isLastPage||n.empty,pt:e.pt},null,8,["aria-label","template","disabled","pt"])):g==="PageLinks"?(openBlock(),createBlock(b,{key:4,"aria-label":n.getAriaLabel("pageLabel"),value:n.pageLinks,page:n.page,onClick:t[4]||(t[4]=A=>n.changePageLink(A)),pt:e.pt},null,8,["aria-label","value","page","pt"])):g==="CurrentPageReport"?(openBlock(),createBlock(C,{key:5,"aria-live":"polite",template:r.currentPageReportTemplate,currentPage:n.currentPage,page:n.page,pageCount:n.pageCount,first:o.d_first,rows:o.d_rows,totalRecords:r.totalRecords,pt:e.pt},null,8,["template","currentPage","page","pageCount","first","rows","totalRecords","pt"])):g==="RowsPerPageDropdown"&&r.rowsPerPageOptions?(openBlock(),createBlock(M,{key:6,"aria-label":n.getAriaLabel("rowsPerPageLabel"),rows:o.d_rows,options:r.rowsPerPageOptions,onRowsChange:t[5]||(t[5]=A=>n.onRowChange(A)),disabled:n.empty,pt:e.pt},null,8,["aria-label","rows","options","disabled","pt"])):g==="JumpToPageDropdown"?(openBlock(),createBlock(E,{key:7,"aria-label":n.getAriaLabel("jumpToPageDropdownLabel"),page:n.page,pageCount:n.pageCount,onPageChange:t[6]||(t[6]=A=>n.changePage(A)),disabled:n.empty,pt:e.pt},null,8,["aria-label","page","pageCount","disabled","pt"])):g==="JumpToPageInput"?(openBlock(),createBlock(P,{key:8,page:n.currentPage,onPageChange:t[7]||(t[7]=A=>n.changePage(A)),disabled:n.empty,pt:e.pt},null,8,["page","disabled","pt"])):createCommentVNode("",!0)],64))),128)),e.$slots.end?(openBlock(),createElementBlock("div",mergeProps({key:1,class:"p-paginator-right-content"},e.ptm("end")),[renderSlot(e.$slots,"end",{state:n.currentState})],16)):createCommentVNode("",!0)],16))),128))],16)):createCommentVNode("",!0)}function styleInject$1(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$1=`
.p-paginator-default {
    display: flex;
}
.p-paginator {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
}
.p-paginator-left-content {
    margin-right: auto;
}
.p-paginator-right-content {
    margin-left: auto;
}
.p-paginator-page,
.p-paginator-next,
.p-paginator-last,
.p-paginator-first,
.p-paginator-prev,
.p-paginator-current {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    user-select: none;
    overflow: hidden;
    position: relative;
}
.p-paginator-element:focus {
    z-index: 1;
    position: relative;
}
`;styleInject$1(css_248z$1);script$m.render=render$m;var script$l={name:"ChevronRightIcon",extends:script$G};const _hoisted_1$i=createBaseVNode("path",{d:"M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z",fill:"currentColor"},null,-1),_hoisted_2$a=[_hoisted_1$i];function render$l(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$a,16)}script$l.render=render$l;var script$k={name:"BarsIcon",extends:script$G};const _hoisted_1$h=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3226 3.6129H0.677419C0.497757 3.6129 0.325452 3.54152 0.198411 3.41448C0.0713707 3.28744 0 3.11514 0 2.93548C0 2.75581 0.0713707 2.58351 0.198411 2.45647C0.325452 2.32943 0.497757 2.25806 0.677419 2.25806H13.3226C13.5022 2.25806 13.6745 2.32943 13.8016 2.45647C13.9286 2.58351 14 2.75581 14 2.93548C14 3.11514 13.9286 3.28744 13.8016 3.41448C13.6745 3.54152 13.5022 3.6129 13.3226 3.6129ZM13.3226 7.67741H0.677419C0.497757 7.67741 0.325452 7.60604 0.198411 7.479C0.0713707 7.35196 0 7.17965 0 6.99999C0 6.82033 0.0713707 6.64802 0.198411 6.52098C0.325452 6.39394 0.497757 6.32257 0.677419 6.32257H13.3226C13.5022 6.32257 13.6745 6.39394 13.8016 6.52098C13.9286 6.64802 14 6.82033 14 6.99999C14 7.17965 13.9286 7.35196 13.8016 7.479C13.6745 7.60604 13.5022 7.67741 13.3226 7.67741ZM0.677419 11.7419H13.3226C13.5022 11.7419 13.6745 11.6706 13.8016 11.5435C13.9286 11.4165 14 11.2442 14 11.0645C14 10.8848 13.9286 10.7125 13.8016 10.5855C13.6745 10.4585 13.5022 10.3871 13.3226 10.3871H0.677419C0.497757 10.3871 0.325452 10.4585 0.198411 10.5855C0.0713707 10.7125 0 10.8848 0 11.0645C0 11.2442 0.0713707 11.4165 0.198411 11.5435C0.325452 11.6706 0.497757 11.7419 0.677419 11.7419Z",fill:"currentColor"},null,-1),_hoisted_2$9=[_hoisted_1$h];function render$k(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$9,16)}script$k.render=render$k;var script$j={name:"CheckIcon",extends:script$G};const _hoisted_1$g=createBaseVNode("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1),_hoisted_2$8=[_hoisted_1$g];function render$j(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_2$8,16)}script$j.render=render$j;var script$i={name:"PencilIcon",extends:script$G};const _hoisted_1$f=createBaseVNode("g",{"clip-path":"url(#clip0_414_20836)"},[createBaseVNode("path",{d:"M0.609628 13.959C0.530658 13.9599 0.452305 13.9451 0.379077 13.9156C0.305849 13.8861 0.239191 13.8424 0.18294 13.787C0.118447 13.7234 0.0688234 13.6464 0.0376166 13.5614C0.00640987 13.4765 -0.00560954 13.3857 0.00241768 13.2956L0.25679 10.1501C0.267698 10.0041 0.331934 9.86709 0.437312 9.76516L9.51265 0.705715C10.0183 0.233014 10.6911 -0.0203041 11.3835 0.00127367C12.0714 0.00660201 12.7315 0.27311 13.2298 0.746671C13.7076 1.23651 13.9824 1.88848 13.9992 2.57201C14.0159 3.25554 13.7733 3.92015 13.32 4.4327L4.23648 13.5331C4.13482 13.6342 4.0017 13.6978 3.85903 13.7133L0.667067 14L0.609628 13.959ZM1.43018 10.4696L1.25787 12.714L3.50619 12.5092L12.4502 3.56444C12.6246 3.35841 12.7361 3.10674 12.7714 2.83933C12.8067 2.57193 12.7644 2.30002 12.6495 2.05591C12.5346 1.8118 12.3519 1.60575 12.1231 1.46224C11.8943 1.31873 11.6291 1.2438 11.3589 1.24633C11.1813 1.23508 11.0033 1.25975 10.8355 1.31887C10.6677 1.37798 10.5136 1.47033 10.3824 1.59036L1.43018 10.4696Z",fill:"currentColor"})],-1),_hoisted_2$7=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_414_20836"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$a=[_hoisted_1$f,_hoisted_2$7];function render$i(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$a,16)}script$i.render=render$i;function bind(e,t){const{onFocusIn:r,onFocusOut:s}=t.value||{};e.$_pfocustrap_mutationobserver=new MutationObserver(o=>{o.forEach(n=>{if(n.type==="childList"&&!e.contains(document.activeElement)){const f=c=>{const y=DomHandler.isFocusableElement(c)?c:DomHandler.getFirstFocusableElement(c);return ObjectUtils.isNotEmpty(y)?y:f(c.nextSibling)};DomHandler.focus(f(n.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=o=>r&&r(o),e.$_pfocustrap_focusoutlistener=o=>s&&s(o),e.addEventListener("focusin",e.$_pfocustrap_focusinlistener),e.addEventListener("focusout",e.$_pfocustrap_focusoutlistener)}function unbind(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener("focusin",e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener("focusout",e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)}function autoFocus(e,t){const{autoFocusSelector:r="",firstFocusableSelector:s="",autoFocus:o=!1}=t.value||{};let n=DomHandler.getFirstFocusableElement(e,`[autofocus]:not(.p-hidden-focusable)${r}`);o&&!n&&(n=DomHandler.getFirstFocusableElement(e,`:not(.p-hidden-focusable)${s}`)),DomHandler.focus(n)}function onFirstHiddenElementFocus(e){const{currentTarget:t,relatedTarget:r}=e,s=r===t.$_pfocustrap_lasthiddenfocusableelement?DomHandler.getFirstFocusableElement(t.parentElement,`:not(.p-hidden-focusable)${t.$_pfocustrap_focusableselector}`):t.$_pfocustrap_lasthiddenfocusableelement;DomHandler.focus(s)}function onLastHiddenElementFocus(e){const{currentTarget:t,relatedTarget:r}=e,s=r===t.$_pfocustrap_firsthiddenfocusableelement?DomHandler.getLastFocusableElement(t.parentElement,`:not(.p-hidden-focusable)${t.$_pfocustrap_focusableselector}`):t.$_pfocustrap_firsthiddenfocusableelement;DomHandler.focus(s)}function createHiddenFocusableElements(e,t){const{tabIndex:r=0,firstFocusableSelector:s="",lastFocusableSelector:o=""}=t.value||{},n=y=>{const _=document.createElement("span");return _.classList="p-hidden-accessible p-hidden-focusable",_.tabIndex=r,_.setAttribute("aria-hidden","true"),_.setAttribute("role","presentation"),_.addEventListener("focus",y),_},f=n(onFirstHiddenElementFocus),c=n(onLastHiddenElementFocus);f.$_pfocustrap_lasthiddenfocusableelement=c,f.$_pfocustrap_focusableselector=s,c.$_pfocustrap_firsthiddenfocusableelement=f,c.$_pfocustrap_focusableselector=o,e.prepend(f),e.append(c)}const FocusTrap={mounted(e,t){const{disabled:r}=t.value||{};r||(createHiddenFocusableElements(e,t),bind(e,t),autoFocus(e,t))},updated(e,t){const{disabled:r}=t.value||{};r&&unbind(e)},unmounted(e){unbind(e)}};var script$h={name:"FilterSlashIcon",extends:script$G};const _hoisted_1$e=createBaseVNode("g",{"clip-path":"url(#clip0_408_20963)"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z",fill:"currentColor"})],-1),_hoisted_2$6=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_408_20963"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$9=[_hoisted_1$e,_hoisted_2$6];function render$h(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$9,16)}script$h.render=render$h;var script$g={name:"PlusIcon",extends:script$G};const _hoisted_1$d=createBaseVNode("g",{"clip-path":"url(#clip0_306_11939)"},[createBaseVNode("path",{d:"M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z",fill:"currentColor"})],-1),_hoisted_2$5=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_306_11939"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$8=[_hoisted_1$d,_hoisted_2$5];function render$g(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$8,16)}script$g.render=render$g;var script$f={name:"TrashIcon",extends:script$G};const _hoisted_1$c=createBaseVNode("g",{"clip-path":"url(#clip0_417_21589)"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.44802 13.9955H10.552C10.8056 14.0129 11.06 13.9797 11.3006 13.898C11.5412 13.8163 11.7632 13.6877 11.9537 13.5196C12.1442 13.3515 12.2995 13.1473 12.4104 12.9188C12.5213 12.6903 12.5858 12.442 12.6 12.1884V4.36041H13.4C13.5591 4.36041 13.7117 4.29722 13.8243 4.18476C13.9368 4.07229 14 3.91976 14 3.76071C14 3.60166 13.9368 3.44912 13.8243 3.33666C13.7117 3.22419 13.5591 3.16101 13.4 3.16101H12.0537C12.0203 3.1557 11.9863 3.15299 11.952 3.15299C11.9178 3.15299 11.8838 3.1557 11.8503 3.16101H11.2285C11.2421 3.10893 11.2487 3.05513 11.248 3.00106V1.80966C11.2171 1.30262 10.9871 0.828306 10.608 0.48989C10.229 0.151475 9.73159 -0.0236625 9.22402 0.00257442H4.77602C4.27251 -0.0171866 3.78126 0.160868 3.40746 0.498617C3.03365 0.836366 2.807 1.30697 2.77602 1.80966V3.00106C2.77602 3.0556 2.78346 3.10936 2.79776 3.16101H0.6C0.521207 3.16101 0.443185 3.17652 0.37039 3.20666C0.297595 3.2368 0.231451 3.28097 0.175736 3.33666C0.120021 3.39235 0.0758251 3.45846 0.0456722 3.53121C0.0155194 3.60397 0 3.68196 0 3.76071C0 3.83946 0.0155194 3.91744 0.0456722 3.9902C0.0758251 4.06296 0.120021 4.12907 0.175736 4.18476C0.231451 4.24045 0.297595 4.28462 0.37039 4.31476C0.443185 4.3449 0.521207 4.36041 0.6 4.36041H1.40002V12.1884C1.41426 12.442 1.47871 12.6903 1.58965 12.9188C1.7006 13.1473 1.85582 13.3515 2.04633 13.5196C2.23683 13.6877 2.45882 13.8163 2.69944 13.898C2.94005 13.9797 3.1945 14.0129 3.44802 13.9955ZM2.60002 4.36041H11.304V12.1884C11.304 12.5163 10.952 12.7961 10.504 12.7961H3.40002C2.97602 12.7961 2.60002 12.5163 2.60002 12.1884V4.36041ZM3.95429 3.16101C3.96859 3.10936 3.97602 3.0556 3.97602 3.00106V1.80966C3.97602 1.48183 4.33602 1.20197 4.77602 1.20197H9.24802C9.66403 1.20197 10.048 1.48183 10.048 1.80966V3.00106C10.0473 3.05515 10.054 3.10896 10.0678 3.16101H3.95429ZM5.57571 10.997C5.41731 10.995 5.26597 10.9311 5.15395 10.8191C5.04193 10.7071 4.97808 10.5558 4.97601 10.3973V6.77517C4.97601 6.61612 5.0392 6.46359 5.15166 6.35112C5.26413 6.23866 5.41666 6.17548 5.57571 6.17548C5.73476 6.17548 5.8873 6.23866 5.99976 6.35112C6.11223 6.46359 6.17541 6.61612 6.17541 6.77517V10.3894C6.17647 10.4688 6.16174 10.5476 6.13208 10.6213C6.10241 10.695 6.05841 10.762 6.00261 10.8186C5.94682 10.8751 5.88035 10.92 5.80707 10.9506C5.73378 10.9813 5.65514 10.9971 5.57571 10.997ZM7.99968 10.8214C8.11215 10.9339 8.26468 10.997 8.42373 10.997C8.58351 10.9949 8.73604 10.93 8.84828 10.8163C8.96052 10.7025 9.02345 10.5491 9.02343 10.3894V6.77517C9.02343 6.61612 8.96025 6.46359 8.84778 6.35112C8.73532 6.23866 8.58278 6.17548 8.42373 6.17548C8.26468 6.17548 8.11215 6.23866 7.99968 6.35112C7.88722 6.46359 7.82404 6.61612 7.82404 6.77517V10.3973C7.82404 10.5564 7.88722 10.7089 7.99968 10.8214Z",fill:"currentColor"})],-1),_hoisted_2$4=createBaseVNode("defs",null,[createBaseVNode("clipPath",{id:"clip0_417_21589"},[createBaseVNode("rect",{width:"14",height:"14",fill:"white"})])],-1),_hoisted_3$7=[_hoisted_1$c,_hoisted_2$4];function render$f(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$7,16)}script$f.render=render$f;var script$e={name:"SortAltIcon",extends:script$G};const _hoisted_1$b=createStaticVNode('<g clip-path="url(#clip0_378_15529)"><path d="M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z" fill="currentColor"></path><path d="M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z" fill="currentColor"></path><path d="M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z" fill="currentColor"></path><path d="M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z" fill="currentColor"></path></g><defs><clipPath id="clip0_378_15529"><rect width="14" height="14" fill="white"></rect></clipPath></defs>',2),_hoisted_3$6=[_hoisted_1$b];function render$e(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$6,16)}script$e.render=render$e;var script$d={name:"SortAmountDownIcon",extends:script$G};const _hoisted_1$a=createStaticVNode('<g clip-path="url(#clip0_378_15544)"><path d="M2.59836 13.2009C2.44634 13.2009 2.29432 13.1449 2.1743 13.0248L0.174024 11.0246C-0.0580081 10.7925 -0.0580081 10.4085 0.174024 10.1764C0.406057 9.94441 0.79011 9.94441 1.02214 10.1764L2.59836 11.7527L4.17458 10.1764C4.40662 9.94441 4.79067 9.94441 5.0227 10.1764C5.25473 10.4085 5.25473 10.7925 5.0227 11.0246L3.02242 13.0248C2.90241 13.1449 2.75038 13.2009 2.59836 13.2009Z" fill="currentColor"></path><path d="M2.59836 13.2009C2.27032 13.2009 1.99833 12.9288 1.99833 12.6008V1.39922C1.99833 1.07117 2.27036 0.799133 2.59841 0.799133C2.92646 0.799133 3.19849 1.07117 3.19849 1.39922V12.6008C3.19849 12.9288 2.92641 13.2009 2.59836 13.2009Z" fill="currentColor"></path><path d="M13.3999 11.2006H6.99902C6.67098 11.2006 6.39894 10.9285 6.39894 10.6005C6.39894 10.2725 6.67098 10.0004 6.99902 10.0004H13.3999C13.728 10.0004 14 10.2725 14 10.6005C14 10.9285 13.728 11.2006 13.3999 11.2006Z" fill="currentColor"></path><path d="M10.1995 6.39991H6.99902C6.67098 6.39991 6.39894 6.12788 6.39894 5.79983C6.39894 5.47179 6.67098 5.19975 6.99902 5.19975H10.1995C10.5275 5.19975 10.7996 5.47179 10.7996 5.79983C10.7996 6.12788 10.5275 6.39991 10.1995 6.39991Z" fill="currentColor"></path><path d="M8.59925 3.99958H6.99902C6.67098 3.99958 6.39894 3.72754 6.39894 3.3995C6.39894 3.07145 6.67098 2.79941 6.99902 2.79941H8.59925C8.92729 2.79941 9.19933 3.07145 9.19933 3.3995C9.19933 3.72754 8.92729 3.99958 8.59925 3.99958Z" fill="currentColor"></path><path d="M11.7997 8.80025H6.99902C6.67098 8.80025 6.39894 8.52821 6.39894 8.20017C6.39894 7.87212 6.67098 7.60008 6.99902 7.60008H11.7997C12.1277 7.60008 12.3998 7.87212 12.3998 8.20017C12.3998 8.52821 12.1277 8.80025 11.7997 8.80025Z" fill="currentColor"></path></g><defs><clipPath id="clip0_378_15544"><rect width="14" height="14" fill="white"></rect></clipPath></defs>',2),_hoisted_3$5=[_hoisted_1$a];function render$d(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$5,16)}script$d.render=render$d;var script$c={name:"SortAmountUpAltIcon",extends:script$G};const _hoisted_1$9=createStaticVNode('<g clip-path="url(#clip0_378_15578)"><path d="M4.59864 3.99958C4.44662 3.99958 4.2946 3.94357 4.17458 3.82356L2.59836 2.24734L1.02214 3.82356C0.79011 4.05559 0.406057 4.05559 0.174024 3.82356C-0.0580081 3.59152 -0.0580081 3.20747 0.174024 2.97544L2.1743 0.97516C2.40634 0.743127 2.79039 0.743127 3.02242 0.97516L5.0227 2.97544C5.25473 3.20747 5.25473 3.59152 5.0227 3.82356C4.90268 3.94357 4.75066 3.99958 4.59864 3.99958Z" fill="currentColor"></path><path d="M2.59841 13.2009C2.27036 13.2009 1.99833 12.9288 1.99833 12.6008V1.39922C1.99833 1.07117 2.27036 0.799133 2.59841 0.799133C2.92646 0.799133 3.19849 1.07117 3.19849 1.39922V12.6008C3.19849 12.9288 2.92646 13.2009 2.59841 13.2009Z" fill="currentColor"></path><path d="M13.3999 11.2006H6.99902C6.67098 11.2006 6.39894 10.9285 6.39894 10.6005C6.39894 10.2725 6.67098 10.0004 6.99902 10.0004H13.3999C13.728 10.0004 14 10.2725 14 10.6005C14 10.9285 13.728 11.2006 13.3999 11.2006Z" fill="currentColor"></path><path d="M10.1995 6.39991H6.99902C6.67098 6.39991 6.39894 6.12788 6.39894 5.79983C6.39894 5.47179 6.67098 5.19975 6.99902 5.19975H10.1995C10.5275 5.19975 10.7996 5.47179 10.7996 5.79983C10.7996 6.12788 10.5275 6.39991 10.1995 6.39991Z" fill="currentColor"></path><path d="M8.59925 3.99958H6.99902C6.67098 3.99958 6.39894 3.72754 6.39894 3.3995C6.39894 3.07145 6.67098 2.79941 6.99902 2.79941H8.59925C8.92729 2.79941 9.19933 3.07145 9.19933 3.3995C9.19933 3.72754 8.92729 3.99958 8.59925 3.99958Z" fill="currentColor"></path><path d="M11.7997 8.80025H6.99902C6.67098 8.80025 6.39894 8.52821 6.39894 8.20017C6.39894 7.87212 6.67098 7.60008 6.99902 7.60008H11.7997C12.1277 7.60008 12.3998 7.87212 12.3998 8.20017C12.3998 8.52821 12.1277 8.80025 11.7997 8.80025Z" fill="currentColor"></path></g><defs><clipPath id="clip0_378_15578"><rect width="14" height="14" fill="white"></rect></clipPath></defs>',2),_hoisted_3$4=[_hoisted_1$9];function render$c(e,t,r,s,o,n){return openBlock(),createElementBlock("svg",mergeProps({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),_hoisted_3$4,16)}script$c.render=render$c;var script$a={name:"RowCheckbox",extends:script$H,emits:["change"],props:{value:null,checked:null,column:null,rowCheckboxIconTemplate:{type:Function,default:null}},data(){return{focused:!1}},methods:{getColumnPTOptions(e){return this.ptmo(this.getColumnProp(),e,{props:this.column.props,parent:{props:this.$props,state:this.$data},context:{checked:this.checked,focused:this.focused,disabled:this.$attrs.disabled}})},getColumnProp(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick(e){this.$attrs.disabled||(this.$emit("change",{originalEvent:e,data:this.value}),DomHandler.focus(this.$refs.input)),e.preventDefault()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},onKeydown(e){switch(e.code){case"Space":{this.onClick(e);break}}}},computed:{checkboxAriaLabel(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectRow:this.$primevue.config.locale.aria.unselectRow:void 0}},components:{CheckIcon:script$j}};const _hoisted_1$7=["checked","disabled","tabindex","aria-label"];function render$a(e,t,r,s,o,n){const f=resolveComponent("CheckIcon");return openBlock(),createElementBlock("div",mergeProps({class:["p-checkbox p-component",{"p-checkbox-focused":o.focused}],onClick:t[3]||(t[3]=(...c)=>n.onClick&&n.onClick(...c))},n.getColumnPTOptions("checkboxWrapper")),[createBaseVNode("div",mergeProps({class:"p-hidden-accessible"},n.getColumnPTOptions("hiddenInputWrapper")),[createBaseVNode("input",mergeProps({ref:"input",type:"checkbox",checked:r.checked,disabled:e.$attrs.disabled,tabindex:e.$attrs.disabled?null:"0","aria-label":n.checkboxAriaLabel,onFocus:t[0]||(t[0]=c=>n.onFocus(c)),onBlur:t[1]||(t[1]=c=>n.onBlur(c)),onKeydown:t[2]||(t[2]=(...c)=>n.onKeydown&&n.onKeydown(...c))},n.getColumnPTOptions("hiddenInput")),null,16,_hoisted_1$7)],16),createBaseVNode("div",mergeProps({ref:"box",class:["p-checkbox-box p-component",{"p-highlight":r.checked,"p-disabled":e.$attrs.disabled,"p-focus":o.focused}]},n.getColumnPTOptions("checkbox")),[r.rowCheckboxIconTemplate?(openBlock(),createBlock(resolveDynamicComponent(r.rowCheckboxIconTemplate),{key:0,checked:r.checked,class:"p-checkbox-icon"},null,8,["checked"])):!r.rowCheckboxIconTemplate&&r.checked?(openBlock(),createBlock(f,mergeProps({key:1,class:"p-checkbox-icon"},n.getColumnPTOptions("checkboxIcon")),null,16)):createCommentVNode("",!0)],16)],16)}script$a.render=render$a;var script$9={name:"RowRadioButton",extends:script$H,inheritAttrs:!1,emits:["change"],props:{value:null,checked:null,name:null,column:null},data(){return{focused:!1}},methods:{getColumnPTOptions(e){return this.ptmo(this.getColumnProp(),e,{props:this.column.props,parent:{props:this.$props,state:this.$data},context:{checked:this.checked,focused:this.focused,disabled:this.$attrs.disabled}})},getColumnProp(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick(e){this.disabled||this.checked||(this.$emit("change",{originalEvent:e,data:this.value}),DomHandler.focus(this.$refs.input))},onFocus(){this.focused=!0},onBlur(){this.focused=!1}}};const _hoisted_1$6=["checked","disabled","name"];function render$9(e,t,r,s,o,n){return openBlock(),createElementBlock("div",mergeProps({class:["p-radiobutton p-component",{"p-radiobutton-focused":o.focused}],onClick:t[3]||(t[3]=(...f)=>n.onClick&&n.onClick(...f))},n.getColumnPTOptions("radiobuttonWrapper")),[createBaseVNode("div",mergeProps({class:"p-hidden-accessible"},e.ptm("hiddenInputWrapper")),[createBaseVNode("input",mergeProps({ref:"input",type:"radio",checked:r.checked,disabled:e.$attrs.disabled,name:r.name,tabindex:"0",onFocus:t[0]||(t[0]=f=>n.onFocus(f)),onBlur:t[1]||(t[1]=f=>n.onBlur(f)),onKeydown:t[2]||(t[2]=withKeys(withModifiers((...f)=>n.onClick&&n.onClick(...f),["prevent"]),["space"]))},n.getColumnPTOptions("hiddenInput")),null,16,_hoisted_1$6)],16),createBaseVNode("div",mergeProps({ref:"box",class:["p-radiobutton-box p-component",{"p-highlight":r.checked,"p-disabled":e.$attrs.disabled,"p-focus":o.focused}]},n.getColumnPTOptions("radiobutton")),[createBaseVNode("div",mergeProps({class:"p-radiobutton-icon"},n.getColumnPTOptions("radiobuttonIcon")),null,16)],16)],16)}script$9.render=render$9;var script$8={name:"BodyCell",extends:script$H,emits:["cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","row-toggle","radio-change","checkbox-change","editing-meta-change"],props:{rowData:{type:Object,default:null},column:{type:Object,default:null},frozenRow:{type:Boolean,default:!1},rowIndex:{type:Number,default:null},index:{type:Number,default:null},isRowExpanded:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},editingMeta:{type:Object,default:null},editMode:{type:String,default:null},responsiveLayout:{type:String,default:"stack"},virtualScrollerContentProps:{type:Object,default:null},ariaControls:{type:String,default:null},name:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null}},documentEditListener:null,selfClick:!1,overlayEventListener:null,data(){return{d_editing:this.editing,styleObject:{}}},watch:{editing(e){this.d_editing=e},"$data.d_editing":function(e){this.$emit("editing-meta-change",{data:this.rowData,field:this.field||`field_${this.index}`,index:this.rowIndex,editing:e})}},mounted(){this.columnProp("frozen")&&this.updateStickyPosition()},updated(){this.columnProp("frozen")&&this.updateStickyPosition(),this.d_editing&&(this.editMode==="cell"||this.editMode==="row"&&this.columnProp("rowEditor"))&&setTimeout(()=>{const e=DomHandler.getFirstFocusableElement(this.$el);e&&e.focus()},1)},beforeUnmount(){this.overlayEventListener&&(OverlayEventBus.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null)},methods:{columnProp(e){return ObjectUtils.getVNodeProp(this.column,e)},getColumnPTOptions(e,t){return this.ptmo(this.getColumnProp(e),t,{props:e.props,parent:{props:this.$props,state:this.$data}})},getColumnProp(e){return e.props&&e.props.pt?e.props.pt:void 0},resolveFieldData(){return ObjectUtils.resolveFieldData(this.rowData,this.field)},toggleRow(e){this.$emit("row-toggle",{originalEvent:e,data:this.rowData})},toggleRowWithRadio(e,t){this.$emit("radio-change",{originalEvent:e.originalEvent,index:t,data:e.data})},toggleRowWithCheckbox(e,t){this.$emit("checkbox-change",{originalEvent:e.originalEvent,index:t,data:e.data})},isEditable(){return this.column.children&&this.column.children.editor!=null},bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.selfClick||this.completeEdit(e,"outside"),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))},unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null,this.selfClick=!1)},switchCellToViewMode(){this.d_editing=!1,this.unbindDocumentEditListener(),OverlayEventBus.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},onClick(e){this.editMode==="cell"&&this.isEditable()&&(this.selfClick=!0,this.d_editing||(this.d_editing=!0,this.bindDocumentEditListener(),this.$emit("cell-edit-init",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}),this.overlayEventListener=t=>{this.$el&&this.$el.contains(t.target)&&(this.selfClick=!0)},OverlayEventBus.on("overlay-click",this.overlayEventListener)))},completeEdit(e,t){const r={originalEvent:e,data:this.rowData,newData:this.editingRowData,value:this.rowData[this.field],newValue:this.editingRowData[this.field],field:this.field,index:this.rowIndex,type:t,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}};this.$emit("cell-edit-complete",r),r.defaultPrevented||this.switchCellToViewMode()},onKeyDown(e){if(this.editMode==="cell")switch(e.code){case"Enter":this.completeEdit(e,"enter");break;case"Escape":this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex});break;case"Tab":this.completeEdit(e,"tab"),e.shiftKey?this.moveToPreviousCell(e):this.moveToNextCell(e);break}},moveToPreviousCell(e){let t=this.findCell(e.target),r=this.findPreviousEditableColumn(t);r&&(DomHandler.invokeElementMethod(r,"click"),e.preventDefault())},moveToNextCell(e){let t=this.findCell(e.target),r=this.findNextEditableColumn(t);r&&(DomHandler.invokeElementMethod(r,"click"),e.preventDefault())},findCell(e){if(e){let t=e;for(;t&&!DomHandler.hasClass(t,"p-cell-editing");)t=t.parentElement;return t}else return null},findPreviousEditableColumn(e){let t=e.previousElementSibling;if(!t){let r=e.parentElement.previousElementSibling;r&&(t=r.lastElementChild)}return t?DomHandler.hasClass(t,"p-editable-column")?t:this.findPreviousEditableColumn(t):null},findNextEditableColumn(e){let t=e.nextElementSibling;if(!t){let r=e.parentElement.nextElementSibling;r&&(t=r.firstElementChild)}return t?DomHandler.hasClass(t,"p-editable-column")?t:this.findNextEditableColumn(t):null},isEditingCellValid(){return DomHandler.find(this.$el,".p-invalid").length===0},onRowEditInit(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditSave(e){this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditCancel(e){this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorInitCallback(e){this.$emit("row-edit-init",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorSaveCallback(e){this.editMode==="row"?this.$emit("row-edit-save",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):this.completeEdit(e,"enter")},editorCancelCallback(e){this.editMode==="row"?this.$emit("row-edit-cancel",{originalEvent:e,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex}):(this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:e,data:this.rowData,field:this.field,index:this.rowIndex}))},updateStickyPosition(){if(this.columnProp("frozen"))if(this.columnProp("alignFrozen")==="right"){let t=0,r=this.$el.nextElementSibling;r&&(t=DomHandler.getOuterWidth(r)+parseFloat(r.style.right||0)),this.styleObject.right=t+"px"}else{let t=0,r=this.$el.previousElementSibling;r&&(t=DomHandler.getOuterWidth(r)+parseFloat(r.style.left||0)),this.styleObject.left=t+"px"}},getVirtualScrollerProp(e){return this.virtualScrollerContentProps?this.virtualScrollerContentProps[e]:null}},computed:{editingRowData(){return this.editingMeta[this.rowIndex]?this.editingMeta[this.rowIndex].data:this.rowData},field(){return this.columnProp("field")},containerClass(){return[this.columnProp("bodyClass"),this.columnProp("class"),{"p-selection-column":this.columnProp("selectionMode")!=null,"p-editable-column":this.isEditable(),"p-cell-editing":this.d_editing,"p-frozen-column":this.columnProp("frozen")}]},containerStyle(){let e=this.columnProp("bodyStyle"),t=this.columnProp("style");return this.columnProp("frozen")?[t,e,this.styleObject]:[t,e]},loading(){return this.getVirtualScrollerProp("loading")},loadingOptions(){const e=this.getVirtualScrollerProp("getLoaderOptions");return e&&e(this.rowIndex,{cellIndex:this.index,cellFirst:this.index===0,cellLast:this.index===this.getVirtualScrollerProp("columns").length-1,cellEven:this.index%2===0,cellOdd:this.index%2!==0,column:this.column,field:this.field})},expandButtonAriaLabel(){return this.$primevue.config.locale.aria?this.isRowExpanded?this.$primevue.config.locale.aria.expandRow:this.$primevue.config.locale.aria.collapseRow:void 0},initButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.editRow:void 0},saveButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.saveEdit:void 0},cancelButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.cancelEdit:void 0}},components:{DTRadioButton:script$9,DTCheckbox:script$a,ChevronDownIcon:script$F,ChevronRightIcon:script$l,BarsIcon:script$k,PencilIcon:script$i,CheckIcon:script$j,TimesIcon:script$C},directives:{ripple:Ripple}};const _hoisted_1$5=["aria-expanded","aria-controls","aria-label"],_hoisted_2$2$1=["aria-label"],_hoisted_3$2$1=["aria-label"],_hoisted_4$1=["aria-label"];function render$8(e,t,r,s,o,n){const f=resolveComponent("DTRadioButton"),c=resolveComponent("DTCheckbox"),y=resolveComponent("ChevronDownIcon"),_=resolveComponent("ChevronRightIcon"),b=resolveDirective("ripple");return n.loading?(openBlock(),createElementBlock("td",mergeProps({key:0,style:n.containerStyle,class:n.containerClass,role:"cell"},{...n.getColumnPTOptions(r.column,"root"),...n.getColumnPTOptions(r.column,"bodyCell")}),[(openBlock(),createBlock(resolveDynamicComponent(r.column.children.loading),{data:r.rowData,column:r.column,field:n.field,index:r.rowIndex,frozenRow:r.frozenRow,loadingOptions:n.loadingOptions},null,8,["data","column","field","index","frozenRow","loadingOptions"]))],16)):(openBlock(),createElementBlock("td",mergeProps({key:1,style:n.containerStyle,class:n.containerClass,onClick:t[6]||(t[6]=(...C)=>n.onClick&&n.onClick(...C)),onKeydown:t[7]||(t[7]=(...C)=>n.onKeyDown&&n.onKeyDown(...C)),role:"cell"},{...n.getColumnPTOptions(r.column,"root"),...n.getColumnPTOptions(r.column,"bodyCell")}),[r.responsiveLayout==="stack"?(openBlock(),createElementBlock("span",mergeProps({key:0,class:"p-column-title"},n.getColumnPTOptions(r.column,"columnTitle")),toDisplayString(n.columnProp("header")),17)):createCommentVNode("",!0),r.column.children&&r.column.children.body&&!o.d_editing?(openBlock(),createBlock(resolveDynamicComponent(r.column.children.body),{key:1,data:r.rowData,column:r.column,field:n.field,index:r.rowIndex,frozenRow:r.frozenRow,editorInitCallback:n.editorInitCallback},null,8,["data","column","field","index","frozenRow","editorInitCallback"])):r.column.children&&r.column.children.editor&&o.d_editing?(openBlock(),createBlock(resolveDynamicComponent(r.column.children.editor),{key:2,data:n.editingRowData,column:r.column,field:n.field,index:r.rowIndex,frozenRow:r.frozenRow,editorSaveCallback:n.editorSaveCallback,editorCancelCallback:n.editorCancelCallback},null,8,["data","column","field","index","frozenRow","editorSaveCallback","editorCancelCallback"])):r.column.children&&r.column.children.body&&!r.column.children.editor&&o.d_editing?(openBlock(),createBlock(resolveDynamicComponent(r.column.children.body),{key:3,data:n.editingRowData,column:r.column,field:n.field,index:r.rowIndex,frozenRow:r.frozenRow},null,8,["data","column","field","index","frozenRow"])):n.columnProp("selectionMode")?(openBlock(),createElementBlock(Fragment,{key:4},[n.columnProp("selectionMode")==="single"?(openBlock(),createBlock(f,{key:0,value:r.rowData,name:r.name,checked:r.selected,onChange:t[0]||(t[0]=C=>n.toggleRowWithRadio(C,r.rowIndex)),column:r.column,pt:e.pt},null,8,["value","name","checked","column","pt"])):n.columnProp("selectionMode")==="multiple"?(openBlock(),createBlock(c,{key:1,value:r.rowData,checked:r.selected,rowCheckboxIconTemplate:r.column.children&&r.column.children.rowcheckboxicon,"aria-selected":r.selected?!0:void 0,onChange:t[1]||(t[1]=C=>n.toggleRowWithCheckbox(C,r.rowIndex)),column:r.column,pt:e.pt},null,8,["value","checked","rowCheckboxIconTemplate","aria-selected","column","pt"])):createCommentVNode("",!0)],64)):n.columnProp("rowReorder")?(openBlock(),createBlock(resolveDynamicComponent(r.column.children&&r.column.children.rowreordericon?r.column.children.rowreordericon:n.columnProp("rowReorderIcon")?"i":"BarsIcon"),{key:5,class:normalizeClass(["p-datatable-reorderablerow-handle",n.columnProp("rowReorderIcon")])},null,8,["class"])):n.columnProp("expander")?withDirectives((openBlock(),createElementBlock("button",mergeProps({key:6,class:"p-row-toggler p-link",type:"button","aria-expanded":r.isRowExpanded,"aria-controls":r.ariaControls,"aria-label":n.expandButtonAriaLabel,onClick:t[2]||(t[2]=(...C)=>n.toggleRow&&n.toggleRow(...C))},n.getColumnPTOptions(r.column,"rowToggler")),[r.column.children&&r.column.children.rowtogglericon?(openBlock(),createBlock(resolveDynamicComponent(r.column.children.rowtogglericon),{key:0,rowExpanded:r.isRowExpanded},null,8,["rowExpanded"])):(openBlock(),createElementBlock(Fragment,{key:1},[r.isRowExpanded&&r.expandedRowIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["p-row-toggler-icon",r.expandedRowIcon])},null,2)):r.isRowExpanded&&!r.expandedRowIcon?(openBlock(),createBlock(y,mergeProps({key:1,class:"p-row-toggler-icon"},n.getColumnPTOptions(r.column,"rowTogglerIcon")),null,16)):!r.isRowExpanded&&r.collapsedRowIcon?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(["p-row-toggler-icon",r.collapsedRowIcon])},null,2)):!r.isRowExpanded&&!r.collapsedRowIcon?(openBlock(),createBlock(_,mergeProps({key:3,class:"p-row-toggler-icon"},n.getColumnPTOptions(r.column,"rowTogglerIcon")),null,16)):createCommentVNode("",!0)],64))],16,_hoisted_1$5)),[[b]]):r.editMode==="row"&&n.columnProp("rowEditor")?(openBlock(),createElementBlock(Fragment,{key:7},[o.d_editing?createCommentVNode("",!0):withDirectives((openBlock(),createElementBlock("button",mergeProps({key:0,class:"p-row-editor-init p-link",type:"button","aria-label":n.initButtonAriaLabel,onClick:t[3]||(t[3]=(...C)=>n.onRowEditInit&&n.onRowEditInit(...C))},n.getColumnPTOptions(r.column,"rowEditorInitButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.column.children&&r.column.children.roweditoriniticon||"PencilIcon"),mergeProps({class:"p-row-editor-init-icon"},n.getColumnPTOptions(r.column,"rowEditorInitIcon")),null,16))],16,_hoisted_2$2$1)),[[b]]),o.d_editing?withDirectives((openBlock(),createElementBlock("button",mergeProps({key:1,class:"p-row-editor-save p-link",type:"button","aria-label":n.saveButtonAriaLabel,onClick:t[4]||(t[4]=(...C)=>n.onRowEditSave&&n.onRowEditSave(...C))},n.getColumnPTOptions(r.column,"rowEditorEditButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.column.children&&r.column.children.roweditorsaveicon||"CheckIcon"),mergeProps({class:"p-row-editor-save-icon"},n.getColumnPTOptions(r.column,"rowEditorEditIcon")),null,16))],16,_hoisted_3$2$1)),[[b]]):createCommentVNode("",!0),o.d_editing?withDirectives((openBlock(),createElementBlock("button",mergeProps({key:2,class:"p-row-editor-cancel p-link",type:"button","aria-label":n.cancelButtonAriaLabel,onClick:t[5]||(t[5]=(...C)=>n.onRowEditCancel&&n.onRowEditCancel(...C))},n.getColumnPTOptions(r.column,"rowEditorCancelButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.column.children&&r.column.children.roweditorcancelicon||"TimesIcon"),mergeProps({class:"p-row-editor-cancel-icon"},n.getColumnPTOptions(r.column,"rowEditorCancelIcon")),null,16))],16,_hoisted_4$1)),[[b]]):createCommentVNode("",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:8},[createTextVNode(toDisplayString(n.resolveFieldData()),1)],64))],16))}script$8.render=render$8;var script$7={name:"TableBody",extends:script$H,emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},first:{type:Number,default:0},dataKey:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:Array,default:null},expandedRowKeys:{type:null,default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},responsiveLayout:{type:String,default:"stack"},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1}},data(){return{rowGroupHeaderStyleObject:{},tabindexArray:[],isARowSelected:!1}},mounted(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},updated(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},methods:{columnProp(e,t){return ObjectUtils.getVNodeProp(e,t)},getColumnPTOptions(e,t){return this.ptmo(this.getColumnProp(e),t,{props:e.props,parent:{props:this.$props,state:this.$data}})},getColumnProp(e){return e.props&&e.props.pt?e.props.pt:void 0},shouldRenderRowGroupHeader(e,t,r){let s=ObjectUtils.resolveFieldData(t,this.groupRowsBy),o=e[r-1];if(o){let n=ObjectUtils.resolveFieldData(o,this.groupRowsBy);return s!==n}else return!0},getRowKey(e,t){return this.dataKey?ObjectUtils.resolveFieldData(e,this.dataKey):this.getRowIndex(t)},getRowIndex(e){const t=this.getVirtualScrollerProp("getItemOptions");return t?t(e).index:this.first+e},getRowStyle(e){if(this.rowStyle)return this.rowStyle(e)},getRowClass(e){let t=[];if(this.selectionMode&&t.push("p-selectable-row"),this.selection&&t.push({"p-highlight":this.isSelected(e)}),this.contextMenuSelection&&t.push({"p-highlight-contextmenu":this.isSelectedWithContextMenu(e)}),this.rowClass){let r=this.rowClass(e);r&&t.push(r)}return t},shouldRenderRowGroupFooter(e,t,r){if(this.expandableRowGroups&&!this.isRowGroupExpanded(t))return!1;{let s=ObjectUtils.resolveFieldData(t,this.groupRowsBy),o=e[r+1];if(o){let n=ObjectUtils.resolveFieldData(o,this.groupRowsBy);return s!==n}else return!0}},shouldRenderBodyCell(e,t,r){if(this.rowGroupMode){if(this.rowGroupMode==="subheader")return this.groupRowsBy!==this.columnProp(t,"field");if(this.rowGroupMode==="rowspan")if(this.isGrouped(t)){let s=e[r-1];if(s){let o=ObjectUtils.resolveFieldData(e[r],this.columnProp(t,"field")),n=ObjectUtils.resolveFieldData(s,this.columnProp(t,"field"));return o!==n}else return!0}else return!0}else return!this.columnProp(t,"hidden")},calculateRowGroupSize(e,t,r){if(this.isGrouped(t)){let s=ObjectUtils.resolveFieldData(e[r],this.columnProp(t,"field")),o=s,n=0;for(;s===o;){n++;let f=e[++r];if(f)o=ObjectUtils.resolveFieldData(f,this.columnProp(t,"field"));else break}return n===1?null:n}else return null},isGrouped(e){return this.groupRowsBy&&this.columnProp(e,"field")?Array.isArray(this.groupRowsBy)?this.groupRowsBy.indexOf(e.props.field)>-1:this.groupRowsBy===e.props.field:!1},isRowEditing(e){return e&&this.editingRows?this.dataKey?this.editingRowKeys?this.editingRowKeys[ObjectUtils.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.findIndex(e,this.editingRows)>-1:!1},isRowExpanded(e){return e&&this.expandedRows?this.dataKey?this.expandedRowKeys?this.expandedRowKeys[ObjectUtils.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.findIndex(e,this.expandedRows)>-1:!1},isRowGroupExpanded(e){if(this.expandableRowGroups&&this.expandedRowGroups){let t=ObjectUtils.resolveFieldData(e,this.groupRowsBy);return this.expandedRowGroups.indexOf(t)>-1}return!1},isSelected(e){return e&&this.selection?this.dataKey?this.selectionKeys?this.selectionKeys[ObjectUtils.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1},isSelectedWithContextMenu(e){return e&&this.contextMenuSelection?this.equals(e,this.contextMenuSelection,this.dataKey):!1},findIndexInSelection(e){return this.findIndex(e,this.selection)},findIndex(e,t){let r=-1;if(t&&t.length){for(let s=0;s<t.length;s++)if(this.equals(e,t[s])){r=s;break}}return r},equals(e,t){return this.compareSelectionBy==="equals"?e===t:ObjectUtils.equals(e,t,this.dataKey)},onRowGroupToggle(e,t){this.$emit("rowgroup-toggle",{originalEvent:e,data:t})},onRowClick(e,t,r){this.$emit("row-click",{originalEvent:e,data:t,index:r})},onRowDblClick(e,t,r){this.$emit("row-dblclick",{originalEvent:e,data:t,index:r})},onRowRightClick(e,t,r){this.$emit("row-rightclick",{originalEvent:e,data:t,index:r})},onRowTouchEnd(e){this.$emit("row-touchend",e)},onRowKeyDown(e,t,r){this.$emit("row-keydown",{originalEvent:e,data:t,index:r})},onRowMouseDown(e){this.$emit("row-mousedown",e)},onRowDragStart(e,t){this.$emit("row-dragstart",{originalEvent:e,index:t})},onRowDragOver(e,t){this.$emit("row-dragover",{originalEvent:e,index:t})},onRowDragLeave(e){this.$emit("row-dragleave",e)},onRowDragEnd(e){this.$emit("row-dragend",e)},onRowDrop(e){this.$emit("row-drop",e)},onRowToggle(e){this.$emit("row-toggle",e)},onRadioChange(e){this.$emit("radio-change",e)},onCheckboxChange(e){this.$emit("checkbox-change",e)},onCellEditInit(e){this.$emit("cell-edit-init",e)},onCellEditComplete(e){this.$emit("cell-edit-complete",e)},onCellEditCancel(e){this.$emit("cell-edit-cancel",e)},onRowEditInit(e){this.$emit("row-edit-init",e)},onRowEditSave(e){this.$emit("row-edit-save",e)},onRowEditCancel(e){this.$emit("row-edit-cancel",e)},onEditingMetaChange(e){this.$emit("editing-meta-change",e)},updateFrozenRowStickyPosition(){this.$el.style.top=DomHandler.getOuterHeight(this.$el.previousElementSibling)+"px"},updateFrozenRowGroupHeaderStickyPosition(){let e=DomHandler.getOuterHeight(this.$el.previousElementSibling);this.rowGroupHeaderStyleObject.top=e+"px"},getVirtualScrollerProp(e,t){return t=t||this.virtualScrollerContentProps,t?t[e]:null},bodyRef(e){const t=this.getVirtualScrollerProp("contentRef");t&&t(e)},setRowTabindex(e){return this.selection===null&&(this.selectionMode==="single"||this.selectionMode==="multiple")&&e===0?0:-1}},computed:{columnsLength(){let e=0;return this.columns.forEach(t=>{this.columnProp(t,"selectionMode")==="single"&&e--,this.columnProp(t,"hidden")&&e++}),this.columns?this.columns.length-e:0},rowGroupHeaderStyle(){return this.scrollable?{top:this.rowGroupHeaderStyleObject.top}:null},bodyStyle(){return this.getVirtualScrollerProp("contentStyle")},expandedRowId(){return UniqueComponentId()},nameAttributeSelector(){return UniqueComponentId()}},components:{DTBodyCell:script$8,ChevronDownIcon:script$F,ChevronRightIcon:script$l}};const _hoisted_1$4$1=["colspan"],_hoisted_2$1$1=["onClick"],_hoisted_3$1$1=["tabindex","aria-selected","onClick","onDblclick","onContextmenu","onKeydown","onDragstart","onDragover"],_hoisted_4=["id"],_hoisted_5=["colspan"],_hoisted_6=["colspan"],_hoisted_7=["colspan"];function render$7(e,t,r,s,o,n){const f=resolveComponent("ChevronDownIcon"),c=resolveComponent("ChevronRightIcon"),y=resolveComponent("DTBodyCell");return openBlock(),createElementBlock("tbody",mergeProps({ref:n.bodyRef,class:"p-datatable-tbody",role:"rowgroup",style:n.bodyStyle},e.ptm("tbody")),[r.empty?(openBlock(),createElementBlock("tr",mergeProps({key:1,class:"p-datatable-emptymessage",role:"row"},e.ptm("emptyMessage")),[createBaseVNode("td",mergeProps({colspan:n.columnsLength},{...n.getColumnPTOptions("root"),...n.getColumnPTOptions("bodyCell")}),[r.templates.empty?(openBlock(),createBlock(resolveDynamicComponent(r.templates.empty),{key:0})):createCommentVNode("",!0)],16,_hoisted_7)],16)):(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(r.value,(_,b)=>(openBlock(),createElementBlock(Fragment,null,[r.templates.groupheader&&r.rowGroupMode==="subheader"&&n.shouldRenderRowGroupHeader(r.value,_,n.getRowIndex(b))?(openBlock(),createElementBlock("tr",mergeProps({key:n.getRowKey(_,n.getRowIndex(b))+"_subheader",class:"p-rowgroup-header",style:n.rowGroupHeaderStyle,role:"row"},e.ptm("rowgroupHeader")),[createBaseVNode("td",mergeProps({colspan:n.columnsLength-1},{...n.getColumnPTOptions("root"),...n.getColumnPTOptions("bodyCell")}),[r.expandableRowGroups?(openBlock(),createElementBlock("button",mergeProps({key:0,class:"p-row-toggler p-link",onClick:C=>n.onRowGroupToggle(C,_),type:"button"},n.getColumnPTOptions("rowGroupToggler")),[r.templates.rowgrouptogglericon?(openBlock(),createBlock(resolveDynamicComponent(r.templates.rowgrouptogglericon),{key:0,expanded:n.isRowGroupExpanded(_)},null,8,["expanded"])):(openBlock(),createElementBlock(Fragment,{key:1},[n.isRowGroupExpanded(_)&&r.expandedRowIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["p-row-toggler-icon",r.expandedRowIcon])},null,2)):n.isRowGroupExpanded(_)&&!r.expandedRowIcon?(openBlock(),createBlock(f,mergeProps({key:1,class:"p-row-toggler-icon"},n.getColumnPTOptions("rowGroupTogglerIcon")),null,16)):!n.isRowGroupExpanded(_)&&r.collapsedRowIcon?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(["p-row-toggler-icon",r.collapsedRowIcon])},null,2)):!n.isRowGroupExpanded(_)&&!r.collapsedRowIcon?(openBlock(),createBlock(c,mergeProps({key:3,class:"p-row-toggler-icon"},n.getColumnPTOptions("rowGroupTogglerIcon")),null,16)):createCommentVNode("",!0)],64))],16,_hoisted_2$1$1)):createCommentVNode("",!0),(openBlock(),createBlock(resolveDynamicComponent(r.templates.groupheader),{data:_,index:n.getRowIndex(b)},null,8,["data","index"]))],16,_hoisted_1$4$1)],16)):createCommentVNode("",!0),!r.expandableRowGroups||n.isRowGroupExpanded(_)?(openBlock(),createElementBlock("tr",mergeProps({key:n.getRowKey(_,n.getRowIndex(b)),class:n.getRowClass(_),style:n.getRowStyle(_),tabindex:n.setRowTabindex(b),role:"row","aria-selected":r.selectionMode?n.isSelected(_):null,onClick:C=>n.onRowClick(C,_,n.getRowIndex(b)),onDblclick:C=>n.onRowDblClick(C,_,n.getRowIndex(b)),onContextmenu:C=>n.onRowRightClick(C,_,n.getRowIndex(b)),onTouchend:t[9]||(t[9]=C=>n.onRowTouchEnd(C)),onKeydown:C=>n.onRowKeyDown(C,_,n.getRowIndex(b)),onMousedown:t[10]||(t[10]=C=>n.onRowMouseDown(C)),onDragstart:C=>n.onRowDragStart(C,n.getRowIndex(b)),onDragover:C=>n.onRowDragOver(C,n.getRowIndex(b)),onDragleave:t[11]||(t[11]=C=>n.onRowDragLeave(C)),onDragend:t[12]||(t[12]=C=>n.onRowDragEnd(C)),onDrop:t[13]||(t[13]=C=>n.onRowDrop(C))},e.ptm("row")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.columns,(C,M)=>(openBlock(),createElementBlock(Fragment,null,[n.shouldRenderBodyCell(r.value,C,n.getRowIndex(b))?(openBlock(),createBlock(y,{key:n.columnProp(C,"columnKey")||n.columnProp(C,"field")||M,rowData:_,column:C,rowIndex:n.getRowIndex(b),index:M,selected:n.isSelected(_),frozenRow:r.frozenRow,rowspan:r.rowGroupMode==="rowspan"?n.calculateRowGroupSize(r.value,C,n.getRowIndex(b)):null,editMode:r.editMode,editing:r.editMode==="row"&&n.isRowEditing(_),editingMeta:r.editingMeta,responsiveLayout:r.responsiveLayout,virtualScrollerContentProps:r.virtualScrollerContentProps,ariaControls:n.expandedRowId+"_"+b+"_expansion",name:n.nameAttributeSelector,isRowExpanded:n.isRowExpanded(_),expandedRowIcon:r.expandedRowIcon,collapsedRowIcon:r.collapsedRowIcon,onRadioChange:t[0]||(t[0]=E=>n.onRadioChange(E)),onCheckboxChange:t[1]||(t[1]=E=>n.onCheckboxChange(E)),onRowToggle:t[2]||(t[2]=E=>n.onRowToggle(E)),onCellEditInit:t[3]||(t[3]=E=>n.onCellEditInit(E)),onCellEditComplete:t[4]||(t[4]=E=>n.onCellEditComplete(E)),onCellEditCancel:t[5]||(t[5]=E=>n.onCellEditCancel(E)),onRowEditInit:t[6]||(t[6]=E=>n.onRowEditInit(E)),onRowEditSave:t[7]||(t[7]=E=>n.onRowEditSave(E)),onRowEditCancel:t[8]||(t[8]=E=>n.onRowEditCancel(E)),onEditingMetaChange:n.onEditingMetaChange,pt:e.pt},null,8,["rowData","column","rowIndex","index","selected","frozenRow","rowspan","editMode","editing","editingMeta","responsiveLayout","virtualScrollerContentProps","ariaControls","name","isRowExpanded","expandedRowIcon","collapsedRowIcon","onEditingMetaChange","pt"])):createCommentVNode("",!0)],64))),256))],16,_hoisted_3$1$1)):createCommentVNode("",!0),r.templates.expansion&&r.expandedRows&&n.isRowExpanded(_)?(openBlock(),createElementBlock("tr",mergeProps({key:n.getRowKey(_,n.getRowIndex(b))+"_expansion",id:n.expandedRowId+"_"+b+"_expansion",class:"p-datatable-row-expansion",role:"row"},e.ptm("rowExpansion")),[createBaseVNode("td",mergeProps({colspan:n.columnsLength},{...n.getColumnPTOptions("root"),...n.getColumnPTOptions("bodyCell")}),[(openBlock(),createBlock(resolveDynamicComponent(r.templates.expansion),{data:_,index:n.getRowIndex(b)},null,8,["data","index"]))],16,_hoisted_5)],16,_hoisted_4)):createCommentVNode("",!0),r.templates.groupfooter&&r.rowGroupMode==="subheader"&&n.shouldRenderRowGroupFooter(r.value,_,n.getRowIndex(b))?(openBlock(),createElementBlock("tr",mergeProps({key:n.getRowKey(_,n.getRowIndex(b))+"_subfooter",class:"p-rowgroup-footer",role:"row"},e.ptm("rowgroupFooter")),[createBaseVNode("td",mergeProps({colspan:n.columnsLength-1},{...n.getColumnPTOptions("root"),...n.getColumnPTOptions("bodyCell")}),[(openBlock(),createBlock(resolveDynamicComponent(r.templates.groupfooter),{data:_,index:n.getRowIndex(b)},null,8,["data","index"]))],16,_hoisted_6)],16)):createCommentVNode("",!0)],64))),256))],16)}script$7.render=render$7;var script$6={name:"FooterCell",extends:script$H,props:{column:{type:Object,default:null}},data(){return{styleObject:{}}},mounted(){this.columnProp("frozen")&&this.updateStickyPosition()},updated(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp(e){return ObjectUtils.getVNodeProp(this.column,e)},getColumnPTOptions(e){return this.ptmo(this.getColumnProp(),e,{props:this.column.props,parent:{props:this.$props,state:this.$data}})},getColumnProp(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},updateStickyPosition(){if(this.columnProp("frozen"))if(this.columnProp("alignFrozen")==="right"){let t=0,r=this.$el.nextElementSibling;r&&(t=DomHandler.getOuterWidth(r)+parseFloat(r.style.right||0)),this.styleObject.right=t+"px"}else{let t=0,r=this.$el.previousElementSibling;r&&(t=DomHandler.getOuterWidth(r)+parseFloat(r.style.left||0)),this.styleObject.left=t+"px"}}},computed:{containerClass(){return[this.columnProp("footerClass"),this.columnProp("class"),{"p-frozen-column":this.columnProp("frozen")}]},containerStyle(){let e=this.columnProp("footerStyle"),t=this.columnProp("style");return this.columnProp("frozen")?[t,e,this.styleObject]:[t,e]}}};const _hoisted_1$3$1=["colspan","rowspan"];function render$6(e,t,r,s,o,n){return openBlock(),createElementBlock("td",mergeProps({style:n.containerStyle,class:n.containerClass,role:"cell",colspan:n.columnProp("colspan"),rowspan:n.columnProp("rowspan")},{...n.getColumnPTOptions("root"),...n.getColumnPTOptions("footerCell")}),[r.column.children&&r.column.children.footer?(openBlock(),createBlock(resolveDynamicComponent(r.column.children.footer),{key:0,column:r.column},null,8,["column"])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(n.columnProp("footer")),1)],16,_hoisted_1$3$1)}script$6.render=render$6;var script$5={name:"TableFooter",extends:script$H,props:{columnGroup:{type:null,default:null},columns:{type:Object,default:null}},methods:{columnProp(e,t){return ObjectUtils.getVNodeProp(e,t)},getColumnGroupPTOptions(e){return this.ptmo(this.getColumnGroupProps(),e,{props:this.getColumnGroupProps(),parent:{props:this.$props,state:this.$data}})},getColumnGroupProps(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPTOptions(e,t){return this.ptmo(this.getRowProp(e),t,{props:e.props,parent:{props:this.$props,state:this.$data}})},getRowProp(e){return e.props&&e.props.pt?e.props.pt:void 0},getFooterRows(){let e=[],t=this.columnGroup;if(t.children&&t.children.default){for(let r of t.children.default())r.type.name==="Row"?e.push(r):r.children&&r.children instanceof Array&&(e=r.children);return e}},getFooterColumns(e){let t=[];if(e.children&&e.children.default)return e.children.default().forEach(r=>{r.children&&r.children instanceof Array?t=[...t,...r.children]:r.type.name==="Column"&&t.push(r)}),t}},computed:{hasFooter(){let e=!1;if(this.columnGroup)e=!0;else if(this.columns){for(let t of this.columns)if(this.columnProp(t,"footer")||t.children&&t.children.footer){e=!0;break}}return e}},components:{DTFooterCell:script$6}};function render$5(e,t,r,s,o,n){const f=resolveComponent("DTFooterCell");return n.hasFooter?(openBlock(),createElementBlock("tfoot",mergeProps({key:0,class:"p-datatable-tfoot",role:"rowgroup"},{...e.ptm("tfoot"),...n.getColumnGroupPTOptions("root")}),[r.columnGroup?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(n.getFooterRows(),(c,y)=>(openBlock(),createElementBlock("tr",mergeProps({key:y,role:"row"},n.getRowPTOptions(c,"root")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.getFooterColumns(c),(_,b)=>(openBlock(),createElementBlock(Fragment,{key:n.columnProp(_,"columnKey")||n.columnProp(_,"field")||b},[n.columnProp(_,"hidden")?createCommentVNode("",!0):(openBlock(),createBlock(f,{key:0,column:_,pt:e.pt},null,8,["column","pt"]))],64))),128))],16))),128)):(openBlock(),createElementBlock("tr",mergeProps({key:0,role:"row"},e.ptm("footerRow")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.columns,(c,y)=>(openBlock(),createElementBlock(Fragment,{key:n.columnProp(c,"columnKey")||n.columnProp(c,"field")||y},[n.columnProp(c,"hidden")?createCommentVNode("",!0):(openBlock(),createBlock(f,{key:0,column:c,pt:e.pt},null,8,["column","pt"]))],64))),128))],16))],16)):createCommentVNode("",!0)}script$5.render=render$5;var script$4={name:"ColumnFilter",extends:script$H,emits:["filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{field:{type:String,default:null},type:{type:String,default:"text"},display:{type:String,default:null},showMenu:{type:Boolean,default:!0},matchMode:{type:String,default:null},showOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},matchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},filterElement:{type:Function,default:null},filterHeaderTemplate:{type:Function,default:null},filterFooterTemplate:{type:Function,default:null},filterClearTemplate:{type:Function,default:null},filterApplyTemplate:{type:Function,default:null},filterIconTemplate:{type:Function,default:null},filterAddIconTemplate:{type:Function,default:null},filterRemoveIconTemplate:{type:Function,default:null},filterClearIconTemplate:{type:Function,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},filterInputProps:{type:null,default:null},column:null},data(){return{overlayVisible:!1,defaultMatchMode:null,defaultOperator:null}},overlay:null,selfClick:!1,overlayEventListener:null,beforeUnmount(){this.overlayEventListener&&(OverlayEventBus.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.overlay&&(ZIndexUtils.clear(this.overlay),this.onOverlayHide())},mounted(){if(this.filters&&this.filters[this.field]){let e=this.filters[this.field];e.operator?(this.defaultMatchMode=e.constraints[0].matchMode,this.defaultOperator=e.operator):this.defaultMatchMode=this.filters[this.field].matchMode}},methods:{getColumnPTOptions(e){return this.ptmo(this.getColumnProp(),e,{props:this.column.props,parent:{props:this.$props,state:this.$data}})},getColumnProp(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},clearFilter(){let e={...this.filters};e[this.field].operator?(e[this.field].constraints.splice(1),e[this.field].operator=this.defaultOperator,e[this.field].constraints[0]={value:null,matchMode:this.defaultMatchMode}):(e[this.field].value=null,e[this.field].matchMode=this.defaultMatchMode),this.$emit("filter-clear"),this.$emit("filter-change",e),this.$emit("filter-apply"),this.hide()},applyFilter(){this.$emit("apply-click",{field:this.field,constraints:this.filters[this.field]}),this.$emit("filter-apply"),this.hide()},hasFilter(){if(this.filtersStore){let e=this.filtersStore[this.field];if(e)return e.operator?!this.isFilterBlank(e.constraints[0].value):!this.isFilterBlank(e.value)}return!1},hasRowFilter(){return this.filters[this.field]&&!this.isFilterBlank(this.filters[this.field].value)},isFilterBlank(e){return e!=null?typeof e=="string"&&e.trim().length==0||e instanceof Array&&e.length==0:!0},toggleMenu(){this.overlayVisible=!this.overlayVisible},onToggleButtonKeyDown(e){switch(e.code){case"Enter":case"Space":this.toggleMenu(),e.preventDefault();break;case"Escape":this.overlayVisible=!1;break}},onRowMatchModeChange(e){let t={...this.filters};t[this.field].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e}),this.$emit("filter-change",t),this.$emit("filter-apply"),this.hide()},onRowMatchModeKeyDown(e){let t=e.target;switch(e.code){case"ArrowDown":var r=this.findNextItem(t);r&&(t.removeAttribute("tabindex"),r.tabIndex="0",r.focus()),e.preventDefault();break;case"ArrowUp":var s=this.findPrevItem(t);s&&(t.removeAttribute("tabindex"),s.tabIndex="0",s.focus()),e.preventDefault();break}},isRowMatchModeSelected(e){return this.filters[this.field].matchMode===e},onOperatorChange(e){let t={...this.filters};t[this.field].operator=e,this.$emit("filter-change",t),this.$emit("operator-change",{field:this.field,operator:e}),this.showApplyButton||this.$emit("filter-apply")},onMenuMatchModeChange(e,t){let r={...this.filters};r[this.field].constraints[t].matchMode=e,this.$emit("matchmode-change",{field:this.field,matchMode:e,index:t}),this.showApplyButton||this.$emit("filter-apply")},addConstraint(){let e={...this.filters},t={value:null,matchMode:this.defaultMatchMode};e[this.field].constraints.push(t),this.$emit("constraint-add",{field:this.field,constraing:t}),this.$emit("filter-change",e),this.showApplyButton||this.$emit("filter-apply")},removeConstraint(e){let t={...this.filters},r=t[this.field].constraints.splice(e,1);this.$emit("constraint-remove",{field:this.field,constraing:r}),this.$emit("filter-change",t),this.showApplyButton||this.$emit("filter-apply")},filterCallback(){this.$emit("filter-apply")},findNextItem(e){let t=e.nextElementSibling;return t?DomHandler.hasClass(t,"p-column-filter-separator")?this.findNextItem(t):t:e.parentElement.firstElementChild},findPrevItem(e){let t=e.previousElementSibling;return t?DomHandler.hasClass(t,"p-column-filter-separator")?this.findPrevItem(t):t:e.parentElement.lastElementChild},hide(){this.overlayVisible=!1,DomHandler.focus(this.$refs.icon)},onContentClick(e){this.selfClick=!0,OverlayEventBus.emit("overlay-click",{originalEvent:e,target:this.overlay})},onContentMouseDown(){this.selfClick=!0},onOverlayEnter(e){this.filterMenuStyle&&DomHandler.applyStyle(this.overlay,this.filterMenuStyle),ZIndexUtils.set("overlay",e,this.$primevue.config.zIndex.overlay),DomHandler.absolutePosition(this.overlay,this.$refs.icon),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.overlayEventListener=t=>{this.isOutsideClicked(t.target)||(this.selfClick=!0)},OverlayEventBus.on("overlay-click",this.overlayEventListener)},onOverlayLeave(){this.onOverlayHide()},onOverlayAfterLeave(e){ZIndexUtils.clear(e)},onOverlayHide(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.overlay=null,OverlayEventBus.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},overlayRef(e){this.overlay=e},isOutsideClicked(e){return!this.isTargetClicked(e)&&this.overlay&&!(this.overlay.isSameNode(e)||this.overlay.contains(e))},isTargetClicked(e){return this.$refs.icon&&(this.$refs.icon.isSameNode(e)||this.$refs.icon.contains(e))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.overlayVisible&&!this.selfClick&&this.isOutsideClicked(e.target)&&(this.overlayVisible=!1),this.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new ConnectedOverlayScrollHandler(this.$refs.icon,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!DomHandler.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}},computed:{containerClass(){return["p-column-filter p-fluid",{"p-column-filter-row":this.display==="row","p-column-filter-menu":this.display==="menu"}]},overlayClass(){return[this.filterMenuClass,{"p-column-filter-overlay p-component p-fluid":!0,"p-column-filter-overlay-menu":this.display==="menu","p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},showMenuButton(){return this.showMenu&&(this.display==="row"?this.type!=="boolean":!0)},overlayId(){return UniqueComponentId()},matchModes(){return this.matchModeOptions||this.$primevue.config.filterMatchModeOptions[this.type].map(e=>({label:this.$primevue.config.locale[e],value:e}))},isShowMatchModes(){return this.type!=="boolean"&&this.showMatchModes&&this.matchModes},operatorOptions(){return[{label:this.$primevue.config.locale.matchAll,value:FilterOperator.AND},{label:this.$primevue.config.locale.matchAny,value:FilterOperator.OR}]},noFilterLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.noFilter:void 0},isShowOperator(){return this.showOperator&&this.filters[this.field].operator},operator(){return this.filters[this.field].operator},fieldConstraints(){return this.filters[this.field].constraints||[this.filters[this.field]]},showRemoveIcon(){return this.fieldConstraints.length>1},removeRuleButtonLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.removeRule:void 0},addRuleButtonLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.addRule:void 0},isShowAddConstraint(){return this.showAddButton&&this.filters[this.field].operator&&this.fieldConstraints&&this.fieldConstraints.length<this.maxConstraints},clearButtonLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.clear:void 0},applyButtonLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.apply:void 0},filterMenuButtonAriaLabel(){return this.$primevue.config.locale?this.overlayVisible?this.$primevue.config.locale.showFilterMenu:this.$primevue.config.locale.hideFilterMenu:void 0},filterOperatorAriaLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.filterOperator:void 0},filterConstraintAriaLabel(){return this.$primevue.config.locale?this.$primevue.config.locale.filterConstraint:void 0}},components:{CFDropdown:script$z,CFButton:script$u,Portal:script$B,FilterSlashIcon:script$h,FilterIcon:script$E,TrashIcon:script$f,PlusIcon:script$g},directives:{focustrap:FocusTrap}};const _hoisted_1$2$1=["aria-label","aria-expanded","aria-controls"],_hoisted_2$3=["id","aria-modal"],_hoisted_3$3=["onClick","onKeydown","tabindex"];function render$4(e,t,r,s,o,n){const f=resolveComponent("CFDropdown"),c=resolveComponent("CFButton"),y=resolveComponent("Portal"),_=resolveDirective("focustrap");return openBlock(),createElementBlock("div",mergeProps({class:n.containerClass},n.getColumnPTOptions("columnFilter")),[r.display==="row"?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"p-fluid p-column-filter-element"},{...r.filterInputProps,...n.getColumnPTOptions("filterInput")}),[(openBlock(),createBlock(resolveDynamicComponent(r.filterElement),{field:r.field,filterModel:r.filters[r.field],filterCallback:n.filterCallback},null,8,["field","filterModel","filterCallback"]))],16)):createCommentVNode("",!0),n.showMenuButton?(openBlock(),createElementBlock("button",mergeProps({key:1,ref:"icon",type:"button",class:["p-column-filter-menu-button p-link",{"p-column-filter-menu-button-open":o.overlayVisible,"p-column-filter-menu-button-active":n.hasFilter()}],"aria-label":n.filterMenuButtonAriaLabel,"aria-haspopup":"true","aria-expanded":o.overlayVisible,"aria-controls":n.overlayId,onClick:t[0]||(t[0]=b=>n.toggleMenu()),onKeydown:t[1]||(t[1]=b=>n.onToggleButtonKeyDown(b))},n.getColumnPTOptions("filterMenuButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.filterIconTemplate||"FilterIcon")))],16,_hoisted_1$2$1)):createCommentVNode("",!0),r.showClearButton&&r.display==="row"?(openBlock(),createElementBlock("button",mergeProps({key:2,class:[{"p-hidden-space":!n.hasRowFilter()},"p-column-filter-clear-button p-link"],type:"button",onClick:t[2]||(t[2]=b=>n.clearFilter())},n.getColumnPTOptions("headerFilterClearButton")),[(openBlock(),createBlock(resolveDynamicComponent(r.filterClearIconTemplate||"FilterSlashIcon"),normalizeProps(guardReactiveProps(n.getColumnPTOptions("filterClearIcon"))),null,16))],16)):createCommentVNode("",!0),createVNode(y,null,{default:withCtx(()=>[createVNode(Transition$1,{name:"p-connected-overlay",onEnter:n.onOverlayEnter,onLeave:n.onOverlayLeave,onAfterLeave:n.onOverlayAfterLeave},{default:withCtx(()=>[o.overlayVisible?withDirectives((openBlock(),createElementBlock("div",mergeProps({key:0,ref:n.overlayRef,id:n.overlayId,"aria-modal":o.overlayVisible,role:"dialog",class:n.overlayClass,onKeydown:t[10]||(t[10]=withKeys((...b)=>n.hide&&n.hide(...b),["escape"])),onClick:t[11]||(t[11]=(...b)=>n.onContentClick&&n.onContentClick(...b)),onMousedown:t[12]||(t[12]=(...b)=>n.onContentMouseDown&&n.onContentMouseDown(...b))},n.getColumnPTOptions("filterOverlay")),[(openBlock(),createBlock(resolveDynamicComponent(r.filterHeaderTemplate),{field:r.field,filterModel:r.filters[r.field],filterCallback:n.filterCallback},null,8,["field","filterModel","filterCallback"])),r.display==="row"?(openBlock(),createElementBlock("ul",mergeProps({key:0,class:"p-column-filter-row-items"},n.getColumnPTOptions("filterRowItems")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.matchModes,(b,C)=>(openBlock(),createElementBlock("li",mergeProps({key:b.label,class:["p-column-filter-row-item",{"p-highlight":n.isRowMatchModeSelected(b.value)}],onClick:M=>n.onRowMatchModeChange(b.value),onKeydown:[t[3]||(t[3]=M=>n.onRowMatchModeKeyDown(M)),withKeys(withModifiers(M=>n.onRowMatchModeChange(b.value),["prevent"]),["enter"])],tabindex:C===0?"0":null},n.getColumnPTOptions("filterRowItem")),toDisplayString(b.label),17,_hoisted_3$3))),128)),createBaseVNode("li",mergeProps({class:"p-column-filter-separator"},n.getColumnPTOptions("filterInput")),null,16),createBaseVNode("li",mergeProps({class:"p-column-filter-row-item",onClick:t[4]||(t[4]=b=>n.clearFilter()),onKeydown:[t[5]||(t[5]=b=>n.onRowMatchModeKeyDown(b)),t[6]||(t[6]=withKeys(b=>e.onRowClearItemClick(),["enter"]))]},n.getColumnPTOptions("filterRowItem")),toDisplayString(n.noFilterLabel),17)],16)):(openBlock(),createElementBlock(Fragment,{key:1},[n.isShowOperator?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"p-column-filter-operator"},n.getColumnPTOptions("filterOperator")),[createVNode(f,{options:n.operatorOptions,modelValue:n.operator,"aria-label":n.filterOperatorAriaLabel,class:"p-column-filter-operator-dropdown",optionLabel:"label",optionValue:"value","onUpdate:modelValue":t[7]||(t[7]=b=>n.onOperatorChange(b)),pt:n.getColumnPTOptions("filterOperatorDropdown")},null,8,["options","modelValue","aria-label","pt"])],16)):createCommentVNode("",!0),createBaseVNode("div",mergeProps({class:"p-column-filter-constraints"},n.getColumnPTOptions("filterConstraints")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.fieldConstraints,(b,C)=>(openBlock(),createElementBlock("div",mergeProps({key:C,class:"p-column-filter-constraint"},n.getColumnPTOptions("filterConstraint")),[n.isShowMatchModes?(openBlock(),createBlock(f,{key:0,options:n.matchModes,modelValue:b.matchMode,class:"p-column-filter-matchmode-dropdown",optionLabel:"label",optionValue:"value","aria-label":n.filterConstraintAriaLabel,"onUpdate:modelValue":M=>n.onMenuMatchModeChange(M,C),pt:n.getColumnPTOptions("filterMatchModeDropdown")},null,8,["options","modelValue","aria-label","onUpdate:modelValue","pt"])):createCommentVNode("",!0),r.display==="menu"?(openBlock(),createBlock(resolveDynamicComponent(r.filterElement),{key:1,field:r.field,filterModel:b,filterCallback:n.filterCallback},null,8,["field","filterModel","filterCallback"])):createCommentVNode("",!0),createBaseVNode("div",normalizeProps(guardReactiveProps(n.getColumnPTOptions("filterRemove"))),[n.showRemoveIcon?(openBlock(),createBlock(c,{key:0,type:"button",class:"p-column-filter-remove-button p-button-text p-button-danger p-button-sm",onClick:M=>n.removeConstraint(C),label:n.removeRuleButtonLabel,pt:n.getColumnPTOptions("filterRemoveButton")},{icon:withCtx(M=>[(openBlock(),createBlock(resolveDynamicComponent(r.filterRemoveIconTemplate||"TrashIcon"),mergeProps({class:M.class},n.getColumnPTOptions("filterRemoveButton").icon),null,16,["class"]))]),_:2},1032,["onClick","label","pt"])):createCommentVNode("",!0)],16)],16))),128))],16),n.isShowAddConstraint?(openBlock(),createElementBlock("div",mergeProps({key:1,class:"p-column-filter-add-rule"},n.getColumnPTOptions("filterAddRule")),[createVNode(c,{type:"button",label:n.addRuleButtonLabel,iconPos:"left",class:"p-column-filter-add-button p-button-text p-button-sm",onClick:t[8]||(t[8]=b=>n.addConstraint()),pt:n.getColumnPTOptions("filterAddRuleButton")},{icon:withCtx(b=>[(openBlock(),createBlock(resolveDynamicComponent(r.filterAddIconTemplate||"PlusIcon"),mergeProps({class:b.class},n.getColumnPTOptions("filterAddRuleButton").icon),null,16,["class"]))]),_:1},8,["label","pt"])],16)):createCommentVNode("",!0),createBaseVNode("div",mergeProps({class:"p-column-filter-buttonbar"},n.getColumnPTOptions("filterButtonbar")),[!r.filterClearTemplate&&r.showClearButton?(openBlock(),createBlock(c,{key:0,type:"button",class:"p-button-outlined p-button-sm",label:n.clearButtonLabel,onClick:n.clearFilter,pt:n.getColumnPTOptions("filterClearButton")},null,8,["label","onClick","pt"])):(openBlock(),createBlock(resolveDynamicComponent(r.filterClearTemplate),{key:1,field:r.field,filterModel:r.filters[r.field],filterCallback:n.clearFilter},null,8,["field","filterModel","filterCallback"])),r.showApplyButton?(openBlock(),createElementBlock(Fragment,{key:2},[r.filterApplyTemplate?(openBlock(),createBlock(resolveDynamicComponent(r.filterApplyTemplate),{key:1,field:r.field,filterModel:r.filters[r.field],filterCallback:n.applyFilter},null,8,["field","filterModel","filterCallback"])):(openBlock(),createBlock(c,mergeProps({key:0,type:"button",class:"p-button-sm",label:n.applyButtonLabel,onClick:t[9]||(t[9]=b=>n.applyFilter())},n.getColumnPTOptions("filterApplyButton")),null,16,["label"]))],64)):createCommentVNode("",!0)],16)],64)),(openBlock(),createBlock(resolveDynamicComponent(r.filterFooterTemplate),{field:r.field,filterModel:r.filters[r.field],filterCallback:n.filterCallback},null,8,["field","filterModel","filterCallback"]))],16,_hoisted_2$3)),[[_,{autoFocus:!0}]]):createCommentVNode("",!0)]),_:1},8,["onEnter","onLeave","onAfterLeave"])]),_:1})],16)}script$4.render=render$4;var script$3={name:"HeaderCheckbox",extends:script$H,emits:["change"],props:{checked:null,disabled:null,column:null,headerCheckboxIconTemplate:{type:Function,default:null}},data(){return{focused:!1}},methods:{getColumnPTOptions(e){return this.ptmo(this.getColumnProp(),e,{props:this.column.props,parent:{props:this.$props,state:this.$data},context:{checked:this.checked,focused:this.focused,disabled:this.disabled}})},getColumnProp(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick(e){this.disabled||(this.$emit("change",{originalEvent:e,checked:!this.checked}),DomHandler.focus(this.$refs.input))},onFocus(){this.focused=!0},onBlur(){this.focused=!1}},computed:{headerCheckboxAriaLabel(){return this.$primevue.config.locale.aria?this.checked?this.$primevue.config.locale.aria.selectAll:this.$primevue.config.locale.aria.unselectAll:void 0}},components:{CheckIcon:script$j}};const _hoisted_1$1$1=["checked","disabled","tabindex","aria-label"];function render$3(e,t,r,s,o,n){const f=resolveComponent("CheckIcon");return openBlock(),createElementBlock("div",mergeProps({class:["p-checkbox p-component",{"p-checkbox-focused":o.focused,"p-disabled":r.disabled}],onClick:t[2]||(t[2]=(...c)=>n.onClick&&n.onClick(...c)),onKeydown:t[3]||(t[3]=withKeys(withModifiers((...c)=>n.onClick&&n.onClick(...c),["prevent"]),["space"]))},n.getColumnPTOptions("headerCheckboxWrapper")),[createBaseVNode("div",mergeProps({class:"p-hidden-accessible"},n.getColumnPTOptions("hiddenHeaderInputWrapper")),[createBaseVNode("input",mergeProps({ref:"input",type:"checkbox",checked:r.checked,disabled:r.disabled,tabindex:r.disabled?null:"0","aria-label":n.headerCheckboxAriaLabel,onFocus:t[0]||(t[0]=c=>n.onFocus(c)),onBlur:t[1]||(t[1]=c=>n.onBlur(c))},n.getColumnPTOptions("hiddenHeaderInput")),null,16,_hoisted_1$1$1)],16),createBaseVNode("div",mergeProps({ref:"box",class:["p-checkbox-box p-component",{"p-highlight":r.checked,"p-disabled":r.disabled,"p-focus":o.focused}]},n.getColumnPTOptions("headerCheckbox")),[r.headerCheckboxIconTemplate?(openBlock(),createBlock(resolveDynamicComponent(r.headerCheckboxIconTemplate),{key:0,checked:r.checked,class:"p-checkbox-icon"},null,8,["checked"])):!r.headerCheckboxIconTemplate&&r.checked?(openBlock(),createBlock(f,mergeProps({key:1,class:"p-checkbox-icon"},n.getColumnPTOptions("headerCheckboxIcon")),null,16)):createCommentVNode("",!0)],16)],16)}script$3.render=render$3;var script$2={name:"HeaderCell",extends:script$H,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{column:{type:Object,default:null},resizableColumns:{type:Boolean,default:!1},groupRowsBy:{type:[Array,String,Function],default:null},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterColumn:{type:Boolean,default:!1},reorderableColumns:{type:Boolean,default:!1},filterInputProps:{type:null,default:null},headerCheckboxIconTemplate:{type:Function,default:null}},data(){return{styleObject:{}}},mounted(){this.columnProp("frozen")&&this.updateStickyPosition()},updated(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp(e){return ObjectUtils.getVNodeProp(this.column,e)},getColumnPTOptions(e){return this.ptmo(this.getColumnProp(),e,{props:this.column.props,parent:{props:this.$props,state:this.$data}})},getColumnProp(){return this.column.props&&this.column.props.pt?this.column.props.pt:void 0},onClick(e){this.$emit("column-click",{originalEvent:e,column:this.column})},onKeyDown(e){(e.code==="Enter"||e.code==="Space")&&e.currentTarget.nodeName==="TH"&&DomHandler.hasClass(e.currentTarget,"p-sortable-column")&&(this.$emit("column-click",{originalEvent:e,column:this.column}),e.preventDefault())},onMouseDown(e){this.$emit("column-mousedown",{originalEvent:e,column:this.column})},onDragStart(e){this.$emit("column-dragstart",e)},onDragOver(e){this.$emit("column-dragover",e)},onDragLeave(e){this.$emit("column-dragleave",e)},onDrop(e){this.$emit("column-drop",e)},onResizeStart(e){this.$emit("column-resizestart",e)},getMultiSortMetaIndex(){return this.multiSortMeta.findIndex(e=>e.field===this.columnProp("field")||e.field===this.columnProp("sortField"))},getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.groupRowsBy&&this.groupRowsBy===this.groupRowSortField&&e>-1?e:e+1},isMultiSorted(){return this.sortMode==="multiple"&&this.columnProp("sortable")&&this.getMultiSortMetaIndex()>-1},isColumnSorted(){return this.sortMode==="single"?this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")):this.isMultiSorted()},updateStickyPosition(){if(this.columnProp("frozen")){if(this.columnProp("alignFrozen")==="right"){let r=0,s=this.$el.nextElementSibling;s&&(r=DomHandler.getOuterWidth(s)+parseFloat(s.style.right||0)),this.styleObject.right=r+"px"}else{let r=0,s=this.$el.previousElementSibling;s&&(r=DomHandler.getOuterWidth(s)+parseFloat(s.style.left||0)),this.styleObject.left=r+"px"}let t=this.$el.parentElement.nextElementSibling;if(t){let r=DomHandler.index(this.$el);t.children[r].style.left=this.styleObject.left,t.children[r].style.right=this.styleObject.right}}},onHeaderCheckboxChange(e){this.$emit("checkbox-change",e)}},computed:{containerClass(){return[this.filterColumn?this.columnProp("filterHeaderClass"):this.columnProp("headerClass"),this.columnProp("class"),{"p-sortable-column":this.columnProp("sortable"),"p-resizable-column":this.resizableColumns,"p-highlight":this.isColumnSorted(),"p-filter-column":this.filterColumn,"p-frozen-column":this.columnProp("frozen"),"p-reorderable-column":this.reorderableColumns}]},containerStyle(){let e=this.filterColumn?this.columnProp("filterHeaderStyle"):this.columnProp("headerStyle"),t=this.columnProp("style");return this.columnProp("frozen")?[t,e,this.styleObject]:[t,e]},sortState(){let e=!1,t=null;if(this.sortMode==="single")e=this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")),t=e?this.sortOrder:0;else if(this.sortMode==="multiple"){let r=this.getMultiSortMetaIndex();r>-1&&(e=!0,t=this.multiSortMeta[r].order)}return{sorted:e,sortOrder:t}},sortableColumnIcon(){const{sorted:e,sortOrder:t}=this.sortState;if(e){if(e&&t>0)return script$c;if(e&&t<0)return script$d}else return script$e;return null},ariaSort(){if(this.columnProp("sortable")){const{sorted:e,sortOrder:t}=this.sortState;return e&&t<0?"descending":e&&t>0?"ascending":"none"}else return null}},components:{DTHeaderCheckbox:script$3,DTColumnFilter:script$4,SortAltIcon:script$e,SortAmountUpAltIcon:script$c,SortAmountDownIcon:script$d}};const _hoisted_1$8=["tabindex","colspan","rowspan","aria-sort"];function render$2(e,t,r,s,o,n){const f=resolveComponent("DTHeaderCheckbox"),c=resolveComponent("DTColumnFilter");return openBlock(),createElementBlock("th",mergeProps({style:n.containerStyle,class:n.containerClass,tabindex:n.columnProp("sortable")?"0":null,role:"columnheader",colspan:n.columnProp("colspan"),rowspan:n.columnProp("rowspan"),"aria-sort":n.ariaSort,onClick:t[8]||(t[8]=(...y)=>n.onClick&&n.onClick(...y)),onKeydown:t[9]||(t[9]=(...y)=>n.onKeyDown&&n.onKeyDown(...y)),onMousedown:t[10]||(t[10]=(...y)=>n.onMouseDown&&n.onMouseDown(...y)),onDragstart:t[11]||(t[11]=(...y)=>n.onDragStart&&n.onDragStart(...y)),onDragover:t[12]||(t[12]=(...y)=>n.onDragOver&&n.onDragOver(...y)),onDragleave:t[13]||(t[13]=(...y)=>n.onDragLeave&&n.onDragLeave(...y)),onDrop:t[14]||(t[14]=(...y)=>n.onDrop&&n.onDrop(...y))},{...n.getColumnPTOptions("root"),...n.getColumnPTOptions("headerCell")}),[r.resizableColumns&&!n.columnProp("frozen")?(openBlock(),createElementBlock("span",mergeProps({key:0,class:"p-column-resizer",onMousedown:t[0]||(t[0]=(...y)=>n.onResizeStart&&n.onResizeStart(...y))},n.getColumnPTOptions("columnResizer")),null,16)):createCommentVNode("",!0),createBaseVNode("div",mergeProps({class:"p-column-header-content"},n.getColumnPTOptions("headerContent")),[r.column.children&&r.column.children.header?(openBlock(),createBlock(resolveDynamicComponent(r.column.children.header),{key:0,column:r.column},null,8,["column"])):createCommentVNode("",!0),n.columnProp("header")?(openBlock(),createElementBlock("span",mergeProps({key:1,class:"p-column-title"},n.getColumnPTOptions("headerTitle")),toDisplayString(n.columnProp("header")),17)):createCommentVNode("",!0),n.columnProp("sortable")?(openBlock(),createElementBlock("span",normalizeProps(mergeProps({key:2},n.getColumnPTOptions("sort"))),[(openBlock(),createBlock(resolveDynamicComponent(r.column.children&&r.column.children.sorticon||n.sortableColumnIcon),{sorted:n.sortState.sorted,sortOrder:n.sortState.sortOrder,class:"p-sortable-column-icon"},null,8,["sorted","sortOrder"]))],16)):createCommentVNode("",!0),n.isMultiSorted()?(openBlock(),createElementBlock("span",mergeProps({key:3,class:"p-sortable-column-badge"},n.getColumnPTOptions("sortBadge")),toDisplayString(n.getBadgeValue()),17)):createCommentVNode("",!0),n.columnProp("selectionMode")==="multiple"&&r.filterDisplay!=="row"?(openBlock(),createBlock(f,{key:4,checked:r.allRowsSelected,onChange:n.onHeaderCheckboxChange,disabled:r.empty,headerCheckboxIconTemplate:r.headerCheckboxIconTemplate,column:r.column,pt:e.pt},null,8,["checked","onChange","disabled","headerCheckboxIconTemplate","column","pt"])):createCommentVNode("",!0),r.filterDisplay==="menu"&&r.column.children&&r.column.children.filter?(openBlock(),createBlock(c,{key:5,field:n.columnProp("filterField")||n.columnProp("field"),type:n.columnProp("dataType"),display:"menu",showMenu:n.columnProp("showFilterMenu"),filterElement:r.column.children&&r.column.children.filter,filterHeaderTemplate:r.column.children&&r.column.children.filterheader,filterFooterTemplate:r.column.children&&r.column.children.filterfooter,filterClearTemplate:r.column.children&&r.column.children.filterclear,filterApplyTemplate:r.column.children&&r.column.children.filterapply,filterIconTemplate:r.column.children&&r.column.children.filtericon,filterAddIconTemplate:r.column.children&&r.column.children.filteraddicon,filterRemoveIconTemplate:r.column.children&&r.column.children.filterremoveicon,filterClearIconTemplate:r.column.children&&r.column.children.filterclearicon,filters:r.filters,filtersStore:r.filtersStore,filterInputProps:r.filterInputProps,onFilterChange:t[1]||(t[1]=y=>e.$emit("filter-change",y)),onFilterApply:t[2]||(t[2]=y=>e.$emit("filter-apply")),filterMenuStyle:n.columnProp("filterMenuStyle"),filterMenuClass:n.columnProp("filterMenuClass"),showOperator:n.columnProp("showFilterOperator"),showClearButton:n.columnProp("showClearButton"),showApplyButton:n.columnProp("showApplyButton"),showMatchModes:n.columnProp("showFilterMatchModes"),showAddButton:n.columnProp("showAddButton"),matchModeOptions:n.columnProp("filterMatchModeOptions"),maxConstraints:n.columnProp("maxConstraints"),onOperatorChange:t[3]||(t[3]=y=>e.$emit("operator-change",y)),onMatchmodeChange:t[4]||(t[4]=y=>e.$emit("matchmode-change",y)),onConstraintAdd:t[5]||(t[5]=y=>e.$emit("constraint-add",y)),onConstraintRemove:t[6]||(t[6]=y=>e.$emit("constraint-remove",y)),onApplyClick:t[7]||(t[7]=y=>e.$emit("apply-click",y)),pt:e.pt,column:r.column},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","pt","column"])):createCommentVNode("",!0)],16)],16,_hoisted_1$8)}script$2.render=render$2;var script$1$1={name:"TableHeader",extends:script$H,emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{columnGroup:{type:null,default:null},columns:{type:null,default:null},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},resizableColumns:{type:Boolean,default:!1},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},reorderableColumns:{type:Boolean,default:!1},filterInputProps:{type:null,default:null},headerCheckboxIconTemplate:{type:Function,default:null}},methods:{columnProp(e,t){return ObjectUtils.getVNodeProp(e,t)},getColumnGroupPTOptions(e){return this.ptmo(this.getColumnGroupProps(),e,{props:this.getColumnGroupProps(),parent:{props:this.$props,state:this.$data}})},getColumnGroupProps(){return this.columnGroup&&this.columnGroup.props&&this.columnGroup.props.pt?this.columnGroup.props.pt:void 0},getRowPTOptions(e,t){return this.ptmo(this.getRowProp(e),t,{props:e.props,parent:{props:this.$props,state:this.$data}})},getRowProp(e){return e.props&&e.props.pt?e.props.pt:void 0},getColumnPTOptions(e,t){return this.ptmo(this.getColumnProp(e),t,{props:e.props,parent:{props:this.$props,state:this.$data}})},getColumnProp(e){return e.props&&e.props.pt?e.props.pt:void 0},getFilterColumnHeaderClass(e){return["p-filter-column",this.columnProp(e,"filterHeaderClass"),this.columnProp(e,"class"),{"p-frozen-column":this.columnProp(e,"frozen")}]},getFilterColumnHeaderStyle(e){return[this.columnProp(e,"filterHeaderStyle"),this.columnProp(e,"style")]},getHeaderRows(){let e=[],t=this.columnGroup;if(t.children&&t.children.default){for(let r of t.children.default())r.type.name==="Row"?e.push(r):r.children&&r.children instanceof Array&&(e=r.children);return e}},getHeaderColumns(e){let t=[];if(e.children&&e.children.default)return e.children.default().forEach(r=>{r.children&&r.children instanceof Array?t=[...t,...r.children]:r.type.name==="Column"&&t.push(r)}),t}},components:{DTHeaderCell:script$2,DTHeaderCheckbox:script$3,DTColumnFilter:script$4}};function render$1(e,t,r,s,o,n){const f=resolveComponent("DTHeaderCell"),c=resolveComponent("DTHeaderCheckbox"),y=resolveComponent("DTColumnFilter");return openBlock(),createElementBlock("thead",mergeProps({class:"p-datatable-thead",role:"rowgroup"},{...e.ptm("thead"),...n.getColumnGroupPTOptions("root")}),[r.columnGroup?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(n.getHeaderRows(),(_,b)=>(openBlock(),createElementBlock("tr",mergeProps({key:b,role:"row"},n.getRowPTOptions(_,"root")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.getHeaderColumns(_),(C,M)=>(openBlock(),createElementBlock(Fragment,{key:n.columnProp(C,"columnKey")||n.columnProp(C,"field")||M},[!n.columnProp(C,"hidden")&&(r.rowGroupMode!=="subheader"||r.groupRowsBy!==n.columnProp(C,"field"))&&typeof C.children!="string"?(openBlock(),createBlock(f,{key:0,column:C,onColumnClick:t[23]||(t[23]=E=>e.$emit("column-click",E)),onColumnMousedown:t[24]||(t[24]=E=>e.$emit("column-mousedown",E)),groupRowsBy:r.groupRowsBy,groupRowSortField:r.groupRowSortField,sortMode:r.sortMode,sortField:r.sortField,sortOrder:r.sortOrder,multiSortMeta:r.multiSortMeta,allRowsSelected:r.allRowsSelected,empty:r.empty,onCheckboxChange:t[25]||(t[25]=E=>e.$emit("checkbox-change",E)),filters:r.filters,filterDisplay:r.filterDisplay,filtersStore:r.filtersStore,onFilterChange:t[26]||(t[26]=E=>e.$emit("filter-change",E)),onFilterApply:t[27]||(t[27]=E=>e.$emit("filter-apply")),onOperatorChange:t[28]||(t[28]=E=>e.$emit("operator-change",E)),onMatchmodeChange:t[29]||(t[29]=E=>e.$emit("matchmode-change",E)),onConstraintAdd:t[30]||(t[30]=E=>e.$emit("constraint-add",E)),onConstraintRemove:t[31]||(t[31]=E=>e.$emit("constraint-remove",E)),onApplyClick:t[32]||(t[32]=E=>e.$emit("apply-click",E)),headerCheckboxIconTemplate:r.headerCheckboxIconTemplate,pt:e.pt},null,8,["column","groupRowsBy","groupRowSortField","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","headerCheckboxIconTemplate","pt"])):createCommentVNode("",!0)],64))),128))],16))),128)):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("tr",mergeProps({role:"row"},e.ptm("headerRow")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.columns,(_,b)=>(openBlock(),createElementBlock(Fragment,{key:n.columnProp(_,"columnKey")||n.columnProp(_,"field")||b},[!n.columnProp(_,"hidden")&&(r.rowGroupMode!=="subheader"||r.groupRowsBy!==n.columnProp(_,"field"))?(openBlock(),createBlock(f,{key:0,column:_,onColumnClick:t[0]||(t[0]=C=>e.$emit("column-click",C)),onColumnMousedown:t[1]||(t[1]=C=>e.$emit("column-mousedown",C)),onColumnDragstart:t[2]||(t[2]=C=>e.$emit("column-dragstart",C)),onColumnDragover:t[3]||(t[3]=C=>e.$emit("column-dragover",C)),onColumnDragleave:t[4]||(t[4]=C=>e.$emit("column-dragleave",C)),onColumnDrop:t[5]||(t[5]=C=>e.$emit("column-drop",C)),groupRowsBy:r.groupRowsBy,groupRowSortField:r.groupRowSortField,reorderableColumns:r.reorderableColumns,resizableColumns:r.resizableColumns,onColumnResizestart:t[6]||(t[6]=C=>e.$emit("column-resizestart",C)),sortMode:r.sortMode,sortField:r.sortField,sortOrder:r.sortOrder,multiSortMeta:r.multiSortMeta,allRowsSelected:r.allRowsSelected,empty:r.empty,onCheckboxChange:t[7]||(t[7]=C=>e.$emit("checkbox-change",C)),filters:r.filters,filterDisplay:r.filterDisplay,filtersStore:r.filtersStore,filterInputProps:r.filterInputProps,onFilterChange:t[8]||(t[8]=C=>e.$emit("filter-change",C)),onFilterApply:t[9]||(t[9]=C=>e.$emit("filter-apply")),onOperatorChange:t[10]||(t[10]=C=>e.$emit("operator-change",C)),onMatchmodeChange:t[11]||(t[11]=C=>e.$emit("matchmode-change",C)),onConstraintAdd:t[12]||(t[12]=C=>e.$emit("constraint-add",C)),onConstraintRemove:t[13]||(t[13]=C=>e.$emit("constraint-remove",C)),onApplyClick:t[14]||(t[14]=C=>e.$emit("apply-click",C)),headerCheckboxIconTemplate:r.headerCheckboxIconTemplate,pt:e.pt},null,8,["column","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore","filterInputProps","headerCheckboxIconTemplate","pt"])):createCommentVNode("",!0)],64))),128))],16),r.filterDisplay==="row"?(openBlock(),createElementBlock("tr",mergeProps({key:0,role:"row"},e.ptm("headerRow")),[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.columns,(_,b)=>(openBlock(),createElementBlock(Fragment,{key:n.columnProp(_,"columnKey")||n.columnProp(_,"field")||b},[!n.columnProp(_,"hidden")&&(r.rowGroupMode!=="subheader"||r.groupRowsBy!==n.columnProp(_,"field"))?(openBlock(),createElementBlock("th",mergeProps({key:0,style:n.getFilterColumnHeaderStyle(_),class:n.getFilterColumnHeaderClass(_)},{...n.getColumnPTOptions(_,"root"),...n.getColumnPTOptions(_,"headerCell")}),[n.columnProp(_,"selectionMode")==="multiple"?(openBlock(),createBlock(c,{key:0,checked:r.allRowsSelected,disabled:r.empty,onChange:t[15]||(t[15]=C=>e.$emit("checkbox-change",C)),column:_,pt:e.pt},null,8,["checked","disabled","column","pt"])):createCommentVNode("",!0),_.children&&_.children.filter?(openBlock(),createBlock(y,{key:1,field:n.columnProp(_,"filterField")||n.columnProp(_,"field"),type:n.columnProp(_,"dataType"),display:"row",showMenu:n.columnProp(_,"showFilterMenu"),filterElement:_.children&&_.children.filter,filterHeaderTemplate:_.children&&_.children.filterheader,filterFooterTemplate:_.children&&_.children.filterfooter,filterClearTemplate:_.children&&_.children.filterclear,filterApplyTemplate:_.children&&_.children.filterapply,filterIconTemplate:_.children&&_.children.filtericon,filterAddIconTemplate:_.children&&_.children.filteraddicon,filterRemoveIconTemplate:_.children&&_.children.filterremoveicon,filterClearIconTemplate:_.children&&_.children.filterclearicon,filters:r.filters,filtersStore:r.filtersStore,filterInputProps:r.filterInputProps,onFilterChange:t[16]||(t[16]=C=>e.$emit("filter-change",C)),onFilterApply:t[17]||(t[17]=C=>e.$emit("filter-apply")),filterMenuStyle:n.columnProp(_,"filterMenuStyle"),filterMenuClass:n.columnProp(_,"filterMenuClass"),showOperator:n.columnProp(_,"showFilterOperator"),showClearButton:n.columnProp(_,"showClearButton"),showApplyButton:n.columnProp(_,"showApplyButton"),showMatchModes:n.columnProp(_,"showFilterMatchModes"),showAddButton:n.columnProp(_,"showAddButton"),matchModeOptions:n.columnProp(_,"filterMatchModeOptions"),maxConstraints:n.columnProp(_,"maxConstraints"),onOperatorChange:t[18]||(t[18]=C=>e.$emit("operator-change",C)),onMatchmodeChange:t[19]||(t[19]=C=>e.$emit("matchmode-change",C)),onConstraintAdd:t[20]||(t[20]=C=>e.$emit("constraint-add",C)),onConstraintRemove:t[21]||(t[21]=C=>e.$emit("constraint-remove",C)),onApplyClick:t[22]||(t[22]=C=>e.$emit("apply-click",C)),pt:e.pt,column:_},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filterIconTemplate","filterAddIconTemplate","filterRemoveIconTemplate","filterClearIconTemplate","filters","filtersStore","filterInputProps","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints","pt","column"])):createCommentVNode("",!0)],16)):createCommentVNode("",!0)],64))),128))],16)):createCommentVNode("",!0)],64))],16)}script$1$1.render=render$1;var script$b={name:"DataTable",extends:script$H,emits:["value-change","update:first","update:rows","page","update:sortField","update:sortOrder","update:multiSortMeta","sort","filter","row-click","row-dblclick","update:selection","row-select","row-unselect","update:contextMenuSelection","row-contextmenu","row-unselect-all","row-select-all","select-all-change","column-resize-end","column-reorder","row-reorder","update:expandedRows","row-collapse","row-expand","update:expandedRowGroups","rowgroup-collapse","rowgroup-expand","update:filters","state-restore","state-save","cell-edit-init","cell-edit-complete","cell-edit-cancel","update:editingRows","row-edit-init","row-edit-save","row-edit-cancel"],props:{value:{type:Array,default:null},dataKey:{type:[String,Function],default:null},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:[Object,String],default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},lazy:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},defaultSortOrder:{type:Number,default:1},multiSortMeta:{type:Array,default:null},sortMode:{type:String,default:"single"},removableSort:{type:Boolean,default:!1},filters:{type:Object,default:null},filterDisplay:{type:String,default:null},globalFilterFields:{type:Array,default:null},filterLocale:{type:String,default:void 0},selection:{type:[Array,Object],default:null},selectionMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},metaKeySelection:{type:Boolean,default:!0},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},selectAll:{type:Boolean,default:null},rowHover:{type:Boolean,default:!1},csvSeparator:{type:String,default:","},exportFilename:{type:String,default:"download"},exportFunction:{type:Function,default:null},resizableColumns:{type:Boolean,default:!1},columnResizeMode:{type:String,default:"fit"},reorderableColumns:{type:Boolean,default:!1},expandedRows:{type:Array,default:null},expandedRowIcon:{type:String,default:void 0},collapsedRowIcon:{type:String,default:void 0},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String,Function],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},stateStorage:{type:String,default:"session"},stateKey:{type:String,default:null},editMode:{type:String,default:null},editingRows:{type:Array,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},scrollable:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},scrollHeight:{type:String,default:null},frozenValue:{type:Array,default:null},responsiveLayout:{type:String,default:"scroll"},breakpoint:{type:String,default:"960px"},showGridlines:{type:Boolean,default:!1},stripedRows:{type:Boolean,default:!1},tableStyle:{type:null,default:null},tableClass:{type:String,default:null},tableProps:{type:null,default:null},filterInputProps:{type:null,default:null}},data(){return{d_first:this.first,d_rows:this.rows,d_sortField:this.sortField,d_sortOrder:this.sortOrder,d_multiSortMeta:this.multiSortMeta?[...this.multiSortMeta]:[],d_groupRowsSortMeta:null,d_selectionKeys:null,d_expandedRowKeys:null,d_columnOrder:null,d_editingRowKeys:null,d_editingMeta:{},d_filters:this.cloneFilters(this.filters)}},rowTouched:!1,anchorRowIndex:null,rangeRowIndex:null,documentColumnResizeListener:null,documentColumnResizeEndListener:null,lastResizeHelperX:null,resizeColumnElement:null,columnResizing:!1,colReorderIconWidth:null,colReorderIconHeight:null,draggedColumn:null,draggedRowIndex:null,droppedRowIndex:null,rowDragging:null,columnWidthsState:null,tableWidthState:null,columnWidthsRestored:!1,watch:{first(e){this.d_first=e},rows(e){this.d_rows=e},sortField(e){this.d_sortField=e},sortOrder(e){this.d_sortOrder=e},multiSortMeta(e){this.d_multiSortMeta=e},selection:{immediate:!0,handler(e){this.dataKey&&this.updateSelectionKeys(e)}},expandedRows(e){this.dataKey&&this.updateExpandedRowKeys(e)},editingRows(e){this.dataKey&&this.updateEditingRowKeys(e)},filters:{deep:!0,handler:function(e){this.d_filters=this.cloneFilters(e)}}},beforeMount(){this.isStateful()&&this.restoreState()},mounted(){this.$el.setAttribute(this.attributeSelector,""),this.responsiveLayout==="stack"&&!this.scrollable&&this.createResponsiveStyle(),this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},beforeUnmount(){this.unbindColumnResizeEvents(),this.destroyStyleElement(),this.destroyResponsiveStyle()},updated(){this.isStateful()&&this.saveState(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},methods:{columnProp(e,t){return ObjectUtils.getVNodeProp(e,t)},onPage(e){this.clearEditingMetaData(),this.d_first=e.first,this.d_rows=e.rows;let t=this.createLazyLoadEvent(e);t.pageCount=e.pageCount,t.page=e.page,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",t),this.$emit("value-change",this.processedData)},onColumnHeaderClick(e){const t=e.originalEvent,r=e.column;if(this.columnProp(r,"sortable")){const s=t.target,o=this.columnProp(r,"sortField")||this.columnProp(r,"field");(DomHandler.hasClass(s,"p-sortable-column")||DomHandler.hasClass(s,"p-column-title")||DomHandler.hasClass(s,"p-column-header-content")||DomHandler.hasClass(s,"p-sortable-column-icon")||DomHandler.hasClass(s.parentElement,"p-sortable-column-icon"))&&(DomHandler.clearSelection(),this.sortMode==="single"?(this.d_sortField===o?this.removableSort&&this.d_sortOrder*-1===this.defaultSortOrder?(this.d_sortOrder=null,this.d_sortField=null):this.d_sortOrder=this.d_sortOrder*-1:(this.d_sortOrder=this.defaultSortOrder,this.d_sortField=o),this.$emit("update:sortField",this.d_sortField),this.$emit("update:sortOrder",this.d_sortOrder),this.resetPage()):this.sortMode==="multiple"&&(t.metaKey||t.ctrlKey||(this.d_multiSortMeta=this.d_multiSortMeta.filter(f=>f.field===o)),this.addMultiSortField(o),this.$emit("update:multiSortMeta",this.d_multiSortMeta)),this.$emit("sort",this.createLazyLoadEvent(t)),this.$emit("value-change",this.processedData))}},sortSingle(e){if(this.clearEditingMetaData(),this.groupRowsBy&&this.groupRowsBy===this.sortField)return this.d_multiSortMeta=[{field:this.sortField,order:this.sortOrder||this.defaultSortOrder},{field:this.d_sortField,order:this.d_sortOrder}],this.sortMultiple(e);let t=[...e];return t.sort((r,s)=>{let o=ObjectUtils.resolveFieldData(r,this.d_sortField),n=ObjectUtils.resolveFieldData(s,this.d_sortField),f=null;return o==null&&n!=null?f=-1:o!=null&&n==null?f=1:o==null&&n==null?f=0:typeof o=="string"&&typeof n=="string"?f=o.localeCompare(n,void 0,{numeric:!0}):f=o<n?-1:o>n?1:0,this.d_sortOrder*f}),t},sortMultiple(e){if(this.clearEditingMetaData(),this.groupRowsBy&&(this.d_groupRowsSortMeta||this.d_multiSortMeta.length&&this.groupRowsBy===this.d_multiSortMeta[0].field)){const r=this.d_multiSortMeta[0];!this.d_groupRowsSortMeta&&(this.d_groupRowsSortMeta=r),r.field!==this.d_groupRowsSortMeta.field&&(this.d_multiSortMeta=[this.d_groupRowsSortMeta,...this.d_multiSortMeta])}let t=[...e];return t.sort((r,s)=>this.multisortField(r,s,0)),t},multisortField(e,t,r){const s=ObjectUtils.resolveFieldData(e,this.d_multiSortMeta[r].field),o=ObjectUtils.resolveFieldData(t,this.d_multiSortMeta[r].field);let n=null;if(typeof s=="string"||s instanceof String){if(s.localeCompare&&s!==o)return this.d_multiSortMeta[r].order*s.localeCompare(o,void 0,{numeric:!0})}else n=s<o?-1:1;return s===o?this.d_multiSortMeta.length-1>r?this.multisortField(e,t,r+1):0:this.d_multiSortMeta[r].order*n},addMultiSortField(e){let t=this.d_multiSortMeta.findIndex(r=>r.field===e);t>=0?this.removableSort&&this.d_multiSortMeta[t].order*-1===this.defaultSortOrder?this.d_multiSortMeta.splice(t,1):this.d_multiSortMeta[t]={field:e,order:this.d_multiSortMeta[t].order*-1}:this.d_multiSortMeta.push({field:e,order:this.defaultSortOrder}),this.d_multiSortMeta=[...this.d_multiSortMeta]},filter(e){if(!e)return;this.clearEditingMetaData();let t;this.filters.global&&(t=this.globalFilterFields||this.columns.map(o=>this.columnProp(o,"filterField")||this.columnProp(o,"field")));let r=[];for(let o=0;o<e.length;o++){let n=!0,f=!1,c=!1;for(let _ in this.filters)if(Object.prototype.hasOwnProperty.call(this.filters,_)&&_!=="global"){c=!0;let b=_,C=this.filters[b];if(C.operator){for(let M of C.constraints)if(n=this.executeLocalFilter(b,e[o],M),C.operator===FilterOperator.OR&&n||C.operator===FilterOperator.AND&&!n)break}else n=this.executeLocalFilter(b,e[o],C);if(!n)break}if(this.filters.global&&!f&&t)for(let _=0;_<t.length;_++){let b=t[_];if(f=FilterService.filters[this.filters.global.matchMode||FilterMatchMode.CONTAINS](ObjectUtils.resolveFieldData(e[o],b),this.filters.global.value,this.filterLocale),f)break}let y;this.filters.global?y=c?c&&n&&f:f:y=c&&n,y&&r.push(e[o])}r.length===this.value.length&&(r=e);let s=this.createLazyLoadEvent();return s.filteredValue=r,this.$emit("filter",s),this.$emit("value-change",r),r},executeLocalFilter(e,t,r){let s=r.value,o=r.matchMode||FilterMatchMode.STARTS_WITH,n=ObjectUtils.resolveFieldData(t,e),f=FilterService.filters[o];return f(n,s,this.filterLocale)},onRowClick(e){const t=e.originalEvent,r=e.index,s=this.$refs.bodyRef&&this.$refs.bodyRef.$el,o=DomHandler.findSingle(s,'tr.p-selectable-row[tabindex="0"]');if(!DomHandler.isClickable(t.target)){if(this.$emit("row-click",e),this.selectionMode){const n=e.data,f=this.d_first+e.index;if(this.isMultipleSelectionMode()&&t.shiftKey&&this.anchorRowIndex!=null)DomHandler.clearSelection(),this.rangeRowIndex=f,this.selectRange(t);else{const c=this.isSelected(n),y=this.rowTouched?!1:this.metaKeySelection;if(this.anchorRowIndex=f,this.rangeRowIndex=f,y){let _=t.metaKey||t.ctrlKey;if(c&&_){if(this.isSingleSelectionMode())this.$emit("update:selection",null);else{const b=this.findIndexInSelection(n),C=this.selection.filter((M,E)=>E!=b);this.$emit("update:selection",C)}this.$emit("row-unselect",{originalEvent:t,data:n,index:f,type:"row"})}else{if(this.isSingleSelectionMode())this.$emit("update:selection",n);else if(this.isMultipleSelectionMode()){let b=_?this.selection||[]:[];b=[...b,n],this.$emit("update:selection",b)}this.$emit("row-select",{originalEvent:t,data:n,index:f,type:"row"})}}else if(this.selectionMode==="single")c?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:t,data:n,index:f,type:"row"})):(this.$emit("update:selection",n),this.$emit("row-select",{originalEvent:t,data:n,index:f,type:"row"}));else if(this.selectionMode==="multiple")if(c){const _=this.findIndexInSelection(n),b=this.selection.filter((C,M)=>M!=_);this.$emit("update:selection",b),this.$emit("row-unselect",{originalEvent:t,data:n,index:f,type:"row"})}else{const _=this.selection?[...this.selection,n]:[n];this.$emit("update:selection",_),this.$emit("row-select",{originalEvent:t,data:n,index:f,type:"row"})}}}this.rowTouched=!1,o&&(o.tabIndex="-1",DomHandler.find(s,"tr.p-selectable-row")[r].tabIndex="0")}},onRowDblClick(e){const t=e.originalEvent;DomHandler.isClickable(t.target)||this.$emit("row-dblclick",e)},onRowRightClick(e){this.contextMenu&&(DomHandler.clearSelection(),e.originalEvent.target.focus()),this.$emit("update:contextMenuSelection",e.data),this.$emit("row-contextmenu",e)},onRowTouchEnd(){this.rowTouched=!0},onRowKeyDown(e,t){const r=e.originalEvent,s=e.data,o=e.index,n=r.metaKey||r.ctrlKey;if(this.selectionMode){const f=r.target;switch(r.code){case"ArrowDown":this.onArrowDownKey(r,f,o,t);break;case"ArrowUp":this.onArrowUpKey(r,f,o,t);break;case"Home":this.onHomeKey(r,f,o,t);break;case"End":this.onEndKey(r,f,o,t);break;case"Enter":this.onEnterKey(r,s,o);break;case"Space":this.onSpaceKey(r,s,o,t);break;case"Tab":this.onTabKey(r,o);break;default:if(r.code==="KeyA"&&n){const c=this.dataToRender(t.rows);this.$emit("update:selection",c)}break}}},onArrowDownKey(e,t,r,s){const o=this.findNextSelectableRow(t);if(o&&this.focusRowChange(t,o),e.shiftKey){const n=this.dataToRender(s.rows),f=r+1>=n.length?n.length-1:r+1;this.onRowClick({originalEvent:e,data:n[f],index:f})}e.preventDefault()},onArrowUpKey(e,t,r,s){const o=this.findPrevSelectableRow(t);if(o&&this.focusRowChange(t,o),e.shiftKey){const n=this.dataToRender(s.rows),f=r-1<=0?0:r-1;this.onRowClick({originalEvent:e,data:n[f],index:f})}e.preventDefault()},onHomeKey(e,t,r,s){const o=this.findFirstSelectableRow();if(o&&this.focusRowChange(t,o),e.ctrlKey&&e.shiftKey){const n=this.dataToRender(s.rows);this.$emit("update:selection",n.slice(0,r+1))}e.preventDefault()},onEndKey(e,t,r,s){const o=this.findLastSelectableRow();if(o&&this.focusRowChange(t,o),e.ctrlKey&&e.shiftKey){const n=this.dataToRender(s.rows);this.$emit("update:selection",n.slice(r,n.length))}e.preventDefault()},onEnterKey(e,t,r){this.onRowClick({originalEvent:e,data:t,index:r}),e.preventDefault()},onSpaceKey(e,t,r,s){if(this.onEnterKey(e,t,r),e.shiftKey&&this.selection!==null){const o=this.dataToRender(s.rows);let n;if(this.selection.length>0){let c,y;c=ObjectUtils.findIndexInList(this.selection[0],o),y=ObjectUtils.findIndexInList(this.selection[this.selection.length-1],o),n=r<=c?y:c}else n=ObjectUtils.findIndexInList(this.selection,o);const f=n!==r?o.slice(Math.min(n,r),Math.max(n,r)+1):t;this.$emit("update:selection",f)}},onTabKey(e,t){const r=this.$refs.bodyRef&&this.$refs.bodyRef.$el,s=DomHandler.find(r,"tr.p-selectable-row");if(e.code==="Tab"&&s&&s.length>0){const o=DomHandler.findSingle(r,"tr.p-highlight"),n=DomHandler.findSingle(r,'tr.p-selectable-row[tabindex="0"]');o?(o.tabIndex="0",n&&n!==o&&(n.tabIndex="-1")):(s[0].tabIndex="0",n!==s[0]&&(s[t].tabIndex="-1"))}},findNextSelectableRow(e){let t=e.nextElementSibling;return t?DomHandler.hasClass(t,"p-selectable-row")?t:this.findNextSelectableRow(t):null},findPrevSelectableRow(e){let t=e.previousElementSibling;return t?DomHandler.hasClass(t,"p-selectable-row")?t:this.findPrevSelectableRow(t):null},findFirstSelectableRow(){return DomHandler.findSingle(this.$refs.table,".p-selectable-row")},findLastSelectableRow(){const e=DomHandler.find(this.$refs.table,".p-selectable-row");return e?e[e.length-1]:null},focusRowChange(e,t){e.tabIndex="-1",t.tabIndex="0",DomHandler.focus(t)},toggleRowWithRadio(e){const t=e.data;this.isSelected(t)?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:t,index:e.index,type:"radiobutton"})):(this.$emit("update:selection",t),this.$emit("row-select",{originalEvent:e.originalEvent,data:t,index:e.index,type:"radiobutton"}))},toggleRowWithCheckbox(e){const t=e.data;if(this.isSelected(t)){const r=this.findIndexInSelection(t),s=this.selection.filter((o,n)=>n!=r);this.$emit("update:selection",s),this.$emit("row-unselect",{originalEvent:e.originalEvent,data:t,index:e.index,type:"checkbox"})}else{let r=this.selection?[...this.selection]:[];r=[...r,t],this.$emit("update:selection",r),this.$emit("row-select",{originalEvent:e.originalEvent,data:t,index:e.index,type:"checkbox"})}},toggleRowsWithCheckbox(e){if(this.selectAll!==null)this.$emit("select-all-change",e);else{const{originalEvent:t,checked:r}=e;let s=[];r?(s=this.frozenValue?[...this.frozenValue,...this.processedData]:this.processedData,this.$emit("row-select-all",{originalEvent:t,data:s})):this.$emit("row-unselect-all",{originalEvent:t}),this.$emit("update:selection",s)}},isSingleSelectionMode(){return this.selectionMode==="single"},isMultipleSelectionMode(){return this.selectionMode==="multiple"},isSelected(e){return e&&this.selection?this.dataKey?this.d_selectionKeys?this.d_selectionKeys[ObjectUtils.resolveFieldData(e,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1},findIndexInSelection(e){return this.findIndex(e,this.selection)},findIndex(e,t){let r=-1;if(t&&t.length){for(let s=0;s<t.length;s++)if(this.equals(e,t[s])){r=s;break}}return r},updateSelectionKeys(e){if(this.d_selectionKeys={},Array.isArray(e))for(let t of e)this.d_selectionKeys[String(ObjectUtils.resolveFieldData(t,this.dataKey))]=1;else this.d_selectionKeys[String(ObjectUtils.resolveFieldData(e,this.dataKey))]=1},updateExpandedRowKeys(e){if(e&&e.length){this.d_expandedRowKeys={};for(let t of e)this.d_expandedRowKeys[String(ObjectUtils.resolveFieldData(t,this.dataKey))]=1}else this.d_expandedRowKeys=null},updateEditingRowKeys(e){if(e&&e.length){this.d_editingRowKeys={};for(let t of e)this.d_editingRowKeys[String(ObjectUtils.resolveFieldData(t,this.dataKey))]=1}else this.d_editingRowKeys=null},equals(e,t){return this.compareSelectionBy==="equals"?e===t:ObjectUtils.equals(e,t,this.dataKey)},selectRange(e){let t,r;this.rangeRowIndex>this.anchorRowIndex?(t=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(t=this.rangeRowIndex,r=this.anchorRowIndex):(t=this.rangeRowIndex,r=this.rangeRowIndex),this.lazy&&this.paginator&&(t-=this.first,r-=this.first);const s=this.processedData;let o=[];for(let n=t;n<=r;n++){let f=s[n];o.push(f),this.$emit("row-select",{originalEvent:e,data:f,type:"row"})}this.$emit("update:selection",o)},exportCSV(e,t){let r="\uFEFF";t||(t=this.processedData,e&&e.selectionOnly?t=this.selection||[]:this.frozenValue&&(t=t?[...this.frozenValue,...t]:this.frozenValue));let s=!1;for(let n=0;n<this.columns.length;n++){let f=this.columns[n];this.columnProp(f,"exportable")!==!1&&this.columnProp(f,"field")&&(s?r+=this.csvSeparator:s=!0,r+='"'+(this.columnProp(f,"exportHeader")||this.columnProp(f,"header")||this.columnProp(f,"field"))+'"')}t&&t.forEach(n=>{r+=`
`;let f=!1;for(let c=0;c<this.columns.length;c++){let y=this.columns[c];if(this.columnProp(y,"exportable")!==!1&&this.columnProp(y,"field")){f?r+=this.csvSeparator:f=!0;let _=ObjectUtils.resolveFieldData(n,this.columnProp(y,"field"));_!=null?this.exportFunction?_=this.exportFunction({data:_,field:this.columnProp(y,"field")}):_=String(_).replace(/"/g,'""'):_="",r+='"'+_+'"'}}});let o=!1;for(let n=0;n<this.columns.length;n++){let f=this.columns[n];n===0&&(r+=`
`),this.columnProp(f,"exportable")!==!1&&this.columnProp(f,"exportFooter")&&(o?r+=this.csvSeparator:o=!0,r+='"'+(this.columnProp(f,"exportFooter")||this.columnProp(f,"footer")||this.columnProp(f,"field"))+'"')}DomHandler.exportCSV(r,this.exportFilename)},resetPage(){this.d_first=0,this.$emit("update:first",this.d_first)},onColumnResizeStart(e){let t=DomHandler.getOffset(this.$el).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizeHelperX=e.pageX-t+this.$el.scrollLeft,this.bindColumnResizeEvents()},onColumnResize(e){let t=DomHandler.getOffset(this.$el).left;DomHandler.addClass(this.$el,"p-unselectable-text"),this.$refs.resizeHelper.style.height=this.$el.offsetHeight+"px",this.$refs.resizeHelper.style.top="0px",this.$refs.resizeHelper.style.left=e.pageX-t+this.$el.scrollLeft+"px",this.$refs.resizeHelper.style.display="block"},onColumnResizeEnd(){let e=this.$refs.resizeHelper.offsetLeft-this.lastResizeHelperX,t=this.resizeColumnElement.offsetWidth,r=t+e,s=this.resizeColumnElement.style.minWidth||15;if(t+e>parseInt(s,10)){if(this.columnResizeMode==="fit"){let n=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&n>15&&this.resizeTableCells(r,n)}else if(this.columnResizeMode==="expand"){const o=this.$refs.table.offsetWidth+e+"px",n=f=>{f&&(f.style.width=f.style.minWidth=o)};if(n(this.$refs.table),!this.virtualScrollerDisabled){const f=this.$refs.bodyRef&&this.$refs.bodyRef.$el,c=this.$refs.frozenBodyRef&&this.$refs.frozenBodyRef.$el;n(f),n(c)}this.resizeTableCells(r)}this.$emit("column-resize-end",{element:this.resizeColumnElement,delta:e})}this.$refs.resizeHelper.style.display="none",this.resizeColumn=null,DomHandler.removeClass(this.$el,"p-unselectable-text"),this.unbindColumnResizeEvents(),this.isStateful()&&this.saveState()},resizeTableCells(e,t){let r=DomHandler.index(this.resizeColumnElement),s=[];DomHandler.find(this.$refs.table,".p-datatable-thead > tr > th").forEach(c=>s.push(DomHandler.getOuterWidth(c))),this.destroyStyleElement(),this.createStyleElement();let n="",f=`.p-datatable[${this.attributeSelector}] > .p-datatable-wrapper ${this.virtualScrollerDisabled?"":"> .p-virtualscroller"} > .p-datatable-table`;s.forEach((c,y)=>{let _=y===r?e:t&&y===r+1?t:c,b=`width: ${_}px !important; max-width: ${_}px !important`;n+=`
                    ${f} > .p-datatable-thead > tr > th:nth-child(${y+1}),
                    ${f} > .p-datatable-tbody > tr > td:nth-child(${y+1}),
                    ${f} > .p-datatable-tfoot > tr > td:nth-child(${y+1}) {
                        ${b}
                    }
                `}),this.styleElement.innerHTML=n},bindColumnResizeEvents(){this.documentColumnResizeListener||(this.documentColumnResizeListener=document.addEventListener("mousemove",()=>{this.columnResizing&&this.onColumnResize(event)})),this.documentColumnResizeEndListener||(this.documentColumnResizeEndListener=document.addEventListener("mouseup",()=>{this.columnResizing&&(this.columnResizing=!1,this.onColumnResizeEnd())}))},unbindColumnResizeEvents(){this.documentColumnResizeListener&&(document.removeEventListener("document",this.documentColumnResizeListener),this.documentColumnResizeListener=null),this.documentColumnResizeEndListener&&(document.removeEventListener("document",this.documentColumnResizeEndListener),this.documentColumnResizeEndListener=null)},onColumnHeaderMouseDown(e){const t=e.originalEvent,r=e.column;this.reorderableColumns&&this.columnProp(r,"reorderableColumn")!==!1&&(t.target.nodeName==="INPUT"||t.target.nodeName==="TEXTAREA"||DomHandler.hasClass(t.target,"p-column-resizer")?t.currentTarget.draggable=!1:t.currentTarget.draggable=!0)},onColumnHeaderDragStart(e){if(this.columnResizing){e.preventDefault();return}this.colReorderIconWidth=DomHandler.getHiddenElementOuterWidth(this.$refs.reorderIndicatorUp),this.colReorderIconHeight=DomHandler.getHiddenElementOuterHeight(this.$refs.reorderIndicatorUp),this.draggedColumn=this.findParentHeader(e.target),e.dataTransfer.setData("text","b")},onColumnHeaderDragOver(e){let t=this.findParentHeader(e.target);if(this.reorderableColumns&&this.draggedColumn&&t){e.preventDefault();let r=DomHandler.getOffset(this.$el),s=DomHandler.getOffset(t);if(this.draggedColumn!==t){let o=s.left-r.left,n=s.left+t.offsetWidth/2;this.$refs.reorderIndicatorUp.style.top=s.top-r.top-(this.colReorderIconHeight-1)+"px",this.$refs.reorderIndicatorDown.style.top=s.top-r.top+t.offsetHeight+"px",e.pageX>n?(this.$refs.reorderIndicatorUp.style.left=o+t.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=o+t.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=1):(this.$refs.reorderIndicatorUp.style.left=o-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=o-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=-1),this.$refs.reorderIndicatorUp.style.display="block",this.$refs.reorderIndicatorDown.style.display="block"}}},onColumnHeaderDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none")},onColumnHeaderDrop(e){if(e.preventDefault(),this.draggedColumn){let t=DomHandler.index(this.draggedColumn),r=DomHandler.index(this.findParentHeader(e.target)),s=t!==r;s&&(r-t===1&&this.dropPosition===-1||r-t===-1&&this.dropPosition===1)&&(s=!1),s&&(ObjectUtils.reorderArray(this.columns,t,r),this.updateReorderableColumns(),this.$emit("column-reorder",{originalEvent:e,dragIndex:t,dropIndex:r})),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}},findParentHeader(e){if(e.nodeName==="TH")return e;{let t=e.parentElement;for(;t.nodeName!=="TH"&&(t=t.parentElement,!!t););return t}},findColumnByKey(e,t){if(e&&e.length)for(let r=0;r<e.length;r++){let s=e[r];if(this.columnProp(s,"columnKey")===t||this.columnProp(s,"field")===t)return s}return null},onRowMouseDown(e){DomHandler.hasClass(e.target,"p-datatable-reorderablerow-handle")?e.currentTarget.draggable=!0:e.currentTarget.draggable=!1},onRowDragStart(e){const t=e.originalEvent,r=e.index;this.rowDragging=!0,this.draggedRowIndex=r,t.dataTransfer.setData("text","b")},onRowDragOver(e){const t=e.originalEvent,r=e.index;if(this.rowDragging&&this.draggedRowIndex!==r){let s=t.currentTarget,o=DomHandler.getOffset(s).top+DomHandler.getWindowScrollTop(),n=t.pageY,f=o+DomHandler.getOuterHeight(s)/2,c=s.previousElementSibling;n<f?(DomHandler.removeClass(s,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=r,c?DomHandler.addClass(c,"p-datatable-dragpoint-bottom"):DomHandler.addClass(s,"p-datatable-dragpoint-top")):(c?DomHandler.removeClass(c,"p-datatable-dragpoint-bottom"):DomHandler.addClass(s,"p-datatable-dragpoint-top"),this.droppedRowIndex=r+1,DomHandler.addClass(s,"p-datatable-dragpoint-bottom")),t.preventDefault()}},onRowDragLeave(e){let t=e.currentTarget,r=t.previousElementSibling;r&&DomHandler.removeClass(r,"p-datatable-dragpoint-bottom"),DomHandler.removeClass(t,"p-datatable-dragpoint-bottom"),DomHandler.removeClass(t,"p-datatable-dragpoint-top")},onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null,e.currentTarget.draggable=!1},onRowDrop(e){if(this.droppedRowIndex!=null){let t=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1,r=[...this.processedData];ObjectUtils.reorderArray(r,this.draggedRowIndex+this.d_first,t+this.d_first),this.$emit("row-reorder",{originalEvent:e,dragIndex:this.draggedRowIndex,dropIndex:t,value:r})}this.onRowDragLeave(e),this.onRowDragEnd(e),e.preventDefault()},toggleRow(e){let t=e.data,r,s,o=this.expandedRows?[...this.expandedRows]:[];this.dataKey?r=this.d_expandedRowKeys?this.d_expandedRowKeys[ObjectUtils.resolveFieldData(t,this.dataKey)]!==void 0:!1:(s=this.findIndex(t,this.expandedRows),r=s>-1),r?(s==null&&(s=this.findIndex(t,this.expandedRows)),o.splice(s,1),this.$emit("update:expandedRows",o),this.$emit("row-collapse",e)):(o.push(t),this.$emit("update:expandedRows",o),this.$emit("row-expand",e))},toggleRowGroup(e){const t=e.originalEvent,r=e.data,s=ObjectUtils.resolveFieldData(r,this.groupRowsBy);let o=this.expandedRowGroups?[...this.expandedRowGroups]:[];this.isRowGroupExpanded(r)?(o=o.filter(n=>n!==s),this.$emit("update:expandedRowGroups",o),this.$emit("rowgroup-collapse",{originalEvent:t,data:s})):(o.push(s),this.$emit("update:expandedRowGroups",o),this.$emit("rowgroup-expand",{originalEvent:t,data:s}))},isRowGroupExpanded(e){if(this.expandableRowGroups&&this.expandedRowGroups){let t=ObjectUtils.resolveFieldData(e,this.groupRowsBy);return this.expandedRowGroups.indexOf(t)>-1}return!1},isStateful(){return this.stateKey!=null},getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState(){const e=this.getStorage();let t={};this.paginator&&(t.first=this.d_first,t.rows=this.d_rows),this.d_sortField&&(t.sortField=this.d_sortField,t.sortOrder=this.d_sortOrder),this.d_multiSortMeta&&(t.multiSortMeta=this.d_multiSortMeta),this.hasFilters&&(t.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(t),this.reorderableColumns&&(t.columnOrder=this.d_columnOrder),this.expandedRows&&(t.expandedRows=this.expandedRows,t.expandedRowKeys=this.d_expandedRowKeys),this.expandedRowGroups&&(t.expandedRowGroups=this.expandedRowGroups),this.selection&&(t.selection=this.selection,t.selectionKeys=this.d_selectionKeys),Object.keys(t).length&&e.setItem(this.stateKey,JSON.stringify(t)),this.$emit("state-save",t)},restoreState(){const t=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,s=function(o,n){return typeof n=="string"&&r.test(n)?new Date(n):n};if(t){let o=JSON.parse(t,s);this.paginator&&(this.d_first=o.first,this.d_rows=o.rows),o.sortField&&(this.d_sortField=o.sortField,this.d_sortOrder=o.sortOrder),o.multiSortMeta&&(this.d_multiSortMeta=o.multiSortMeta),o.filters&&this.$emit("update:filters",o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),this.reorderableColumns&&(this.d_columnOrder=o.columnOrder),o.expandedRows&&(this.d_expandedRowKeys=o.expandedRowKeys,this.$emit("update:expandedRows",o.expandedRows)),o.expandedRowGroups&&this.$emit("update:expandedRowGroups",o.expandedRowGroups),o.selection&&(this.d_selectionKeys=o.d_selectionKeys,this.$emit("update:selection",o.selection)),this.$emit("state-restore",o)}},saveColumnWidths(e){let t=[];DomHandler.find(this.$el,".p-datatable-thead > tr > th").forEach(s=>t.push(DomHandler.getOuterWidth(s))),e.columnWidths=t.join(","),this.columnResizeMode==="expand"&&(e.tableWidth=DomHandler.getOuterWidth(this.$refs.table)+"px")},restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if(this.columnResizeMode==="expand"&&this.tableWidthState&&(this.$refs.table.style.width=this.tableWidthState,this.$refs.table.style.minWidth=this.tableWidthState,this.$el.style.width=this.tableWidthState),ObjectUtils.isNotEmpty(e)){this.createStyleElement();let t="",r=`.p-datatable[${this.attributeSelector}] > .p-datatable-wrapper ${this.virtualScrollerDisabled?"":"> .p-virtualscroller"} > .p-datatable-table`;e.forEach((s,o)=>{let n=`width: ${s}px !important; max-width: ${s}px !important`;t+=`
                            ${r} > .p-datatable-thead > tr > th:nth-child(${o+1}),
                            ${r} > .p-datatable-tbody > tr > td:nth-child(${o+1}),
                            ${r} > .p-datatable-tfoot > tr > td:nth-child(${o+1}) {
                                ${n}
                            }
                        `}),this.styleElement.innerHTML=t}}},onCellEditInit(e){this.$emit("cell-edit-init",e)},onCellEditComplete(e){this.$emit("cell-edit-complete",e)},onCellEditCancel(e){this.$emit("cell-edit-cancel",e)},onRowEditInit(e){let t=this.editingRows?[...this.editingRows]:[];t.push(e.data),this.$emit("update:editingRows",t),this.$emit("row-edit-init",e)},onRowEditSave(e){let t=[...this.editingRows];t.splice(this.findIndex(e.data,t),1),this.$emit("update:editingRows",t),this.$emit("row-edit-save",e)},onRowEditCancel(e){let t=[...this.editingRows];t.splice(this.findIndex(e.data,t),1),this.$emit("update:editingRows",t),this.$emit("row-edit-cancel",e)},onEditingMetaChange(e){let{data:t,field:r,index:s,editing:o}=e,n={...this.d_editingMeta},f=n[s];if(o)!f&&(f=n[s]={data:{...t},fields:[]}),f.fields.push(r);else if(f){const c=f.fields.filter(y=>y!==r);c.length?f.fields=c:delete n[s]}this.d_editingMeta=n},clearEditingMetaData(){this.editMode&&(this.d_editingMeta={})},createLazyLoadEvent(e){return{originalEvent:e,first:this.d_first,rows:this.d_rows,sortField:this.d_sortField,sortOrder:this.d_sortOrder,multiSortMeta:this.d_multiSortMeta,filters:this.d_filters}},hasGlobalFilter(){return this.filters&&Object.prototype.hasOwnProperty.call(this.filters,"global")},getChildren(){return this.$slots.default?this.$slots.default():null},onFilterChange(e){this.d_filters=e},onFilterApply(){this.d_first=0,this.$emit("update:first",this.d_first),this.$emit("update:filters",this.d_filters),this.lazy&&this.$emit("filter",this.createLazyLoadEvent())},cloneFilters(){let e={};return this.filters&&Object.entries(this.filters).forEach(([t,r])=>{e[t]=r.operator?{operator:r.operator,constraints:r.constraints.map(s=>({...s}))}:{...r}}),e},updateReorderableColumns(){let e=[];this.columns.forEach(t=>e.push(this.columnProp(t,"columnKey")||this.columnProp(t,"field"))),this.d_columnOrder=e},createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)},createResponsiveStyle(){if(!this.responsiveStyleElement){this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement);let e=`.p-datatable-wrapper ${this.virtualScrollerDisabled?"":"> .p-virtualscroller"} > .p-datatable-table`,t=`.p-datatable[${this.attributeSelector}] > ${e}`,r=`.p-datatable[${this.attributeSelector}].p-datatable-gridlines > ${e}`,s=`
@media screen and (max-width: ${this.breakpoint}) {
    ${t} > .p-datatable-thead > tr > th,
    ${t} > .p-datatable-tfoot > tr > td {
        display: none !important;
    }

    ${t} > .p-datatable-tbody > tr > td {
        display: flex;
        width: 100% !important;
        align-items: center;
        justify-content: space-between;
    }

    ${t} > .p-datatable-tbody > tr > td:not(:last-child) {
        border: 0 none;
    }

    ${r} > .p-datatable-tbody > tr > td:last-child {
        border-top: 0;
        border-right: 0;
        border-left: 0;
    }

    ${t} > .p-datatable-tbody > tr > td > .p-column-title {
        display: block;
    }
}
`;this.responsiveStyleElement.innerHTML=s}},destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)},destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},recursiveGetChildren(e,t){return t||(t=[]),e&&e.length&&e.forEach(r=>{r.children instanceof Array?t.concat(this.recursiveGetChildren(r.children,t)):r.type.name=="Column"&&t.push(r)}),t},dataToRender(e){const t=e||this.processedData;if(t&&this.paginator){const r=this.lazy?0:this.d_first;return t.slice(r,r+this.d_rows)}return t},getVirtualScrollerRef(){return this.$refs.virtualScroller},hasSpacerStyle(e){return ObjectUtils.isNotEmpty(e)}},computed:{containerClass(){return["p-datatable p-component",{"p-datatable-hoverable-rows":this.rowHover||this.selectionMode,"p-datatable-resizable":this.resizableColumns,"p-datatable-resizable-fit":this.resizableColumns&&this.columnResizeMode==="fit","p-datatable-scrollable":this.scrollable,"p-datatable-flex-scrollable":this.scrollable&&this.scrollHeight==="flex","p-datatable-responsive-stack":this.responsiveLayout==="stack","p-datatable-responsive-scroll":this.responsiveLayout==="scroll","p-datatable-striped":this.stripedRows,"p-datatable-gridlines":this.showGridlines,"p-datatable-grouped-header":this.headerColumnGroup!=null,"p-datatable-grouped-footer":this.footerColumnGroup!=null}]},tableStyleClass(){return["p-datatable-table",{"p-datatable-scrollable-table":this.scrollable,"p-datatable-resizable-table":this.resizableColumns,"p-datatable-resizable-table-fit":this.resizableColumns&&this.columnResizeMode==="fit"},this.tableClass]},columns(){let e=this.getChildren();if(!e)return;const t=this.recursiveGetChildren(e,[]);if(this.reorderableColumns&&this.d_columnOrder){let r=[];for(let s of this.d_columnOrder){let o=this.findColumnByKey(t,s);o&&!this.columnProp(o,"hidden")&&r.push(o)}return[...r,...t.filter(s=>r.indexOf(s)<0)]}return t},headerColumnGroup(){const e=this.getChildren();if(e){for(let t of e)if(t.type.name==="ColumnGroup"&&this.columnProp(t,"type")==="header")return t}return null},footerColumnGroup(){const e=this.getChildren();if(e){for(let t of e)if(t.type.name==="ColumnGroup"&&this.columnProp(t,"type")==="footer")return t}return null},hasFilters(){return this.filters&&Object.keys(this.filters).length>0&&this.filters.constructor===Object},processedData(){let e=this.value||[];return this.lazy||e&&e.length&&(this.hasFilters&&(e=this.filter(e)),this.sorted&&(this.sortMode==="single"?e=this.sortSingle(e):this.sortMode==="multiple"&&(e=this.sortMultiple(e)))),e},totalRecordsLength(){if(this.lazy)return this.totalRecords;{const e=this.processedData;return e?e.length:0}},empty(){const e=this.processedData;return!e||e.length===0},paginatorTop(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},sorted(){return this.d_sortField||this.d_multiSortMeta&&this.d_multiSortMeta.length>0},allRowsSelected(){if(this.selectAll!==null)return this.selectAll;{const e=this.frozenValue?[...this.frozenValue,...this.processedData]:this.processedData;return ObjectUtils.isNotEmpty(e)&&this.selection&&Array.isArray(this.selection)&&e.every(t=>this.selection.some(r=>this.equals(r,t)))}},attributeSelector(){return UniqueComponentId()},groupRowSortField(){return this.sortMode==="single"?this.sortField:this.d_groupRowsSortMeta?this.d_groupRowsSortMeta.field:null},virtualScrollerDisabled(){return ObjectUtils.isEmpty(this.virtualScrollerOptions)||!this.scrollable}},components:{DTPaginator:script$m,DTTableHeader:script$1$1,DTTableBody:script$7,DTTableFooter:script$5,DTVirtualScroller:script$A,ArrowDownIcon:script$x,ArrowUpIcon:script$w,SpinnerIcon:script$D}};function render$b(e,t,r,s,o,n){const f=resolveComponent("SpinnerIcon"),c=resolveComponent("DTPaginator"),y=resolveComponent("DTTableHeader"),_=resolveComponent("DTTableBody"),b=resolveComponent("DTTableFooter"),C=resolveComponent("DTVirtualScroller");return openBlock(),createElementBlock("div",mergeProps({class:n.containerClass,"data-scrollselectors":".p-datatable-wrapper"},e.ptm("root")),[renderSlot(e.$slots,"default"),r.loading?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"p-datatable-loading-overlay p-component-overlay"},e.ptm("loadingOverlay")),[e.$slots.loading?renderSlot(e.$slots,"loading",{key:0}):(openBlock(),createElementBlock(Fragment,{key:1},[e.$slots.loadingicon?(openBlock(),createBlock(resolveDynamicComponent(e.$slots.loadingicon),{key:0,class:"p-datatable-loading-icon"})):r.loadingIcon?(openBlock(),createElementBlock("i",mergeProps({key:1,class:["p-datatable-loading-icon pi-spin",r.loadingIcon]},e.ptm("loadingIcon")),null,16)):(openBlock(),createBlock(f,mergeProps({key:2,spin:"",class:"p-datatable-loading-icon"},e.ptm("loadingIcon")),null,16))],64))],16)):createCommentVNode("",!0),e.$slots.header?(openBlock(),createElementBlock("div",mergeProps({key:1,class:"p-datatable-header"},e.ptm("header")),[renderSlot(e.$slots,"header")],16)):createCommentVNode("",!0),n.paginatorTop?(openBlock(),createBlock(c,{key:2,rows:o.d_rows,first:o.d_first,totalRecords:n.totalRecordsLength,pageLinkSize:r.pageLinkSize,template:r.paginatorTemplate,rowsPerPageOptions:r.rowsPerPageOptions,currentPageReportTemplate:r.currentPageReportTemplate,class:"p-paginator-top",onPage:t[0]||(t[0]=M=>n.onPage(M)),alwaysShow:r.alwaysShowPaginator,pt:e.ptm("paginator")},createSlots({_:2},[e.$slots.paginatorstart?{name:"start",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorstart")]),key:"0"}:void 0,e.$slots.paginatorend?{name:"end",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorend")]),key:"1"}:void 0,e.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorfirstpagelinkicon")]),key:"2"}:void 0,e.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorprevpagelinkicon")]),key:"3"}:void 0,e.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatornextpagelinkicon")]),key:"4"}:void 0,e.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorlastpagelinkicon")]),key:"5"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","alwaysShow","pt"])):createCommentVNode("",!0),createBaseVNode("div",mergeProps({class:"p-datatable-wrapper",style:{maxHeight:n.virtualScrollerDisabled?r.scrollHeight:""}},e.ptm("wrapper")),[createVNode(C,mergeProps({ref:"virtualScroller"},{...r.virtualScrollerOptions,...e.ptm("virtualScroller")},{items:n.processedData,columns:n.columns,style:r.scrollHeight!=="flex"?{height:r.scrollHeight}:void 0,scrollHeight:r.scrollHeight!=="flex"?void 0:"100%",disabled:n.virtualScrollerDisabled,loaderDisabled:"",inline:"",autoSize:"",showSpacer:!1}),{content:withCtx(M=>[createBaseVNode("table",mergeProps({ref:"table",role:"table",class:n.tableStyleClass,style:[r.tableStyle,M.spacerStyle]},{...r.tableProps,...e.ptm("table")}),[createVNode(y,{columnGroup:n.headerColumnGroup,columns:M.columns,rowGroupMode:r.rowGroupMode,groupRowsBy:r.groupRowsBy,groupRowSortField:n.groupRowSortField,reorderableColumns:r.reorderableColumns,resizableColumns:r.resizableColumns,allRowsSelected:n.allRowsSelected,empty:n.empty,sortMode:r.sortMode,sortField:o.d_sortField,sortOrder:o.d_sortOrder,multiSortMeta:o.d_multiSortMeta,filters:o.d_filters,filtersStore:r.filters,filterDisplay:r.filterDisplay,filterInputProps:r.filterInputProps,headerCheckboxIconTemplate:e.$slots.headercheckboxicon,onColumnClick:t[1]||(t[1]=E=>n.onColumnHeaderClick(E)),onColumnMousedown:t[2]||(t[2]=E=>n.onColumnHeaderMouseDown(E)),onFilterChange:n.onFilterChange,onFilterApply:n.onFilterApply,onColumnDragstart:t[3]||(t[3]=E=>n.onColumnHeaderDragStart(E)),onColumnDragover:t[4]||(t[4]=E=>n.onColumnHeaderDragOver(E)),onColumnDragleave:t[5]||(t[5]=E=>n.onColumnHeaderDragLeave(E)),onColumnDrop:t[6]||(t[6]=E=>n.onColumnHeaderDrop(E)),onColumnResizestart:t[7]||(t[7]=E=>n.onColumnResizeStart(E)),onCheckboxChange:t[8]||(t[8]=E=>n.toggleRowsWithCheckbox(E)),pt:e.pt},null,8,["columnGroup","columns","rowGroupMode","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","allRowsSelected","empty","sortMode","sortField","sortOrder","multiSortMeta","filters","filtersStore","filterDisplay","filterInputProps","headerCheckboxIconTemplate","onFilterChange","onFilterApply","pt"]),r.frozenValue?(openBlock(),createBlock(_,{key:0,ref:"frozenBodyRef",value:r.frozenValue,frozenRow:!0,class:"p-datatable-frozen-tbody",columns:M.columns,first:o.d_first,dataKey:r.dataKey,selection:r.selection,selectionKeys:o.d_selectionKeys,selectionMode:r.selectionMode,contextMenu:r.contextMenu,contextMenuSelection:r.contextMenuSelection,rowGroupMode:r.rowGroupMode,groupRowsBy:r.groupRowsBy,expandableRowGroups:r.expandableRowGroups,rowClass:r.rowClass,rowStyle:r.rowStyle,editMode:r.editMode,compareSelectionBy:r.compareSelectionBy,scrollable:r.scrollable,expandedRowIcon:r.expandedRowIcon,collapsedRowIcon:r.collapsedRowIcon,expandedRows:r.expandedRows,expandedRowKeys:o.d_expandedRowKeys,expandedRowGroups:r.expandedRowGroups,editingRows:r.editingRows,editingRowKeys:o.d_editingRowKeys,templates:e.$slots,responsiveLayout:r.responsiveLayout,isVirtualScrollerDisabled:!0,onRowgroupToggle:n.toggleRowGroup,onRowClick:t[9]||(t[9]=E=>n.onRowClick(E)),onRowDblclick:t[10]||(t[10]=E=>n.onRowDblClick(E)),onRowRightclick:t[11]||(t[11]=E=>n.onRowRightClick(E)),onRowTouchend:n.onRowTouchEnd,onRowKeydown:n.onRowKeyDown,onRowMousedown:n.onRowMouseDown,onRowDragstart:t[12]||(t[12]=E=>n.onRowDragStart(E)),onRowDragover:t[13]||(t[13]=E=>n.onRowDragOver(E)),onRowDragleave:t[14]||(t[14]=E=>n.onRowDragLeave(E)),onRowDragend:t[15]||(t[15]=E=>n.onRowDragEnd(E)),onRowDrop:t[16]||(t[16]=E=>n.onRowDrop(E)),onRowToggle:t[17]||(t[17]=E=>n.toggleRow(E)),onRadioChange:t[18]||(t[18]=E=>n.toggleRowWithRadio(E)),onCheckboxChange:t[19]||(t[19]=E=>n.toggleRowWithCheckbox(E)),onCellEditInit:t[20]||(t[20]=E=>n.onCellEditInit(E)),onCellEditComplete:t[21]||(t[21]=E=>n.onCellEditComplete(E)),onCellEditCancel:t[22]||(t[22]=E=>n.onCellEditCancel(E)),onRowEditInit:t[23]||(t[23]=E=>n.onRowEditInit(E)),onRowEditSave:t[24]||(t[24]=E=>n.onRowEditSave(E)),onRowEditCancel:t[25]||(t[25]=E=>n.onRowEditCancel(E)),editingMeta:o.d_editingMeta,onEditingMetaChange:n.onEditingMetaChange},null,8,["value","columns","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowKeys","expandedRowGroups","editingRows","editingRowKeys","templates","responsiveLayout","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange"])):createCommentVNode("",!0),createVNode(_,{ref:"bodyRef",value:n.dataToRender(M.rows),class:normalizeClass(M.styleClass),columns:M.columns,empty:n.empty,first:o.d_first,dataKey:r.dataKey,selection:r.selection,selectionKeys:o.d_selectionKeys,selectionMode:r.selectionMode,contextMenu:r.contextMenu,contextMenuSelection:r.contextMenuSelection,rowGroupMode:r.rowGroupMode,groupRowsBy:r.groupRowsBy,expandableRowGroups:r.expandableRowGroups,rowClass:r.rowClass,rowStyle:r.rowStyle,editMode:r.editMode,compareSelectionBy:r.compareSelectionBy,scrollable:r.scrollable,expandedRowIcon:r.expandedRowIcon,collapsedRowIcon:r.collapsedRowIcon,expandedRows:r.expandedRows,expandedRowKeys:o.d_expandedRowKeys,expandedRowGroups:r.expandedRowGroups,editingRows:r.editingRows,editingRowKeys:o.d_editingRowKeys,templates:e.$slots,responsiveLayout:r.responsiveLayout,virtualScrollerContentProps:M,isVirtualScrollerDisabled:n.virtualScrollerDisabled,onRowgroupToggle:n.toggleRowGroup,onRowClick:t[26]||(t[26]=E=>n.onRowClick(E)),onRowDblclick:t[27]||(t[27]=E=>n.onRowDblClick(E)),onRowRightclick:t[28]||(t[28]=E=>n.onRowRightClick(E)),onRowTouchend:n.onRowTouchEnd,onRowKeydown:E=>n.onRowKeyDown(E,M),onRowMousedown:n.onRowMouseDown,onRowDragstart:t[29]||(t[29]=E=>n.onRowDragStart(E)),onRowDragover:t[30]||(t[30]=E=>n.onRowDragOver(E)),onRowDragleave:t[31]||(t[31]=E=>n.onRowDragLeave(E)),onRowDragend:t[32]||(t[32]=E=>n.onRowDragEnd(E)),onRowDrop:t[33]||(t[33]=E=>n.onRowDrop(E)),onRowToggle:t[34]||(t[34]=E=>n.toggleRow(E)),onRadioChange:t[35]||(t[35]=E=>n.toggleRowWithRadio(E)),onCheckboxChange:t[36]||(t[36]=E=>n.toggleRowWithCheckbox(E)),onCellEditInit:t[37]||(t[37]=E=>n.onCellEditInit(E)),onCellEditComplete:t[38]||(t[38]=E=>n.onCellEditComplete(E)),onCellEditCancel:t[39]||(t[39]=E=>n.onCellEditCancel(E)),onRowEditInit:t[40]||(t[40]=E=>n.onRowEditInit(E)),onRowEditSave:t[41]||(t[41]=E=>n.onRowEditSave(E)),onRowEditCancel:t[42]||(t[42]=E=>n.onRowEditCancel(E)),editingMeta:o.d_editingMeta,onEditingMetaChange:n.onEditingMetaChange,pt:e.pt},null,8,["value","class","columns","empty","first","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowKeys","expandedRowGroups","editingRows","editingRowKeys","templates","responsiveLayout","virtualScrollerContentProps","isVirtualScrollerDisabled","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","pt"]),n.hasSpacerStyle(M.spacerStyle)?(openBlock(),createElementBlock("tbody",mergeProps({key:1,style:{height:`calc(${M.spacerStyle.height} - ${M.rows.length*M.itemSize}px)`},class:"p-datatable-virtualscroller-spacer"},e.ptm("virtualScrollerSpacer")),null,16)):createCommentVNode("",!0),createVNode(b,{columnGroup:n.footerColumnGroup,columns:M.columns,pt:e.pt},null,8,["columnGroup","columns","pt"])],16)]),_:1},16,["items","columns","style","scrollHeight","disabled"])],16),e.$slots.footer?(openBlock(),createElementBlock("div",mergeProps({key:3,class:"p-datatable-footer"},e.ptm("footer")),[renderSlot(e.$slots,"footer")],16)):createCommentVNode("",!0),n.paginatorBottom?(openBlock(),createBlock(c,{key:4,rows:o.d_rows,first:o.d_first,totalRecords:n.totalRecordsLength,pageLinkSize:r.pageLinkSize,template:r.paginatorTemplate,rowsPerPageOptions:r.rowsPerPageOptions,currentPageReportTemplate:r.currentPageReportTemplate,class:"p-paginator-bottom",onPage:t[43]||(t[43]=M=>n.onPage(M)),alwaysShow:r.alwaysShowPaginator,pt:e.ptm("paginator")},createSlots({_:2},[e.$slots.paginatorstart?{name:"start",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorstart")]),key:"0"}:void 0,e.$slots.paginatorend?{name:"end",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorend")]),key:"1"}:void 0,e.$slots.paginatorfirstpagelinkicon?{name:"firstpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorfirstpagelinkicon")]),key:"2"}:void 0,e.$slots.paginatorprevpagelinkicon?{name:"prevpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorprevpagelinkicon")]),key:"3"}:void 0,e.$slots.paginatornextpagelinkicon?{name:"nextpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatornextpagelinkicon")]),key:"4"}:void 0,e.$slots.paginatorlastpagelinkicon?{name:"lastpagelinkicon",fn:withCtx(()=>[renderSlot(e.$slots,"paginatorlastpagelinkicon")]),key:"5"}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","alwaysShow","pt"])):createCommentVNode("",!0),createBaseVNode("div",mergeProps({ref:"resizeHelper",class:"p-column-resizer-helper",style:{display:"none"}},e.ptm("resizeHelper")),null,16),r.reorderableColumns?(openBlock(),createElementBlock("span",mergeProps({key:5,ref:"reorderIndicatorUp",class:"p-datatable-reorder-indicator-up",style:{position:"absolute",display:"none"}},e.ptm("reorderIndicatorUp")),[(openBlock(),createBlock(resolveDynamicComponent(e.$slots.reorderindicatorupicon||"ArrowDownIcon")))],16)):createCommentVNode("",!0),r.reorderableColumns?(openBlock(),createElementBlock("span",mergeProps({key:6,ref:"reorderIndicatorDown",class:"p-datatable-reorder-indicator-down",style:{position:"absolute",display:"none"}},e.ptm("reorderIndicatorDown")),[(openBlock(),createBlock(resolveDynamicComponent(e.$slots.reorderindicatordownicon||"ArrowUpIcon")))],16)):createCommentVNode("",!0)],16)}function styleInject(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z=`
.p-datatable {
    position: relative;
}
.p-datatable > .p-datatable-wrapper {
    overflow: auto;
}
.p-datatable-table {
    border-spacing: 0px;
    width: 100%;
}
.p-datatable .p-sortable-column {
    cursor: pointer;
    user-select: none;
}
.p-datatable .p-sortable-column .p-column-title,
.p-datatable .p-sortable-column .p-sortable-column-icon,
.p-datatable .p-sortable-column .p-sortable-column-badge {
    vertical-align: middle;
}
.p-datatable .p-sortable-column .p-sortable-column-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}
.p-datatable-hoverable-rows .p-selectable-row {
    cursor: pointer;
}

/* Scrollable */
.p-datatable-scrollable > .p-datatable-wrapper {
    position: relative;
}
.p-datatable-scrollable-table > .p-datatable-thead {
    position: sticky;
    top: 0;
    z-index: 1;
}
.p-datatable-scrollable-table > .p-datatable-frozen-tbody {
    position: sticky;
    z-index: 1;
}
.p-datatable-scrollable-table > .p-datatable-tfoot {
    position: sticky;
    bottom: 0;
    z-index: 1;
}
.p-datatable-scrollable .p-frozen-column {
    position: sticky;
    background: inherit;
}
.p-datatable-scrollable th.p-frozen-column {
    z-index: 1;
}
.p-datatable-flex-scrollable {
    display: flex;
    flex-direction: column;
    height: 100%;
}
.p-datatable-flex-scrollable > .p-datatable-wrapper {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
}
.p-datatable-scrollable-table > .p-datatable-tbody > .p-rowgroup-header {
    position: sticky;
    z-index: 1;
}

/* Resizable */
.p-datatable-resizable-table > .p-datatable-thead > tr > th,
.p-datatable-resizable-table > .p-datatable-tfoot > tr > td,
.p-datatable-resizable-table > .p-datatable-tbody > tr > td {
    overflow: hidden;
    white-space: nowrap;
}
.p-datatable-resizable-table > .p-datatable-thead > tr > th.p-resizable-column:not(.p-frozen-column) {
    background-clip: padding-box;
    position: relative;
}
.p-datatable-resizable-table-fit > .p-datatable-thead > tr > th.p-resizable-column:last-child .p-column-resizer {
    display: none;
}
.p-datatable .p-column-resizer {
    display: block;
    position: absolute !important;
    top: 0;
    right: 0;
    margin: 0;
    width: 0.5rem;
    height: 100%;
    padding: 0px;
    cursor: col-resize;
    border: 1px solid transparent;
}
.p-datatable .p-column-header-content {
    display: flex;
    align-items: center;
}
.p-datatable .p-column-resizer-helper {
    width: 1px;
    position: absolute;
    z-index: 10;
    display: none;
}
.p-datatable .p-row-editor-init,
.p-datatable .p-row-editor-save,
.p-datatable .p-row-editor-cancel {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
}

/* Expand */
.p-datatable .p-row-toggler {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
}

/* Reorder */
.p-datatable-reorder-indicator-up,
.p-datatable-reorder-indicator-down {
    position: absolute;
    display: none;
}
.p-reorderable-column,
.p-datatable-reorderablerow-handle {
    cursor: move;
}

/* Loader */
.p-datatable .p-datatable-loading-overlay {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
}

/* Filter */
.p-column-filter-row {
    display: flex;
    align-items: center;
    width: 100%;
}
.p-column-filter-menu {
    display: inline-flex;
    margin-left: auto;
}
.p-column-filter-row .p-column-filter-element {
    flex: 1 1 auto;
    width: 1%;
}
.p-column-filter-menu-button,
.p-column-filter-clear-button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    text-decoration: none;
    overflow: hidden;
    position: relative;
}
.p-column-filter-overlay {
    position: absolute;
    top: 0;
    left: 0;
}
.p-column-filter-row-items {
    margin: 0;
    padding: 0;
    list-style: none;
}
.p-column-filter-row-item {
    cursor: pointer;
}
.p-column-filter-add-button,
.p-column-filter-remove-button {
    justify-content: center;
}
.p-column-filter-add-button .p-button-label,
.p-column-filter-remove-button .p-button-label {
    flex-grow: 0;
}
.p-column-filter-buttonbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.p-column-filter-buttonbar .p-button:not(.p-button-icon-only) {
    width: auto;
}

/* Responsive */
.p-datatable .p-datatable-tbody > tr > td > .p-column-title {
    display: none;
}

/* VirtualScroller */
.p-datatable-virtualscroller-spacer {
    display: flex;
}
.p-datatable .p-virtualscroller .p-virtualscroller-loading {
    transform: none !important;
    min-height: 0;
    position: sticky;
    top: 0;
    left: 0;
}
`;styleInject(css_248z);script$b.render=render$b;var script$1={name:"Column",extends:script$H,props:{columnKey:{type:null,default:null},field:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},filterField:{type:[String,Function],default:null},dataType:{type:String,default:"text"},sortable:{type:Boolean,default:!1},header:{type:null,default:null},footer:{type:null,default:null},style:{type:null,default:null},class:{type:String,default:null},headerStyle:{type:null,default:null},headerClass:{type:String,default:null},bodyStyle:{type:null,default:null},bodyClass:{type:String,default:null},footerStyle:{type:null,default:null},footerClass:{type:String,default:null},showFilterMenu:{type:Boolean,default:!0},showFilterOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showFilterMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},filterMatchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},excludeGlobalFilter:{type:Boolean,default:!1},filterHeaderClass:{type:String,default:null},filterHeaderStyle:{type:null,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},selectionMode:{type:String,default:null},expander:{type:Boolean,default:!1},colspan:{type:Number,default:null},rowspan:{type:Number,default:null},rowReorder:{type:Boolean,default:!1},rowReorderIcon:{type:String,default:void 0},reorderableColumn:{type:Boolean,default:!0},rowEditor:{type:Boolean,default:!1},frozen:{type:Boolean,default:!1},alignFrozen:{type:String,default:"left"},exportable:{type:Boolean,default:!0},exportHeader:{type:String,default:null},exportFooter:{type:String,default:null},filterMatchMode:{type:String,default:null},hidden:{type:Boolean,default:!1}},render(){return null}},script={name:"Checkbox",extends:script$H,emits:["click","update:modelValue","change","input","focus","blur"],props:{value:null,modelValue:null,binary:Boolean,name:{type:String,default:null},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},data(){return{focused:!1}},methods:{onClick(e){if(!this.disabled&&!this.readonly){let t;this.binary?t=this.checked?this.falseValue:this.trueValue:this.checked?t=this.modelValue.filter(r=>!ObjectUtils.equals(r,this.value)):t=this.modelValue?[...this.modelValue,this.value]:[this.value],this.$emit("click",e),this.$emit("update:modelValue",t),this.$emit("change",e),this.$emit("input",t),this.$refs.input.focus()}},onFocus(e){this.focused=!0,this.$emit("focus",e)},onBlur(e){this.focused=!1,this.$emit("blur",e)}},computed:{checked(){return this.binary?this.modelValue===this.trueValue:ObjectUtils.contains(this.value,this.modelValue)},containerClass(){return["p-checkbox p-component",{"p-checkbox-checked":this.checked,"p-checkbox-disabled":this.disabled,"p-checkbox-focused":this.focused}]}},components:{CheckIcon:script$j}};const _hoisted_1$4=["id","value","name","checked","tabindex","disabled","readonly","required","aria-labelledby","aria-label"];function render(e,t,r,s,o,n){return openBlock(),createElementBlock("div",mergeProps({class:n.containerClass,onClick:t[2]||(t[2]=f=>n.onClick(f))},e.ptm("root")),[createBaseVNode("div",mergeProps({class:"p-hidden-accessible"},e.ptm("hiddenInputWrapper")),[createBaseVNode("input",mergeProps({ref:"input",id:r.inputId,type:"checkbox",value:r.value,name:r.name,checked:n.checked,tabindex:r.tabindex,disabled:r.disabled,readonly:r.readonly,required:r.required,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,onFocus:t[0]||(t[0]=f=>n.onFocus(f)),onBlur:t[1]||(t[1]=f=>n.onBlur(f))},e.ptm("hiddenInput")),null,16,_hoisted_1$4)],16),createBaseVNode("div",mergeProps({ref:"box",class:["p-checkbox-box",r.inputClass,{"p-highlight":n.checked,"p-disabled":r.disabled,"p-focus":o.focused}],style:r.inputStyle},{...r.inputProps,...e.ptm("input")}),[renderSlot(e.$slots,"icon",{checked:n.checked},()=>[(openBlock(),createBlock(resolveDynamicComponent(n.checked?"CheckIcon":null),mergeProps({class:"p-checkbox-icon"},e.ptm("icon")),null,16))])],16)],16)}script.render=render;const _sfc_main$5={data(){return{placeHolder:this.isChecked}},watch:{isChecked(e){this.placeHolder=e}},components:{Checkbox:script},props:{isChecked:Boolean,required:!0}};function _sfc_render$3(e,t,r,s,o,n){const f=resolveComponent("Checkbox");return openBlock(),createElementBlock("div",null,[createVNode(f,{binary:!0,modelValue:o.placeHolder,"onUpdate:modelValue":t[0]||(t[0]=c=>o.placeHolder=c),disabled:!0},null,8,["modelValue"])])}const FixedCheckBox=_export_sfc(_sfc_main$5,[["render",_sfc_render$3]]),_sfc_main$4={components:{FixedCheckBox,Column:script$1},props:{type:{type:String,required:!0},value:{required:!0}}},_hoisted_1$3={key:0},_hoisted_2$2={key:2},_hoisted_3$2={key:3};function _sfc_render$2(e,t,r,s,o,n){const f=resolveComponent("FixedCheckBox");return openBlock(),createElementBlock("div",null,[r.type==="number"||r.type==="string"?(openBlock(),createElementBlock("div",_hoisted_1$3,toDisplayString(r.value),1)):r.type==="logical"?(openBlock(),createBlock(f,{key:1,isChecked:r.value==="T"||typeof r.value=="boolean"&&r.value},null,8,["isChecked"])):r.type==="point"?(openBlock(),createElementBlock("div",_hoisted_2$2,toDisplayString(`x: ${r.value[0]} / y: ${r.value[1]}`+(r.value.length>2?` / z: ${r.value[2]}`:"")),1)):r.type==="array"?(openBlock(),createElementBlock("div",_hoisted_3$2,toDisplayString(r.value.join(", ")),1)):createCommentVNode("",!0)])}const ValueContent=_export_sfc(_sfc_main$4,[["render",_sfc_render$2]]),_sfc_main$3={components:{DataTable:script$b,Column:script$1,ValueContent},props:{particleData:{type:Object},selectedAtom:{type:Object}},computed:{selectedParticleProperties(){if(!this.particleData)return[];const e=[];for(const t in this.particleProperties){let r=this.particleData.moleculeProperties[t];const s=this.particleProperties[t].type,o=this.particleProperties[t].label;(s==="point"||s==="array")&&(r=r.split(" ")),e.push({type:s,value:r,propertyName:o})}return e},selectedAtomProperties(){if(!this.selectedAtom)return[];const e=[];for(const t in this.atomProperties){let r=this.selectedAtom[t];const s=this.atomProperties[t].type,o=this.atomProperties[t].label;e.push({type:s,value:r,propertyName:o})}return e}},data(){return{particleProperties:{clmds_cluster:{label:"Cluster",type:"number"},clmds_coordinates:{label:"Clustering Coordinates",type:"point"},clmds_medoid:{label:"Cluster Medoid",type:"logical"},energy:{label:"Particle Energy",type:"number"},volume:{label:"Particle Volume",type:"number"}},atomProperties:{local_energy:{type:"number",label:"Local Energy"},medoid:{label:"Particle Medoid",type:"logical"},species:{label:"Species",type:"string"},surface:{label:"Surface Atom",type:"logical"}}}}},_hoisted_1$2={class:"grid"},_hoisted_2$1={class:"col"},_hoisted_3$1={class:"col"};function _sfc_render$1(e,t,r,s,o,n){const f=resolveComponent("Column"),c=resolveComponent("ValueContent"),y=resolveComponent("DataTable");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createVNode(y,{value:n.selectedParticleProperties},{header:withCtx(()=>[createTextVNode(" Particle Properties ")]),default:withCtx(()=>[createVNode(f,{field:"propertyName",header:"Property"}),createVNode(f,{field:"value",header:"Value"},{body:withCtx(_=>[createVNode(c,{type:_.data.type,value:_.data.value},null,8,["type","value"])]),_:1})]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_3$1,[r.selectedAtom?(openBlock(),createBlock(y,{key:0,value:n.selectedAtomProperties},{header:withCtx(()=>[createTextVNode(" Atom Properties ")]),default:withCtx(()=>[createVNode(f,{field:"propertyName",header:"Property"}),createVNode(f,{field:"value",header:"Value"},{body:withCtx(_=>[createVNode(c,{type:_.data.type,value:_.data.value},null,8,["type","value"])]),_:1})]),_:1},8,["value"])):createCommentVNode("",!0)])])}const ParticleDetailViewer=_export_sfc(_sfc_main$3,[["render",_sfc_render$1]]),_sfc_main$2={components:{MolViewer,ParticleDetailViewer},data(){return{selectedAtom:null}},setup(){const e=usePotentialStore(),{currentPotential:t}=storeToRefs(e);return{potentialStore:e,currentPotential:t}},methods:{selectAtom(e){this.selectedAtom=e}}},_hoisted_1$1={class:"flex h-full flex-column"};function _sfc_render(e,t,r,s,o,n){const f=resolveComponent("MolViewer"),c=resolveComponent("ParticleDetailViewer");return openBlock(),createElementBlock("div",_hoisted_1$1,[s.currentPotential!=null?(openBlock(),createBlock(f,{key:0,onAtomSelected:n.selectAtom,moleculeData:s.currentPotential.atoms},null,8,["onAtomSelected","moleculeData"])):createCommentVNode("",!0),createVNode(c,{particleData:s.currentPotential,selectedAtom:o.selectedAtom},null,8,["particleData","selectedAtom"])])}const Mol=_export_sfc(_sfc_main$2,[["render",_sfc_render]]),_hoisted_1={class:"grid"},_hoisted_2={class:"col w-6 h-full"},_hoisted_3={class:"col w-6 h-full"},_sfc_main$1={__name:"PotentialViewer",setup(e){return(t,r)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createVNode(StructureSelection)]),createBaseVNode("div",_hoisted_3,[createVNode(Mol)])]))}},_sfc_main={__name:"App",setup(e){return usePotentialStore().init(),(r,s)=>(openBlock(),createBlock(_sfc_main$1,{class:"w-screen h-screen"}))}},defaultOptions={ripple:!1,inputStyle:"outlined",locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}},filterMatchModeOptions:{text:[FilterMatchMode.STARTS_WITH,FilterMatchMode.CONTAINS,FilterMatchMode.NOT_CONTAINS,FilterMatchMode.ENDS_WITH,FilterMatchMode.EQUALS,FilterMatchMode.NOT_EQUALS],numeric:[FilterMatchMode.EQUALS,FilterMatchMode.NOT_EQUALS,FilterMatchMode.LESS_THAN,FilterMatchMode.LESS_THAN_OR_EQUAL_TO,FilterMatchMode.GREATER_THAN,FilterMatchMode.GREATER_THAN_OR_EQUAL_TO],date:[FilterMatchMode.DATE_IS,FilterMatchMode.DATE_IS_NOT,FilterMatchMode.DATE_BEFORE,FilterMatchMode.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},pt:void 0},PrimeVueSymbol=Symbol();function switchTheme(e,t,r,s){const o=document.getElementById(r),n=o.cloneNode(!0),f=o.getAttribute("href").replace(e,t);n.setAttribute("id",r+"-clone"),n.setAttribute("href",f),n.addEventListener("load",()=>{o.remove(),n.setAttribute("id",r),s&&s()}),o.parentNode&&o.parentNode.insertBefore(n,o.nextSibling)}var PrimeVue={install:(e,t)=>{let r=t?{...defaultOptions,...t}:{...defaultOptions};const s={config:reactive(r),changeTheme:switchTheme};e.config.globalProperties.$primevue=s,e.provide(PrimeVueSymbol,s)}};const theme="",primevue_min="",primeflex="";loadData();const pinia=createPinia(),app=createApp(_sfc_main);app.use(pinia).use(PrimeVue,{ripple:!0});app.mount("#app");
